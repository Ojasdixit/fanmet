var If=e=>{throw TypeError(e)};var yc=(e,t,s)=>t.has(e)||If("Cannot "+s);var Y=(e,t,s)=>(yc(e,t,"read from private field"),s?s.call(e):t.get(e)),_e=(e,t,s)=>t.has(e)?If("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),me=(e,t,s,r)=>(yc(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),at=(e,t,s)=>(yc(e,t,"access private method"),s);var ao=(e,t,s,r)=>({set _(a){me(e,t,a,s)},get _(){return Y(e,t,r)}});function I0(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function O0(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(s,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),s}var wg={exports:{}},Ml={},bg={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qi=Symbol.for("react.element"),B0=Symbol.for("react.portal"),$0=Symbol.for("react.fragment"),U0=Symbol.for("react.strict_mode"),z0=Symbol.for("react.profiler"),V0=Symbol.for("react.provider"),W0=Symbol.for("react.context"),q0=Symbol.for("react.forward_ref"),H0=Symbol.for("react.suspense"),Y0=Symbol.for("react.memo"),K0=Symbol.for("react.lazy"),Of=Symbol.iterator;function G0(e){return e===null||typeof e!="object"?null:(e=Of&&e[Of]||e["@@iterator"],typeof e=="function"?e:null)}var jg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ng=Object.assign,Cg={};function ya(e,t,s){this.props=e,this.context=t,this.refs=Cg,this.updater=s||jg}ya.prototype.isReactComponent={};ya.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ya.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _g(){}_g.prototype=ya.prototype;function Gu(e,t,s){this.props=e,this.context=t,this.refs=Cg,this.updater=s||jg}var Qu=Gu.prototype=new _g;Qu.constructor=Gu;Ng(Qu,ya.prototype);Qu.isPureReactComponent=!0;var Bf=Array.isArray,Eg=Object.prototype.hasOwnProperty,Ju={current:null},Sg={key:!0,ref:!0,__self:!0,__source:!0};function Fg(e,t,s){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Eg.call(t,r)&&!Sg.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:qi,type:e,key:i,ref:o,props:a,_owner:Ju.current}}function Q0(e,t){return{$$typeof:qi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xu(e){return typeof e=="object"&&e!==null&&e.$$typeof===qi}function J0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var $f=/\/+/g;function wc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?J0(""+e.key):t.toString(36)}function Mo(e,t,s,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case qi:case B0:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+wc(o,0):r,Bf(a)?(s="",e!=null&&(s=e.replace($f,"$&/")+"/"),Mo(a,t,s,"",function(d){return d})):a!=null&&(Xu(a)&&(a=Q0(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace($f,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",Bf(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+wc(i,l);o+=Mo(i,t,s,c,a)}else if(c=G0(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+wc(i,l++),o+=Mo(i,t,s,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function io(e,t,s){if(e==null)return e;var r=[],a=0;return Mo(e,r,"","",function(i){return t.call(s,i,a++)}),r}function X0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yt={current:null},Ro={transition:null},Z0={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:Ro,ReactCurrentOwner:Ju};function kg(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:io,forEach:function(e,t,s){io(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return io(e,function(){t++}),t},toArray:function(e){return io(e,function(t){return t})||[]},only:function(e){if(!Xu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=ya;ge.Fragment=$0;ge.Profiler=z0;ge.PureComponent=Gu;ge.StrictMode=U0;ge.Suspense=H0;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z0;ge.act=kg;ge.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ng({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ju.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Eg.call(t,c)&&!Sg.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:qi,type:e.type,key:a,ref:i,props:r,_owner:o}};ge.createContext=function(e){return e={$$typeof:W0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:V0,_context:e},e.Consumer=e};ge.createElement=Fg;ge.createFactory=function(e){var t=Fg.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:q0,render:e}};ge.isValidElement=Xu;ge.lazy=function(e){return{$$typeof:K0,_payload:{_status:-1,_result:e},_init:X0}};ge.memo=function(e,t){return{$$typeof:Y0,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=Ro.transition;Ro.transition={};try{e()}finally{Ro.transition=t}};ge.unstable_act=kg;ge.useCallback=function(e,t){return yt.current.useCallback(e,t)};ge.useContext=function(e){return yt.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return yt.current.useDeferredValue(e)};ge.useEffect=function(e,t){return yt.current.useEffect(e,t)};ge.useId=function(){return yt.current.useId()};ge.useImperativeHandle=function(e,t,s){return yt.current.useImperativeHandle(e,t,s)};ge.useInsertionEffect=function(e,t){return yt.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return yt.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return yt.current.useMemo(e,t)};ge.useReducer=function(e,t,s){return yt.current.useReducer(e,t,s)};ge.useRef=function(e){return yt.current.useRef(e)};ge.useState=function(e){return yt.current.useState(e)};ge.useSyncExternalStore=function(e,t,s){return yt.current.useSyncExternalStore(e,t,s)};ge.useTransition=function(){return yt.current.useTransition()};ge.version="18.3.1";bg.exports=ge;var y=bg.exports;const Zu=yg(y),ej=I0({__proto__:null,default:Zu},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tj=y,sj=Symbol.for("react.element"),nj=Symbol.for("react.fragment"),rj=Object.prototype.hasOwnProperty,aj=tj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ij={key:!0,ref:!0,__self:!0,__source:!0};function Dg(e,t,s){var r,a={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)rj.call(t,r)&&!ij.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:sj,type:e,key:i,ref:o,props:a,_owner:aj.current}}Ml.Fragment=nj;Ml.jsx=Dg;Ml.jsxs=Dg;wg.exports=Ml;var n=wg.exports,jd={},Ag={exports:{}},It={},Tg={exports:{}},Pg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,R){var U=k.length;k.push(R);e:for(;0<U;){var J=U-1>>>1,K=k[J];if(0<a(K,R))k[J]=R,k[U]=K,U=J;else break e}}function s(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var R=k[0],U=k.pop();if(U!==R){k[0]=U;e:for(var J=0,K=k.length,ae=K>>>1;J<ae;){var oe=2*(J+1)-1,le=k[oe],pe=oe+1,ee=k[pe];if(0>a(le,U))pe<K&&0>a(ee,le)?(k[J]=ee,k[pe]=U,J=pe):(k[J]=le,k[oe]=U,J=oe);else if(pe<K&&0>a(ee,U))k[J]=ee,k[pe]=U,J=pe;else break e}}return R}function a(k,R){var U=k.sortIndex-R.sortIndex;return U!==0?U:k.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,v=!1,b=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(k){for(var R=s(d);R!==null;){if(R.callback===null)r(d);else if(R.startTime<=k)r(d),R.sortIndex=R.expirationTime,t(c,R);else break;R=s(d)}}function N(k){if(g=!1,x(k),!b)if(s(c)!==null)b=!0,Z(j);else{var R=s(d);R!==null&&H(N,R.startTime-k)}}function j(k,R){b=!1,g&&(g=!1,p(_),_=-1),v=!0;var U=f;try{for(x(R),h=s(c);h!==null&&(!(h.expirationTime>R)||k&&!A());){var J=h.callback;if(typeof J=="function"){h.callback=null,f=h.priorityLevel;var K=J(h.expirationTime<=R);R=e.unstable_now(),typeof K=="function"?h.callback=K:h===s(c)&&r(c),x(R)}else r(c);h=s(c)}if(h!==null)var ae=!0;else{var oe=s(d);oe!==null&&H(N,oe.startTime-R),ae=!1}return ae}finally{h=null,f=U,v=!1}}var C=!1,E=null,_=-1,S=5,F=-1;function A(){return!(e.unstable_now()-F<S)}function M(){if(E!==null){var k=e.unstable_now();F=k;var R=!0;try{R=E(!0,k)}finally{R?L():(C=!1,E=null)}}else C=!1}var L;if(typeof m=="function")L=function(){m(M)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,q=P.port2;P.port1.onmessage=M,L=function(){q.postMessage(null)}}else L=function(){w(M,0)};function Z(k){E=k,C||(C=!0,L())}function H(k,R){_=w(function(){k(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,Z(j))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(k){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var U=f;f=R;try{return k()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,R){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var U=f;f=k;try{return R()}finally{f=U}},e.unstable_scheduleCallback=function(k,R,U){var J=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?J+U:J):U=J,k){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=U+K,k={id:u++,callback:R,priorityLevel:k,startTime:U,expirationTime:K,sortIndex:-1},U>J?(k.sortIndex=U,t(d,k),s(c)===null&&k===s(d)&&(g?(p(_),_=-1):g=!0,H(N,U-J))):(k.sortIndex=K,t(c,k),b||v||(b=!0,Z(j))),k},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(k){var R=f;return function(){var U=f;f=R;try{return k.apply(this,arguments)}finally{f=U}}}})(Pg);Tg.exports=Pg;var oj=Tg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lj=y,Lt=oj;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mg=new Set,pi={};function fr(e,t){ia(e,t),ia(e+"Capture",t)}function ia(e,t){for(pi[e]=t,e=0;e<t.length;e++)Mg.add(t[e])}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nd=Object.prototype.hasOwnProperty,cj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uf={},zf={};function dj(e){return Nd.call(zf,e)?!0:Nd.call(Uf,e)?!1:cj.test(e)?zf[e]=!0:(Uf[e]=!0,!1)}function uj(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hj(e,t,s,r){if(t===null||typeof t>"u"||uj(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wt(e,t,s,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var eh=/[\-:]([a-z])/g;function th(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(eh,th);st[t]=new wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(eh,th);st[t]=new wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(eh,th);st[t]=new wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new wt(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function sh(e,t,s,r){var a=st.hasOwnProperty(t)?st[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hj(t,s,a,r)&&(s=null),r||a===null?dj(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,r=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var Us=lj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oo=Symbol.for("react.element"),Nr=Symbol.for("react.portal"),Cr=Symbol.for("react.fragment"),nh=Symbol.for("react.strict_mode"),Cd=Symbol.for("react.profiler"),Rg=Symbol.for("react.provider"),Lg=Symbol.for("react.context"),rh=Symbol.for("react.forward_ref"),_d=Symbol.for("react.suspense"),Ed=Symbol.for("react.suspense_list"),ah=Symbol.for("react.memo"),Zs=Symbol.for("react.lazy"),Ig=Symbol.for("react.offscreen"),Vf=Symbol.iterator;function Aa(e){return e===null||typeof e!="object"?null:(e=Vf&&e[Vf]||e["@@iterator"],typeof e=="function"?e:null)}var $e=Object.assign,bc;function Ha(e){if(bc===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);bc=t&&t[1]||""}return`
`+bc+e}var jc=!1;function Nc(e,t){if(!e||jc)return"";jc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{jc=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ha(e):""}function fj(e){switch(e.tag){case 5:return Ha(e.type);case 16:return Ha("Lazy");case 13:return Ha("Suspense");case 19:return Ha("SuspenseList");case 0:case 2:case 15:return e=Nc(e.type,!1),e;case 11:return e=Nc(e.type.render,!1),e;case 1:return e=Nc(e.type,!0),e;default:return""}}function Sd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Cr:return"Fragment";case Nr:return"Portal";case Cd:return"Profiler";case nh:return"StrictMode";case _d:return"Suspense";case Ed:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lg:return(e.displayName||"Context")+".Consumer";case Rg:return(e._context.displayName||"Context")+".Provider";case rh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ah:return t=e.displayName||null,t!==null?t:Sd(e.type)||"Memo";case Zs:t=e._payload,e=e._init;try{return Sd(e(t))}catch{}}return null}function mj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sd(t);case 8:return t===nh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Nn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Og(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pj(e){var t=Og(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function lo(e){e._valueTracker||(e._valueTracker=pj(e))}function Bg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=Og(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function Xo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fd(e,t){var s=t.checked;return $e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Wf(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=Nn(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $g(e,t){t=t.checked,t!=null&&sh(e,"checked",t,!1)}function kd(e,t){$g(e,t);var s=Nn(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dd(e,t.type,s):t.hasOwnProperty("defaultValue")&&Dd(e,t.type,Nn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qf(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Dd(e,t,s){(t!=="number"||Xo(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ya=Array.isArray;function Vr(e,t,s,r){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&r&&(e[s].defaultSelected=!0)}else{for(s=""+Nn(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ad(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return $e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hf(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(X(92));if(Ya(s)){if(1<s.length)throw Error(X(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Nn(s)}}function Ug(e,t){var s=Nn(t.value),r=Nn(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function Yf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Td(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var co,Vg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(co=co||document.createElement("div"),co.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=co.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xi(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xj=["Webkit","ms","Moz","O"];Object.keys(Xa).forEach(function(e){xj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xa[t]=Xa[e]})});function Wg(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Xa.hasOwnProperty(e)&&Xa[e]?(""+t).trim():t+"px"}function qg(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,a=Wg(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,a):e[s]=a}}var gj=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pd(e,t){if(t){if(gj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Md(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rd=null;function ih(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ld=null,Wr=null,qr=null;function Kf(e){if(e=Ki(e)){if(typeof Ld!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Bl(t),Ld(e.stateNode,e.type,t))}}function Hg(e){Wr?qr?qr.push(e):qr=[e]:Wr=e}function Yg(){if(Wr){var e=Wr,t=qr;if(qr=Wr=null,Kf(e),t)for(e=0;e<t.length;e++)Kf(t[e])}}function Kg(e,t){return e(t)}function Gg(){}var Cc=!1;function Qg(e,t,s){if(Cc)return e(t,s);Cc=!0;try{return Kg(e,t,s)}finally{Cc=!1,(Wr!==null||qr!==null)&&(Gg(),Yg())}}function gi(e,t){var s=e.stateNode;if(s===null)return null;var r=Bl(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(X(231,t,typeof s));return s}var Id=!1;if(Ls)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){Id=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{Id=!1}function vj(e,t,s,r,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var Za=!1,Zo=null,el=!1,Od=null,yj={onError:function(e){Za=!0,Zo=e}};function wj(e,t,s,r,a,i,o,l,c){Za=!1,Zo=null,vj.apply(yj,arguments)}function bj(e,t,s,r,a,i,o,l,c){if(wj.apply(this,arguments),Za){if(Za){var d=Zo;Za=!1,Zo=null}else throw Error(X(198));el||(el=!0,Od=d)}}function mr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Jg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gf(e){if(mr(e)!==e)throw Error(X(188))}function jj(e){var t=e.alternate;if(!t){if(t=mr(e),t===null)throw Error(X(188));return t!==e?null:e}for(var s=e,r=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){s=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return Gf(a),e;if(i===r)return Gf(a),t;i=i.sibling}throw Error(X(188))}if(s.return!==r.return)s=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===s){o=!0,s=a,r=i;break}if(l===r){o=!0,r=a,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,r=a;break}if(l===r){o=!0,r=i,s=a;break}l=l.sibling}if(!o)throw Error(X(189))}}if(s.alternate!==r)throw Error(X(190))}if(s.tag!==3)throw Error(X(188));return s.stateNode.current===s?e:t}function Xg(e){return e=jj(e),e!==null?Zg(e):null}function Zg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zg(e);if(t!==null)return t;e=e.sibling}return null}var ev=Lt.unstable_scheduleCallback,Qf=Lt.unstable_cancelCallback,Nj=Lt.unstable_shouldYield,Cj=Lt.unstable_requestPaint,qe=Lt.unstable_now,_j=Lt.unstable_getCurrentPriorityLevel,oh=Lt.unstable_ImmediatePriority,tv=Lt.unstable_UserBlockingPriority,tl=Lt.unstable_NormalPriority,Ej=Lt.unstable_LowPriority,sv=Lt.unstable_IdlePriority,Rl=null,bs=null;function Sj(e){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(Rl,e,void 0,(e.current.flags&128)===128)}catch{}}var cs=Math.clz32?Math.clz32:Dj,Fj=Math.log,kj=Math.LN2;function Dj(e){return e>>>=0,e===0?32:31-(Fj(e)/kj|0)|0}var uo=64,ho=4194304;function Ka(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sl(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~a;l!==0?r=Ka(l):(i&=o,i!==0&&(r=Ka(i)))}else o=s&~a,o!==0?r=Ka(o):i!==0&&(r=Ka(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-cs(t),a=1<<s,r|=e[s],t&=~a;return r}function Aj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tj(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-cs(i),l=1<<o,c=a[o];c===-1?(!(l&s)||l&r)&&(a[o]=Aj(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Bd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nv(){var e=uo;return uo<<=1,!(uo&4194240)&&(uo=64),e}function _c(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Hi(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-cs(t),e[t]=s}function Pj(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-cs(s),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,s&=~i}}function lh(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-cs(s),a=1<<r;a&t|e[r]&t&&(e[r]|=t),s&=~a}}var Fe=0;function rv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var av,ch,iv,ov,lv,$d=!1,fo=[],mn=null,pn=null,xn=null,vi=new Map,yi=new Map,sn=[],Mj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jf(e,t){switch(e){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":vi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yi.delete(t.pointerId)}}function Pa(e,t,s,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ki(t),t!==null&&ch(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Rj(e,t,s,r,a){switch(t){case"focusin":return mn=Pa(mn,e,t,s,r,a),!0;case"dragenter":return pn=Pa(pn,e,t,s,r,a),!0;case"mouseover":return xn=Pa(xn,e,t,s,r,a),!0;case"pointerover":var i=a.pointerId;return vi.set(i,Pa(vi.get(i)||null,e,t,s,r,a)),!0;case"gotpointercapture":return i=a.pointerId,yi.set(i,Pa(yi.get(i)||null,e,t,s,r,a)),!0}return!1}function cv(e){var t=Hn(e.target);if(t!==null){var s=mr(t);if(s!==null){if(t=s.tag,t===13){if(t=Jg(s),t!==null){e.blockedOn=t,lv(e.priority,function(){iv(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Ud(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);Rd=r,s.target.dispatchEvent(r),Rd=null}else return t=Ki(s),t!==null&&ch(t),e.blockedOn=s,!1;t.shift()}return!0}function Xf(e,t,s){Lo(e)&&s.delete(t)}function Lj(){$d=!1,mn!==null&&Lo(mn)&&(mn=null),pn!==null&&Lo(pn)&&(pn=null),xn!==null&&Lo(xn)&&(xn=null),vi.forEach(Xf),yi.forEach(Xf)}function Ma(e,t){e.blockedOn===t&&(e.blockedOn=null,$d||($d=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,Lj)))}function wi(e){function t(a){return Ma(a,e)}if(0<fo.length){Ma(fo[0],e);for(var s=1;s<fo.length;s++){var r=fo[s];r.blockedOn===e&&(r.blockedOn=null)}}for(mn!==null&&Ma(mn,e),pn!==null&&Ma(pn,e),xn!==null&&Ma(xn,e),vi.forEach(t),yi.forEach(t),s=0;s<sn.length;s++)r=sn[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<sn.length&&(s=sn[0],s.blockedOn===null);)cv(s),s.blockedOn===null&&sn.shift()}var Hr=Us.ReactCurrentBatchConfig,nl=!0;function Ij(e,t,s,r){var a=Fe,i=Hr.transition;Hr.transition=null;try{Fe=1,dh(e,t,s,r)}finally{Fe=a,Hr.transition=i}}function Oj(e,t,s,r){var a=Fe,i=Hr.transition;Hr.transition=null;try{Fe=4,dh(e,t,s,r)}finally{Fe=a,Hr.transition=i}}function dh(e,t,s,r){if(nl){var a=Ud(e,t,s,r);if(a===null)Rc(e,t,r,rl,s),Jf(e,r);else if(Rj(a,e,t,s,r))r.stopPropagation();else if(Jf(e,r),t&4&&-1<Mj.indexOf(e)){for(;a!==null;){var i=Ki(a);if(i!==null&&av(i),i=Ud(e,t,s,r),i===null&&Rc(e,t,r,rl,s),i===a)break;a=i}a!==null&&r.stopPropagation()}else Rc(e,t,r,null,s)}}var rl=null;function Ud(e,t,s,r){if(rl=null,e=ih(r),e=Hn(e),e!==null)if(t=mr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Jg(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rl=e,null}function dv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_j()){case oh:return 1;case tv:return 4;case tl:case Ej:return 16;case sv:return 536870912;default:return 16}default:return 16}}var un=null,uh=null,Io=null;function uv(){if(Io)return Io;var e,t=uh,s=t.length,r,a="value"in un?un.value:un.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(r=1;r<=o&&t[s-r]===a[i-r];r++);return Io=a.slice(e,1<r?1-r:void 0)}function Oo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mo(){return!0}function Zf(){return!1}function Ot(e){function t(s,r,a,i,o){this._reactName=s,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?mo:Zf,this.isPropagationStopped=Zf,this}return $e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),t}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hh=Ot(wa),Yi=$e({},wa,{view:0,detail:0}),Bj=Ot(Yi),Ec,Sc,Ra,Ll=$e({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ra&&(Ra&&e.type==="mousemove"?(Ec=e.screenX-Ra.screenX,Sc=e.screenY-Ra.screenY):Sc=Ec=0,Ra=e),Ec)},movementY:function(e){return"movementY"in e?e.movementY:Sc}}),em=Ot(Ll),$j=$e({},Ll,{dataTransfer:0}),Uj=Ot($j),zj=$e({},Yi,{relatedTarget:0}),Fc=Ot(zj),Vj=$e({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),Wj=Ot(Vj),qj=$e({},wa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hj=Ot(qj),Yj=$e({},wa,{data:0}),tm=Ot(Yj),Kj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Qj[e])?!!t[e]:!1}function fh(){return Jj}var Xj=$e({},Yi,{key:function(e){if(e.key){var t=Kj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fh,charCode:function(e){return e.type==="keypress"?Oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zj=Ot(Xj),eN=$e({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sm=Ot(eN),tN=$e({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fh}),sN=Ot(tN),nN=$e({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),rN=Ot(nN),aN=$e({},Ll,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iN=Ot(aN),oN=[9,13,27,32],mh=Ls&&"CompositionEvent"in window,ei=null;Ls&&"documentMode"in document&&(ei=document.documentMode);var lN=Ls&&"TextEvent"in window&&!ei,hv=Ls&&(!mh||ei&&8<ei&&11>=ei),nm=" ",rm=!1;function fv(e,t){switch(e){case"keyup":return oN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function cN(e,t){switch(e){case"compositionend":return mv(t);case"keypress":return t.which!==32?null:(rm=!0,nm);case"textInput":return e=t.data,e===nm&&rm?null:e;default:return null}}function dN(e,t){if(_r)return e==="compositionend"||!mh&&fv(e,t)?(e=uv(),Io=uh=un=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hv&&t.locale!=="ko"?null:t.data;default:return null}}var uN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function am(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uN[e.type]:t==="textarea"}function pv(e,t,s,r){Hg(r),t=al(t,"onChange"),0<t.length&&(s=new hh("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var ti=null,bi=null;function hN(e){Ev(e,0)}function Il(e){var t=Fr(e);if(Bg(t))return e}function fN(e,t){if(e==="change")return t}var xv=!1;if(Ls){var kc;if(Ls){var Dc="oninput"in document;if(!Dc){var im=document.createElement("div");im.setAttribute("oninput","return;"),Dc=typeof im.oninput=="function"}kc=Dc}else kc=!1;xv=kc&&(!document.documentMode||9<document.documentMode)}function om(){ti&&(ti.detachEvent("onpropertychange",gv),bi=ti=null)}function gv(e){if(e.propertyName==="value"&&Il(bi)){var t=[];pv(t,bi,e,ih(e)),Qg(hN,t)}}function mN(e,t,s){e==="focusin"?(om(),ti=t,bi=s,ti.attachEvent("onpropertychange",gv)):e==="focusout"&&om()}function pN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Il(bi)}function xN(e,t){if(e==="click")return Il(t)}function gN(e,t){if(e==="input"||e==="change")return Il(t)}function vN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var us=typeof Object.is=="function"?Object.is:vN;function ji(e,t){if(us(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var a=s[r];if(!Nd.call(t,a)||!us(e[a],t[a]))return!1}return!0}function lm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cm(e,t){var s=lm(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=lm(s)}}function vv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yv(){for(var e=window,t=Xo();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Xo(e.document)}return t}function ph(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yN(e){var t=yv(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&vv(s.ownerDocument.documentElement,s)){if(r!==null&&ph(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=cm(s,i);var o=cm(s,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wN=Ls&&"documentMode"in document&&11>=document.documentMode,Er=null,zd=null,si=null,Vd=!1;function dm(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Vd||Er==null||Er!==Xo(r)||(r=Er,"selectionStart"in r&&ph(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),si&&ji(si,r)||(si=r,r=al(zd,"onSelect"),0<r.length&&(t=new hh("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=Er)))}function po(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Sr={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionend:po("Transition","TransitionEnd")},Ac={},wv={};Ls&&(wv=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);function Ol(e){if(Ac[e])return Ac[e];if(!Sr[e])return e;var t=Sr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in wv)return Ac[e]=t[s];return e}var bv=Ol("animationend"),jv=Ol("animationiteration"),Nv=Ol("animationstart"),Cv=Ol("transitionend"),_v=new Map,um="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(e,t){_v.set(e,t),fr(t,[e])}for(var Tc=0;Tc<um.length;Tc++){var Pc=um[Tc],bN=Pc.toLowerCase(),jN=Pc[0].toUpperCase()+Pc.slice(1);En(bN,"on"+jN)}En(bv,"onAnimationEnd");En(jv,"onAnimationIteration");En(Nv,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(Cv,"onTransitionEnd");ia("onMouseEnter",["mouseout","mouseover"]);ia("onMouseLeave",["mouseout","mouseover"]);ia("onPointerEnter",["pointerout","pointerover"]);ia("onPointerLeave",["pointerout","pointerover"]);fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ga));function hm(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,bj(r,t,void 0,e),e.currentTarget=null}function Ev(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;hm(a,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;hm(a,l,d),i=c}}}if(el)throw e=Od,el=!1,Od=null,e}function Te(e,t){var s=t[Kd];s===void 0&&(s=t[Kd]=new Set);var r=e+"__bubble";s.has(r)||(Sv(t,e,2,!1),s.add(r))}function Mc(e,t,s){var r=0;t&&(r|=4),Sv(s,e,r,t)}var xo="_reactListening"+Math.random().toString(36).slice(2);function Ni(e){if(!e[xo]){e[xo]=!0,Mg.forEach(function(s){s!=="selectionchange"&&(NN.has(s)||Mc(s,!1,e),Mc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xo]||(t[xo]=!0,Mc("selectionchange",!1,t))}}function Sv(e,t,s,r){switch(dv(t)){case 1:var a=Ij;break;case 4:a=Oj;break;default:a=dh}s=a.bind(null,t,s,e),a=void 0,!Id||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Rc(e,t,s,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Hn(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Qg(function(){var d=i,u=ih(s),h=[];e:{var f=_v.get(e);if(f!==void 0){var v=hh,b=e;switch(e){case"keypress":if(Oo(s)===0)break e;case"keydown":case"keyup":v=Zj;break;case"focusin":b="focus",v=Fc;break;case"focusout":b="blur",v=Fc;break;case"beforeblur":case"afterblur":v=Fc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=em;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Uj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=sN;break;case bv:case jv:case Nv:v=Wj;break;case Cv:v=rN;break;case"scroll":v=Bj;break;case"wheel":v=iN;break;case"copy":case"cut":case"paste":v=Hj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=sm}var g=(t&4)!==0,w=!g&&e==="scroll",p=g?f!==null?f+"Capture":null:f;g=[];for(var m=d,x;m!==null;){x=m;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,p!==null&&(N=gi(m,p),N!=null&&g.push(Ci(m,N,x)))),w)break;m=m.return}0<g.length&&(f=new v(f,b,null,s,u),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",f&&s!==Rd&&(b=s.relatedTarget||s.fromElement)&&(Hn(b)||b[Is]))break e;if((v||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,v?(b=s.relatedTarget||s.toElement,v=d,b=b?Hn(b):null,b!==null&&(w=mr(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=d),v!==b)){if(g=em,N="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=sm,N="onPointerLeave",p="onPointerEnter",m="pointer"),w=v==null?f:Fr(v),x=b==null?f:Fr(b),f=new g(N,m+"leave",v,s,u),f.target=w,f.relatedTarget=x,N=null,Hn(u)===d&&(g=new g(p,m+"enter",b,s,u),g.target=x,g.relatedTarget=w,N=g),w=N,v&&b)t:{for(g=v,p=b,m=0,x=g;x;x=xr(x))m++;for(x=0,N=p;N;N=xr(N))x++;for(;0<m-x;)g=xr(g),m--;for(;0<x-m;)p=xr(p),x--;for(;m--;){if(g===p||p!==null&&g===p.alternate)break t;g=xr(g),p=xr(p)}g=null}else g=null;v!==null&&fm(h,f,v,g,!1),b!==null&&w!==null&&fm(h,w,b,g,!0)}}e:{if(f=d?Fr(d):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var j=fN;else if(am(f))if(xv)j=gN;else{j=pN;var C=mN}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=xN);if(j&&(j=j(e,d))){pv(h,j,s,u);break e}C&&C(e,f,d),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Dd(f,"number",f.value)}switch(C=d?Fr(d):window,e){case"focusin":(am(C)||C.contentEditable==="true")&&(Er=C,zd=d,si=null);break;case"focusout":si=zd=Er=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,dm(h,s,u);break;case"selectionchange":if(wN)break;case"keydown":case"keyup":dm(h,s,u)}var E;if(mh)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else _r?fv(e,s)&&(_="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(_="onCompositionStart");_&&(hv&&s.locale!=="ko"&&(_r||_!=="onCompositionStart"?_==="onCompositionEnd"&&_r&&(E=uv()):(un=u,uh="value"in un?un.value:un.textContent,_r=!0)),C=al(d,_),0<C.length&&(_=new tm(_,e,null,s,u),h.push({event:_,listeners:C}),E?_.data=E:(E=mv(s),E!==null&&(_.data=E)))),(E=lN?cN(e,s):dN(e,s))&&(d=al(d,"onBeforeInput"),0<d.length&&(u=new tm("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=E))}Ev(h,t)})}function Ci(e,t,s){return{instance:e,listener:t,currentTarget:s}}function al(e,t){for(var s=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=gi(e,s),i!=null&&r.unshift(Ci(e,i,a)),i=gi(e,t),i!=null&&r.push(Ci(e,i,a))),e=e.return}return r}function xr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function fm(e,t,s,r,a){for(var i=t._reactName,o=[];s!==null&&s!==r;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,a?(c=gi(s,i),c!=null&&o.unshift(Ci(s,c,l))):a||(c=gi(s,i),c!=null&&o.push(Ci(s,c,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var CN=/\r\n?/g,_N=/\u0000|\uFFFD/g;function mm(e){return(typeof e=="string"?e:""+e).replace(CN,`
`).replace(_N,"")}function go(e,t,s){if(t=mm(t),mm(e)!==t&&s)throw Error(X(425))}function il(){}var Wd=null,qd=null;function Hd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yd=typeof setTimeout=="function"?setTimeout:void 0,EN=typeof clearTimeout=="function"?clearTimeout:void 0,pm=typeof Promise=="function"?Promise:void 0,SN=typeof queueMicrotask=="function"?queueMicrotask:typeof pm<"u"?function(e){return pm.resolve(null).then(e).catch(FN)}:Yd;function FN(e){setTimeout(function(){throw e})}function Lc(e,t){var s=t,r=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(r===0){e.removeChild(a),wi(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=a}while(s);wi(t)}function gn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var ba=Math.random().toString(36).slice(2),ws="__reactFiber$"+ba,_i="__reactProps$"+ba,Is="__reactContainer$"+ba,Kd="__reactEvents$"+ba,kN="__reactListeners$"+ba,DN="__reactHandles$"+ba;function Hn(e){var t=e[ws];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Is]||s[ws]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=xm(e);e!==null;){if(s=e[ws])return s;e=xm(e)}return t}e=s,s=e.parentNode}return null}function Ki(e){return e=e[ws]||e[Is],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Bl(e){return e[_i]||null}var Gd=[],kr=-1;function Sn(e){return{current:e}}function Pe(e){0>kr||(e.current=Gd[kr],Gd[kr]=null,kr--)}function Ae(e,t){kr++,Gd[kr]=e.current,e.current=t}var Cn={},ht=Sn(Cn),_t=Sn(!1),ir=Cn;function oa(e,t){var s=e.type.contextTypes;if(!s)return Cn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Et(e){return e=e.childContextTypes,e!=null}function ol(){Pe(_t),Pe(ht)}function gm(e,t,s){if(ht.current!==Cn)throw Error(X(168));Ae(ht,t),Ae(_t,s)}function Fv(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(X(108,mj(e)||"Unknown",a));return $e({},s,r)}function ll(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cn,ir=ht.current,Ae(ht,e),Ae(_t,_t.current),!0}function vm(e,t,s){var r=e.stateNode;if(!r)throw Error(X(169));s?(e=Fv(e,t,ir),r.__reactInternalMemoizedMergedChildContext=e,Pe(_t),Pe(ht),Ae(ht,e)):Pe(_t),Ae(_t,s)}var As=null,$l=!1,Ic=!1;function kv(e){As===null?As=[e]:As.push(e)}function AN(e){$l=!0,kv(e)}function Fn(){if(!Ic&&As!==null){Ic=!0;var e=0,t=Fe;try{var s=As;for(Fe=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}As=null,$l=!1}catch(a){throw As!==null&&(As=As.slice(e+1)),ev(oh,Fn),a}finally{Fe=t,Ic=!1}}return null}var Dr=[],Ar=0,cl=null,dl=0,Vt=[],Wt=0,or=null,Ps=1,Ms="";function $n(e,t){Dr[Ar++]=dl,Dr[Ar++]=cl,cl=e,dl=t}function Dv(e,t,s){Vt[Wt++]=Ps,Vt[Wt++]=Ms,Vt[Wt++]=or,or=e;var r=Ps;e=Ms;var a=32-cs(r)-1;r&=~(1<<a),s+=1;var i=32-cs(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ps=1<<32-cs(t)+a|s<<a|r,Ms=i+e}else Ps=1<<i|s<<a|r,Ms=e}function xh(e){e.return!==null&&($n(e,1),Dv(e,1,0))}function gh(e){for(;e===cl;)cl=Dr[--Ar],Dr[Ar]=null,dl=Dr[--Ar],Dr[Ar]=null;for(;e===or;)or=Vt[--Wt],Vt[Wt]=null,Ms=Vt[--Wt],Vt[Wt]=null,Ps=Vt[--Wt],Vt[Wt]=null}var Rt=null,Pt=null,Me=!1,os=null;function Av(e,t){var s=Ht(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function ym(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,Pt=gn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,Pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=or!==null?{id:Ps,overflow:Ms}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Ht(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Rt=e,Pt=null,!0):!1;default:return!1}}function Qd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Jd(e){if(Me){var t=Pt;if(t){var s=t;if(!ym(e,t)){if(Qd(e))throw Error(X(418));t=gn(s.nextSibling);var r=Rt;t&&ym(e,t)?Av(r,s):(e.flags=e.flags&-4097|2,Me=!1,Rt=e)}}else{if(Qd(e))throw Error(X(418));e.flags=e.flags&-4097|2,Me=!1,Rt=e}}}function wm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function vo(e){if(e!==Rt)return!1;if(!Me)return wm(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hd(e.type,e.memoizedProps)),t&&(t=Pt)){if(Qd(e))throw Tv(),Error(X(418));for(;t;)Av(e,t),t=gn(t.nextSibling)}if(wm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Pt=gn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Pt=null}}else Pt=Rt?gn(e.stateNode.nextSibling):null;return!0}function Tv(){for(var e=Pt;e;)e=gn(e.nextSibling)}function la(){Pt=Rt=null,Me=!1}function vh(e){os===null?os=[e]:os.push(e)}var TN=Us.ReactCurrentBatchConfig;function La(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(X(309));var r=s.stateNode}if(!r)throw Error(X(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(X(284));if(!s._owner)throw Error(X(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bm(e){var t=e._init;return t(e._payload)}function Pv(e){function t(p,m){if(e){var x=p.deletions;x===null?(p.deletions=[m],p.flags|=16):x.push(m)}}function s(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function a(p,m){return p=bn(p,m),p.index=0,p.sibling=null,p}function i(p,m,x){return p.index=x,e?(x=p.alternate,x!==null?(x=x.index,x<m?(p.flags|=2,m):x):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,m,x,N){return m===null||m.tag!==6?(m=Wc(x,p.mode,N),m.return=p,m):(m=a(m,x),m.return=p,m)}function c(p,m,x,N){var j=x.type;return j===Cr?u(p,m,x.props.children,N,x.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Zs&&bm(j)===m.type)?(N=a(m,x.props),N.ref=La(p,m,x),N.return=p,N):(N=qo(x.type,x.key,x.props,null,p.mode,N),N.ref=La(p,m,x),N.return=p,N)}function d(p,m,x,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=qc(x,p.mode,N),m.return=p,m):(m=a(m,x.children||[]),m.return=p,m)}function u(p,m,x,N,j){return m===null||m.tag!==7?(m=nr(x,p.mode,N,j),m.return=p,m):(m=a(m,x),m.return=p,m)}function h(p,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Wc(""+m,p.mode,x),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case oo:return x=qo(m.type,m.key,m.props,null,p.mode,x),x.ref=La(p,null,m),x.return=p,x;case Nr:return m=qc(m,p.mode,x),m.return=p,m;case Zs:var N=m._init;return h(p,N(m._payload),x)}if(Ya(m)||Aa(m))return m=nr(m,p.mode,x,null),m.return=p,m;yo(p,m)}return null}function f(p,m,x,N){var j=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:l(p,m,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oo:return x.key===j?c(p,m,x,N):null;case Nr:return x.key===j?d(p,m,x,N):null;case Zs:return j=x._init,f(p,m,j(x._payload),N)}if(Ya(x)||Aa(x))return j!==null?null:u(p,m,x,N,null);yo(p,x)}return null}function v(p,m,x,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return p=p.get(x)||null,l(m,p,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case oo:return p=p.get(N.key===null?x:N.key)||null,c(m,p,N,j);case Nr:return p=p.get(N.key===null?x:N.key)||null,d(m,p,N,j);case Zs:var C=N._init;return v(p,m,x,C(N._payload),j)}if(Ya(N)||Aa(N))return p=p.get(x)||null,u(m,p,N,j,null);yo(m,N)}return null}function b(p,m,x,N){for(var j=null,C=null,E=m,_=m=0,S=null;E!==null&&_<x.length;_++){E.index>_?(S=E,E=null):S=E.sibling;var F=f(p,E,x[_],N);if(F===null){E===null&&(E=S);break}e&&E&&F.alternate===null&&t(p,E),m=i(F,m,_),C===null?j=F:C.sibling=F,C=F,E=S}if(_===x.length)return s(p,E),Me&&$n(p,_),j;if(E===null){for(;_<x.length;_++)E=h(p,x[_],N),E!==null&&(m=i(E,m,_),C===null?j=E:C.sibling=E,C=E);return Me&&$n(p,_),j}for(E=r(p,E);_<x.length;_++)S=v(E,p,_,x[_],N),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?_:S.key),m=i(S,m,_),C===null?j=S:C.sibling=S,C=S);return e&&E.forEach(function(A){return t(p,A)}),Me&&$n(p,_),j}function g(p,m,x,N){var j=Aa(x);if(typeof j!="function")throw Error(X(150));if(x=j.call(x),x==null)throw Error(X(151));for(var C=j=null,E=m,_=m=0,S=null,F=x.next();E!==null&&!F.done;_++,F=x.next()){E.index>_?(S=E,E=null):S=E.sibling;var A=f(p,E,F.value,N);if(A===null){E===null&&(E=S);break}e&&E&&A.alternate===null&&t(p,E),m=i(A,m,_),C===null?j=A:C.sibling=A,C=A,E=S}if(F.done)return s(p,E),Me&&$n(p,_),j;if(E===null){for(;!F.done;_++,F=x.next())F=h(p,F.value,N),F!==null&&(m=i(F,m,_),C===null?j=F:C.sibling=F,C=F);return Me&&$n(p,_),j}for(E=r(p,E);!F.done;_++,F=x.next())F=v(E,p,_,F.value,N),F!==null&&(e&&F.alternate!==null&&E.delete(F.key===null?_:F.key),m=i(F,m,_),C===null?j=F:C.sibling=F,C=F);return e&&E.forEach(function(M){return t(p,M)}),Me&&$n(p,_),j}function w(p,m,x,N){if(typeof x=="object"&&x!==null&&x.type===Cr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case oo:e:{for(var j=x.key,C=m;C!==null;){if(C.key===j){if(j=x.type,j===Cr){if(C.tag===7){s(p,C.sibling),m=a(C,x.props.children),m.return=p,p=m;break e}}else if(C.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Zs&&bm(j)===C.type){s(p,C.sibling),m=a(C,x.props),m.ref=La(p,C,x),m.return=p,p=m;break e}s(p,C);break}else t(p,C);C=C.sibling}x.type===Cr?(m=nr(x.props.children,p.mode,N,x.key),m.return=p,p=m):(N=qo(x.type,x.key,x.props,null,p.mode,N),N.ref=La(p,m,x),N.return=p,p=N)}return o(p);case Nr:e:{for(C=x.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){s(p,m.sibling),m=a(m,x.children||[]),m.return=p,p=m;break e}else{s(p,m);break}else t(p,m);m=m.sibling}m=qc(x,p.mode,N),m.return=p,p=m}return o(p);case Zs:return C=x._init,w(p,m,C(x._payload),N)}if(Ya(x))return b(p,m,x,N);if(Aa(x))return g(p,m,x,N);yo(p,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(s(p,m.sibling),m=a(m,x),m.return=p,p=m):(s(p,m),m=Wc(x,p.mode,N),m.return=p,p=m),o(p)):s(p,m)}return w}var ca=Pv(!0),Mv=Pv(!1),ul=Sn(null),hl=null,Tr=null,yh=null;function wh(){yh=Tr=hl=null}function bh(e){var t=ul.current;Pe(ul),e._currentValue=t}function Xd(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function Yr(e,t){hl=e,yh=Tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function Qt(e){var t=e._currentValue;if(yh!==e)if(e={context:e,memoizedValue:t,next:null},Tr===null){if(hl===null)throw Error(X(308));Tr=e,hl.dependencies={lanes:0,firstContext:e}}else Tr=Tr.next=e;return t}var Yn=null;function jh(e){Yn===null?Yn=[e]:Yn.push(e)}function Rv(e,t,s,r){var a=t.interleaved;return a===null?(s.next=s,jh(t)):(s.next=a.next,a.next=s),t.interleaved=s,Os(e,r)}function Os(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var en=!1;function Nh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Os(e,s)}return a=r.interleaved,a===null?(t.next=t,jh(r)):(t.next=a.next,a.next=t),r.interleaved=t,Os(e,s)}function Bo(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,lh(e,s)}}function jm(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function fl(e,t,s,r){var a=e.updateQueue;en=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,v=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(f=t,v=s,g.tag){case 1:if(b=g.payload,typeof b=="function"){h=b.call(v,h,f);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,f=typeof b=="function"?b.call(v,h,f):b,f==null)break e;h=$e({},h,f);break e;case 2:en=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else v={eventTime:v,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=v,c=h):u=u.next=v,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);cr|=o,e.lanes=o,e.memoizedState=h}}function Nm(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=s,typeof a!="function")throw Error(X(191,a));a.call(r)}}}var Gi={},js=Sn(Gi),Ei=Sn(Gi),Si=Sn(Gi);function Kn(e){if(e===Gi)throw Error(X(174));return e}function Ch(e,t){switch(Ae(Si,t),Ae(Ei,e),Ae(js,Gi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Td(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Td(t,e)}Pe(js),Ae(js,t)}function da(){Pe(js),Pe(Ei),Pe(Si)}function Iv(e){Kn(Si.current);var t=Kn(js.current),s=Td(t,e.type);t!==s&&(Ae(Ei,e),Ae(js,s))}function _h(e){Ei.current===e&&(Pe(js),Pe(Ei))}var Le=Sn(0);function ml(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oc=[];function Eh(){for(var e=0;e<Oc.length;e++)Oc[e]._workInProgressVersionPrimary=null;Oc.length=0}var $o=Us.ReactCurrentDispatcher,Bc=Us.ReactCurrentBatchConfig,lr=0,Oe=null,Ke=null,Je=null,pl=!1,ni=!1,Fi=0,PN=0;function it(){throw Error(X(321))}function Sh(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!us(e[s],t[s]))return!1;return!0}function Fh(e,t,s,r,a,i){if(lr=i,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$o.current=e===null||e.memoizedState===null?IN:ON,e=s(r,a),ni){i=0;do{if(ni=!1,Fi=0,25<=i)throw Error(X(301));i+=1,Je=Ke=null,t.updateQueue=null,$o.current=BN,e=s(r,a)}while(ni)}if($o.current=xl,t=Ke!==null&&Ke.next!==null,lr=0,Je=Ke=Oe=null,pl=!1,t)throw Error(X(300));return e}function kh(){var e=Fi!==0;return Fi=0,e}function xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Oe.memoizedState=Je=e:Je=Je.next=e,Je}function Jt(){if(Ke===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var t=Je===null?Oe.memoizedState:Je.next;if(t!==null)Je=t,Ke=e;else{if(e===null)throw Error(X(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Je===null?Oe.memoizedState=Je=e:Je=Je.next=e}return Je}function ki(e,t){return typeof t=="function"?t(e):t}function $c(e){var t=Jt(),s=t.queue;if(s===null)throw Error(X(311));s.lastRenderedReducer=e;var r=Ke,a=r.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((lr&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Oe.lanes|=u,cr|=u}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,us(r,t.memoizedState)||(Nt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,s.lastRenderedState=r}if(e=s.interleaved,e!==null){a=e;do i=a.lane,Oe.lanes|=i,cr|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Uc(e){var t=Jt(),s=t.queue;if(s===null)throw Error(X(311));s.lastRenderedReducer=e;var r=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);us(i,t.memoizedState)||(Nt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,r]}function Ov(){}function Bv(e,t){var s=Oe,r=Jt(),a=t(),i=!us(r.memoizedState,a);if(i&&(r.memoizedState=a,Nt=!0),r=r.queue,Dh(zv.bind(null,s,r,e),[e]),r.getSnapshot!==t||i||Je!==null&&Je.memoizedState.tag&1){if(s.flags|=2048,Di(9,Uv.bind(null,s,r,a,t),void 0,null),Xe===null)throw Error(X(349));lr&30||$v(s,t,a)}return a}function $v(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Uv(e,t,s,r){t.value=s,t.getSnapshot=r,Vv(t)&&Wv(e)}function zv(e,t,s){return s(function(){Vv(t)&&Wv(e)})}function Vv(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!us(e,s)}catch{return!0}}function Wv(e){var t=Os(e,1);t!==null&&ds(t,e,1,-1)}function Cm(e){var t=xs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:e},t.queue=e,e=e.dispatch=LN.bind(null,Oe,e),[t.memoizedState,e]}function Di(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function qv(){return Jt().memoizedState}function Uo(e,t,s,r){var a=xs();Oe.flags|=e,a.memoizedState=Di(1|t,s,void 0,r===void 0?null:r)}function Ul(e,t,s,r){var a=Jt();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&Sh(r,o.deps)){a.memoizedState=Di(t,s,i,r);return}}Oe.flags|=e,a.memoizedState=Di(1|t,s,i,r)}function _m(e,t){return Uo(8390656,8,e,t)}function Dh(e,t){return Ul(2048,8,e,t)}function Hv(e,t){return Ul(4,2,e,t)}function Yv(e,t){return Ul(4,4,e,t)}function Kv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gv(e,t,s){return s=s!=null?s.concat([e]):null,Ul(4,4,Kv.bind(null,t,e),s)}function Ah(){}function Qv(e,t){var s=Jt();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Sh(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function Jv(e,t){var s=Jt();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Sh(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function Xv(e,t,s){return lr&21?(us(s,t)||(s=nv(),Oe.lanes|=s,cr|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=s)}function MN(e,t){var s=Fe;Fe=s!==0&&4>s?s:4,e(!0);var r=Bc.transition;Bc.transition={};try{e(!1),t()}finally{Fe=s,Bc.transition=r}}function Zv(){return Jt().memoizedState}function RN(e,t,s){var r=wn(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},ey(e))ty(t,s);else if(s=Rv(e,t,s,r),s!==null){var a=vt();ds(s,e,r,a),sy(s,t,r)}}function LN(e,t,s){var r=wn(e),a={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(ey(e))ty(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,s);if(a.hasEagerState=!0,a.eagerState=l,us(l,o)){var c=t.interleaved;c===null?(a.next=a,jh(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=Rv(e,t,a,r),s!==null&&(a=vt(),ds(s,e,r,a),sy(s,t,r))}}function ey(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function ty(e,t){ni=pl=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function sy(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,lh(e,s)}}var xl={readContext:Qt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},IN={readContext:Qt,useCallback:function(e,t){return xs().memoizedState=[e,t===void 0?null:t],e},useContext:Qt,useEffect:_m,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Uo(4194308,4,Kv.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var s=xs();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=xs();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=RN.bind(null,Oe,e),[r.memoizedState,e]},useRef:function(e){var t=xs();return e={current:e},t.memoizedState=e},useState:Cm,useDebugValue:Ah,useDeferredValue:function(e){return xs().memoizedState=e},useTransition:function(){var e=Cm(!1),t=e[0];return e=MN.bind(null,e[1]),xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=Oe,a=xs();if(Me){if(s===void 0)throw Error(X(407));s=s()}else{if(s=t(),Xe===null)throw Error(X(349));lr&30||$v(r,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,_m(zv.bind(null,r,i,e),[e]),r.flags|=2048,Di(9,Uv.bind(null,r,i,s,t),void 0,null),s},useId:function(){var e=xs(),t=Xe.identifierPrefix;if(Me){var s=Ms,r=Ps;s=(r&~(1<<32-cs(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=Fi++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=PN++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ON={readContext:Qt,useCallback:Qv,useContext:Qt,useEffect:Dh,useImperativeHandle:Gv,useInsertionEffect:Hv,useLayoutEffect:Yv,useMemo:Jv,useReducer:$c,useRef:qv,useState:function(){return $c(ki)},useDebugValue:Ah,useDeferredValue:function(e){var t=Jt();return Xv(t,Ke.memoizedState,e)},useTransition:function(){var e=$c(ki)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Ov,useSyncExternalStore:Bv,useId:Zv,unstable_isNewReconciler:!1},BN={readContext:Qt,useCallback:Qv,useContext:Qt,useEffect:Dh,useImperativeHandle:Gv,useInsertionEffect:Hv,useLayoutEffect:Yv,useMemo:Jv,useReducer:Uc,useRef:qv,useState:function(){return Uc(ki)},useDebugValue:Ah,useDeferredValue:function(e){var t=Jt();return Ke===null?t.memoizedState=e:Xv(t,Ke.memoizedState,e)},useTransition:function(){var e=Uc(ki)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Ov,useSyncExternalStore:Bv,useId:Zv,unstable_isNewReconciler:!1};function ss(e,t){if(e&&e.defaultProps){t=$e({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Zd(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:$e({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var zl={isMounted:function(e){return(e=e._reactInternals)?mr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=vt(),a=wn(e),i=Rs(r,a);i.payload=t,s!=null&&(i.callback=s),t=vn(e,i,a),t!==null&&(ds(t,e,a,r),Bo(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=vt(),a=wn(e),i=Rs(r,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=vn(e,i,a),t!==null&&(ds(t,e,a,r),Bo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=vt(),r=wn(e),a=Rs(s,r);a.tag=2,t!=null&&(a.callback=t),t=vn(e,a,r),t!==null&&(ds(t,e,r,s),Bo(t,e,r))}};function Em(e,t,s,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!ji(s,r)||!ji(a,i):!0}function ny(e,t,s){var r=!1,a=Cn,i=t.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(a=Et(t)?ir:ht.current,r=t.contextTypes,i=(r=r!=null)?oa(e,a):Cn),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Sm(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&zl.enqueueReplaceState(t,t.state,null)}function eu(e,t,s,r){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},Nh(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Qt(i):(i=Et(t)?ir:ht.current,a.context=oa(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Zd(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&zl.enqueueReplaceState(a,a.state,null),fl(e,s,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ua(e,t){try{var s="",r=t;do s+=fj(r),r=r.return;while(r);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function zc(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function tu(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var $N=typeof WeakMap=="function"?WeakMap:Map;function ry(e,t,s){s=Rs(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){vl||(vl=!0,uu=r),tu(e,t)},s}function ay(e,t,s){s=Rs(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;s.payload=function(){return r(a)},s.callback=function(){tu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){tu(e,t),typeof r!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function Fm(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new $N;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(s)||(a.add(s),e=eC.bind(null,e,t,s),t.then(e,e))}function km(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Dm(e,t,s,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Rs(-1,1),t.tag=2,vn(s,t,1))),s.lanes|=1),e)}var UN=Us.ReactCurrentOwner,Nt=!1;function pt(e,t,s,r){t.child=e===null?Mv(t,null,s,r):ca(t,e.child,s,r)}function Am(e,t,s,r,a){s=s.render;var i=t.ref;return Yr(t,a),r=Fh(e,t,s,r,i,a),s=kh(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bs(e,t,a)):(Me&&s&&xh(t),t.flags|=1,pt(e,t,r,a),t.child)}function Tm(e,t,s,r,a){if(e===null){var i=s.type;return typeof i=="function"&&!Bh(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,iy(e,t,i,r,a)):(e=qo(s.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:ji,s(o,r)&&e.ref===t.ref)return Bs(e,t,a)}return t.flags|=1,e=bn(i,r),e.ref=t.ref,e.return=t,t.child=e}function iy(e,t,s,r,a){if(e!==null){var i=e.memoizedProps;if(ji(i,r)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Bs(e,t,a)}return su(e,t,s,r,a)}function oy(e,t,s){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Mr,Tt),Tt|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ae(Mr,Tt),Tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:s,Ae(Mr,Tt),Tt|=r}else i!==null?(r=i.baseLanes|s,t.memoizedState=null):r=s,Ae(Mr,Tt),Tt|=r;return pt(e,t,a,s),t.child}function ly(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function su(e,t,s,r,a){var i=Et(s)?ir:ht.current;return i=oa(t,i),Yr(t,a),s=Fh(e,t,s,r,i,a),r=kh(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bs(e,t,a)):(Me&&r&&xh(t),t.flags|=1,pt(e,t,s,a),t.child)}function Pm(e,t,s,r,a){if(Et(s)){var i=!0;ll(t)}else i=!1;if(Yr(t,a),t.stateNode===null)zo(e,t),ny(t,s,r),eu(t,s,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=Qt(d):(d=Et(s)?ir:ht.current,d=oa(t,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Sm(t,o,r,d),en=!1;var f=t.memoizedState;o.state=f,fl(t,r,o,a),c=t.memoizedState,l!==r||f!==c||_t.current||en?(typeof u=="function"&&(Zd(t,s,u,r),c=t.memoizedState),(l=en||Em(t,s,l,r,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Lv(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ss(t.type,l),o.props=d,h=t.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Qt(c):(c=Et(s)?ir:ht.current,c=oa(t,c));var v=s.getDerivedStateFromProps;(u=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Sm(t,o,r,c),en=!1,f=t.memoizedState,o.state=f,fl(t,r,o,a);var b=t.memoizedState;l!==h||f!==b||_t.current||en?(typeof v=="function"&&(Zd(t,s,v,r),b=t.memoizedState),(d=en||Em(t,s,d,r,f,b,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return nu(e,t,s,r,i,a)}function nu(e,t,s,r,a,i){ly(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&vm(t,s,!1),Bs(e,t,i);r=t.stateNode,UN.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ca(t,e.child,null,i),t.child=ca(t,null,l,i)):pt(e,t,l,i),t.memoizedState=r.state,a&&vm(t,s,!0),t.child}function cy(e){var t=e.stateNode;t.pendingContext?gm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gm(e,t.context,!1),Ch(e,t.containerInfo)}function Mm(e,t,s,r,a){return la(),vh(a),t.flags|=256,pt(e,t,s,r),t.child}var ru={dehydrated:null,treeContext:null,retryLane:0};function au(e){return{baseLanes:e,cachePool:null,transitions:null}}function dy(e,t,s){var r=t.pendingProps,a=Le.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ae(Le,a&1),e===null)return Jd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ql(o,r,0,null),e=nr(e,r,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=au(s),t.memoizedState=ru,e):Th(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return zN(e,t,o,r,l,a,s);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=bn(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=bn(l,i):(i=nr(i,o,s,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?au(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=ru,r}return i=e.child,e=i.sibling,r=bn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function Th(e,t){return t=ql({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wo(e,t,s,r){return r!==null&&vh(r),ca(t,e.child,null,s),e=Th(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zN(e,t,s,r,a,i,o){if(s)return t.flags&256?(t.flags&=-257,r=zc(Error(X(422))),wo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=ql({mode:"visible",children:r.children},a,0,null),i=nr(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ca(t,e.child,null,o),t.child.memoizedState=au(o),t.memoizedState=ru,i);if(!(t.mode&1))return wo(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(X(419)),r=zc(i,r,void 0),wo(e,t,o,r)}if(l=(o&e.childLanes)!==0,Nt||l){if(r=Xe,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Os(e,a),ds(r,e,a,-1))}return Oh(),r=zc(Error(X(421))),wo(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=tC.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Pt=gn(a.nextSibling),Rt=t,Me=!0,os=null,e!==null&&(Vt[Wt++]=Ps,Vt[Wt++]=Ms,Vt[Wt++]=or,Ps=e.id,Ms=e.overflow,or=t),t=Th(t,r.children),t.flags|=4096,t)}function Rm(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xd(e.return,t,s)}function Vc(e,t,s,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=s,i.tailMode=a)}function uy(e,t,s){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(pt(e,t,r.children,s),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rm(e,s,t);else if(e.tag===19)Rm(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ae(Le,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&ml(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Vc(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ml(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Vc(t,!0,s,null,i);break;case"together":Vc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bs(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),cr|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,s=bn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=bn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function VN(e,t,s){switch(t.tag){case 3:cy(t),la();break;case 5:Iv(t);break;case 1:Et(t.type)&&ll(t);break;case 4:Ch(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ae(ul,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Le,Le.current&1),t.flags|=128,null):s&t.child.childLanes?dy(e,t,s):(Ae(Le,Le.current&1),e=Bs(e,t,s),e!==null?e.sibling:null);Ae(Le,Le.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return uy(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ae(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,oy(e,t,s)}return Bs(e,t,s)}var hy,iu,fy,my;hy=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};iu=function(){};fy=function(e,t,s,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Kn(js.current);var i=null;switch(s){case"input":a=Fd(e,a),r=Fd(e,r),i=[];break;case"select":a=$e({},a,{value:void 0}),r=$e({},r,{value:void 0}),i=[];break;case"textarea":a=Ad(e,a),r=Ad(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=il)}Pd(s,r);var o;s=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(pi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(pi.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Te("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};my=function(e,t,s,r){s!==r&&(t.flags|=4)};function Ia(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function WN(e,t,s){var r=t.pendingProps;switch(gh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return Et(t.type)&&ol(),ot(t),null;case 3:return r=t.stateNode,da(),Pe(_t),Pe(ht),Eh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(vo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,os!==null&&(mu(os),os=null))),iu(e,t),ot(t),null;case 5:_h(t);var a=Kn(Si.current);if(s=t.type,e!==null&&t.stateNode!=null)fy(e,t,s,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return ot(t),null}if(e=Kn(js.current),vo(t)){r=t.stateNode,s=t.type;var i=t.memoizedProps;switch(r[ws]=t,r[_i]=i,e=(t.mode&1)!==0,s){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(a=0;a<Ga.length;a++)Te(Ga[a],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":Wf(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":Hf(r,i),Te("invalid",r)}Pd(s,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&go(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&go(r.textContent,l,e),a=["children",""+l]):pi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Te("scroll",r)}switch(s){case"input":lo(r),qf(r,i,!0);break;case"textarea":lo(r),Yf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=il)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zg(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(s,{is:r.is}):(e=o.createElement(s),s==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,s),e[ws]=t,e[_i]=r,hy(e,t,!1,!1),t.stateNode=e;e:{switch(o=Md(s,r),s){case"dialog":Te("cancel",e),Te("close",e),a=r;break;case"iframe":case"object":case"embed":Te("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ga.length;a++)Te(Ga[a],e);a=r;break;case"source":Te("error",e),a=r;break;case"img":case"image":case"link":Te("error",e),Te("load",e),a=r;break;case"details":Te("toggle",e),a=r;break;case"input":Wf(e,r),a=Fd(e,r),Te("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=$e({},r,{value:void 0}),Te("invalid",e);break;case"textarea":Hf(e,r),a=Ad(e,r),Te("invalid",e);break;default:a=r}Pd(s,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?qg(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Vg(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&xi(e,c):typeof c=="number"&&xi(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Te("scroll",e):c!=null&&sh(e,i,c,o))}switch(s){case"input":lo(e),qf(e,r,!1);break;case"textarea":lo(e),Yf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Nn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Vr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Vr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=il)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)my(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(s=Kn(Si.current),Kn(js.current),vo(t)){if(r=t.stateNode,s=t.memoizedProps,r[ws]=t,(i=r.nodeValue!==s)&&(e=Rt,e!==null))switch(e.tag){case 3:go(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&go(r.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[ws]=t,t.stateNode=r}return ot(t),null;case 13:if(Pe(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&Pt!==null&&t.mode&1&&!(t.flags&128))Tv(),la(),t.flags|=98560,i=!1;else if(i=vo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(X(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[ws]=t}else la(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ot(t),i=!1}else os!==null&&(mu(os),os=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Ge===0&&(Ge=3):Oh())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return da(),iu(e,t),e===null&&Ni(t.stateNode.containerInfo),ot(t),null;case 10:return bh(t.type._context),ot(t),null;case 17:return Et(t.type)&&ol(),ot(t),null;case 19:if(Pe(Le),i=t.memoizedState,i===null)return ot(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Ia(i,!1);else{if(Ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ml(e),o!==null){for(t.flags|=128,Ia(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)i=s,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ae(Le,Le.current&1|2),t.child}e=e.sibling}i.tail!==null&&qe()>ha&&(t.flags|=128,r=!0,Ia(i,!1),t.lanes=4194304)}else{if(!r)if(e=ml(o),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ia(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Me)return ot(t),null}else 2*qe()-i.renderingStartTime>ha&&s!==1073741824&&(t.flags|=128,r=!0,Ia(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(s=i.last,s!==null?s.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=qe(),t.sibling=null,s=Le.current,Ae(Le,r?s&1|2:s&1),t):(ot(t),null);case 22:case 23:return Ih(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Tt&1073741824&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function qN(e,t){switch(gh(t),t.tag){case 1:return Et(t.type)&&ol(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return da(),Pe(_t),Pe(ht),Eh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _h(t),null;case 13:if(Pe(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));la()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Le),null;case 4:return da(),null;case 10:return bh(t.type._context),null;case 22:case 23:return Ih(),null;case 24:return null;default:return null}}var bo=!1,dt=!1,HN=typeof WeakSet=="function"?WeakSet:Set,re=null;function Pr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Ve(e,t,r)}else s.current=null}function ou(e,t,s){try{s()}catch(r){Ve(e,t,r)}}var Lm=!1;function YN(e,t){if(Wd=nl,e=yv(),ph(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var v;h!==s||a!==0&&h.nodeType!==3||(l=o+a),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===e)break t;if(f===s&&++d===a&&(l=o),f===i&&++u===r&&(c=o),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(qd={focusedElem:e,selectionRange:s},nl=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,w=b.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?g:ss(t.type,g),w);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(N){Ve(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return b=Lm,Lm=!1,b}function ri(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&ou(t,s,i)}a=a.next}while(a!==r)}}function Vl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function lu(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function py(e){var t=e.alternate;t!==null&&(e.alternate=null,py(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ws],delete t[_i],delete t[Kd],delete t[kN],delete t[DN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xy(e){return e.tag===5||e.tag===3||e.tag===4}function Im(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cu(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=il));else if(r!==4&&(e=e.child,e!==null))for(cu(e,t,s),e=e.sibling;e!==null;)cu(e,t,s),e=e.sibling}function du(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(du(e,t,s),e=e.sibling;e!==null;)du(e,t,s),e=e.sibling}var et=null,as=!1;function Hs(e,t,s){for(s=s.child;s!==null;)gy(e,t,s),s=s.sibling}function gy(e,t,s){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(Rl,s)}catch{}switch(s.tag){case 5:dt||Pr(s,t);case 6:var r=et,a=as;et=null,Hs(e,t,s),et=r,as=a,et!==null&&(as?(e=et,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):et.removeChild(s.stateNode));break;case 18:et!==null&&(as?(e=et,s=s.stateNode,e.nodeType===8?Lc(e.parentNode,s):e.nodeType===1&&Lc(e,s),wi(e)):Lc(et,s.stateNode));break;case 4:r=et,a=as,et=s.stateNode.containerInfo,as=!0,Hs(e,t,s),et=r,as=a;break;case 0:case 11:case 14:case 15:if(!dt&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ou(s,t,o),a=a.next}while(a!==r)}Hs(e,t,s);break;case 1:if(!dt&&(Pr(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(l){Ve(s,t,l)}Hs(e,t,s);break;case 21:Hs(e,t,s);break;case 22:s.mode&1?(dt=(r=dt)||s.memoizedState!==null,Hs(e,t,s),dt=r):Hs(e,t,s);break;default:Hs(e,t,s)}}function Om(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new HN),t.forEach(function(r){var a=sC.bind(null,e,r);s.has(r)||(s.add(r),r.then(a,a))})}}function Zt(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var a=s[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,as=!1;break e;case 3:et=l.stateNode.containerInfo,as=!0;break e;case 4:et=l.stateNode.containerInfo,as=!0;break e}l=l.return}if(et===null)throw Error(X(160));gy(i,o,a),et=null,as=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ve(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vy(t,e),t=t.sibling}function vy(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zt(t,e),ms(e),r&4){try{ri(3,e,e.return),Vl(3,e)}catch(g){Ve(e,e.return,g)}try{ri(5,e,e.return)}catch(g){Ve(e,e.return,g)}}break;case 1:Zt(t,e),ms(e),r&512&&s!==null&&Pr(s,s.return);break;case 5:if(Zt(t,e),ms(e),r&512&&s!==null&&Pr(s,s.return),e.flags&32){var a=e.stateNode;try{xi(a,"")}catch(g){Ve(e,e.return,g)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=s!==null?s.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$g(a,i),Md(l,o);var d=Md(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?qg(a,h):u==="dangerouslySetInnerHTML"?Vg(a,h):u==="children"?xi(a,h):sh(a,u,h,d)}switch(l){case"input":kd(a,i);break;case"textarea":Ug(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Vr(a,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?Vr(a,!!i.multiple,i.defaultValue,!0):Vr(a,!!i.multiple,i.multiple?[]:"",!1))}a[_i]=i}catch(g){Ve(e,e.return,g)}}break;case 6:if(Zt(t,e),ms(e),r&4){if(e.stateNode===null)throw Error(X(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Ve(e,e.return,g)}}break;case 3:if(Zt(t,e),ms(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{wi(t.containerInfo)}catch(g){Ve(e,e.return,g)}break;case 4:Zt(t,e),ms(e);break;case 13:Zt(t,e),ms(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Rh=qe())),r&4&&Om(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(dt=(d=dt)||u,Zt(t,e),dt=d):Zt(t,e),ms(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(re=e,u=e.child;u!==null;){for(h=re=u;re!==null;){switch(f=re,v=f.child,f.tag){case 0:case 11:case 14:case 15:ri(4,f,f.return);break;case 1:Pr(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){r=f,s=f.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){Ve(r,s,g)}}break;case 5:Pr(f,f.return);break;case 22:if(f.memoizedState!==null){$m(h);continue}}v!==null?(v.return=f,re=v):$m(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Wg("display",o))}catch(g){Ve(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Ve(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Zt(t,e),ms(e),r&4&&Om(e);break;case 21:break;default:Zt(t,e),ms(e)}}function ms(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(xy(s)){var r=s;break e}s=s.return}throw Error(X(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(xi(a,""),r.flags&=-33);var i=Im(e);du(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Im(e);cu(e,l,o);break;default:throw Error(X(161))}}catch(c){Ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function KN(e,t,s){re=e,yy(e)}function yy(e,t,s){for(var r=(e.mode&1)!==0;re!==null;){var a=re,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||bo;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||dt;l=bo;var d=dt;if(bo=o,(dt=c)&&!d)for(re=a;re!==null;)o=re,c=o.child,o.tag===22&&o.memoizedState!==null?Um(a):c!==null?(c.return=o,re=c):Um(a);for(;i!==null;)re=i,yy(i),i=i.sibling;re=a,bo=l,dt=d}Bm(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,re=i):Bm(e)}}function Bm(e){for(;re!==null;){var t=re;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||Vl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!dt)if(s===null)r.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:ss(t.type,s.memoizedProps);r.componentDidUpdate(a,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Nm(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Nm(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&wi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}dt||t.flags&512&&lu(t)}catch(f){Ve(t,t.return,f)}}if(t===e){re=null;break}if(s=t.sibling,s!==null){s.return=t.return,re=s;break}re=t.return}}function $m(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var s=t.sibling;if(s!==null){s.return=t.return,re=s;break}re=t.return}}function Um(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Vl(4,t)}catch(c){Ve(t,s,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Ve(t,a,c)}}var i=t.return;try{lu(t)}catch(c){Ve(t,i,c)}break;case 5:var o=t.return;try{lu(t)}catch(c){Ve(t,o,c)}}}catch(c){Ve(t,t.return,c)}if(t===e){re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,re=l;break}re=t.return}}var GN=Math.ceil,gl=Us.ReactCurrentDispatcher,Ph=Us.ReactCurrentOwner,Kt=Us.ReactCurrentBatchConfig,Ce=0,Xe=null,Ye=null,tt=0,Tt=0,Mr=Sn(0),Ge=0,Ai=null,cr=0,Wl=0,Mh=0,ai=null,jt=null,Rh=0,ha=1/0,Ds=null,vl=!1,uu=null,yn=null,jo=!1,hn=null,yl=0,ii=0,hu=null,Vo=-1,Wo=0;function vt(){return Ce&6?qe():Vo!==-1?Vo:Vo=qe()}function wn(e){return e.mode&1?Ce&2&&tt!==0?tt&-tt:TN.transition!==null?(Wo===0&&(Wo=nv()),Wo):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:dv(e.type)),e):1}function ds(e,t,s,r){if(50<ii)throw ii=0,hu=null,Error(X(185));Hi(e,s,r),(!(Ce&2)||e!==Xe)&&(e===Xe&&(!(Ce&2)&&(Wl|=s),Ge===4&&nn(e,tt)),St(e,r),s===1&&Ce===0&&!(t.mode&1)&&(ha=qe()+500,$l&&Fn()))}function St(e,t){var s=e.callbackNode;Tj(e,t);var r=sl(e,e===Xe?tt:0);if(r===0)s!==null&&Qf(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&Qf(s),t===1)e.tag===0?AN(zm.bind(null,e)):kv(zm.bind(null,e)),SN(function(){!(Ce&6)&&Fn()}),s=null;else{switch(rv(r)){case 1:s=oh;break;case 4:s=tv;break;case 16:s=tl;break;case 536870912:s=sv;break;default:s=tl}s=Sy(s,wy.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function wy(e,t){if(Vo=-1,Wo=0,Ce&6)throw Error(X(327));var s=e.callbackNode;if(Kr()&&e.callbackNode!==s)return null;var r=sl(e,e===Xe?tt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=wl(e,r);else{t=r;var a=Ce;Ce|=2;var i=jy();(Xe!==e||tt!==t)&&(Ds=null,ha=qe()+500,sr(e,t));do try{XN();break}catch(l){by(e,l)}while(!0);wh(),gl.current=i,Ce=a,Ye!==null?t=0:(Xe=null,tt=0,t=Ge)}if(t!==0){if(t===2&&(a=Bd(e),a!==0&&(r=a,t=fu(e,a))),t===1)throw s=Ai,sr(e,0),nn(e,r),St(e,qe()),s;if(t===6)nn(e,r);else{if(a=e.current.alternate,!(r&30)&&!QN(a)&&(t=wl(e,r),t===2&&(i=Bd(e),i!==0&&(r=i,t=fu(e,i))),t===1))throw s=Ai,sr(e,0),nn(e,r),St(e,qe()),s;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:Un(e,jt,Ds);break;case 3:if(nn(e,r),(r&130023424)===r&&(t=Rh+500-qe(),10<t)){if(sl(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){vt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Yd(Un.bind(null,e,jt,Ds),t);break}Un(e,jt,Ds);break;case 4:if(nn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-cs(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GN(r/1960))-r,10<r){e.timeoutHandle=Yd(Un.bind(null,e,jt,Ds),r);break}Un(e,jt,Ds);break;case 5:Un(e,jt,Ds);break;default:throw Error(X(329))}}}return St(e,qe()),e.callbackNode===s?wy.bind(null,e):null}function fu(e,t){var s=ai;return e.current.memoizedState.isDehydrated&&(sr(e,t).flags|=256),e=wl(e,t),e!==2&&(t=jt,jt=s,t!==null&&mu(t)),e}function mu(e){jt===null?jt=e:jt.push.apply(jt,e)}function QN(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var a=s[r],i=a.getSnapshot;a=a.value;try{if(!us(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nn(e,t){for(t&=~Mh,t&=~Wl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-cs(t),r=1<<s;e[s]=-1,t&=~r}}function zm(e){if(Ce&6)throw Error(X(327));Kr();var t=sl(e,0);if(!(t&1))return St(e,qe()),null;var s=wl(e,t);if(e.tag!==0&&s===2){var r=Bd(e);r!==0&&(t=r,s=fu(e,r))}if(s===1)throw s=Ai,sr(e,0),nn(e,t),St(e,qe()),s;if(s===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Un(e,jt,Ds),St(e,qe()),null}function Lh(e,t){var s=Ce;Ce|=1;try{return e(t)}finally{Ce=s,Ce===0&&(ha=qe()+500,$l&&Fn())}}function dr(e){hn!==null&&hn.tag===0&&!(Ce&6)&&Kr();var t=Ce;Ce|=1;var s=Kt.transition,r=Fe;try{if(Kt.transition=null,Fe=1,e)return e()}finally{Fe=r,Kt.transition=s,Ce=t,!(Ce&6)&&Fn()}}function Ih(){Tt=Mr.current,Pe(Mr)}function sr(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,EN(s)),Ye!==null)for(s=Ye.return;s!==null;){var r=s;switch(gh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ol();break;case 3:da(),Pe(_t),Pe(ht),Eh();break;case 5:_h(r);break;case 4:da();break;case 13:Pe(Le);break;case 19:Pe(Le);break;case 10:bh(r.type._context);break;case 22:case 23:Ih()}s=s.return}if(Xe=e,Ye=e=bn(e.current,null),tt=Tt=t,Ge=0,Ai=null,Mh=Wl=cr=0,jt=ai=null,Yn!==null){for(t=0;t<Yn.length;t++)if(s=Yn[t],r=s.interleaved,r!==null){s.interleaved=null;var a=r.next,i=s.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}s.pending=r}Yn=null}return e}function by(e,t){do{var s=Ye;try{if(wh(),$o.current=xl,pl){for(var r=Oe.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}pl=!1}if(lr=0,Je=Ke=Oe=null,ni=!1,Fi=0,Ph.current=null,s===null||s.return===null){Ge=1,Ai=t,Ye=null;break}e:{var i=e,o=s.return,l=s,c=t;if(t=tt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var v=km(o);if(v!==null){v.flags&=-257,Dm(v,o,l,i,t),v.mode&1&&Fm(i,d,t),t=v,c=d;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){Fm(i,d,t),Oh();break e}c=Error(X(426))}}else if(Me&&l.mode&1){var w=km(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Dm(w,o,l,i,t),vh(ua(c,l));break e}}i=c=ua(c,l),Ge!==4&&(Ge=2),ai===null?ai=[i]:ai.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=ry(i,c,t);jm(i,p);break e;case 1:l=c;var m=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(yn===null||!yn.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=ay(i,l,t);jm(i,N);break e}}i=i.return}while(i!==null)}Cy(s)}catch(j){t=j,Ye===s&&s!==null&&(Ye=s=s.return);continue}break}while(!0)}function jy(){var e=gl.current;return gl.current=xl,e===null?xl:e}function Oh(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Xe===null||!(cr&268435455)&&!(Wl&268435455)||nn(Xe,tt)}function wl(e,t){var s=Ce;Ce|=2;var r=jy();(Xe!==e||tt!==t)&&(Ds=null,sr(e,t));do try{JN();break}catch(a){by(e,a)}while(!0);if(wh(),Ce=s,gl.current=r,Ye!==null)throw Error(X(261));return Xe=null,tt=0,Ge}function JN(){for(;Ye!==null;)Ny(Ye)}function XN(){for(;Ye!==null&&!Nj();)Ny(Ye)}function Ny(e){var t=Ey(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?Cy(e):Ye=t,Ph.current=null}function Cy(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=qN(s,t),s!==null){s.flags&=32767,Ye=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ge=6,Ye=null;return}}else if(s=WN(s,t,Tt),s!==null){Ye=s;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);Ge===0&&(Ge=5)}function Un(e,t,s){var r=Fe,a=Kt.transition;try{Kt.transition=null,Fe=1,ZN(e,t,s,r)}finally{Kt.transition=a,Fe=r}return null}function ZN(e,t,s,r){do Kr();while(hn!==null);if(Ce&6)throw Error(X(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(Pj(e,i),e===Xe&&(Ye=Xe=null,tt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||jo||(jo=!0,Sy(tl,function(){return Kr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var o=Fe;Fe=1;var l=Ce;Ce|=4,Ph.current=null,YN(e,s),vy(s,e),yN(qd),nl=!!Wd,qd=Wd=null,e.current=s,KN(s),Cj(),Ce=l,Fe=o,Kt.transition=i}else e.current=s;if(jo&&(jo=!1,hn=e,yl=a),i=e.pendingLanes,i===0&&(yn=null),Sj(s.stateNode),St(e,qe()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],r(a.value,{componentStack:a.stack,digest:a.digest});if(vl)throw vl=!1,e=uu,uu=null,e;return yl&1&&e.tag!==0&&Kr(),i=e.pendingLanes,i&1?e===hu?ii++:(ii=0,hu=e):ii=0,Fn(),null}function Kr(){if(hn!==null){var e=rv(yl),t=Kt.transition,s=Fe;try{if(Kt.transition=null,Fe=16>e?16:e,hn===null)var r=!1;else{if(e=hn,hn=null,yl=0,Ce&6)throw Error(X(331));var a=Ce;for(Ce|=4,re=e.current;re!==null;){var i=re,o=i.child;if(re.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(re=d;re!==null;){var u=re;switch(u.tag){case 0:case 11:case 15:ri(8,u,i)}var h=u.child;if(h!==null)h.return=u,re=h;else for(;re!==null;){u=re;var f=u.sibling,v=u.return;if(py(u),u===d){re=null;break}if(f!==null){f.return=v,re=f;break}re=v}}}var b=i.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,re=o;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ri(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,re=p;break e}re=i.return}}var m=e.current;for(re=m;re!==null;){o=re;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,re=x;else e:for(o=m;re!==null;){if(l=re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vl(9,l)}}catch(j){Ve(l,l.return,j)}if(l===o){re=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,re=N;break e}re=l.return}}if(Ce=a,Fn(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(Rl,e)}catch{}r=!0}return r}finally{Fe=s,Kt.transition=t}}return!1}function Vm(e,t,s){t=ua(s,t),t=ry(e,t,1),e=vn(e,t,1),t=vt(),e!==null&&(Hi(e,1,t),St(e,t))}function Ve(e,t,s){if(e.tag===3)Vm(e,e,s);else for(;t!==null;){if(t.tag===3){Vm(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yn===null||!yn.has(r))){e=ua(s,e),e=ay(t,e,1),t=vn(t,e,1),e=vt(),t!==null&&(Hi(t,1,e),St(t,e));break}}t=t.return}}function eC(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=vt(),e.pingedLanes|=e.suspendedLanes&s,Xe===e&&(tt&s)===s&&(Ge===4||Ge===3&&(tt&130023424)===tt&&500>qe()-Rh?sr(e,0):Mh|=s),St(e,t)}function _y(e,t){t===0&&(e.mode&1?(t=ho,ho<<=1,!(ho&130023424)&&(ho=4194304)):t=1);var s=vt();e=Os(e,t),e!==null&&(Hi(e,t,s),St(e,s))}function tC(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),_y(e,s)}function sC(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),_y(e,s)}var Ey;Ey=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||_t.current)Nt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Nt=!1,VN(e,t,s);Nt=!!(e.flags&131072)}else Nt=!1,Me&&t.flags&1048576&&Dv(t,dl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var a=oa(t,ht.current);Yr(t,s),a=Fh(null,t,r,e,a,s);var i=kh();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(r)?(i=!0,ll(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Nh(t),a.updater=zl,t.stateNode=a,a._reactInternals=t,eu(t,r,e,s),t=nu(null,t,r,!0,i,s)):(t.tag=0,Me&&i&&xh(t),pt(null,t,a,s),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=rC(r),e=ss(r,e),a){case 0:t=su(null,t,r,e,s);break e;case 1:t=Pm(null,t,r,e,s);break e;case 11:t=Am(null,t,r,e,s);break e;case 14:t=Tm(null,t,r,ss(r.type,e),s);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ss(r,a),su(e,t,r,a,s);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ss(r,a),Pm(e,t,r,a,s);case 3:e:{if(cy(t),e===null)throw Error(X(387));r=t.pendingProps,i=t.memoizedState,a=i.element,Lv(e,t),fl(t,r,null,s);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ua(Error(X(423)),t),t=Mm(e,t,r,s,a);break e}else if(r!==a){a=ua(Error(X(424)),t),t=Mm(e,t,r,s,a);break e}else for(Pt=gn(t.stateNode.containerInfo.firstChild),Rt=t,Me=!0,os=null,s=Mv(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(la(),r===a){t=Bs(e,t,s);break e}pt(e,t,r,s)}t=t.child}return t;case 5:return Iv(t),e===null&&Jd(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Hd(r,a)?o=null:i!==null&&Hd(r,i)&&(t.flags|=32),ly(e,t),pt(e,t,o,s),t.child;case 6:return e===null&&Jd(t),null;case 13:return dy(e,t,s);case 4:return Ch(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ca(t,null,r,s):pt(e,t,r,s),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ss(r,a),Am(e,t,r,a,s);case 7:return pt(e,t,t.pendingProps,s),t.child;case 8:return pt(e,t,t.pendingProps.children,s),t.child;case 12:return pt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ae(ul,r._currentValue),r._currentValue=o,i!==null)if(us(i.value,o)){if(i.children===a.children&&!_t.current){t=Bs(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Rs(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),Xd(i.return,s,t),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Xd(o,s,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pt(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Yr(t,s),a=Qt(a),r=r(a),t.flags|=1,pt(e,t,r,s),t.child;case 14:return r=t.type,a=ss(r,t.pendingProps),a=ss(r.type,a),Tm(e,t,r,a,s);case 15:return iy(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ss(r,a),zo(e,t),t.tag=1,Et(r)?(e=!0,ll(t)):e=!1,Yr(t,s),ny(t,r,a),eu(t,r,a,s),nu(null,t,r,!0,e,s);case 19:return uy(e,t,s);case 22:return oy(e,t,s)}throw Error(X(156,t.tag))};function Sy(e,t){return ev(e,t)}function nC(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,t,s,r){return new nC(e,t,s,r)}function Bh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rC(e){if(typeof e=="function")return Bh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rh)return 11;if(e===ah)return 14}return 2}function bn(e,t){var s=e.alternate;return s===null?(s=Ht(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function qo(e,t,s,r,a,i){var o=2;if(r=e,typeof e=="function")Bh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Cr:return nr(s.children,a,i,t);case nh:o=8,a|=8;break;case Cd:return e=Ht(12,s,t,a|2),e.elementType=Cd,e.lanes=i,e;case _d:return e=Ht(13,s,t,a),e.elementType=_d,e.lanes=i,e;case Ed:return e=Ht(19,s,t,a),e.elementType=Ed,e.lanes=i,e;case Ig:return ql(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rg:o=10;break e;case Lg:o=9;break e;case rh:o=11;break e;case ah:o=14;break e;case Zs:o=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Ht(o,s,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function nr(e,t,s,r){return e=Ht(7,e,r,t),e.lanes=s,e}function ql(e,t,s,r){return e=Ht(22,e,r,t),e.elementType=Ig,e.lanes=s,e.stateNode={isHidden:!1},e}function Wc(e,t,s){return e=Ht(6,e,null,t),e.lanes=s,e}function qc(e,t,s){return t=Ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function aC(e,t,s,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_c(0),this.expirationTimes=_c(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_c(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function $h(e,t,s,r,a,i,o,l,c){return e=new aC(e,t,s,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ht(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nh(i),e}function iC(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function Fy(e){if(!e)return Cn;e=e._reactInternals;e:{if(mr(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var s=e.type;if(Et(s))return Fv(e,s,t)}return t}function ky(e,t,s,r,a,i,o,l,c){return e=$h(s,r,!0,e,a,i,o,l,c),e.context=Fy(null),s=e.current,r=vt(),a=wn(s),i=Rs(r,a),i.callback=t??null,vn(s,i,a),e.current.lanes=a,Hi(e,a,r),St(e,r),e}function Hl(e,t,s,r){var a=t.current,i=vt(),o=wn(a);return s=Fy(s),t.context===null?t.context=s:t.pendingContext=s,t=Rs(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=vn(a,t,o),e!==null&&(ds(e,a,o,i),Bo(e,a,o)),o}function bl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Uh(e,t){Wm(e,t),(e=e.alternate)&&Wm(e,t)}function oC(){return null}var Dy=typeof reportError=="function"?reportError:function(e){console.error(e)};function zh(e){this._internalRoot=e}Yl.prototype.render=zh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));Hl(e,t,null,null)};Yl.prototype.unmount=zh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dr(function(){Hl(null,e,null,null)}),t[Is]=null}};function Yl(e){this._internalRoot=e}Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=ov();e={blockedOn:null,target:e,priority:t};for(var s=0;s<sn.length&&t!==0&&t<sn[s].priority;s++);sn.splice(s,0,e),s===0&&cv(e)}};function Vh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qm(){}function lC(e,t,s,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=bl(o);i.call(d)}}var o=ky(t,r,e,0,null,!1,!1,"",qm);return e._reactRootContainer=o,e[Is]=o.current,Ni(e.nodeType===8?e.parentNode:e),dr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var d=bl(c);l.call(d)}}var c=$h(e,0,!1,null,null,!1,!1,"",qm);return e._reactRootContainer=c,e[Is]=c.current,Ni(e.nodeType===8?e.parentNode:e),dr(function(){Hl(t,c,s,r)}),c}function Gl(e,t,s,r,a){var i=s._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=bl(o);l.call(c)}}Hl(t,o,e,a)}else o=lC(s,t,e,a,r);return bl(o)}av=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ka(t.pendingLanes);s!==0&&(lh(t,s|1),St(t,qe()),!(Ce&6)&&(ha=qe()+500,Fn()))}break;case 13:dr(function(){var r=Os(e,1);if(r!==null){var a=vt();ds(r,e,1,a)}}),Uh(e,1)}};ch=function(e){if(e.tag===13){var t=Os(e,134217728);if(t!==null){var s=vt();ds(t,e,134217728,s)}Uh(e,134217728)}};iv=function(e){if(e.tag===13){var t=wn(e),s=Os(e,t);if(s!==null){var r=vt();ds(s,e,t,r)}Uh(e,t)}};ov=function(){return Fe};lv=function(e,t){var s=Fe;try{return Fe=e,t()}finally{Fe=s}};Ld=function(e,t,s){switch(t){case"input":if(kd(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var a=Bl(r);if(!a)throw Error(X(90));Bg(r),kd(r,a)}}}break;case"textarea":Ug(e,s);break;case"select":t=s.value,t!=null&&Vr(e,!!s.multiple,t,!1)}};Kg=Lh;Gg=dr;var cC={usingClientEntryPoint:!1,Events:[Ki,Fr,Bl,Hg,Yg,Lh]},Oa={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dC={bundleType:Oa.bundleType,version:Oa.version,rendererPackageName:Oa.rendererPackageName,rendererConfig:Oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Us.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xg(e),e===null?null:e.stateNode},findFiberByHostInstance:Oa.findFiberByHostInstance||oC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var No=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!No.isDisabled&&No.supportsFiber)try{Rl=No.inject(dC),bs=No}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cC;It.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vh(t))throw Error(X(200));return iC(e,t,null,s)};It.createRoot=function(e,t){if(!Vh(e))throw Error(X(299));var s=!1,r="",a=Dy;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=$h(e,1,!1,null,null,s,!1,r,a),e[Is]=t.current,Ni(e.nodeType===8?e.parentNode:e),new zh(t)};It.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Xg(t),e=e===null?null:e.stateNode,e};It.flushSync=function(e){return dr(e)};It.hydrate=function(e,t,s){if(!Kl(t))throw Error(X(200));return Gl(null,e,t,!0,s)};It.hydrateRoot=function(e,t,s){if(!Vh(e))throw Error(X(405));var r=s!=null&&s.hydratedSources||null,a=!1,i="",o=Dy;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=ky(t,null,e,1,s??null,a,!1,i,o),e[Is]=t.current,Ni(e),r)for(e=0;e<r.length;e++)s=r[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new Yl(t)};It.render=function(e,t,s){if(!Kl(t))throw Error(X(200));return Gl(null,e,t,!1,s)};It.unmountComponentAtNode=function(e){if(!Kl(e))throw Error(X(40));return e._reactRootContainer?(dr(function(){Gl(null,null,e,!1,function(){e._reactRootContainer=null,e[Is]=null})}),!0):!1};It.unstable_batchedUpdates=Lh;It.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!Kl(s))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return Gl(e,t,s,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function Ay(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ay)}catch(e){console.error(e)}}Ay(),Ag.exports=It;var uC=Ag.exports,Hm=uC;jd.createRoot=Hm.createRoot,jd.hydrateRoot=Hm.hydrateRoot;var Ql=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jl=typeof window>"u"||"Deno"in globalThis;function ns(){}function hC(e,t){return typeof e=="function"?e(t):e}function fC(e){return typeof e=="number"&&e>=0&&e!==1/0}function mC(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ym(e,t){return typeof e=="function"?e(t):e}function pC(e,t){return typeof e=="function"?e(t):e}function Km(e,t){const{type:s="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Wh(o,t.options))return!1}else if(!Pi(t.queryKey,o))return!1}if(s!=="all"){const c=t.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function Gm(e,t){const{exact:s,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(Ti(t.options.mutationKey)!==Ti(i))return!1}else if(!Pi(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function Wh(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ti)(e)}function Ti(e){return JSON.stringify(e,(t,s)=>pu(s)?Object.keys(s).sort().reduce((r,a)=>(r[a]=s[a],r),{}):s)}function Pi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(s=>!Pi(e[s],t[s])):!1}function Ty(e,t){if(e===t)return e;const s=Qm(e)&&Qm(t);if(s||pu(e)&&pu(t)){const r=s?e:Object.keys(e),a=r.length,i=s?t:Object.keys(t),o=i.length,l=s?[]:{};let c=0;for(let d=0;d<o;d++){const u=s?d:i[d];(!s&&r.includes(u)||s)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=Ty(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===o&&c===a?e:l}return t}function Qm(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function pu(e){if(!Jm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!Jm(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Jm(e){return Object.prototype.toString.call(e)==="[object Object]"}function xC(e){return new Promise(t=>{setTimeout(t,e)})}function gC(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Ty(e,t):t}function vC(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function yC(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var Py=Symbol(),My=(e,t)=>!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Py?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn,Xn,an,Jr,ug,wC=(ug=class extends Ql{constructor(){super();_e(this,Xn);_e(this,an);_e(this,Jr);me(this,Jr,t=>{if(!Jl&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){Y(this,an)||this.setEventListener(Y(this,Jr))}onUnsubscribe(){var t;this.hasListeners()||((t=Y(this,an))==null||t.call(this),me(this,an,void 0))}setEventListener(t){var s;me(this,Jr,t),(s=Y(this,an))==null||s.call(this),me(this,an,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Y(this,Xn)!==t&&(me(this,Xn,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof Y(this,Xn)=="boolean"?Y(this,Xn):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Xn=new WeakMap,an=new WeakMap,Jr=new WeakMap,ug),Ry=new wC,Xr,on,Zr,hg,bC=(hg=class extends Ql{constructor(){super();_e(this,Xr,!0);_e(this,on);_e(this,Zr);me(this,Zr,t=>{if(!Jl&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){Y(this,on)||this.setEventListener(Y(this,Zr))}onUnsubscribe(){var t;this.hasListeners()||((t=Y(this,on))==null||t.call(this),me(this,on,void 0))}setEventListener(t){var s;me(this,Zr,t),(s=Y(this,on))==null||s.call(this),me(this,on,t(this.setOnline.bind(this)))}setOnline(t){Y(this,Xr)!==t&&(me(this,Xr,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Y(this,Xr)}},Xr=new WeakMap,on=new WeakMap,Zr=new WeakMap,hg),jl=new bC;function jC(e){return Math.min(1e3*2**e,3e4)}function Ly(e){return(e??"online")==="online"?jl.isOnline():!0}var Iy=class{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Hc(e){return e instanceof Iy}function Oy(e){let t=!1,s=0,r=!1,a,i,o;const l=new Promise((p,m)=>{i=p,o=m}),c=p=>{var m;r||(b(new Iy(p)),(m=e.abort)==null||m.call(e))},d=()=>{t=!0},u=()=>{t=!1},h=()=>Ry.isFocused()&&(e.networkMode==="always"||jl.isOnline())&&e.canRun(),f=()=>Ly(e.networkMode)&&e.canRun(),v=p=>{var m;r||(r=!0,(m=e.onSuccess)==null||m.call(e,p),a==null||a(),i(p))},b=p=>{var m;r||(r=!0,(m=e.onError)==null||m.call(e,p),a==null||a(),o(p))},g=()=>new Promise(p=>{var m;a=x=>{(r||h())&&p(x)},(m=e.onPause)==null||m.call(e)}).then(()=>{var p;a=void 0,r||(p=e.onContinue)==null||p.call(e)}),w=()=>{if(r)return;let p;const m=s===0?e.initialPromise:void 0;try{p=m??e.fn()}catch(x){p=Promise.reject(x)}Promise.resolve(p).then(v).catch(x=>{var _;if(r)return;const N=e.retry??(Jl?0:3),j=e.retryDelay??jC,C=typeof j=="function"?j(s,x):j,E=N===!0||typeof N=="number"&&s<N||typeof N=="function"&&N(s,x);if(t||!E){b(x);return}s++,(_=e.onFail)==null||_.call(e,s,x),xC(C).then(()=>h()?void 0:g()).then(()=>{t?b(x):w()})})};return{promise:l,cancel:c,continue:()=>(a==null||a(),l),cancelRetry:d,continueRetry:u,canStart:f,start:()=>(f()?w():g().then(w),l)}}function NC(){let e=[],t=0,s=f=>{f()},r=f=>{f()},a=f=>setTimeout(f,0);const i=f=>{a=f},o=f=>{let v;t++;try{v=f()}finally{t--,t||d()}return v},l=f=>{t?e.push(f):a(()=>{s(f)})},c=f=>(...v)=>{l(()=>{f(...v)})},d=()=>{const f=e;e=[],f.length&&a(()=>{r(()=>{f.forEach(v=>{s(v)})})})};return{batch:o,batchCalls:c,schedule:l,setNotifyFunction:f=>{s=f},setBatchNotifyFunction:f=>{r=f},setScheduler:i}}var xt=NC(),Zn,fg,By=(fg=class{constructor(){_e(this,Zn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fC(this.gcTime)&&me(this,Zn,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Jl?1/0:5*60*1e3))}clearGcTimeout(){Y(this,Zn)&&(clearTimeout(Y(this,Zn)),me(this,Zn,void 0))}},Zn=new WeakMap,fg),ea,ta,zt,lt,Vi,er,rs,ks,mg,CC=(mg=class extends By{constructor(t){super();_e(this,rs);_e(this,ea);_e(this,ta);_e(this,zt);_e(this,lt);_e(this,Vi);_e(this,er);me(this,er,!1),me(this,Vi,t.defaultOptions),this.setOptions(t.options),this.observers=[],me(this,zt,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,me(this,ea,t.state||EC(this.options)),this.state=Y(this,ea),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Y(this,lt))==null?void 0:t.promise}setOptions(t){this.options={...Y(this,Vi),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Y(this,zt).remove(this)}setData(t,s){const r=gC(this.state.data,t,this.options);return at(this,rs,ks).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(t,s){at(this,rs,ks).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var r,a;const s=(r=Y(this,lt))==null?void 0:r.promise;return(a=Y(this,lt))==null||a.cancel(t),s?s.then(ns).catch(ns):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Y(this,ea))}isActive(){return this.observers.some(t=>pC(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!mC(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=Y(this,lt))==null||s.continue()}onOnline(){var s;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=Y(this,lt))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Y(this,zt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(Y(this,lt)&&(Y(this,er)?Y(this,lt).cancel({revert:!0}):Y(this,lt).cancelRetry()),this.scheduleGc()),Y(this,zt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||at(this,rs,ks).call(this,{type:"invalidate"})}fetch(t,s){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(Y(this,lt))return Y(this,lt).continueRetry(),Y(this,lt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(me(this,er,!0),r.signal)})},i=()=>{const h=My(this.options,s),f={queryKey:this.queryKey,meta:this.meta};return a(f),me(this,er,!1),this.options.persister?this.options.persister(h,f,this):h(f)},o={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),me(this,ta,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&at(this,rs,ks).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var f,v,b,g;Hc(h)&&h.silent||at(this,rs,ks).call(this,{type:"error",error:h}),Hc(h)||((v=(f=Y(this,zt).config).onError)==null||v.call(f,h,this),(g=(b=Y(this,zt).config).onSettled)==null||g.call(b,this.state.data,h,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return me(this,lt,Oy({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,v,b,g;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}this.setData(h),(v=(f=Y(this,zt).config).onSuccess)==null||v.call(f,h,this),(g=(b=Y(this,zt).config).onSettled)==null||g.call(b,h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:l,onFail:(h,f)=>{at(this,rs,ks).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{at(this,rs,ks).call(this,{type:"pause"})},onContinue:()=>{at(this,rs,ks).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Y(this,lt).start()}},ea=new WeakMap,ta=new WeakMap,zt=new WeakMap,lt=new WeakMap,Vi=new WeakMap,er=new WeakMap,rs=new WeakSet,ks=function(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,..._C(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Hc(a)&&a.revert&&Y(this,ta)?{...Y(this,ta),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),xt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Y(this,zt).notify({query:this,type:"updated",action:t})})},mg);function _C(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ly(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function EC(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var gs,pg,SC=(pg=class extends Ql{constructor(t={}){super();_e(this,gs);this.config=t,me(this,gs,new Map)}build(t,s,r){const a=s.queryKey,i=s.queryHash??Wh(a,s);let o=this.get(i);return o||(o=new CC({cache:this,queryKey:a,queryHash:i,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Y(this,gs).has(t.queryHash)||(Y(this,gs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=Y(this,gs).get(t.queryHash);s&&(t.destroy(),s===t&&Y(this,gs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){xt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Y(this,gs).get(t)}getAll(){return[...Y(this,gs).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Km(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>Km(t,r)):s}notify(t){xt.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){xt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){xt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},gs=new WeakMap,pg),vs,mt,tr,ys,Ks,xg,FC=(xg=class extends By{constructor(t){super();_e(this,ys);_e(this,vs);_e(this,mt);_e(this,tr);this.mutationId=t.mutationId,me(this,mt,t.mutationCache),me(this,vs,[]),this.state=t.state||kC(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Y(this,vs).includes(t)||(Y(this,vs).push(t),this.clearGcTimeout(),Y(this,mt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){me(this,vs,Y(this,vs).filter(s=>s!==t)),this.scheduleGc(),Y(this,mt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Y(this,vs).length||(this.state.status==="pending"?this.scheduleGc():Y(this,mt).remove(this))}continue(){var t;return((t=Y(this,tr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,o,l,c,d,u,h,f,v,b,g,w,p,m,x,N,j,C,E;me(this,tr,Oy({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(_,S)=>{at(this,ys,Ks).call(this,{type:"failed",failureCount:_,error:S})},onPause:()=>{at(this,ys,Ks).call(this,{type:"pause"})},onContinue:()=>{at(this,ys,Ks).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Y(this,mt).canRun(this)}));const s=this.state.status==="pending",r=!Y(this,tr).canStart();try{if(!s){at(this,ys,Ks).call(this,{type:"pending",variables:t,isPaused:r}),await((i=(a=Y(this,mt).config).onMutate)==null?void 0:i.call(a,t,this));const S=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));S!==this.state.context&&at(this,ys,Ks).call(this,{type:"pending",context:S,variables:t,isPaused:r})}const _=await Y(this,tr).start();return await((d=(c=Y(this,mt).config).onSuccess)==null?void 0:d.call(c,_,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,_,t,this.state.context)),await((v=(f=Y(this,mt).config).onSettled)==null?void 0:v.call(f,_,null,this.state.variables,this.state.context,this)),await((g=(b=this.options).onSettled)==null?void 0:g.call(b,_,null,t,this.state.context)),at(this,ys,Ks).call(this,{type:"success",data:_}),_}catch(_){try{throw await((p=(w=Y(this,mt).config).onError)==null?void 0:p.call(w,_,t,this.state.context,this)),await((x=(m=this.options).onError)==null?void 0:x.call(m,_,t,this.state.context)),await((j=(N=Y(this,mt).config).onSettled)==null?void 0:j.call(N,void 0,_,this.state.variables,this.state.context,this)),await((E=(C=this.options).onSettled)==null?void 0:E.call(C,void 0,_,t,this.state.context)),_}finally{at(this,ys,Ks).call(this,{type:"error",error:_})}}finally{Y(this,mt).runNext(this)}}},vs=new WeakMap,mt=new WeakMap,tr=new WeakMap,ys=new WeakSet,Ks=function(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),xt.batch(()=>{Y(this,vs).forEach(r=>{r.onMutationUpdate(t)}),Y(this,mt).notify({mutation:this,type:"updated",action:t})})},xg);function kC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var At,Wi,gg,DC=(gg=class extends Ql{constructor(t={}){super();_e(this,At);_e(this,Wi);this.config=t,me(this,At,new Map),me(this,Wi,Date.now())}build(t,s,r){const a=new FC({mutationCache:this,mutationId:++ao(this,Wi)._,options:t.defaultMutationOptions(s),state:r});return this.add(a),a}add(t){const s=Co(t),r=Y(this,At).get(s)??[];r.push(t),Y(this,At).set(s,r),this.notify({type:"added",mutation:t})}remove(t){var r;const s=Co(t);if(Y(this,At).has(s)){const a=(r=Y(this,At).get(s))==null?void 0:r.filter(i=>i!==t);a&&(a.length===0?Y(this,At).delete(s):Y(this,At).set(s,a))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const s=(r=Y(this,At).get(Co(t)))==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===t}runNext(t){var r;const s=(r=Y(this,At).get(Co(t)))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}clear(){xt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...Y(this,At).values()].flat()}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Gm(s,r))}findAll(t={}){return this.getAll().filter(s=>Gm(t,s))}notify(t){xt.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return xt.batch(()=>Promise.all(t.map(s=>s.continue().catch(ns))))}},At=new WeakMap,Wi=new WeakMap,gg);function Co(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function AC(e){return{onFetch:(t,s)=>{const r=async()=>{var b,g,w,p,m;const a=t.options,i=(w=(g=(b=t.fetchOptions)==null?void 0:b.meta)==null?void 0:g.fetchMore)==null?void 0:w.direction,o=((p=t.state.data)==null?void 0:p.pages)||[],l=((m=t.state.data)==null?void 0:m.pageParams)||[],c={pages:[],pageParams:[]};let d=!1;const u=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?d=!0:t.signal.addEventListener("abort",()=>{d=!0}),t.signal)})},h=My(t.options,t.fetchOptions),f=async(x,N,j)=>{if(d)return Promise.reject();if(N==null&&x.pages.length)return Promise.resolve(x);const C={queryKey:t.queryKey,pageParam:N,direction:j?"backward":"forward",meta:t.options.meta};u(C);const E=await h(C),{maxPages:_}=t.options,S=j?yC:vC;return{pages:S(x.pages,E,_),pageParams:S(x.pageParams,N,_)}};let v;if(i&&o.length){const x=i==="backward",N=x?TC:Xm,j={pages:o,pageParams:l},C=N(a,j);v=await f(j,C,x)}else{v=await f(c,l[0]??a.initialPageParam);const x=e??o.length;for(let N=1;N<x;N++){const j=Xm(a,v);v=await f(v,j)}}return v};t.options.persister?t.fetchFn=()=>{var a,i;return(i=(a=t.options).persister)==null?void 0:i.call(a,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=r}}}function Xm(e,{pages:t,pageParams:s}){const r=t.length-1;return e.getNextPageParam(t[r],t,s[r],s)}function TC(e,{pages:t,pageParams:s}){var r;return(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,s[0],s)}var Ue,ln,cn,sa,na,dn,ra,aa,vg,PC=(vg=class{constructor(e={}){_e(this,Ue);_e(this,ln);_e(this,cn);_e(this,sa);_e(this,na);_e(this,dn);_e(this,ra);_e(this,aa);me(this,Ue,e.queryCache||new SC),me(this,ln,e.mutationCache||new DC),me(this,cn,e.defaultOptions||{}),me(this,sa,new Map),me(this,na,new Map),me(this,dn,0)}mount(){ao(this,dn)._++,Y(this,dn)===1&&(me(this,ra,Ry.subscribe(async e=>{e&&(await this.resumePausedMutations(),Y(this,Ue).onFocus())})),me(this,aa,jl.subscribe(async e=>{e&&(await this.resumePausedMutations(),Y(this,Ue).onOnline())})))}unmount(){var e,t;ao(this,dn)._--,Y(this,dn)===0&&((e=Y(this,ra))==null||e.call(this),me(this,ra,void 0),(t=Y(this,aa))==null||t.call(this),me(this,aa,void 0))}isFetching(e){return Y(this,Ue).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Y(this,ln).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=Y(this,Ue).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const s=this.defaultQueryOptions(e),r=Y(this,Ue).build(this,s);return e.revalidateIfStale&&r.isStaleByTime(Ym(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(t)}}getQueriesData(e){return Y(this,Ue).findAll(e).map(({queryKey:t,state:s})=>{const r=s.data;return[t,r]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),a=Y(this,Ue).get(r.queryHash),i=a==null?void 0:a.state.data,o=hC(t,i);if(o!==void 0)return Y(this,Ue).build(this,r).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return xt.batch(()=>Y(this,Ue).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=Y(this,Ue).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=Y(this,Ue);xt.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=Y(this,Ue),r={type:"active",...e};return xt.batch(()=>(s.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const s={revert:!0,...t},r=xt.batch(()=>Y(this,Ue).findAll(e).map(a=>a.cancel(s)));return Promise.all(r).then(ns).catch(ns)}invalidateQueries(e={},t={}){return xt.batch(()=>{if(Y(this,Ue).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const s={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(s,t)})}refetchQueries(e={},t){const s={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=xt.batch(()=>Y(this,Ue).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(ns)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ns)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=Y(this,Ue).build(this,t);return s.isStaleByTime(Ym(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ns).catch(ns)}fetchInfiniteQuery(e){return e.behavior=AC(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ns).catch(ns)}resumePausedMutations(){return jl.isOnline()?Y(this,ln).resumePausedMutations():Promise.resolve()}getQueryCache(){return Y(this,Ue)}getMutationCache(){return Y(this,ln)}getDefaultOptions(){return Y(this,cn)}setDefaultOptions(e){me(this,cn,e)}setQueryDefaults(e,t){Y(this,sa).set(Ti(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Y(this,sa).values()];let s={};return t.forEach(r=>{Pi(e,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(e,t){Y(this,na).set(Ti(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Y(this,na).values()];let s={};return t.forEach(r=>{Pi(e,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Y(this,cn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Wh(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Py&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Y(this,cn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Y(this,Ue).clear(),Y(this,ln).clear()}},Ue=new WeakMap,ln=new WeakMap,cn=new WeakMap,sa=new WeakMap,na=new WeakMap,dn=new WeakMap,ra=new WeakMap,aa=new WeakMap,vg),MC=y.createContext(void 0),RC=({client:e,children:t})=>(y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(MC.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mi(){return Mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Mi.apply(this,arguments)}var fn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fn||(fn={}));const Zm="popstate";function LC(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:l}=r.location;return xu("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){return typeof a=="string"?a:Nl(a)}return OC(t,s,null,e)}function Be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $y(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function IC(){return Math.random().toString(36).substr(2,8)}function ep(e,t){return{usr:e.state,key:e.key,idx:t}}function xu(e,t,s,r){return s===void 0&&(s=null),Mi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ja(t):t,{state:s,key:t&&t.key||r||IC()})}function Nl(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ja(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function OC(e,t,s,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=fn.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Mi({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=fn.Pop;let w=u(),p=w==null?null:w-d;d=w,c&&c({action:l,location:g.location,delta:p})}function f(w,p){l=fn.Push;let m=xu(g.location,w,p);d=u()+1;let x=ep(m,d),N=g.createHref(m);try{o.pushState(x,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(N)}i&&c&&c({action:l,location:g.location,delta:1})}function v(w,p){l=fn.Replace;let m=xu(g.location,w,p);d=u();let x=ep(m,d),N=g.createHref(m);o.replaceState(x,"",N),i&&c&&c({action:l,location:g.location,delta:0})}function b(w){let p=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof w=="string"?w:Nl(w);return m=m.replace(/ $/,"%20"),Be(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let g={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Zm,h),c=w,()=>{a.removeEventListener(Zm,h),c=null}},createHref(w){return t(a,w)},createURL:b,encodeLocation(w){let p=b(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:v,go(w){return o.go(w)}};return g}var tp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(tp||(tp={}));function BC(e,t,s){return s===void 0&&(s="/"),$C(e,t,s)}function $C(e,t,s,r){let a=typeof t=="string"?ja(t):t,i=fa(a.pathname||"/",s);if(i==null)return null;let o=Uy(e);UC(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=XC(i);l=QC(o[c],d)}return l}function Uy(e,t,s,r){t===void 0&&(t=[]),s===void 0&&(s=[]),r===void 0&&(r="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Be(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=jn([r,c.relativePath]),u=s.concat(c);i.children&&i.children.length>0&&(Be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Uy(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:KC(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of zy(i.path))a(i,o,c)}),t}function zy(e){let t=e.split("/");if(t.length===0)return[];let[s,...r]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=zy(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function UC(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:GC(t.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const zC=/^:[\w-]+$/,VC=3,WC=2,qC=1,HC=10,YC=-2,sp=e=>e==="*";function KC(e,t){let s=e.split("/"),r=s.length;return s.some(sp)&&(r+=YC),t&&(r+=WC),s.filter(a=>!sp(a)).reduce((a,i)=>a+(zC.test(i)?VC:i===""?qC:HC),r)}function GC(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function QC(e,t,s){let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=gu({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:jn([i,h.pathname]),pathnameBase:s1(jn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=jn([i,h.pathnameBase]))}return o}function gu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=JC(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((d,u,h)=>{let{paramName:f,isOptional:v}=u;if(f==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[h];return v&&!b?d[f]=void 0:d[f]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function JC(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),$y(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function XC(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $y(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&r!=="/"?null:e.slice(s)||"/"}function ZC(e,t){t===void 0&&(t="/");let{pathname:s,search:r="",hash:a=""}=typeof e=="string"?ja(e):e;return{pathname:s?s.startsWith("/")?s:e1(s,t):t,search:n1(r),hash:r1(a)}}function e1(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Yc(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function t1(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function qh(e,t){let s=t1(e);return t?s.map((r,a)=>a===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function Hh(e,t,s,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=ja(e):(a=Mi({},e),Be(!a.pathname||!a.pathname.includes("?"),Yc("?","pathname","search",a)),Be(!a.pathname||!a.pathname.includes("#"),Yc("#","pathname","hash",a)),Be(!a.search||!a.search.includes("#"),Yc("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=s;else{let h=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=ZC(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const jn=e=>e.join("/").replace(/\/\/+/g,"/"),s1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),n1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,r1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function a1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Vy=["post","put","patch","delete"];new Set(Vy);const i1=["get",...Vy];new Set(i1);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ri(){return Ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Ri.apply(this,arguments)}const Xl=y.createContext(null),Wy=y.createContext(null),zs=y.createContext(null),Zl=y.createContext(null),Es=y.createContext({outlet:null,matches:[],isDataRoute:!1}),qy=y.createContext(null);function o1(e,t){let{relative:s}=t===void 0?{}:t;Na()||Be(!1);let{basename:r,navigator:a}=y.useContext(zs),{hash:i,pathname:o,search:l}=ec(e,{relative:s}),c=o;return r!=="/"&&(c=o==="/"?r:jn([r,o])),a.createHref({pathname:c,search:l,hash:i})}function Na(){return y.useContext(Zl)!=null}function Vs(){return Na()||Be(!1),y.useContext(Zl).location}function Hy(e){y.useContext(zs).static||y.useLayoutEffect(e)}function nt(){let{isDataRoute:e}=y.useContext(Es);return e?j1():l1()}function l1(){Na()||Be(!1);let e=y.useContext(Xl),{basename:t,future:s,navigator:r}=y.useContext(zs),{matches:a}=y.useContext(Es),{pathname:i}=Vs(),o=JSON.stringify(qh(a,s.v7_relativeSplatPath)),l=y.useRef(!1);return Hy(()=>{l.current=!0}),y.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let h=Hh(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:jn([t,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[t,r,o,i,e])}const c1=y.createContext(null);function d1(e){let t=y.useContext(Es).outlet;return t&&y.createElement(c1.Provider,{value:e},t)}function Yy(){let{matches:e}=y.useContext(Es),t=e[e.length-1];return t?t.params:{}}function ec(e,t){let{relative:s}=t===void 0?{}:t,{future:r}=y.useContext(zs),{matches:a}=y.useContext(Es),{pathname:i}=Vs(),o=JSON.stringify(qh(a,r.v7_relativeSplatPath));return y.useMemo(()=>Hh(e,JSON.parse(o),i,s==="path"),[e,o,i,s])}function u1(e,t){return h1(e,t)}function h1(e,t,s,r){Na()||Be(!1);let{navigator:a}=y.useContext(zs),{matches:i}=y.useContext(Es),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Vs(),u;if(t){var h;let w=typeof t=="string"?ja(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||Be(!1),u=w}else u=d;let f=u.pathname||"/",v=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=BC(e,{pathname:v}),g=g1(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:jn([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:jn([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,s,r);return t&&g?y.createElement(Zl.Provider,{value:{location:Ri({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:fn.Pop}},g):g}function f1(){let e=b1(),t=a1(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),s?y.createElement("pre",{style:a},s):null,null)}const m1=y.createElement(f1,null);class p1 extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?y.createElement(Es.Provider,{value:this.props.routeContext},y.createElement(qy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function x1(e){let{routeContext:t,match:s,children:r}=e,a=y.useContext(Xl);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),y.createElement(Es.Provider,{value:t},r)}function g1(e,t,s,r){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),r===void 0&&(r=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(a=s)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Be(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(s&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:v}=s,b=h.route.loader&&f[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||b){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let v,b=!1,g=null,w=null;s&&(v=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||m1,c&&(d<0&&f===0?(N1("route-fallback"),b=!0,w=null):d===f&&(b=!0,w=h.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,f+1)),m=()=>{let x;return v?x=g:b?x=w:h.route.Component?x=y.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=u,y.createElement(x1,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:s!=null},children:x})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(p1,{location:s.location,revalidation:s.revalidation,component:g,error:v,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Ky=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ky||{}),Gy=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Gy||{});function v1(e){let t=y.useContext(Xl);return t||Be(!1),t}function y1(e){let t=y.useContext(Wy);return t||Be(!1),t}function w1(e){let t=y.useContext(Es);return t||Be(!1),t}function Qy(e){let t=w1(),s=t.matches[t.matches.length-1];return s.route.id||Be(!1),s.route.id}function b1(){var e;let t=y.useContext(qy),s=y1(),r=Qy();return t!==void 0?t:(e=s.errors)==null?void 0:e[r]}function j1(){let{router:e}=v1(Ky.UseNavigateStable),t=Qy(Gy.UseNavigateStable),s=y.useRef(!1);return Hy(()=>{s.current=!0}),y.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Ri({fromRouteId:t},i)))},[e,t])}const np={};function N1(e,t,s){np[e]||(np[e]=!0)}function Rr(e){let{to:t,replace:s,state:r,relative:a}=e;Na()||Be(!1);let{future:i,static:o}=y.useContext(zs),{matches:l}=y.useContext(Es),{pathname:c}=Vs(),d=nt(),u=Hh(t,qh(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(u);return y.useEffect(()=>d(JSON.parse(h),{replace:s,state:r,relative:a}),[d,h,a,s,r]),null}function Jy(e){return d1(e.context)}function ne(e){Be(!1)}function C1(e){let{basename:t="/",children:s=null,location:r,navigationType:a=fn.Pop,navigator:i,static:o=!1,future:l}=e;Na()&&Be(!1);let c=t.replace(/^\/*/,"/"),d=y.useMemo(()=>({basename:c,navigator:i,static:o,future:Ri({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=ja(r));let{pathname:u="/",search:h="",hash:f="",state:v=null,key:b="default"}=r,g=y.useMemo(()=>{let w=fa(u,c);return w==null?null:{location:{pathname:w,search:h,hash:f,state:v,key:b},navigationType:a}},[c,u,h,f,v,b,a]);return g==null?null:y.createElement(zs.Provider,{value:d},y.createElement(Zl.Provider,{children:s,value:g}))}function _1(e){let{children:t,location:s}=e;return u1(vu(t),s)}new Promise(()=>{});function vu(e,t){t===void 0&&(t=[]);let s=[];return y.Children.forEach(e,(r,a)=>{if(!y.isValidElement(r))return;let i=[...t,a];if(r.type===y.Fragment){s.push.apply(s,vu(r.props.children,i));return}r.type!==ne&&Be(!1),!r.props.index||!r.props.children||Be(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vu(r.props.children,i)),s.push(o)}),s}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Cl.apply(this,arguments)}function Xy(e,t){if(e==null)return{};var s={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function E1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function S1(e,t){return e.button===0&&(!t||t==="_self")&&!E1(e)}function yu(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let r=e[s];return t.concat(Array.isArray(r)?r.map(a=>[s,a]):[[s,r]])},[]))}function F1(e,t){let s=yu(e);return t&&t.forEach((r,a)=>{s.has(a)||t.getAll(a).forEach(i=>{s.append(a,i)})}),s}const k1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],D1=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],A1="6";try{window.__reactRouterVersion=A1}catch{}const T1=y.createContext({isTransitioning:!1}),P1="startTransition",rp=ej[P1];function M1(e){let{basename:t,children:s,future:r,window:a}=e,i=y.useRef();i.current==null&&(i.current=LC({window:a,v5Compat:!0}));let o=i.current,[l,c]=y.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},u=y.useCallback(h=>{d&&rp?rp(()=>c(h)):c(h)},[c,d]);return y.useLayoutEffect(()=>o.listen(u),[o,u]),y.createElement(C1,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:r})}const R1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lr=y.forwardRef(function(t,s){let{onClick:r,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,unstable_viewTransition:h}=t,f=Xy(t,k1),{basename:v}=y.useContext(zs),b,g=!1;if(typeof d=="string"&&L1.test(d)&&(b=d,R1))try{let x=new URL(window.location.href),N=d.startsWith("//")?new URL(x.protocol+d):new URL(d),j=fa(N.pathname,v);N.origin===x.origin&&j!=null?d=j+N.search+N.hash:g=!0}catch{}let w=o1(d,{relative:a}),p=O1(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,unstable_viewTransition:h});function m(x){r&&r(x),x.defaultPrevented||p(x)}return y.createElement("a",Cl({},f,{href:b||w,onClick:g||i?r:m,ref:s,target:c}))}),Gs=y.forwardRef(function(t,s){let{"aria-current":r="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,unstable_viewTransition:d,children:u}=t,h=Xy(t,D1),f=ec(c,{relative:h.relative}),v=Vs(),b=y.useContext(Wy),{navigator:g,basename:w}=y.useContext(zs),p=b!=null&&B1(f)&&d===!0,m=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,x=v.pathname,N=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(x=x.toLowerCase(),N=N?N.toLowerCase():null,m=m.toLowerCase()),N&&w&&(N=fa(N,w)||N);const j=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let C=x===m||!o&&x.startsWith(m)&&x.charAt(j)==="/",E=N!=null&&(N===m||!o&&N.startsWith(m)&&N.charAt(m.length)==="/"),_={isActive:C,isPending:E,isTransitioning:p},S=C?r:void 0,F;typeof i=="function"?F=i(_):F=[i,C?"active":null,E?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let A=typeof l=="function"?l(_):l;return y.createElement(Lr,Cl({},h,{"aria-current":S,className:F,ref:s,style:A,to:c,unstable_viewTransition:d}),typeof u=="function"?u(_):u)});var wu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(wu||(wu={}));var ap;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ap||(ap={}));function I1(e){let t=y.useContext(Xl);return t||Be(!1),t}function O1(e,t){let{target:s,replace:r,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:l}=t===void 0?{}:t,c=nt(),d=Vs(),u=ec(e,{relative:o});return y.useCallback(h=>{if(S1(h,s)){h.preventDefault();let f=r!==void 0?r:Nl(d)===Nl(u);c(e,{replace:f,state:a,preventScrollReset:i,relative:o,unstable_viewTransition:l})}},[d,c,u,r,a,s,e,i,o,l])}function Yh(e){let t=y.useRef(yu(e)),s=y.useRef(!1),r=Vs(),a=y.useMemo(()=>F1(r.search,s.current?null:t.current),[r.search]),i=nt(),o=y.useCallback((l,c)=>{const d=yu(typeof l=="function"?l(a):l);s.current=!0,i("?"+d,c)},[i,a]);return[a,o]}function B1(e,t){t===void 0&&(t={});let s=y.useContext(T1);s==null&&Be(!1);let{basename:r}=I1(wu.useViewTransitionState),a=ec(e,{relative:t.relative});if(!s.isTransitioning)return!1;let i=fa(s.currentLocation.pathname,r)||s.currentLocation.pathname,o=fa(s.nextLocation.pathname,r)||s.nextLocation.pathname;return gu(a.pathname,o)!=null||gu(a.pathname,i)!=null}function Zy(e){var t,s,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=Zy(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function kn(){for(var e,t,s=0,r="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=Zy(e))&&(r&&(r+=" "),r+=t);return r}const $1="inline-flex items-center justify-center rounded-[12px] font-semibold transition-transform duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 disabled:cursor-not-allowed",U1={primary:"bg-[#050014] text-white shadow-[var(--shadow-md)] hover:shadow-[var(--shadow-lg)] hover:-translate-y-[1px] hover:bg-[#140423] active:brightness-110 disabled:bg-[#E9ECEF] disabled:text-[#6C757D]",secondary:"bg-white text-[#C045FF] border-2 border-[#C045FF] hover:bg-[#F4E6FF] hover:text-[#8B3FFF] active:bg-[#8B3FFF] active:text-white disabled:text-[#6C757D] disabled:border-[#E9ECEF] disabled:bg-transparent",ghost:"bg-transparent text-[#C045FF] hover:bg-[#F4E6FF] hover:text-[#8B3FFF] active:bg-[#8B3FFF] active:text-white disabled:text-[#6C757D]",danger:"bg-[#DC3545] text-white hover:bg-[#C82333] shadow-[var(--shadow-md)] hover:shadow-[var(--shadow-lg)] disabled:bg-[#E9ECEF] disabled:text-[#6C757D]"},z1={md:"h-12 px-6 text-base",sm:"h-10 px-4 text-sm rounded-[8px]",lg:"h-14 px-8 text-lg",icon:"h-12 w-12 rounded-full"},T=y.forwardRef(({variant:e="primary",size:t="md",leftIcon:s,rightIcon:r,className:a,children:i,...o},l)=>n.jsxs("button",{ref:l,className:kn($1,U1[e],z1[t],a),...o,children:[s&&n.jsx("span",{className:"mr-2 flex items-center text-lg",children:s}),i,r&&n.jsx("span",{className:"ml-2 flex items-center text-lg",children:r})]}));T.displayName="Button";const ew="mb-2 block text-sm font-semibold text-[#212529]",tw="mt-1 text-sm text-[#6C757D]",sw="mt-1 text-sm text-[#E63946]",nw="w-full rounded-[8px] border-2 border-[#E9ECEF] bg-white px-4 py-3 text-base transition-colors focus:border-[#FF6B35] focus:shadow-[0_0_0_3px_rgba(255,107,53,0.1)] focus:outline-none disabled:cursor-not-allowed disabled:bg-[#F8F9FA]",te=y.forwardRef(({label:e,helperText:t,error:s,requiredIndicator:r=!0,className:a,id:i,...o},l)=>{const c=i??o.name;return n.jsxs("div",{className:"flex w-full flex-col",children:[e&&n.jsxs("label",{className:ew,htmlFor:c,children:[e,o.required&&r?n.jsx("span",{className:"ml-1 text-[#E63946]",children:"*"}):null]}),n.jsx("input",{ref:l,id:c,className:kn(nw,s&&"border-[#E63946] focus:shadow-none",a),...o}),s?n.jsx("span",{className:sw,children:s}):t?n.jsx("span",{className:tw,children:t}):null]})});te.displayName="TextInput";const Re=y.forwardRef(({label:e,helperText:t,error:s,requiredIndicator:r=!0,className:a,id:i,rows:o=4,...l},c)=>{const d=i??l.name;return n.jsxs("div",{className:"flex w-full flex-col",children:[e&&n.jsxs("label",{className:ew,htmlFor:d,children:[e,l.required&&r?n.jsx("span",{className:"ml-1 text-[#E63946]",children:"*"}):null]}),n.jsx("textarea",{ref:c,id:d,rows:o,className:kn(nw,"resize-y",s&&"border-[#E63946] focus:shadow-none",a),...l}),s?n.jsx("span",{className:sw,children:s}):t?n.jsx("span",{className:tw,children:t}):null]})});Re.displayName="TextArea";const I=({elevated:e=!1,className:t,...s})=>n.jsx("div",{className:kn("rounded-[16px] border border-[#E9ECEF] bg-white p-6 transition-shadow",e?"shadow-[var(--shadow-md)] hover:shadow-[var(--shadow-lg)]":"shadow-[var(--shadow-sm)]",t),...s}),$=({title:e,subtitle:t,className:s,children:r,...a})=>n.jsxs("div",{className:kn("mb-4 flex flex-col gap-1",s),...a,children:[e?n.jsx("h3",{className:"text-xl font-semibold text-[#212529]",children:e}):null,t?n.jsx("p",{className:"text-sm text-[#6C757D]",children:t}):null,r]}),B=({className:e,...t})=>n.jsx("div",{className:kn("flex flex-col gap-4",e),...t}),V1={default:"bg-[#F8F9FA] text-[#6C757D]",primary:"bg-[#F4E6FF] text-[#C045FF]",success:"bg-[#D4EDDA] text-[#155724]",danger:"bg-[#F8D7DA] text-[#721C24]",warning:"bg-[#FFF3CD] text-[#856404]",live:"bg-[#DC3545] text-white animate-pulse"},Q=({variant:e="default",pill:t=!0,className:s,...r})=>n.jsx("span",{className:kn("inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide",t?"rounded-full":"rounded-[6px]",V1[e],s),...r});y.createContext(void 0);const W1={sm:"h-8 w-8 text-xs",md:"h-12 w-12 text-sm",lg:"h-16 w-16 text-base",xl:"h-20 w-20 text-lg"},Mt=({src:e,alt:t,initials:s,size:r="md",className:a,badgeColor:i,...o})=>n.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[n.jsx("div",{className:kn("flex items-center justify-center overflow-hidden rounded-full border-4 border-white bg-[#C045FF] font-semibold uppercase text-white shadow-[var(--shadow-sm)]",W1[r],a),...o,children:e?n.jsx("img",{className:"h-full w-full object-cover",src:e,alt:t}):s??""}),i&&n.jsx("span",{className:"absolute bottom-0 right-0 h-3 w-3 rounded-full border-2 border-white",style:{backgroundColor:i}})]}),q1="modulepreload",H1=function(e){return"/"+e},ip={},ma=function(t,s,r){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(s.map(c=>{if(c=H1(c),c in ip)return;ip[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":q1,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,v)=>{h.addEventListener("load",f),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Y1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>Ca);return{default:r}},void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)};class Kh extends Error{constructor(t,s="FunctionsError",r){super(t),this.name=s,this.context=r}}class K1 extends Kh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class G1 extends Kh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Q1 extends Kh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var bu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(bu||(bu={}));var J1=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class X1{constructor(t,{headers:s={},customFetch:r,region:a=bu.Any}={}){this.url=t,this.headers=s,this.region=a,this.fetch=Y1(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var r;return J1(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(b=>{throw new K1(b)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new G1(u);if(!u.ok)throw new Q1(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return f==="application/json"?v=yield u.json():f==="application/octet-stream"?v=yield u.blob():f==="text/event-stream"?v=u:f==="multipart/form-data"?v=yield u.formData():v=yield u.text(),{data:v,error:null}}catch(a){return{data:null,error:a}}})}}var qt={},Gh={},tc={},Qi={},sc={},nc={},Z1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pa=Z1();const e_=pa.fetch,rw=pa.fetch.bind(pa),aw=pa.Headers,t_=pa.Request,s_=pa.Response,Ca=Object.freeze(Object.defineProperty({__proto__:null,Headers:aw,Request:t_,Response:s_,default:rw,fetch:e_},Symbol.toStringTag,{value:"Module"})),n_=O0(Ca);var Qh={};Object.defineProperty(Qh,"__esModule",{value:!0});class r_ extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}Qh.default=r_;var iw=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nc,"__esModule",{value:!0});const a_=iw(n_),i_=iw(Qh);let o_=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=a_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,h=null,f=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,v="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,v="OK")}catch{i.status===404&&g===""?(f=204,v="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,v="OK"),d&&this.shouldThrowOnError)throw new i_.default(d)}return{error:d,data:u,count:h,status:f,statusText:v}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,s)}};nc.default=o_;var l_=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sc,"__esModule",{value:!0});const c_=l_(nc);let d_=class extends c_.default{select(t){let s=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:s=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:r=s}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,s,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:s=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,s?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};sc.default=d_;var u_=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qi,"__esModule",{value:!0});const h_=u_(sc);let f_=class extends h_.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const r=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${s}`),this}match(t){return Object.entries(t).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(t,s,r){return this.url.searchParams.append(t,`not.${s}.${r}`),this}or(t,{foreignTable:s,referencedTable:r=s}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,s,r){return this.url.searchParams.append(t,`${s}.${r}`),this}};Qi.default=f_;var m_=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tc,"__esModule",{value:!0});const Ba=m_(Qi);let p_=class{constructor(t,{headers:s={},schema:r,fetch:a}){this.url=t,this.headers=s,this.schema=r,this.fetch=a}select(t,{head:s=!1,count:r}={}){const a=s?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Ba.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:s,defaultToNull:r=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ba.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:s,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ba.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:s}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new Ba.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const s="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ba.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};tc.default=p_;var rc={},ac={};Object.defineProperty(ac,"__esModule",{value:!0});ac.version=void 0;ac.version="0.0.0-automated";Object.defineProperty(rc,"__esModule",{value:!0});rc.DEFAULT_HEADERS=void 0;const x_=ac;rc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${x_.version}`};var ow=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gh,"__esModule",{value:!0});const g_=ow(tc),v_=ow(Qi),y_=rc;let w_=class lw{constructor(t,{headers:s={},schema:r,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},y_.DEFAULT_HEADERS),s),this.schemaName=r,this.fetch=a}from(t){const s=new URL(`${this.url}/${t}`);return new g_.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new lw(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:r=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||a?(o=r?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new v_.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Gh.default=w_;var Ji=Gt&&Gt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qt,"__esModule",{value:!0});qt.PostgrestBuilder=qt.PostgrestTransformBuilder=qt.PostgrestFilterBuilder=qt.PostgrestQueryBuilder=qt.PostgrestClient=void 0;const cw=Ji(Gh);qt.PostgrestClient=cw.default;const dw=Ji(tc);qt.PostgrestQueryBuilder=dw.default;const uw=Ji(Qi);qt.PostgrestFilterBuilder=uw.default;const hw=Ji(sc);qt.PostgrestTransformBuilder=hw.default;const fw=Ji(nc);qt.PostgrestBuilder=fw.default;var b_=qt.default={PostgrestClient:cw.default,PostgrestQueryBuilder:dw.default,PostgrestFilterBuilder:uw.default,PostgrestTransformBuilder:hw.default,PostgrestBuilder:fw.default};const{PostgrestClient:j_,PostgrestQueryBuilder:B4,PostgrestFilterBuilder:$4,PostgrestTransformBuilder:U4,PostgrestBuilder:z4}=b_,N_="2.10.2",C_={"X-Client-Info":`realtime-js/${N_}`},__="1.0.0",mw=1e4,E_=1e3;var Gr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Gr||(Gr={}));var Dt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Dt||(Dt={}));var is;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(is||(is={}));var ju;(function(e){e.websocket="websocket"})(ju||(ju={}));var qn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(qn||(qn={}));class S_{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,s,r)}_decodeBroadcast(t,s,r){const a=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class pw{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(De||(De={}));const op=(e,t,s={})=>{var r;const a=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=F_(o,e,t,a),i),{})},F_=(e,t,s,r)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=s[e];return i&&!r.includes(i)?xw(i,o):Nu(o)},xw=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return T_(t,s)}switch(e){case De.bool:return k_(t);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return D_(t);case De.json:case De.jsonb:return A_(t);case De.timestamp:return P_(t);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return Nu(t);default:return Nu(t)}},Nu=e=>e,k_=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},D_=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},A_=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},T_=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,r=e[s];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>xw(t,l))}return e},P_=e=>typeof e=="string"?e.replace(" ","T"):e,gw=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Kc{constructor(t,s,r={},a=mw){this.channel=t,this.event=s,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var r;return this._hasReceived(t)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var lp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(lp||(lp={}));class oi{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oi.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=oi.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=oi.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,r,a){const i=this.cloneDeep(t),o=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(w=>w.presence_ref),v=h.map(w=>w.presence_ref),b=u.filter(w=>v.indexOf(w.presence_ref)<0),g=h.filter(w=>f.indexOf(w.presence_ref)<0);b.length>0&&(l[d]=b),g.length>0&&(c[d]=g)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(t,s,r,a){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(v=>v.presence_ref),f=u.filter(v=>h.indexOf(v.presence_ref)<0);t[l].unshift(...f)}r(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(r=>s(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,r)=>{const a=t[r];return"metas"in a?s[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=a,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(cp||(cp={}));var dp;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"})(dp||(dp={}));var up;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(up||(up={}));class Jh{constructor(t,s={config:{}},r){this.topic=t,this.params=s,this.socket=r,this.bindings={},this.state=Dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Kc(this,is.join,this.params,this.timeout),this.rejoinTimer=new pw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(is.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new oi(this),this.broadcastEndpointURL=gw(this.socket.endPoint)+"/api/broadcast"}subscribe(t,s=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t&&t("CHANNEL_ERROR",u)),this._onClose(()=>t&&t("CLOSED"));const c={},d={broadcast:i,presence:o,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",({postgres_changes:u})=>{var h;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){t&&t("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,v=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,b=[];for(let g=0;g<v;g++){const w=f[g],{filter:{event:p,schema:m,table:x,filter:N}}=w,j=u&&u[g];if(j&&j.event===p&&j.schema===m&&j.table===x&&j.filter===N)b.push(Object.assign(Object.assign({},w),{id:j.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t("SUBSCRIBED");return}}).receive("error",u=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,r){return this._on(t,s,r)}async send(t,s={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Dt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(is.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const a=new Kc(this,is.leave,{},t);a.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,s,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),o}_push(t,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Kc(this,t,s,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,s,r){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,r){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=is;if(r&&[l,c,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,s,r);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var b,g,w;return((b=v.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(g=v.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(v=>v.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var b,g,w,p,m,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const N=v.id,j=(b=v.filter)===null||b===void 0?void 0:b.event;return N&&((g=s.ids)===null||g===void 0?void 0:g.includes(N))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const N=(m=(p=v==null?void 0:v.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return N==="*"||N===((x=s==null?void 0:s.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:g,table:w,commit_timestamp:p,type:m,errors:x}=b;f=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:p,eventType:m,new:{},old:{},errors:x}),this._getPayloadRecords(b))}v.callback(f,r)})}_isClosed(){return this.state===Dt.closed}_isJoined(){return this.state===Dt.joined}_isJoining(){return this.state===Dt.joining}_isLeaving(){return this.state===Dt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,r){const a=t.toLocaleLowerCase(),i={type:a,filter:s,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,s){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Jh.isEqual(a.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(is.close,{},t)}_onError(t){this._on(is.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=op(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=op(t.columns,t.old_record)),s}}const M_=()=>{},R_=typeof WebSocket<"u";class L_{constructor(t,s){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=C_,this.params={},this.timeout=mw,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=M_,this.conn=null,this.sendBuffer=[],this.serializer=new S_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>ma(async()=>{const{default:c}=await Promise.resolve().then(()=>Ca);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${ju.websocket}`,this.httpEndpoint=gw(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const a=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;a&&(this.accessToken=a,this.apiKey=a),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new pw(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(R_){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new I_(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),ma(async()=>{const{default:t}=await import("./browser-CRSR6m-c.js").then(s=>s.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),t}log(t,s,r){this.logger(t,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Gr.connecting:return qn.Connecting;case Gr.open:return qn.Open;case Gr.closing:return qn.Closing;default:return qn.Closed}}isConnected(){return this.connectionState()===qn.Open}channel(t,s={config:{}}){const r=new Jh(`realtime:${t}`,s,this);return this.channels.push(r),r}push(t){const{topic:s,event:r,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t){this.accessToken=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(is.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:__}))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:r,event:a,payload:i,ref:o}=s;(o&&o===this.pendingHeartbeatRef||a===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${a} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(is.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${t}${r}${a}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(E_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class I_{constructor(t,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Gr.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class Xh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ct(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class O_ extends Xh{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class hp extends Xh{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var B_=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const vw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>Ca);return{default:r}},void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)},$_=()=>B_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ma(()=>Promise.resolve().then(()=>Ca),void 0)).Response:Response});var _a=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const Gc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),U_=(e,t)=>_a(void 0,void 0,void 0,function*(){const s=yield $_();e instanceof s?e.json().then(r=>{t(new O_(Gc(r),e.status||500))}).catch(r=>{t(new hp(Gc(r),r))}):t(new hp(Gc(e),e))}),z_=(e,t,s,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))};function ic(e,t,s,r,a,i){return _a(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(s,z_(t,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>U_(c,l))})})}function Cu(e,t,s,r){return _a(this,void 0,void 0,function*(){return ic(e,"GET",t,s,r)})}function tn(e,t,s,r,a){return _a(this,void 0,void 0,function*(){return ic(e,"POST",t,r,a,s)})}function V_(e,t,s,r,a){return _a(this,void 0,void 0,function*(){return ic(e,"PUT",t,r,a,s)})}function yw(e,t,s,r,a){return _a(this,void 0,void 0,function*(){return ic(e,"DELETE",t,r,a,s)})}var Bt=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const W_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class q_{constructor(t,s={},r,a){this.url=t,this.headers=s,this.bucketId=r,this.fetch=vw(a)}uploadOrUpdate(t,s,r,a){return Bt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},fp),a),l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const c=this._removeEmptyFolders(s),d=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield u.json();return u.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(ct(i))return{data:null,error:i};throw i}})}upload(t,s,r){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,r)})}uploadToSignedUrl(t,s,r,a){return Bt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:fp.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(ct(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return Bt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield tn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Xh("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}})}update(t,s,r){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,r)})}move(t,s,r){return Bt(this,void 0,void 0,function*(){try{return{data:yield tn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(ct(a))return{data:null,error:a};throw a}})}copy(t,s,r){return Bt(this,void 0,void 0,function*(){try{return{data:{path:(yield tn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(ct(a))return{data:null,error:a};throw a}})}createSignedUrl(t,s,r){return Bt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield tn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(ct(a))return{data:null,error:a};throw a}})}createSignedUrls(t,s,r){return Bt(this,void 0,void 0,function*(){try{const a=yield tn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(ct(a))return{data:null,error:a};throw a}})}download(t,s){return Bt(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Cu(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ct(l))return{data:null,error:l};throw l}})}getPublicUrl(t,s){const r=this._getFinalPath(t),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return Bt(this,void 0,void 0,function*(){try{return{data:yield yw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(ct(s))return{data:null,error:s};throw s}})}list(t,s,r){return Bt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},W_),s),{prefix:t||""});return{data:yield tn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(ct(a))return{data:null,error:a};throw a}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const H_="2.6.0",Y_={"X-Client-Info":`storage-js/${H_}`};var gr=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class K_{constructor(t,s={},r){this.url=t,this.headers=Object.assign(Object.assign({},Y_),s),this.fetch=vw(r)}listBuckets(){return gr(this,void 0,void 0,function*(){try{return{data:yield Cu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ct(t))return{data:null,error:t};throw t}})}getBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield Cu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(ct(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return gr(this,void 0,void 0,function*(){try{return{data:yield tn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}})}updateBucket(t,s){return gr(this,void 0,void 0,function*(){try{return{data:yield V_(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}})}emptyBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield tn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(ct(s))return{data:null,error:s};throw s}})}deleteBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield yw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(ct(s))return{data:null,error:s};throw s}})}}class G_ extends K_{constructor(t,s={},r){super(t,s,r)}from(t){return new q_(this.url,this.headers,t,this.fetch)}}const Q_="2.45.1";let Qa="";typeof Deno<"u"?Qa="deno":typeof document<"u"?Qa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qa="react-native":Qa="node";const J_={"X-Client-Info":`supabase-js-${Qa}/${Q_}`},X_={headers:J_},Z_={schema:"public"},eE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tE={};var sE=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const nE=e=>{let t;return e?t=e:typeof fetch>"u"?t=rw:t=fetch,(...s)=>t(...s)},rE=()=>typeof Headers>"u"?aw:Headers,aE=(e,t,s)=>{const r=nE(s),a=rE();return(i,o)=>sE(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:d}))})};var iE=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};function oE(e){return e.replace(/\/$/,"")}function lE(e,t){const{db:s,auth:r,realtime:a,global:i}=e,{db:o,auth:l,realtime:c,global:d}=t,u={db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},c),a),global:Object.assign(Object.assign({},d),i),accessToken:()=>iE(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}const ww="2.64.4",cE="http://localhost:9999",dE="supabase.auth.token",uE={"X-Client-Info":`gotrue-js/${ww}`},mp=10,_u="X-Supabase-Api-Version",bw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function hE(e){return Math.round(Date.now()/1e3)+e}function fE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const es=()=>typeof document<"u",Rn={tested:!1,writable:!1},li=()=>{if(!es())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rn.tested)return Rn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Rn.tested=!0,Rn.writable=!0}catch{Rn.tested=!0,Rn.writable=!1}return Rn.writable};function Qc(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return s.searchParams.forEach((r,a)=>{t[a]=r}),t}const jw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>Ca);return{default:r}},void 0).then(({default:r})=>r(...s)):t=fetch,(...s)=>t(...s)},mE=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Nw=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},_o=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Jc=async(e,t)=>{await e.removeItem(t)};function pE(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",r,a,i,o,l,c,d,u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)o=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),d=t.indexOf(e.charAt(u++)),r=o<<2|l>>4,a=(l&15)<<4|c>>2,i=(c&3)<<6|d,s=s+String.fromCharCode(r),c!=64&&a!=0&&(s=s+String.fromCharCode(a)),d!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class oc{constructor(){this.promise=new oc.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}oc.promiseConstructor=Promise;function pp(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=e.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=s[1];return JSON.parse(pE(r))}async function xE(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function gE(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function vE(e){return("0"+e.toString(16)).substr(-2)}function yE(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,vE).join("")}async function wE(e){const s=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}function bE(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jE(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await wE(e);return bE(s)}async function vr(e,t,s=!1){const r=yE();let a=r;s&&(a+="/PASSWORD_RECOVERY"),await Nw(e,`${t}-code-verifier`,a);const i=await jE(r);return[i,r===i?"plain":"s256"]}const NE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function CE(e){const t=e.headers.get(_u);if(!t||!t.match(NE))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class Zh extends Error{constructor(t,s,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _E extends Zh{constructor(t,s,r){super(t,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function EE(e){return xe(e)&&e.name==="AuthApiError"}class Cw extends Zh{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class pr extends Zh{constructor(t,s,r,a){super(t,r,a),this.name=s,this.status=r}}class Ln extends pr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Xc extends pr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Eo extends pr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class So extends pr{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xp extends pr{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Eu extends pr{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Zc(e){return xe(e)&&e.name==="AuthRetryableFetchError"}class gp extends pr{constructor(t,s,r){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}var SE=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]]);return s};const zn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),FE=[502,503,504];async function vp(e){var t;if(!mE(e))throw new Eu(zn(e),0);if(FE.includes(e.status))throw new Eu(zn(e),e.status);let s;try{s=await e.json()}catch(i){throw new Cw(zn(i),i)}let r;const a=CE(e);if(a&&a.getTime()>=bw["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new gp(zn(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[])}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new gp(zn(s),e.status,s.weak_password.reasons);throw new _E(zn(s),e.status||500,r)}const kE=(e,t,s,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))};async function we(e,t,s,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[_u]||(i[_u]=bw["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await DE(e,t,s+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function DE(e,t,s,r,a,i){const o=kE(t,r,a,i);let l;try{l=await e(s,Object.assign({},o))}catch(c){throw console.error(c),new Eu(zn(c),0)}if(l.ok||await vp(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await vp(c)}}function Qs(e){var t;let s=null;ME(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=hE(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:r},error:null}}function yp(e){const t=Qs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function rn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function AE(e){return{data:e,error:null}}function TE(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:i}=e,o=SE(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function PE(e){return e}function ME(e){return e.access_token&&e.refresh_token&&e.expires_in}var RE=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]]);return s};class LE{constructor({url:t="",headers:s={},fetch:r}){this.url=t,this.headers=s,this.fetch=jw(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,s={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:rn})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:s}=t,r=RE(t,["options"]),a=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:TE,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(xe(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:rn})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,r,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:PE});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(xe(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await we(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:rn})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:rn})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,s=!1){try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:rn})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:s,error:r}=await we(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:r}}catch(s){if(xe(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}}}const IE={getItem:e=>li()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{li()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{li()&&globalThis.localStorage.removeItem(e)}};function wp(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function OE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const yr={debug:!!(globalThis&&li()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _w extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class BE extends _w{}async function $E(e,t,s){yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),yr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await s()}finally{yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw yr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new BE(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(yr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}})}OE();const UE={url:cE,storageKey:dE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},$a=30*1e3,bp=3;async function jp(e,t,s){return await s()}class Li{constructor(t){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Li.nextInstanceID,Li.nextInstanceID+=1,this.instanceID>0&&es()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},UE),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new LE({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=jw(a.fetch),this.lock=a.lock||jp,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:es()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=$E:this.lock=jp,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:li()?this.storage=IE:(this.memoryStorage={},this.storage=wp(this.memoryStorage)):(this.memoryStorage={},this.storage=wp(this.memoryStorage)),es()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ww}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=es()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:s,error:r}=await this._getSessionFromURL(t);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xe(t)?{error:t}:{error:new Cw("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,r,a;try{const i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Qs}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var s,r,a;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let v=null,b=null;this.flowType==="pkce"&&([v,b]=await vr(this.storage,this.storageKey)),i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:b},xform:Qs})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Qs})}else throw new Eo("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:o,options:l}=t;s=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yp})}else if("phone"in t){const{phone:i,password:o,options:l}=t;s=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yp})}else throw new Eo("You must provide either an email or phone number and a password");const{data:r,error:a}=s;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Xc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(s){if(xe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const s=await _o(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(s??"").split("/"),{data:i,error:o}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Qs});return await Jc(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Xc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}async signInWithIdToken(t){try{const{options:s,provider:r,token:a,access_token:i,nonce:o}=t,l=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Qs}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Xc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(xe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,r,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await vr(this.storage,this.storageKey));const{error:h}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Eo("You must provide either an email or phone number.")}catch(l){if(xe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var s,r;try{let a,i;"options"in t&&(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Qs});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(xe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var s,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await vr(this.storage,this.storageKey)),await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:AE})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;if(r)throw r;if(!s)throw new Ln;const{error:a}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:o}=await we(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:o,error:l}=await we(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Eo("You must provide either an email or phone number and a type")}catch(s){if(xe(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await _o(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:rn}):await this._useSession(async s=>{var r,a,i;const{data:o,error:l}=s;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ln}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:rn})})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Ln;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await vr(this.storage,this.storageKey));const{data:d,error:u}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:rn});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return pp(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ln;const s=Date.now()/1e3;let r=s,a=!0,i=null;const o=pp(t.access_token);if(o.exp&&(r=o.exp,a=r<=s),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(xe(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var r;if(!t){const{data:o,error:l}=s;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ln;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(xe(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t){try{if(!es())throw new So("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new So("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new xp("Not a valid PKCE flow url.");const s=Qc(window.location.href);if(t){if(!s.code)throw new xp("No code detected.");const{data:m,error:x}=await this._exchangeCodeForSession(s.code);if(x)throw x;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:m.session,redirectType:null},error:null}}if(s.error||s.error_description||s.error_code)throw new So(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=s;if(!i||!l||!o||!d)throw new So("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const v=f-u;v*1e3<=$a&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const b=f-h;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",b,f,u);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const p={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:s.type},error:null}}catch(s){if(xe(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){const t=Qc(window.location.href);return!!(es()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=Qc(window.location.href),s=await _o(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:a,error:i}=s;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(EE(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Jc(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(t){const s=fE(),r={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async s=>{var r,a;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await vr(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",v,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return es()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(xe(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var r,a;const{data:i,error:o}=s;if(o)throw o;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(xe(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await gE(async a=>(a>0&&await xE(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qs})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Zc(i)&&Date.now()+o-r<$a})}catch(r){if(this._debug(s,"error",r),xe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",r),es()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await _o(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const a=Math.round(Date.now()/1e3),i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)<a+mp;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${mp}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Zc(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,r;if(!t)throw new Ln;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new oc;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ln;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),xe(i)){const o={session:null,error:i};return Zc(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,s,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Nw(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Jc(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&es()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),$a);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/$a);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${$a}ms, refresh threshold is ${bp} ticks`),a<=bp&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof _w)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!es()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,r){const a=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await vr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;return i?{data:null,error:i}:await we(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(xe(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var r,a;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:l,error:c}=await we(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(!((a=l==null?void 0:l.totp)===null||a===void 0)&&a.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(xe(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(xe(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:a,error:i}=s;return i?{data:null,error:i}:await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(xe(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(t==null?void 0:t.factors)||[],a=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,r;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(s=a.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}Li.nextInstanceID=0;const zE=Li;class VE extends zE{constructor(t){super(t)}}var WE=function(e,t,s,r){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(r.next(u))}catch(h){o(h)}}function c(u){try{d(r.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class qE{constructor(t,s,r){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=oE(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:Z_,realtime:tE,auth:Object.assign(Object.assign({},eE),{storageKey:c}),global:X_},u=lE(r??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=aE(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},u.realtime)),this.rest=new j_(`${l}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new X1(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new G_(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},r={}){return this.rest.rpc(t,s,r)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return WE(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:r,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,u){var h;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new VE({url:this.authUrl,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:t,persistSession:s,detectSessionInUrl:r,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(t){return new L_(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,s,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const HE=(e,t,s)=>new qE(e,t,s),Ew=typeof import.meta<"u"&&"https://iktldcrkyphkvxjwmxyb.supabase.co"||"",Sw=typeof import.meta<"u"&&"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlrdGxkY3JreXBoa3Z4andteHliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNTM4NTUsImV4cCI6MjA3ODYyOTg1NX0.ToXGJWTGBj0xaKp6EEHJY0H3hrqW122CE486oju4opI"||"";(!Ew||!Sw)&&console.warn("Supabase URL or anon key is not set. Auth will not work correctly until these env vars are configured.");const D=HE(Ew,Sw),Fw=y.createContext(void 0),kw=e=>(e.split("@")[0]||"").replace(/[^a-zA-Z0-9]/g,"").toLowerCase()||"user",ed=e=>({id:e.id,email:e.email,role:e.role,username:kw(e.email),user_metadata:void 0,creatorProfileStatus:e.creator_profile_status}),YE=({children:e})=>{const[t,s]=y.useState(null),[r,a]=y.useState(!0);y.useEffect(()=>{(async()=>{try{const{data:{user:u}}=await D.auth.getUser();if(!u)return;const{data:h,error:f}=await D.from("users").select("id,email,role,creator_profile_status").eq("id",u.id).maybeSingle();!f&&h&&s(ed(h))}finally{a(!1)}})()},[]);const i=async({email:d,password:u})=>{const{data:h,error:f}=await D.auth.signInWithPassword({email:d,password:u});if(f||!h.user)throw new Error("Invalid email or password.");const{data:v,error:b}=await D.from("users").select("id,email,role,creator_profile_status").eq("id",h.user.id).maybeSingle();if(b||!v)throw new Error("No profile found for this account.");const g=ed(v);return s(g),g},o=async({email:d,password:u,role:h})=>{const{data:f,error:v}=await D.auth.signUp({email:d,password:u});if(v||!f.user)throw new Error((v==null?void 0:v.message)??"Could not create account.");const b=f.user,{error:g}=await D.from("users").insert({id:b.id,email:b.email,role:h});if(g)throw new Error(g.message??"Could not create profile.");const w=kw(d),p=w.charAt(0).toUpperCase()+w.slice(1),{error:m}=await D.from("profiles").insert({user_id:b.id,username:w,display_name:p});m&&console.error("Error creating public profile:",m);const x=ed({id:b.id,email:b.email??d,role:h});return s(x),x},l=async()=>{try{await D.auth.signOut()}finally{s(null)}},c=y.useMemo(()=>({user:t,isAuthenticated:!!t,isLoading:r,login:i,signup:o,logout:l}),[r,t]);return n.jsx(Fw.Provider,{value:c,children:e})},ve=()=>{const e=y.useContext(Fw);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},wr=({isActive:e})=>`text-base font-medium transition-colors ${e?"text-[#C045FF]":"text-[#6C757D] hover:text-[#C045FF]"}`,KE=()=>{const e=nt(),t=Vs(),[s,r]=y.useState(!1),{isAuthenticated:a,user:i}=ve(),o=t.pathname==="/",l=()=>{(i==null?void 0:i.role)==="fan"?e("/fan"):(i==null?void 0:i.role)==="creator"?e("/creator"):(i==null?void 0:i.role)==="admin"&&e("/admin")};return n.jsxs("div",{className:"min-h-screen bg-[#FFFFFF]",children:[!o&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"sticky top-0 z-50 flex h-[70px] items-center justify-between border-b border-[#E9ECEF] bg-white px-6 md:px-12",children:[n.jsxs("div",{className:"flex items-center gap-6 md:gap-10",children:[n.jsx(Gs,{to:"/",className:"flex items-center gap-2 text-2xl font-bold text-[#C045FF]",children:"FanMeet"}),n.jsxs("nav",{className:"hidden gap-6 md:flex",children:[n.jsx(Gs,{to:"/browse-events",className:wr,children:"Browse Events"}),n.jsx(Gs,{to:"/how-it-works",className:wr,children:"How It Works"}),n.jsx(Gs,{to:"/for-creators",className:wr,children:"For Creators"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"hidden items-center gap-3 md:flex",children:a?n.jsx(T,{size:"sm",onClick:l,children:(i==null?void 0:i.role)==="fan"?" Fan Dashboard":(i==null?void 0:i.role)==="creator"?" Creator Dashboard":"Dashboard"}):n.jsxs(n.Fragment,{children:[n.jsx(T,{variant:"secondary",size:"sm",onClick:()=>e("/auth"),children:"Login"}),n.jsx(T,{size:"sm",onClick:()=>e("/auth"),children:"Get Started"})]})}),n.jsxs("button",{type:"button",className:"flex items-center justify-center rounded-md border border-[#E9ECEF] p-2 text-[#343A40] md:hidden",onClick:()=>r(c=>!c),children:[n.jsx("span",{className:"sr-only",children:"Toggle navigation"}),n.jsxs("div",{className:"flex flex-col gap-[3px]",children:[n.jsx("span",{className:"h-[2px] w-4 bg-[#343A40]"}),n.jsx("span",{className:"h-[2px] w-4 bg-[#343A40]"}),n.jsx("span",{className:"h-[2px] w-4 bg-[#343A40]"})]})]})]})]}),s&&n.jsx("div",{className:"border-b border-[#E9ECEF] bg-white px-6 py-3 md:hidden",children:n.jsxs("nav",{className:"flex flex-col gap-3",children:[n.jsx(Gs,{to:"/browse-events",className:wr,onClick:()=>r(!1),children:"Browse Events"}),n.jsx(Gs,{to:"/how-it-works",className:wr,onClick:()=>r(!1),children:"How It Works"}),n.jsx(Gs,{to:"/for-creators",className:wr,onClick:()=>r(!1),children:"For Creators"}),n.jsx("div",{className:"mt-2 flex flex-col gap-2",children:a?n.jsx(T,{size:"sm",className:"w-full",onClick:()=>{r(!1),l()},children:(i==null?void 0:i.role)==="fan"?" Fan Dashboard":(i==null?void 0:i.role)==="creator"?" Creator Dashboard":"Dashboard"}):n.jsxs(n.Fragment,{children:[n.jsx(T,{variant:"secondary",size:"sm",className:"w-full",onClick:()=>{r(!1),e("/auth")},children:"Login"}),n.jsx(T,{size:"sm",className:"w-full",onClick:()=>{r(!1),e("/auth")},children:"Get Started"})]})})]})})]}),n.jsx("main",{className:"bg-gradient-to-b from-white to-[#FFE5D9]",children:n.jsx(Jy,{})})]})},V=(e,t="INR")=>new Intl.NumberFormat("en-IN",{style:"currency",currency:t}).format(e),de=e=>new Intl.DateTimeFormat("en-IN",{dateStyle:"medium",timeStyle:"short"}).format(typeof e=="string"?new Date(e):e),Gn=(...e)=>e.filter(Boolean).join(" "),Dw=y.createContext(void 0),GE=({children:e})=>{const[t,s]=y.useState([]),[r,a]=y.useState([]),[i,o]=y.useState(!0),{user:l}=ve(),c=y.useMemo(()=>t.filter(x=>!x.read).length,[t]),d=y.useMemo(()=>r.filter(x=>!x.read&&x.receiver_id===(l==null?void 0:l.id)).length,[r,l]),u=async()=>{if(!l){s([]);return}const{data:x,error:N}=await D.from("notifications").select("*").eq("user_id",l.id).order("created_at",{ascending:!1}).limit(50);N?console.error("Error fetching notifications:",N):s(x||[])},h=async()=>{if(!l){a([]);return}const{data:x,error:N}=await D.from("messages").select("*").or(`sender_id.eq.${l.id},receiver_id.eq.${l.id}`).order("created_at",{ascending:!0});if(N){console.error("Error fetching messages:",N);return}if(x&&x.length>0){const j=[...new Set([...x.map(S=>S.sender_id),...x.map(S=>S.receiver_id)])],{data:C}=await D.from("profiles").select("user_id, username, display_name").in("user_id",j),E=new Map((C==null?void 0:C.map(S=>[S.user_id,S]))||[]),_=x.map(S=>{var F,A,M,L;return{...S,sender_username:(F=E.get(S.sender_id))==null?void 0:F.username,sender_display_name:(A=E.get(S.sender_id))==null?void 0:A.display_name,receiver_username:(M=E.get(S.receiver_id))==null?void 0:M.username,receiver_display_name:(L=E.get(S.receiver_id))==null?void 0:L.display_name}});a(_)}else a([])};y.useEffect(()=>{(async()=>{o(!0),await Promise.all([u(),h()]),o(!1)})()},[l]);const f=async x=>{const{error:N}=await D.from("notifications").update({read:!0}).eq("id",x);N?console.error("Error marking notification as read:",N):s(j=>j.map(C=>C.id===x?{...C,read:!0}:C))},v=async()=>{if(!l)return;const{error:x}=await D.from("notifications").update({read:!0}).eq("user_id",l.id).eq("read",!1);x?console.error("Error marking all notifications as read:",x):s(N=>N.map(j=>({...j,read:!0})))},b=async x=>{const{error:N}=await D.from("messages").update({read:!0}).eq("id",x);N?console.error("Error marking message as read:",N):a(j=>j.map(C=>C.id===x?{...C,read:!0}:C))},g=async(x,N,j)=>{if(!l)throw new Error("User not logged in");const{error:C}=await D.from("messages").insert({sender_id:l.id,receiver_id:x,message:N,meet_id:j||null});if(C)throw console.error("Error sending message:",C),C;await h()},w=async()=>{await u()},p=async()=>{await h()},m=y.useMemo(()=>({notifications:t,messages:r,unreadNotificationsCount:c,unreadMessagesCount:d,isLoading:i,markNotificationAsRead:f,markAllNotificationsAsRead:v,markMessageAsRead:b,sendMessage:g,refreshNotifications:w,refreshMessages:p}),[t,r,c,d,i]);return n.jsx(Dw.Provider,{value:m,children:e})},Xi=()=>{const e=y.useContext(Dw);if(!e)throw new Error("useNotifications must be used within a NotificationsProvider");return e};function _l(e){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_l(e)}function ur(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function bt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Ss(e){bt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||_l(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function QE(e,t){bt(2,arguments);var s=Ss(e).getTime(),r=ur(t);return new Date(s+r)}var JE={};function lc(){return JE}function XE(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function ZE(e){return bt(1,arguments),e instanceof Date||_l(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function e2(e){if(bt(1,arguments),!ZE(e)&&typeof e!="number")return!1;var t=Ss(e);return!isNaN(Number(t))}function t2(e,t){bt(2,arguments);var s=ur(t);return QE(e,-s)}var s2=864e5;function n2(e){bt(1,arguments);var t=Ss(e),s=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=s-r;return Math.floor(a/s2)+1}function El(e){bt(1,arguments);var t=1,s=Ss(e),r=s.getUTCDay(),a=(r<t?7:0)+r-t;return s.setUTCDate(s.getUTCDate()-a),s.setUTCHours(0,0,0,0),s}function Aw(e){bt(1,arguments);var t=Ss(e),s=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(s+1,0,4),r.setUTCHours(0,0,0,0);var a=El(r),i=new Date(0);i.setUTCFullYear(s,0,4),i.setUTCHours(0,0,0,0);var o=El(i);return t.getTime()>=a.getTime()?s+1:t.getTime()>=o.getTime()?s:s-1}function r2(e){bt(1,arguments);var t=Aw(e),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var r=El(s);return r}var a2=6048e5;function i2(e){bt(1,arguments);var t=Ss(e),s=El(t).getTime()-r2(t).getTime();return Math.round(s/a2)+1}function Sl(e,t){var s,r,a,i,o,l,c,d;bt(1,arguments);var u=lc(),h=ur((s=(r=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:u.weekStartsOn)!==null&&r!==void 0?r:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&s!==void 0?s:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Ss(e),v=f.getUTCDay(),b=(v<h?7:0)+v-h;return f.setUTCDate(f.getUTCDate()-b),f.setUTCHours(0,0,0,0),f}function Tw(e,t){var s,r,a,i,o,l,c,d;bt(1,arguments);var u=Ss(e),h=u.getUTCFullYear(),f=lc(),v=ur((s=(r=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:f.firstWeekContainsDate)!==null&&r!==void 0?r:(c=f.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(h+1,0,v),b.setUTCHours(0,0,0,0);var g=Sl(b,t),w=new Date(0);w.setUTCFullYear(h,0,v),w.setUTCHours(0,0,0,0);var p=Sl(w,t);return u.getTime()>=g.getTime()?h+1:u.getTime()>=p.getTime()?h:h-1}function o2(e,t){var s,r,a,i,o,l,c,d;bt(1,arguments);var u=lc(),h=ur((s=(r=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:u.firstWeekContainsDate)!==null&&r!==void 0?r:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1),f=Tw(e,t),v=new Date(0);v.setUTCFullYear(f,0,h),v.setUTCHours(0,0,0,0);var b=Sl(v,t);return b}var l2=6048e5;function c2(e,t){bt(1,arguments);var s=Ss(e),r=Sl(s,t).getTime()-o2(s,t).getTime();return Math.round(r/l2)+1}function Ee(e,t){for(var s=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return s+r}var Ys={y:function(t,s){var r=t.getUTCFullYear(),a=r>0?r:1-r;return Ee(s==="yy"?a%100:a,s.length)},M:function(t,s){var r=t.getUTCMonth();return s==="M"?String(r+1):Ee(r+1,2)},d:function(t,s){return Ee(t.getUTCDate(),s.length)},a:function(t,s){var r=t.getUTCHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,s){return Ee(t.getUTCHours()%12||12,s.length)},H:function(t,s){return Ee(t.getUTCHours(),s.length)},m:function(t,s){return Ee(t.getUTCMinutes(),s.length)},s:function(t,s){return Ee(t.getUTCSeconds(),s.length)},S:function(t,s){var r=s.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,r-3));return Ee(i,s.length)}},br={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},d2={G:function(t,s,r){var a=t.getUTCFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return r.ordinalNumber(i,{unit:"year"})}return Ys.y(t,s)},Y:function(t,s,r,a){var i=Tw(t,a),o=i>0?i:1-i;if(s==="YY"){var l=o%100;return Ee(l,2)}return s==="Yo"?r.ordinalNumber(o,{unit:"year"}):Ee(o,s.length)},R:function(t,s){var r=Aw(t);return Ee(r,s.length)},u:function(t,s){var r=t.getUTCFullYear();return Ee(r,s.length)},Q:function(t,s,r){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(s){case"Q":return String(a);case"QQ":return Ee(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,s,r){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(s){case"q":return String(a);case"qq":return Ee(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,s,r){var a=t.getUTCMonth();switch(s){case"M":case"MM":return Ys.M(t,s);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(t,s,r){var a=t.getUTCMonth();switch(s){case"L":return String(a+1);case"LL":return Ee(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(t,s,r,a){var i=c2(t,a);return s==="wo"?r.ordinalNumber(i,{unit:"week"}):Ee(i,s.length)},I:function(t,s,r){var a=i2(t);return s==="Io"?r.ordinalNumber(a,{unit:"week"}):Ee(a,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ys.d(t,s)},D:function(t,s,r){var a=n2(t);return s==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Ee(a,s.length)},E:function(t,s,r){var a=t.getUTCDay();switch(s){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(t,s,r,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(s){case"e":return String(o);case"ee":return Ee(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,s,r,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(s){case"c":return String(o);case"cc":return Ee(o,s.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,s,r){var a=t.getUTCDay(),i=a===0?7:a;switch(s){case"i":return String(i);case"ii":return Ee(i,s.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(t,s,r){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,s,r){var a=t.getUTCHours(),i;switch(a===12?i=br.noon:a===0?i=br.midnight:i=a/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,s,r){var a=t.getUTCHours(),i;switch(a>=17?i=br.evening:a>=12?i=br.afternoon:a>=4?i=br.morning:i=br.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return Ys.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ys.H(t,s)},K:function(t,s,r){var a=t.getUTCHours()%12;return s==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Ee(a,s.length)},k:function(t,s,r){var a=t.getUTCHours();return a===0&&(a=24),s==="ko"?r.ordinalNumber(a,{unit:"hour"}):Ee(a,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ys.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ys.s(t,s)},S:function(t,s){return Ys.S(t,s)},X:function(t,s,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(s){case"X":return Cp(o);case"XXXX":case"XX":return Vn(o);case"XXXXX":case"XXX":default:return Vn(o,":")}},x:function(t,s,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(s){case"x":return Cp(o);case"xxxx":case"xx":return Vn(o);case"xxxxx":case"xxx":default:return Vn(o,":")}},O:function(t,s,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Np(o,":");case"OOOO":default:return"GMT"+Vn(o,":")}},z:function(t,s,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Np(o,":");case"zzzz":default:return"GMT"+Vn(o,":")}},t:function(t,s,r,a){var i=a._originalDate||t,o=Math.floor(i.getTime()/1e3);return Ee(o,s.length)},T:function(t,s,r,a){var i=a._originalDate||t,o=i.getTime();return Ee(o,s.length)}};function Np(e,t){var s=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(i===0)return s+String(a);var o=t;return s+String(a)+o+Ee(i,2)}function Cp(e,t){if(e%60===0){var s=e>0?"-":"+";return s+Ee(Math.abs(e)/60,2)}return Vn(e,t)}function Vn(e,t){var s=t||"",r=e>0?"-":"+",a=Math.abs(e),i=Ee(Math.floor(a/60),2),o=Ee(a%60,2);return r+i+s+o}var _p=function(t,s){switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},Pw=function(t,s){switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},u2=function(t,s){var r=t.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return _p(t,s);var o;switch(a){case"P":o=s.dateTime({width:"short"});break;case"PP":o=s.dateTime({width:"medium"});break;case"PPP":o=s.dateTime({width:"long"});break;case"PPPP":default:o=s.dateTime({width:"full"});break}return o.replace("{{date}}",_p(a,s)).replace("{{time}}",Pw(i,s))},h2={p:Pw,P:u2},f2=["D","DD"],m2=["YY","YYYY"];function p2(e){return f2.indexOf(e)!==-1}function x2(e){return m2.indexOf(e)!==-1}function Ep(e,t,s){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var g2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},v2=function(t,s,r){var a,i=g2[t];return typeof i=="string"?a=i:s===1?a=i.one:a=i.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function td(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=t.width?String(t.width):e.defaultWidth,r=e.formats[s]||e.formats[e.defaultWidth];return r}}var y2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},w2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},b2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},j2={date:td({formats:y2,defaultWidth:"full"}),time:td({formats:w2,defaultWidth:"full"}),dateTime:td({formats:b2,defaultWidth:"full"})},N2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},C2=function(t,s,r,a){return N2[t]};function Ua(e){return function(t,s){var r=s!=null&&s.context?String(s.context):"standalone",a;if(r==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=s!=null&&s.width?String(s.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=s!=null&&s.width?String(s.width):e.defaultWidth;a=e.values[c]||e.values[l]}var d=e.argumentCallback?e.argumentCallback(t):t;return a[d]}}var _2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},E2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},S2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},F2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},k2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},D2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},A2=function(t,s){var r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},T2={ordinalNumber:A2,era:Ua({values:_2,defaultWidth:"wide"}),quarter:Ua({values:E2,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Ua({values:S2,defaultWidth:"wide"}),day:Ua({values:F2,defaultWidth:"wide"}),dayPeriod:Ua({values:k2,defaultWidth:"wide",formattingValues:D2,defaultFormattingWidth:"wide"})};function za(e){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=s.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?M2(l,function(h){return h.test(o)}):P2(l,function(h){return h.test(o)}),d;d=e.valueCallback?e.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;var u=t.slice(o.length);return{value:d,rest:u}}}function P2(e,t){for(var s in e)if(e.hasOwnProperty(s)&&t(e[s]))return s}function M2(e,t){for(var s=0;s<e.length;s++)if(t(e[s]))return s}function R2(e){return function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var a=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;var l=t.slice(a.length);return{value:o,rest:l}}}var L2=/^(\d+)(th|st|nd|rd)?/i,I2=/\d+/i,O2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},B2={any:[/^b/i,/^(a|c)/i]},$2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},U2={any:[/1/i,/2/i,/3/i,/4/i]},z2={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},V2={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},W2={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},q2={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},H2={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Y2={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},K2={ordinalNumber:R2({matchPattern:L2,parsePattern:I2,valueCallback:function(t){return parseInt(t,10)}}),era:za({matchPatterns:O2,defaultMatchWidth:"wide",parsePatterns:B2,defaultParseWidth:"any"}),quarter:za({matchPatterns:$2,defaultMatchWidth:"wide",parsePatterns:U2,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:za({matchPatterns:z2,defaultMatchWidth:"wide",parsePatterns:V2,defaultParseWidth:"any"}),day:za({matchPatterns:W2,defaultMatchWidth:"wide",parsePatterns:q2,defaultParseWidth:"any"}),dayPeriod:za({matchPatterns:H2,defaultMatchWidth:"any",parsePatterns:Y2,defaultParseWidth:"any"})},G2={code:"en-US",formatDistance:v2,formatLong:j2,formatRelative:C2,localize:T2,match:K2,options:{weekStartsOn:0,firstWeekContainsDate:1}},Q2=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,J2=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,X2=/^'([^]*?)'?$/,Z2=/''/g,eS=/[a-zA-Z]/;function hr(e,t,s){var r,a,i,o,l,c,d,u,h,f,v,b,g,w;bt(2,arguments);var p=String(t),m=lc(),x=(r=(a=void 0)!==null&&a!==void 0?a:m.locale)!==null&&r!==void 0?r:G2,N=ur((i=(o=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:m.firstWeekContainsDate)!==null&&o!==void 0?o:(d=m.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=ur((h=(f=(v=(b=void 0)!==null&&b!==void 0?b:void 0)!==null&&v!==void 0?v:m.weekStartsOn)!==null&&f!==void 0?f:(g=m.locale)===null||g===void 0||(w=g.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&h!==void 0?h:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var C=Ss(e);if(!e2(C))throw new RangeError("Invalid time value");var E=XE(C),_=t2(C,E),S={firstWeekContainsDate:N,weekStartsOn:j,locale:x,_originalDate:C},F=p.match(J2).map(function(A){var M=A[0];if(M==="p"||M==="P"){var L=h2[M];return L(A,x.formatLong)}return A}).join("").match(Q2).map(function(A){if(A==="''")return"'";var M=A[0];if(M==="'")return tS(A);var L=d2[M];if(L)return x2(A)&&Ep(A,t,String(e)),p2(A)&&Ep(A,t,String(e)),L(_,A,x.localize,S);if(M.match(eS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return A}).join("");return F}function tS(e){var t=e.match(X2);return t?t[1].replace(Z2,"'"):e}const sS={fan:{title:"Fan Dashboard",menu:[{type:"link",to:"/fan",label:"Browse Events",icon:""},{type:"link",to:"/fan/following",label:"Following",icon:""},{type:"link",to:"/fan/bids",label:"My Bids",icon:""},{type:"link",to:"/fan/meets",label:"Upcoming Meets",icon:""},{type:"link",to:"/fan/history",label:"History",icon:""},{type:"link",to:"/fan/wallet",label:"Wallet & Refunds",icon:""},{type:"link",to:"/fan/messages",label:"Messages",icon:""},{type:"link",to:"/fan/notifications",label:"Notifications",icon:""},{type:"link",to:"/fan/settings",label:"Settings",icon:""},{type:"link",to:"/fan/support",label:"Help & Support",icon:""}]},creator:{title:"Creator Control Room",menu:[{type:"link",to:"/creator",label:"Overview",icon:""},{type:"link",to:"/creator/events",label:"My Events",icon:""},{type:"link",to:"/creator/events/new",label:"Create Event",icon:""},{type:"link",to:"/creator/profile-setup",label:"Profile Setup",icon:""},{type:"link",to:"/creator/followers",label:"Followers",icon:""},{type:"link",to:"/creator/earnings",label:"Earnings",icon:""},{type:"link",to:"/creator/withdrawals",label:"Withdrawals",icon:""},{type:"link",to:"/creator/meets",label:"Upcoming Meets",icon:""},{type:"link",to:"/creator/messages",label:"Messages",icon:""},{type:"link",to:"/creator/notifications",label:"Notifications",icon:""},{type:"link",to:"/creator/settings",label:"Settings",icon:""},{type:"link",to:"/creator/support",label:"Help & Support",icon:""}]},admin:{title:"Admin Command Center",menu:[{type:"link",to:"/admin",label:"Dashboard",icon:""},{type:"section",label:"USER MANAGEMENT"},{type:"link",to:"/admin/users",label:"All Users",icon:""},{type:"link",to:"/admin/creators",label:"Creators Management",icon:""},{type:"link",to:"/admin/fans",label:"Fans Management",icon:""},{type:"section",label:"CONTENT MANAGEMENT"},{type:"link",to:"/admin/events",label:"Events Management",icon:""},{type:"link",to:"/admin/featured",label:"Featured Creators",icon:""},{type:"link",to:"/admin/announcements",label:"Announcements",icon:""},{type:"section",label:"FINANCIAL"},{type:"link",to:"/admin/payments",label:"Payments & Transactions",icon:""},{type:"link",to:"/admin/withdrawals",label:"Withdrawal Requests",icon:""},{type:"link",to:"/admin/refunds",label:"Refunds Management",icon:""},{type:"link",to:"/admin/revenue-analytics",label:"Revenue Analytics",icon:""},{type:"link",to:"/admin/platform-commission",label:"Platform Commission",icon:""},{type:"section",label:"REPORTS & ANALYTICS"},{type:"link",to:"/admin/business-analytics",label:"Business Analytics",icon:""},{type:"link",to:"/admin/user-analytics",label:"User Analytics",icon:""},{type:"link",to:"/admin/revenue-reports",label:"Revenue Reports",icon:""},{type:"link",to:"/admin/event-analytics",label:"Event Analytics",icon:""},{type:"link",to:"/admin/audit-logs",label:"Audit Logs",icon:""},{type:"section",label:"SUPPORT & MODERATION"},{type:"link",to:"/admin/support-tickets",label:"Support Tickets",icon:""},{type:"link",to:"/admin/reports-flags",label:"Reports & Flags",icon:""},{type:"link",to:"/admin/disputes",label:"Dispute Management",icon:""},{type:"section",label:"PLATFORM SETTINGS"},{type:"link",to:"/admin/settings/general",label:"General Settings",icon:""},{type:"link",to:"/admin/settings/pricing",label:"Pricing & Commission",icon:""},{type:"link",to:"/admin/settings/email-templates",label:"Email Templates",icon:""},{type:"link",to:"/admin/settings/notifications",label:"Notification Settings",icon:""},{type:"link",to:"/admin/settings/security",label:"Security & Access",icon:""},{type:"section",label:"SYSTEM"},{type:"link",to:"/admin/system/logs",label:"System Logs",icon:""},{type:"link",to:"/admin/system/bulk-actions",label:"Bulk Actions",icon:""},{type:"link",to:"/admin/system/backup",label:"Database Backup",icon:""},{type:"section",label:"ACCOUNT"},{type:"link",to:"/admin/profile",label:"My Profile",icon:""}]}},sd=({role:e})=>{var L,P;const t=sS[e],s=nt(),{logout:r,user:a}=ve(),{notifications:i,unreadNotificationsCount:o,unreadMessagesCount:l,markAllNotificationsAsRead:c}=Xi(),d=a!=null&&a.username?a.username.substring(0,2).toUpperCase():((L=a==null?void 0:a.email)==null?void 0:L.substring(0,2).toUpperCase())||"U",u=a!=null&&a.username?a.username.charAt(0).toUpperCase()+a.username.slice(1):((P=a==null?void 0:a.email)==null?void 0:P.split("@")[0])||"User",h=y.useMemo(()=>`/${e}`,[e]),[f,v]=y.useState(!1),[b,g]=y.useState(!1),[w,p]=y.useState(320),[m,x]=y.useState(!1),[N,j]=y.useState("none"),[C,E]=y.useState(0),[_,S]=y.useState("");y.useEffect(()=>{(async()=>{if(!a||e!=="fan")return;const{data:Z}=await D.from("wallets").select("balance").eq("user_id",a.id).single();Z&&E(Z.balance)})()},[a,e]);const F=()=>{r(),s("/auth")};y.useEffect(()=>{if(!m)return;const q=H=>{const U=Math.min(420,Math.max(220,H.clientX));p(U)},Z=()=>{x(!1)};return window.addEventListener("mousemove",q),window.addEventListener("mouseup",Z),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",Z)}},[m]);const A=q=>t.menu.map(Z=>{if("type"in Z&&Z.type==="section")return n.jsx("div",{className:"mt-4 mb-1 text-xs font-semibold uppercase tracking-[0.2em] text-white/60",children:Z.label},Z.label);const H=Z,k=!!H.disabled,R=H.to===h;let U=0;return H.label==="Notifications"?U=o:H.label==="Messages"&&(U=l),n.jsxs(Gs,{to:H.to,end:R,onClick:J=>{if(k){J.preventDefault(),J.stopPropagation();return}q!=null&&q.closeOnSelect&&v(!1)},className:({isActive:J})=>Gn("flex items-center gap-3 rounded-[12px] border border-transparent px-5 py-3 text-base transition-all",k?"cursor-not-allowed text-white/40 opacity-60":J?"bg-white/10 text-white font-semibold shadow-[0_18px_45px_rgba(0,0,0,0.65)]":"text-white/75 hover:bg-white/5 hover:text-white"),children:[n.jsx("span",{className:Gn("flex-1",e==="admin"?"font-semibold tracking-wide":"",b?"hidden":""),children:H.label}),!k&&U>0?n.jsx(Q,{variant:"danger",children:U}):null]},H.to)}),M=()=>N==="notifications"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-[#E9ECEF] px-5 py-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold text-[#212529]",children:"Notifications"}),n.jsx("div",{className:"text-xs text-[#6C757D]",children:"Latest updates on your bids and meets."})]}),n.jsx(T,{variant:"secondary",size:"sm",className:"border-none bg-[#050014] text-white hover:bg-[#140423]",onClick:()=>c(),children:"Mark all read"})]}),n.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto px-5 py-4",children:i.length===0?n.jsx("div",{className:"text-center text-sm text-[#6C757D] py-4",children:"No notifications yet."}):i.slice(0,5).map(q=>n.jsxs("div",{className:"rounded-[12px] bg-white/90 p-3 shadow-sm",children:[n.jsx("div",{className:"text-sm font-semibold text-[#212529]",children:q.title}),n.jsx("div",{className:"text-xs text-[#6C757D]",children:q.message}),n.jsx("div",{className:"mt-1 text-[10px] text-[#ADB5BD]",children:hr(new Date(q.created_at),"MMM d, h:mm a")})]},q.id))}),n.jsx("div",{className:"border-t border-[#E9ECEF] p-4",children:n.jsx(T,{variant:"secondary",size:"sm",className:"w-full border-none bg-white text-[#050014] hover:bg-[#F8F9FA]",onClick:()=>s(`/${e}/notifications`),children:"View all notifications"})})]}):N==="profile"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 border-b border-[#E9ECEF] px-5 py-4",children:[n.jsx(Mt,{initials:d,size:"md"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold text-[#212529]",children:u}),n.jsxs("div",{className:"text-xs text-[#6C757D]",children:[e.charAt(0).toUpperCase()+e.slice(1)," account  Premium"]})]})]}),n.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto px-5 py-4",children:[n.jsxs("div",{className:"rounded-[12px] bg-white/90 p-3 shadow-sm",children:[n.jsx("div",{className:"text-xs font-semibold uppercase tracking-[0.16em] text-[#6C757D]",children:"Wallet"}),n.jsxs("div",{className:"mt-1 text-lg font-semibold text-[#212529]",children:[V(C)," balance"]}),n.jsx("div",{className:"mt-1 text-xs text-[#6C757D]",children:"Quick access to bids and refunds."})]}),n.jsxs("div",{className:"grid gap-2 text-sm text-[#343A40]",children:[n.jsxs("button",{type:"button",className:"flex w-full items-center justify-between rounded-[10px] bg-white/90 px-3 py-2 text-left shadow-sm hover:bg-[#F8F9FA]",onClick:()=>s(`/${e}/wallet`),children:[n.jsx("span",{children:"Wallet & refunds"}),n.jsx("span",{children:""})]}),n.jsxs("button",{type:"button",className:"flex w-full items-center justify-between rounded-[10px] bg-white/90 px-3 py-2 text-left shadow-sm hover:bg-[#F8F9FA]",onClick:()=>s(`/${e}/meets`),children:[n.jsx("span",{children:"Upcoming meets"}),n.jsx("span",{children:""})]}),n.jsxs("button",{type:"button",className:"flex w-full items-center justify-between rounded-[10px] bg-white/90 px-3 py-2 text-left shadow-sm hover:bg-[#F8F9FA]",onClick:()=>s(`/${e}/settings`),children:[n.jsx("span",{children:"Profile & settings"}),n.jsx("span",{children:""})]})]})]}),n.jsx("div",{className:"border-t border-[#E9ECEF] p-4",children:n.jsx(T,{variant:"secondary",size:"sm",className:"w-full border-none bg-[#050014] text-white hover:bg-[#140423]",onClick:()=>{F()},children:"Switch account"})})]}):null;return n.jsxs("div",{className:"flex min-h-screen bg-[#F8F9FA]",children:[n.jsxs("aside",{className:"sticky top-0 hidden h-screen max-h-screen flex-shrink-0 border-r border-[#1F2933] bg-gradient-to-b from-[#050014] via-[#050014] to-[#140423] text-white md:flex md:flex-col relative",style:{width:b?80:w},children:[n.jsxs("div",{className:Gn("flex flex-1 flex-col overflow-y-auto [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden py-8",b?"px-3":"px-6"),children:[n.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[n.jsx(Mt,{initials:d,size:"lg"}),n.jsxs("div",{className:Gn("text-lg font-semibold text-white",b?"hidden":""),children:["Hey, ",u,"!"]}),b?null:n.jsx(Q,{variant:"primary",children:"Premium"})]}),n.jsx("nav",{className:"mt-8 flex flex-1 flex-col gap-1",children:A()})]}),n.jsx("button",{type:"button",onClick:()=>g(q=>!q),className:"absolute -right-3 top-24 hidden h-7 w-7 items-center justify-center rounded-full border border-white/30 bg-[#050014] text-xs text-white shadow-md transition hover:bg-white hover:text-[#050014] md:flex",children:b?"":""}),n.jsx("div",{className:"absolute right-0 top-0 hidden h-full w-1 cursor-col-resize md:block",onMouseDown:()=>x(!0)}),n.jsx("div",{className:"px-6 pb-6",children:n.jsx("button",{type:"button",className:"inline-flex h-10 w-full items-center justify-start rounded-[8px] bg-black px-4 text-sm font-semibold text-white transition-colors hover:bg-black/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",onClick:F,children:"Logout"})})]}),f&&n.jsxs("div",{className:"fixed inset-0 z-40 flex md:hidden",children:[n.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>v(!1)}),n.jsxs("div",{className:"relative z-10 flex h-full w-[260px] flex-col border-r border-[#1F2933] bg-gradient-to-b from-[#050014] via-[#050014] to-[#140423] text-white",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 px-4 py-3",children:[n.jsx("span",{className:"text-sm font-semibold text-white",children:t.title}),n.jsx("button",{type:"button",className:"rounded-md border border-white/30 p-1 text-white",onClick:()=>v(!1),children:""})]}),n.jsxs("div",{className:"flex flex-1 flex-col overflow-y-auto [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden px-4 py-4",children:[n.jsx("nav",{className:"flex flex-1 flex-col gap-1",children:A({closeOnSelect:!0})}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",className:"inline-flex h-10 w-full items-center justify-start rounded-[8px] bg-black px-4 text-sm font-semibold text-white transition-colors hover:bg-black/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",onClick:F,children:"Logout"})})]})]})]}),N!=="none"&&n.jsx("div",{className:"fixed inset-y-0 right-0 z-30 hidden w-80 flex-col border-l border-[#E9ECEF] bg-gradient-to-b from-[#FFF7FF] via-[#F4E6FF] to-[#F5F0FF] shadow-[0_0_45px_rgba(15,23,42,0.25)] backdrop-blur-xl md:flex",onMouseLeave:()=>j("none"),children:M()}),n.jsxs("div",{className:"flex w-full flex-col",children:[n.jsxs("header",{className:"sticky top-0 z-40 flex h-[70px] items-center justify-between border-b border-[#E9ECEF] bg-white px-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{type:"button",className:"flex items-center justify-center rounded-md border border-[#E9ECEF] p-2 text-[#343A40] md:hidden",onClick:()=>v(q=>!q),children:[n.jsx("span",{className:"sr-only",children:"Open sidebar"}),n.jsxs("div",{className:"flex flex-col gap-[3px]",children:[n.jsx("span",{className:"h-[2px] w-4 bg-[#343A40]"}),n.jsx("span",{className:"h-[2px] w-4 bg-[#343A40]"}),n.jsx("span",{className:"h-[2px] w-4 bg-[#343A40]"})]})]}),n.jsx("div",{className:"text-xl font-semibold text-[#212529]",children:t.title})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative hidden md:block",children:[n.jsx("input",{className:"h-11 rounded-[12px] border-2 border-[#E9ECEF] px-4 pr-10 text-sm focus:border-[#FF6B35] focus:shadow-[0_0_0_3px_rgba(255,107,53,0.1)]",placeholder:"Search events, creators",value:_,onChange:q=>S(q.target.value),onKeyDown:q=>{q.key==="Enter"&&s(`${e==="fan"?"/fan":"/browse-events"}?q=${encodeURIComponent(_)}`)}}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-lg text-[#6C757D]",children:""})]}),n.jsx("div",{className:"hidden md:block",onMouseEnter:()=>j("notifications"),children:n.jsxs(T,{variant:"secondary",size:"icon",className:"bg-black text-white border-none hover:bg-black/90 relative",children:["",o>0&&n.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white",children:o})]})}),n.jsx("div",{className:"hidden md:block",onMouseEnter:()=>j("profile"),children:n.jsx(Mt,{initials:d,size:"sm"})}),n.jsxs("div",{className:"flex items-center gap-2 md:hidden",children:[n.jsxs(T,{variant:"secondary",size:"icon",className:"bg-black text-white border-none hover:bg-black/90 relative",onClick:()=>j(N==="notifications"?"none":"notifications"),children:["",o>0&&n.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white",children:o})]}),n.jsx(Mt,{initials:d,size:"sm"})]})]})]}),n.jsx("main",{className:"flex-1 px-4 py-6 md:px-12 md:py-10",children:n.jsx(Jy,{})})]})]})},ef=y.createContext({});function Ea(e){const t=y.useRef(null);return t.current===null&&(t.current=e()),t.current}const tf=typeof window<"u",cc=tf?y.useLayoutEffect:y.useEffect,dc=y.createContext(null);function sf(e,t){e.indexOf(t)===-1&&e.push(t)}function nf(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const _s=(e,t,s)=>s>t?t:s<e?e:s;let Ii=()=>{};const $s={},Mw=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Rw(e){return typeof e=="object"&&e!==null}const Lw=e=>/^0[^.\s]+$/u.test(e);function rf(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ft=e=>e,nS=(e,t)=>s=>t(e(s)),Zi=(...e)=>e.reduce(nS),xa=(e,t,s)=>{const r=t-e;return r===0?1:(s-e)/r};class af{constructor(){this.subscriptions=[]}add(t){return sf(this.subscriptions,t),()=>nf(this.subscriptions,t)}notify(t,s,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,s,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ns=e=>e*1e3,Yt=e=>e/1e3;function of(e,t){return t?e*(1e3/t):0}const Iw=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,rS=1e-7,aS=12;function iS(e,t,s,r,a){let i,o,l=0;do o=t+(s-t)/2,i=Iw(o,r,a)-e,i>0?s=o:t=o;while(Math.abs(i)>rS&&++l<aS);return o}function eo(e,t,s,r){if(e===t&&s===r)return Ft;const a=i=>iS(i,0,1,e,s);return i=>i===0||i===1?i:Iw(a(i),t,r)}const Ow=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Bw=e=>t=>1-e(1-t),$w=eo(.33,1.53,.69,.99),lf=Bw($w),Uw=Ow(lf),zw=e=>(e*=2)<1?.5*lf(e):.5*(2-Math.pow(2,-10*(e-1))),cf=e=>1-Math.sin(Math.acos(e)),Vw=Bw(cf),Ww=Ow(cf),oS=eo(.42,0,1,1),lS=eo(0,0,.58,1),qw=eo(.42,0,.58,1),cS=e=>Array.isArray(e)&&typeof e[0]!="number",Hw=e=>Array.isArray(e)&&typeof e[0]=="number",dS={linear:Ft,easeIn:oS,easeInOut:qw,easeOut:lS,circIn:cf,circInOut:Ww,circOut:Vw,backIn:lf,backInOut:Uw,backOut:$w,anticipate:zw},uS=e=>typeof e=="string",Sp=e=>{if(Hw(e)){Ii(e.length===4);const[t,s,r,a]=e;return eo(t,s,r,a)}else if(uS(e))return dS[e];return e},Fo=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function hS(e,t){let s=new Set,r=new Set,a=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(d.schedule(u),e()),u(l)}const d={schedule:(u,h=!1,f=!1)=>{const b=f&&a?s:r;return h&&o.add(u),b.has(u)||b.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(l=u,a){i=!0;return}a=!0,[s,r]=[r,s],s.forEach(c),s.clear(),a=!1,i&&(i=!1,d.process(u))}};return d}const fS=40;function Yw(e,t){let s=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=Fo.reduce((x,N)=>(x[N]=hS(i),x),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:h,preRender:f,render:v,postRender:b}=o,g=()=>{const x=$s.useManualTiming?a.timestamp:performance.now();s=!1,$s.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(x-a.timestamp,fS),1)),a.timestamp=x,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),h.process(a),f.process(a),v.process(a),b.process(a),a.isProcessing=!1,s&&t&&(r=!1,e(g))},w=()=>{s=!0,r=!0,a.isProcessing||e(g)};return{schedule:Fo.reduce((x,N)=>{const j=o[N];return x[N]=(C,E=!1,_=!1)=>(s||w(),j.schedule(C,E,_)),x},{}),cancel:x=>{for(let N=0;N<Fo.length;N++)o[Fo[N]].cancel(x)},state:a,steps:o}}const{schedule:Se,cancel:hs,state:Qe,steps:nd}=Yw(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ft,!0);let Ho;function mS(){Ho=void 0}const Ct={now:()=>(Ho===void 0&&Ct.set(Qe.isProcessing||$s.useManualTiming?Qe.timestamp:performance.now()),Ho),set:e=>{Ho=e,queueMicrotask(mS)}},Kw=e=>t=>typeof t=="string"&&t.startsWith(e),df=Kw("--"),pS=Kw("var(--"),uf=e=>pS(e)?xS.test(e.split("/*")[0].trim()):!1,xS=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Oi={...Sa,transform:e=>_s(0,1,e)},ko={...Sa,default:1},ci=e=>Math.round(e*1e5)/1e5,hf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gS(e){return e==null}const vS=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ff=(e,t)=>s=>!!(typeof s=="string"&&vS.test(s)&&s.startsWith(e)||t&&!gS(s)&&Object.prototype.hasOwnProperty.call(s,t)),Gw=(e,t,s)=>r=>{if(typeof r!="string")return r;const[a,i,o,l]=r.match(hf);return{[e]:parseFloat(a),[t]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},yS=e=>_s(0,255,e),rd={...Sa,transform:e=>Math.round(yS(e))},Qn={test:ff("rgb","red"),parse:Gw("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:r=1})=>"rgba("+rd.transform(e)+", "+rd.transform(t)+", "+rd.transform(s)+", "+ci(Oi.transform(r))+")"};function wS(e){let t="",s="",r="",a="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,s+=s,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Su={test:ff("#"),parse:wS,transform:Qn.transform},to=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Js=to("deg"),Cs=to("%"),ce=to("px"),bS=to("vh"),jS=to("vw"),Fp={...Cs,parse:e=>Cs.parse(e)/100,transform:e=>Cs.transform(e*100)},Ir={test:ff("hsl","hue"),parse:Gw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+Cs.transform(ci(t))+", "+Cs.transform(ci(s))+", "+ci(Oi.transform(r))+")"},He={test:e=>Qn.test(e)||Su.test(e)||Ir.test(e),parse:e=>Qn.test(e)?Qn.parse(e):Ir.test(e)?Ir.parse(e):Su.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Qn.transform(e):Ir.transform(e),getAnimatableNone:e=>{const t=He.parse(e);return t.alpha=0,He.transform(t)}},NS=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function CS(e){var t,s;return isNaN(e)&&typeof e=="string"&&(((t=e.match(hf))==null?void 0:t.length)||0)+(((s=e.match(NS))==null?void 0:s.length)||0)>0}const Qw="number",Jw="color",_S="var",ES="var(",kp="${}",SS=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bi(e){const t=e.toString(),s=[],r={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace(SS,c=>(He.test(c)?(r.color.push(i),a.push(Jw),s.push(He.parse(c))):c.startsWith(ES)?(r.var.push(i),a.push(_S),s.push(c)):(r.number.push(i),a.push(Qw),s.push(parseFloat(c))),++i,kp)).split(kp);return{values:s,split:l,indexes:r,types:a}}function Xw(e){return Bi(e).values}function Zw(e){const{split:t,types:s}=Bi(e),r=t.length;return a=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],a[o]!==void 0){const l=s[o];l===Qw?i+=ci(a[o]):l===Jw?i+=He.transform(a[o]):i+=a[o]}return i}}const FS=e=>typeof e=="number"?0:He.test(e)?He.getAnimatableNone(e):e;function kS(e){const t=Xw(e);return Zw(e)(t.map(FS))}const _n={test:CS,parse:Xw,createTransformer:Zw,getAnimatableNone:kS};function ad(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function DS({hue:e,saturation:t,lightness:s,alpha:r}){e/=360,t/=100,s/=100;let a=0,i=0,o=0;if(!t)a=i=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;a=ad(c,l,e+1/3),i=ad(c,l,e),o=ad(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Fl(e,t){return s=>s>0?t:e}const Ie=(e,t,s)=>e+(t-e)*s,id=(e,t,s)=>{const r=e*e,a=s*(t*t-r)+r;return a<0?0:Math.sqrt(a)},AS=[Su,Qn,Ir],TS=e=>AS.find(t=>t.test(e));function Dp(e){const t=TS(e);if(!t)return!1;let s=t.parse(e);return t===Ir&&(s=DS(s)),s}const Ap=(e,t)=>{const s=Dp(e),r=Dp(t);if(!s||!r)return Fl(e,t);const a={...s};return i=>(a.red=id(s.red,r.red,i),a.green=id(s.green,r.green,i),a.blue=id(s.blue,r.blue,i),a.alpha=Ie(s.alpha,r.alpha,i),Qn.transform(a))},Fu=new Set(["none","hidden"]);function PS(e,t){return Fu.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function MS(e,t){return s=>Ie(e,t,s)}function mf(e){return typeof e=="number"?MS:typeof e=="string"?uf(e)?Fl:He.test(e)?Ap:IS:Array.isArray(e)?eb:typeof e=="object"?He.test(e)?Ap:RS:Fl}function eb(e,t){const s=[...e],r=s.length,a=e.map((i,o)=>mf(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)s[o]=a[o](i);return s}}function RS(e,t){const s={...e,...t},r={};for(const a in s)e[a]!==void 0&&t[a]!==void 0&&(r[a]=mf(e[a])(e[a],t[a]));return a=>{for(const i in r)s[i]=r[i](a);return s}}function LS(e,t){const s=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][r[i]],l=e.values[o]??0;s[a]=l,r[i]++}return s}const IS=(e,t)=>{const s=_n.createTransformer(t),r=Bi(e),a=Bi(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?Fu.has(e)&&!a.values.length||Fu.has(t)&&!r.values.length?PS(e,t):Zi(eb(LS(r,a),a.values),s):Fl(e,t)};function tb(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?Ie(e,t,s):mf(e)(e,t)}const OS=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>Se.update(t,s),stop:()=>hs(t),now:()=>Qe.isProcessing?Qe.timestamp:Ct.now()}},sb=(e,t,s=10)=>{let r="";const a=Math.max(Math.round(t/s),2);for(let i=0;i<a;i++)r+=Math.round(e(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},kl=2e4;function pf(e){let t=0;const s=50;let r=e.next(t);for(;!r.done&&t<kl;)t+=s,r=e.next(t);return t>=kl?1/0:t}function BS(e,t=100,s){const r=s({...e,keyframes:[0,t]}),a=Math.min(pf(r),kl);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:Yt(a)}}const $S=5;function nb(e,t,s){const r=Math.max(t-$S,0);return of(s-e(r),t-r)}const ze={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},od=.001;function US({duration:e=ze.duration,bounce:t=ze.bounce,velocity:s=ze.velocity,mass:r=ze.mass}){let a,i,o=1-t;o=_s(ze.minDamping,ze.maxDamping,o),e=_s(ze.minDuration,ze.maxDuration,Yt(e)),o<1?(a=d=>{const u=d*o,h=u*e,f=u-s,v=ku(d,o),b=Math.exp(-h);return od-f/v*b},i=d=>{const h=d*o*e,f=h*s+s,v=Math.pow(o,2)*Math.pow(d,2)*e,b=Math.exp(-h),g=ku(Math.pow(d,2),o);return(-a(d)+od>0?-1:1)*((f-v)*b)/g}):(a=d=>{const u=Math.exp(-d*e),h=(d-s)*e+1;return-od+u*h},i=d=>{const u=Math.exp(-d*e),h=(s-d)*(e*e);return u*h});const l=5/e,c=VS(a,i,l);if(e=Ns(e),isNaN(c))return{stiffness:ze.stiffness,damping:ze.damping,duration:e};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const zS=12;function VS(e,t,s){let r=s;for(let a=1;a<zS;a++)r=r-e(r)/t(r);return r}function ku(e,t){return e*Math.sqrt(1-t*t)}const WS=["duration","bounce"],qS=["stiffness","damping","mass"];function Tp(e,t){return t.some(s=>e[s]!==void 0)}function HS(e){let t={velocity:ze.velocity,stiffness:ze.stiffness,damping:ze.damping,mass:ze.mass,isResolvedFromDuration:!1,...e};if(!Tp(e,qS)&&Tp(e,WS))if(e.visualDuration){const s=e.visualDuration,r=2*Math.PI/(s*1.2),a=r*r,i=2*_s(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:ze.mass,stiffness:a,damping:i}}else{const s=US(e);t={...t,...s,mass:ze.mass},t.isResolvedFromDuration=!0}return t}function Dl(e=ze.visualDuration,t=ze.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:h,velocity:f,isResolvedFromDuration:v}=HS({...s,velocity:-Yt(s.velocity||0)}),b=f||0,g=d/(2*Math.sqrt(c*u)),w=o-i,p=Yt(Math.sqrt(c/u)),m=Math.abs(w)<5;r||(r=m?ze.restSpeed.granular:ze.restSpeed.default),a||(a=m?ze.restDelta.granular:ze.restDelta.default);let x;if(g<1){const j=ku(p,g);x=C=>{const E=Math.exp(-g*p*C);return o-E*((b+g*p*w)/j*Math.sin(j*C)+w*Math.cos(j*C))}}else if(g===1)x=j=>o-Math.exp(-p*j)*(w+(b+p*w)*j);else{const j=p*Math.sqrt(g*g-1);x=C=>{const E=Math.exp(-g*p*C),_=Math.min(j*C,300);return o-E*((b+g*p*w)*Math.sinh(_)+j*w*Math.cosh(_))/j}}const N={calculatedDuration:v&&h||null,next:j=>{const C=x(j);if(v)l.done=j>=h;else{let E=j===0?b:0;g<1&&(E=j===0?Ns(b):nb(x,j,C));const _=Math.abs(E)<=r,S=Math.abs(o-C)<=a;l.done=_&&S}return l.value=l.done?o:C,l},toString:()=>{const j=Math.min(pf(N),kl),C=sb(E=>N.next(j*E).value,j,30);return j+"ms "+C},toTransition:()=>{}};return N}Dl.applyToOptions=e=>{const t=BS(e,100,Dl);return e.ease=t.ease,e.duration=Ns(t.duration),e.type="keyframes",e};function Du({keyframes:e,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},v=_=>l!==void 0&&_<l||c!==void 0&&_>c,b=_=>l===void 0?c:c===void 0||Math.abs(l-_)<Math.abs(c-_)?l:c;let g=s*t;const w=h+g,p=o===void 0?w:o(w);p!==w&&(g=p-h);const m=_=>-g*Math.exp(-_/r),x=_=>p+m(_),N=_=>{const S=m(_),F=x(_);f.done=Math.abs(S)<=d,f.value=f.done?p:F};let j,C;const E=_=>{v(f.value)&&(j=_,C=Dl({keyframes:[f.value,b(f.value)],velocity:nb(x,_,f.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return E(0),{calculatedDuration:null,next:_=>{let S=!1;return!C&&j===void 0&&(S=!0,N(_),E(_)),j!==void 0&&_>=j?C.next(_-j):(!S&&N(_),f)}}}function YS(e,t,s){const r=[],a=s||$s.mix||tb,i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Ft:t;l=Zi(c,l)}r.push(l)}return r}function xf(e,t,{clamp:s=!0,ease:r,mixer:a}={}){const i=e.length;if(Ii(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=YS(t,r,a),c=l.length,d=u=>{if(o&&u<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const f=xa(e[h],e[h+1],u);return l[h](f)};return s?u=>d(_s(e[0],e[i-1],u)):d}function KS(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const a=xa(0,t,r);e.push(Ie(s,1,a))}}function rb(e){const t=[0];return KS(t,e.length-1),t}function GS(e,t){return e.map(s=>s*t)}function QS(e,t){return e.map(()=>t||qw).splice(0,e.length-1)}function di({duration:e=300,keyframes:t,times:s,ease:r="easeInOut"}){const a=cS(r)?r.map(Sp):Sp(r),i={done:!1,value:t[0]},o=GS(s&&s.length===t.length?s:rb(t),e),l=xf(o,t,{ease:Array.isArray(a)?a:QS(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const JS=e=>e!==null;function gf(e,{repeat:t,repeatType:s="loop"},r,a=1){const i=e.filter(JS),l=a<0||t&&s!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const XS={decay:Du,inertia:Du,tween:di,keyframes:di,spring:Dl};function ab(e){typeof e.type=="string"&&(e.type=XS[e.type])}class vf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const ZS=e=>e/100;class yf extends vf{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:s}=this.options;s&&s.updatedAt!==Ct.now()&&this.tick(Ct.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ab(t);const{type:s=di,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=s||di;c!==di&&typeof l[0]!="number"&&(this.mixKeyframes=Zi(ZS,tb(l[0],l[1])),l=[0,100]);const d=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=pf(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=d}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:v,type:b,onUpdate:g,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const p=this.currentTime-d*(this.playbackSpeed>=0?1:-1),m=this.playbackSpeed>=0?p<0:p>a;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let x=this.currentTime,N=r;if(h){const _=Math.min(this.currentTime,a)/l;let S=Math.floor(_),F=_%1;!F&&_>=1&&(F=1),F===1&&S--,S=Math.min(S,h+1),!!(S%2)&&(f==="reverse"?(F=1-F,v&&(F-=v/l)):f==="mirror"&&(N=o)),x=_s(0,1,F)*l}const j=m?{done:!1,value:u[0]}:N.next(x);i&&(j.value=i(j.value));let{done:C}=j;!m&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return E&&b!==Du&&(j.value=gf(u,this.options,w,this.speed)),g&&g(j.value),E&&this.finish(),j}then(t,s){return this.finished.then(t,s)}get duration(){return Yt(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Yt(t)}get time(){return Yt(this.currentTime)}set time(t){var s;t=Ns(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ct.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=Yt(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:t=OS,startTime:s}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ct.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(t=this.options).onComplete)==null||s.call(t)}cancel(){var t,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(t=this.options).onCancel)==null||s.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),t.observe(this)}}function eF(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Jn=e=>e*180/Math.PI,Au=e=>{const t=Jn(Math.atan2(e[1],e[0]));return Tu(t)},tF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Au,rotateZ:Au,skewX:e=>Jn(Math.atan(e[1])),skewY:e=>Jn(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Tu=e=>(e=e%360,e<0&&(e+=360),e),Pp=Au,Mp=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Rp=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),sF={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Mp,scaleY:Rp,scale:e=>(Mp(e)+Rp(e))/2,rotateX:e=>Tu(Jn(Math.atan2(e[6],e[5]))),rotateY:e=>Tu(Jn(Math.atan2(-e[2],e[0]))),rotateZ:Pp,rotate:Pp,skewX:e=>Jn(Math.atan(e[4])),skewY:e=>Jn(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Pu(e){return e.includes("scale")?1:0}function Mu(e,t){if(!e||e==="none")return Pu(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(s)r=sF,a=s;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=tF,a=l}if(!a)return Pu(t);const i=r[t],o=a[1].split(",").map(rF);return typeof i=="function"?i(o):o[i]}const nF=(e,t)=>{const{transform:s="none"}=getComputedStyle(e);return Mu(s,t)};function rF(e){return parseFloat(e.trim())}const Fa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ka=new Set(Fa),Lp=e=>e===Sa||e===ce,aF=new Set(["x","y","z"]),iF=Fa.filter(e=>!aF.has(e));function oF(e){const t=[];return iF.forEach(s=>{const r=e.getValue(s);r!==void 0&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t}const rr={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Mu(t,"x"),y:(e,{transform:t})=>Mu(t,"y")};rr.translateX=rr.x;rr.translateY=rr.y;const ar=new Set;let Ru=!1,Lu=!1,Iu=!1;function ib(){if(Lu){const e=Array.from(ar).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),s=new Map;t.forEach(r=>{const a=oF(r);a.length&&(s.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=s.get(r);a&&a.forEach(([i,o])=>{var l;(l=r.getValue(i))==null||l.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Lu=!1,Ru=!1,ar.forEach(e=>e.complete(Iu)),ar.clear()}function ob(){ar.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Lu=!0)})}function lF(){Iu=!0,ob(),ib(),Iu=!1}class wf{constructor(t,s,r,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=r,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ar.add(this),Ru||(Ru=!0,Se.read(ob),Se.resolveKeyframes(ib))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:r,motionValue:a}=this;if(t[0]===null){const i=a==null?void 0:a.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&s){const l=r.readValue(s,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),a&&i===void 0&&a.set(t[0])}eF(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ar.delete(this)}cancel(){this.state==="scheduled"&&(ar.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const cF=e=>e.startsWith("--");function dF(e,t,s){cF(t)?e.style.setProperty(t,s):e.style[t]=s}const lb=rf(()=>window.ScrollTimeline!==void 0),uF={};function hF(e,t){const s=rf(e);return()=>uF[t]??s()}const cb=hF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ja=([e,t,s,r])=>`cubic-bezier(${e}, ${t}, ${s}, ${r})`,Ip={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ja([0,.65,.55,1]),circOut:Ja([.55,0,1,.45]),backIn:Ja([.31,.01,.66,-.59]),backOut:Ja([.33,1.53,.69,.99])};function db(e,t){if(e)return typeof e=="function"?cb()?sb(e,t):"ease-out":Hw(e)?Ja(e):Array.isArray(e)?e.map(s=>db(s,t)||Ip.easeOut):Ip[e]}function fF(e,t,s,{delay:r=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[t]:s};c&&(u.offset=c);const h=db(l,a);Array.isArray(h)&&(u.easing=h);const f={delay:r,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(f.pseudoElement=d),e.animate(u,f)}function ub(e){return typeof e=="function"&&"applyToOptions"in e}function mF({type:e,...t}){return ub(e)&&cb()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class pF extends vf{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:r,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Ii(typeof t.type!="string");const d=mF(t);this.animation=fF(s,r,a,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=gf(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):dF(s,r,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,s;(s=(t=this.animation).finish)==null||s.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,s;this.isPseudoElement||(s=(t=this.animation).commitStyles)==null||s.call(t)}get duration(){var s,r;const t=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return Yt(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Yt(t)}get time(){return Yt(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ns(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&lb()?(this.animation.timeline=t,Ft):s(this)}}const hb={anticipate:zw,backInOut:Uw,circInOut:Ww};function xF(e){return e in hb}function gF(e){typeof e.ease=="string"&&xF(e.ease)&&(e.ease=hb[e.ease])}const Op=10;class vF extends pF{constructor(t){gF(t),ab(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:r,onComplete:a,element:i,...o}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const l=new yf({...o,autoplay:!1}),c=Ns(this.finishedTime??this.time);s.setWithVelocity(l.sample(c-Op).value,l.sample(c).value,Op),l.stop()}}const Bp=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(_n.test(e)||e==="0")&&!e.startsWith("url("));function yF(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function wF(e,t,s,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Bp(a,t),l=Bp(i,t);return!o||!l?!1:yF(e)||(s==="spring"||ub(s))&&r}function Ou(e){e.duration=0,e.type="keyframes"}const bF=new Set(["opacity","clipPath","filter","transform"]),jF=rf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function NF(e){var u;const{motionValue:t,name:s,repeatDelay:r,repeatType:a,damping:i,type:o}=e;if(!(((u=t==null?void 0:t.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return jF()&&s&&bF.has(s)&&(s!=="transform"||!d)&&!c&&!r&&a!=="mirror"&&i!==0&&o!=="inertia"}const CF=40;class _F extends vf{constructor({autoplay:t=!0,delay:s=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u,...h}){var b;super(),this.stop=()=>{var g,w;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Ct.now();const f={autoplay:t,delay:s,type:r,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u,...h},v=(u==null?void 0:u.KeyframeResolver)||wf;this.keyframeResolver=new v(l,(g,w,p)=>this.onKeyframesResolved(g,w,f,!p),c,d,u),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(t,s,r,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:u}=r;this.resolvedAt=Ct.now(),wF(t,i,o,l)||(($s.instantAnimations||!c)&&(u==null||u(gf(t,r,s))),t[0]=t[t.length-1],Ou(r),r.repeat=0);const f={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>CF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:t},v=!d&&NF(f)?new vF({...f,element:f.motionValue.owner.current}):new yf(f);v.finished.then(()=>this.notifyFinished()).catch(Ft),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),lF()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const EF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SF(e){const t=EF.exec(e);if(!t)return[,];const[,s,r,a]=t;return[`--${s??r}`,a]}function fb(e,t,s=1){const[r,a]=SF(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Mw(o)?parseFloat(o):o}return uf(a)?fb(a,t,s+1):a}function bf(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const mb=new Set(["width","height","top","left","right","bottom",...Fa]),FF={test:e=>e==="auto",parse:e=>e},pb=e=>t=>t.test(e),xb=[Sa,ce,Cs,Js,jS,bS,FF],$p=e=>xb.find(pb(e));function kF(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Lw(e):!0}const DF=new Set(["brightness","contrast","saturate","opacity"]);function AF(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=s.match(hf)||[];if(!r)return e;const a=s.replace(r,"");let i=DF.has(t)?1:0;return r!==s&&(i*=100),t+"("+i+a+")"}const TF=/\b([a-z-]*)\(.*?\)/gu,Bu={..._n,getAnimatableNone:e=>{const t=e.match(TF);return t?t.map(AF).join(" "):e}},Up={...Sa,transform:Math.round},PF={rotate:Js,rotateX:Js,rotateY:Js,rotateZ:Js,scale:ko,scaleX:ko,scaleY:ko,scaleZ:ko,skew:Js,skewX:Js,skewY:Js,distance:ce,translateX:ce,translateY:ce,translateZ:ce,x:ce,y:ce,z:ce,perspective:ce,transformPerspective:ce,opacity:Oi,originX:Fp,originY:Fp,originZ:ce},jf={borderWidth:ce,borderTopWidth:ce,borderRightWidth:ce,borderBottomWidth:ce,borderLeftWidth:ce,borderRadius:ce,radius:ce,borderTopLeftRadius:ce,borderTopRightRadius:ce,borderBottomRightRadius:ce,borderBottomLeftRadius:ce,width:ce,maxWidth:ce,height:ce,maxHeight:ce,top:ce,right:ce,bottom:ce,left:ce,padding:ce,paddingTop:ce,paddingRight:ce,paddingBottom:ce,paddingLeft:ce,margin:ce,marginTop:ce,marginRight:ce,marginBottom:ce,marginLeft:ce,backgroundPositionX:ce,backgroundPositionY:ce,...PF,zIndex:Up,fillOpacity:Oi,strokeOpacity:Oi,numOctaves:Up},MF={...jf,color:He,backgroundColor:He,outlineColor:He,fill:He,stroke:He,borderColor:He,borderTopColor:He,borderRightColor:He,borderBottomColor:He,borderLeftColor:He,filter:Bu,WebkitFilter:Bu},gb=e=>MF[e];function vb(e,t){let s=gb(e);return s!==Bu&&(s=_n),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const RF=new Set(["auto","none","0"]);function LF(e,t,s){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!RF.has(i)&&Bi(i).values.length&&(a=e[r]),r++}if(a&&s)for(const i of t)e[i]=vb(s,a)}class IF extends wf{constructor(t,s,r,a,i){super(t,s,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),uf(d))){const u=fb(d,s.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!mb.has(r)||t.length!==2)return;const[a,i]=t,o=$p(a),l=$p(i);if(o!==l)if(Lp(o)&&Lp(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else rr[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||kF(t[a]))&&r.push(a);r.length&&LF(t,r,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rr[r](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var l;const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(s);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=rr[s](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function yb(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const a=document.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const wb=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Nf(e){return Rw(e)&&"offsetHeight"in e}const zp=30,OF=e=>!isNaN(parseFloat(e)),ui={current:void 0};class BF{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const a=Ct.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=Ct.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=OF(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new af);const r=this.events[t].add(s);return t==="change"?()=>{r(),Se.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return ui.current&&ui.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=Ct.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>zp)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,zp);return of(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,s;(t=this.dependents)==null||t.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ls(e,t){return new BF(e,t)}const{schedule:Cf}=Yw(queueMicrotask,!1),ts={x:!1,y:!1};function bb(){return ts.x||ts.y}function $F(e){return e==="x"||e==="y"?ts[e]?null:(ts[e]=!0,()=>{ts[e]=!1}):ts.x||ts.y?null:(ts.x=ts.y=!0,()=>{ts.x=ts.y=!1})}function jb(e,t){const s=yb(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[s,a,()=>r.abort()]}function Vp(e){return!(e.pointerType==="touch"||bb())}function UF(e,t,s={}){const[r,a,i]=jb(e,s),o=l=>{if(!Vp(l))return;const{target:c}=l,d=t(c,l);if(typeof d!="function"||!c)return;const u=h=>{Vp(h)&&(d(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,a)};return r.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const Nb=(e,t)=>t?e===t?!0:Nb(e,t.parentElement):!1,_f=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,zF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function VF(e){return zF.has(e.tagName)||e.tabIndex!==-1}const Yo=new WeakSet;function Wp(e){return t=>{t.key==="Enter"&&e(t)}}function ld(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const WF=(e,t)=>{const s=e.currentTarget;if(!s)return;const r=Wp(()=>{if(Yo.has(s))return;ld(s,"down");const a=Wp(()=>{ld(s,"up")}),i=()=>ld(s,"cancel");s.addEventListener("keyup",a,t),s.addEventListener("blur",i,t)});s.addEventListener("keydown",r,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),t)};function qp(e){return _f(e)&&!bb()}function qF(e,t,s={}){const[r,a,i]=jb(e,s),o=l=>{const c=l.currentTarget;if(!qp(l))return;Yo.add(c);const d=t(c,l),u=(v,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Yo.has(c)&&Yo.delete(c),qp(v)&&typeof d=="function"&&d(v,{success:b})},h=v=>{u(v,c===window||c===document||s.useGlobalTarget||Nb(c,v.target))},f=v=>{u(v,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",f,a)};return r.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),Nf(l)&&(l.addEventListener("focus",d=>WF(d,a)),!VF(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function Ef(e){return Rw(e)&&"ownerSVGElement"in e}const Ko=new WeakMap;let Xs;const Cb=(e,t,s)=>(r,a)=>a&&a[0]?a[0][e+"Size"]:Ef(r)&&"getBBox"in r?r.getBBox()[t]:r[s],HF=Cb("inline","width","offsetWidth"),YF=Cb("block","height","offsetHeight");function KF({target:e,borderBoxSize:t}){var s;(s=Ko.get(e))==null||s.forEach(r=>{r(e,{get width(){return HF(e,t)},get height(){return YF(e,t)}})})}function GF(e){e.forEach(KF)}function QF(){typeof ResizeObserver>"u"||(Xs=new ResizeObserver(GF))}function JF(e,t){Xs||QF();const s=yb(e);return s.forEach(r=>{let a=Ko.get(r);a||(a=new Set,Ko.set(r,a)),a.add(t),Xs==null||Xs.observe(r)}),()=>{s.forEach(r=>{const a=Ko.get(r);a==null||a.delete(t),a!=null&&a.size||Xs==null||Xs.unobserve(r)})}}const Go=new Set;let Or;function XF(){Or=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};Go.forEach(t=>t(e))},window.addEventListener("resize",Or)}function ZF(e){return Go.add(e),Or||XF(),()=>{Go.delete(e),!Go.size&&typeof Or=="function"&&(window.removeEventListener("resize",Or),Or=void 0)}}function ek(e,t){return typeof e=="function"?ZF(e):JF(e,t)}function _b(e,t){let s;const r=()=>{const{currentTime:a}=t,o=(a===null?0:a.value)/100;s!==o&&e(o),s=o};return Se.preUpdate(r,!0),()=>hs(r)}function tk(e){return Ef(e)&&e.tagName==="svg"}function sk(...e){const t=!Array.isArray(e[0]),s=t?0:-1,r=e[0+s],a=e[1+s],i=e[2+s],o=e[3+s],l=xf(a,i,o);return t?l(r):l}const ut=e=>!!(e&&e.getVelocity),nk=[...xb,He,_n],rk=e=>nk.find(pb(e)),uc=y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Hp(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ak(...e){return t=>{let s=!1;const r=e.map(a=>{const i=Hp(a,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():Hp(e[a],null)}}}}function ik(...e){return y.useCallback(ak(...e),e)}class ok extends y.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const r=s.offsetParent,a=Nf(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function lk({children:e,isPresent:t,anchorX:s,root:r}){const a=y.useId(),i=y.useRef(null),o=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=y.useContext(uc),c=ik(i,e==null?void 0:e.ref);return y.useInsertionEffect(()=>{const{width:d,height:u,top:h,left:f,right:v}=o.current;if(t||!i.current||!d||!u)return;const b=s==="left"?`left: ${f}`:`right: ${v}`;i.current.dataset.motionPopId=a;const g=document.createElement("style");l&&(g.nonce=l);const w=r??document.head;return w.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${u}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{w.contains(g)&&w.removeChild(g)}},[t]),n.jsx(ok,{isPresent:t,childRef:i,sizeRef:o,children:y.cloneElement(e,{ref:c})})}const ck=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const d=Ea(dk),u=y.useId();let h=!0,f=y.useMemo(()=>(h=!1,{id:u,initial:t,isPresent:s,custom:a,onExitComplete:v=>{d.set(v,!0);for(const b of d.values())if(!b)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[s,d,r]);return i&&h&&(f={...f}),y.useMemo(()=>{d.forEach((v,b)=>d.set(b,!1))},[s]),y.useEffect(()=>{!s&&!d.size&&r&&r()},[s]),o==="popLayout"&&(e=n.jsx(lk,{isPresent:s,anchorX:l,root:c,children:e})),n.jsx(dc.Provider,{value:f,children:e})};function dk(){return new Map}function Eb(e=!0){const t=y.useContext(dc);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=t,i=y.useId();y.useEffect(()=>{if(e)return a(i)},[e]);const o=y.useCallback(()=>e&&r&&r(i),[i,r,e]);return!s&&r?[!1,o]:[!0]}const Do=e=>e.key||"";function Yp(e){const t=[];return y.Children.forEach(e,s=>{y.isValidElement(s)&&t.push(s)}),t}const Kp=({children:e,custom:t,initial:s=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[d,u]=Eb(o),h=y.useMemo(()=>Yp(e),[e]),f=o&&!d?[]:h.map(Do),v=y.useRef(!0),b=y.useRef(h),g=Ea(()=>new Map),[w,p]=y.useState(h),[m,x]=y.useState(h);cc(()=>{v.current=!1,b.current=h;for(let C=0;C<m.length;C++){const E=Do(m[C]);f.includes(E)?g.delete(E):g.get(E)!==!0&&g.set(E,!1)}},[m,f.length,f.join("-")]);const N=[];if(h!==w){let C=[...h];for(let E=0;E<m.length;E++){const _=m[E],S=Do(_);f.includes(S)||(C.splice(E,0,_),N.push(_))}return i==="wait"&&N.length&&(C=N),x(Yp(C)),p(h),null}const{forceRender:j}=y.useContext(ef);return n.jsx(n.Fragment,{children:m.map(C=>{const E=Do(C),_=o&&!d?!1:h===m||f.includes(E),S=()=>{if(g.has(E))g.set(E,!0);else return;let F=!0;g.forEach(A=>{A||(F=!1)}),F&&(j==null||j(),x(b.current),o&&(u==null||u()),r&&r())};return n.jsx(ck,{isPresent:_,initial:!v.current||s?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,root:c,onExitComplete:_?void 0:S,anchorX:l,children:C},E)})})},Sb=y.createContext({strict:!1}),Gp={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ga={};for(const e in Gp)ga[e]={isEnabled:t=>Gp[e].some(s=>!!t[s])};function uk(e){for(const t in e)ga[t]={...ga[t],...e[t]}}const hk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Al(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||hk.has(e)}let Fb=e=>!Al(e);function fk(e){typeof e=="function"&&(Fb=t=>t.startsWith("on")?!Al(t):e(t))}try{fk(require("@emotion/is-prop-valid").default)}catch{}function mk(e,t,s){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(Fb(a)||s===!0&&Al(a)||!t&&!Al(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}const hc=y.createContext({});function fc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function $i(e){return typeof e=="string"||Array.isArray(e)}const Sf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ff=["initial",...Sf];function mc(e){return fc(e.animate)||Ff.some(t=>$i(e[t]))}function kb(e){return!!(mc(e)||e.variants)}function pk(e,t){if(mc(e)){const{initial:s,animate:r}=e;return{initial:s===!1||$i(s)?s:void 0,animate:$i(r)?r:void 0}}return e.inherit!==!1?t:{}}function xk(e){const{initial:t,animate:s}=pk(e,y.useContext(hc));return y.useMemo(()=>({initial:t,animate:s}),[Qp(t),Qp(s)])}function Qp(e){return Array.isArray(e)?e.join(" "):e}const Ui={};function gk(e){for(const t in e)Ui[t]=e[t],df(t)&&(Ui[t].isCSSVariable=!0)}function Db(e,{layout:t,layoutId:s}){return ka.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Ui[e]||e==="opacity")}const vk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yk=Fa.length;function wk(e,t,s){let r="",a=!0;for(let i=0;i<yk;i++){const o=Fa[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const d=wb(l,jf[o]);if(!c){a=!1;const u=vk[o]||o;r+=`${u}(${d}) `}s&&(t[o]=d)}}return r=r.trim(),s?r=s(t,a?"":r):a&&(r="none"),r}function kf(e,t,s){const{style:r,vars:a,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(ka.has(c)){o=!0;continue}else if(df(c)){a[c]=d;continue}else{const u=wb(d,jf[c]);c.startsWith("origin")?(l=!0,i[c]=u):r[c]=u}}if(t.transform||(o||s?r.transform=wk(t,e.transform,s):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;r.transformOrigin=`${c} ${d} ${u}`}}const Df=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ab(e,t,s){for(const r in t)!ut(t[r])&&!Db(r,s)&&(e[r]=t[r])}function bk({transformTemplate:e},t){return y.useMemo(()=>{const s=Df();return kf(s,t,e),Object.assign({},s.vars,s.style)},[t])}function jk(e,t){const s=e.style||{},r={};return Ab(r,s,e),Object.assign(r,bk(e,t)),r}function Nk(e,t){const s={},r=jk(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const Ck={offset:"stroke-dashoffset",array:"stroke-dasharray"},_k={offset:"strokeDashoffset",array:"strokeDasharray"};function Ek(e,t,s=1,r=0,a=!0){e.pathLength=1;const i=a?Ck:_k;e[i.offset]=ce.transform(-r);const o=ce.transform(t),l=ce.transform(s);e[i.array]=`${o} ${l}`}function Tb(e,{attrX:t,attrY:s,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...l},c,d,u){if(kf(e,l,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),s!==void 0&&(h.y=s),r!==void 0&&(h.scale=r),a!==void 0&&Ek(h,a,i,o,!1)}const Pb=()=>({...Df(),attrs:{}}),Mb=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Sk(e,t,s,r){const a=y.useMemo(()=>{const i=Pb();return Tb(i,t,Mb(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Ab(i,e.style,e),a.style={...i,...a.style}}return a}const Fk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Af(e){return typeof e!="string"||e.includes("-")?!1:!!(Fk.indexOf(e)>-1||/[A-Z]/u.test(e))}function kk(e,t,s,{latestValues:r},a,i=!1){const l=(Af(e)?Sk:Nk)(t,r,a,e),c=mk(t,typeof e=="string",i),d=e!==y.Fragment?{...c,...l,ref:s}:{},{children:u}=t,h=y.useMemo(()=>ut(u)?u.get():u,[u]);return y.createElement(e,{...d,children:h})}function Jp(e){const t=[{},{}];return e==null||e.values.forEach((s,r)=>{t[0][r]=s.get(),t[1][r]=s.getVelocity()}),t}function Tf(e,t,s,r){if(typeof t=="function"){const[a,i]=Jp(r);t=t(s!==void 0?s:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=Jp(r);t=t(s!==void 0?s:e.custom,a,i)}return t}function Qo(e){return ut(e)?e.get():e}function Dk({scrapeMotionValuesFromProps:e,createRenderState:t},s,r,a){return{latestValues:Ak(s,r,a,e),renderState:t()}}function Ak(e,t,s,r){const a={},i=r(e,{});for(const f in i)a[f]=Qo(i[f]);let{initial:o,animate:l}=e;const c=mc(e),d=kb(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!fc(h)){const f=Array.isArray(h)?h:[h];for(let v=0;v<f.length;v++){const b=Tf(e,f[v]);if(b){const{transitionEnd:g,transition:w,...p}=b;for(const m in p){let x=p[m];if(Array.isArray(x)){const N=u?x.length-1:0;x=x[N]}x!==null&&(a[m]=x)}for(const m in g)a[m]=g[m]}}}return a}const Rb=e=>(t,s)=>{const r=y.useContext(hc),a=y.useContext(dc),i=()=>Dk(e,t,r,a);return s?i():Ea(i)};function Pf(e,t,s){var i;const{style:r}=e,a={};for(const o in r)(ut(r[o])||t.style&&ut(t.style[o])||Db(o,e)||((i=s==null?void 0:s.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(a[o]=r[o]);return a}const Tk=Rb({scrapeMotionValuesFromProps:Pf,createRenderState:Df});function Lb(e,t,s){const r=Pf(e,t,s);for(const a in e)if(ut(e[a])||ut(t[a])){const i=Fa.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}const Pk=Rb({scrapeMotionValuesFromProps:Lb,createRenderState:Pb}),Mk=Symbol.for("motionComponentSymbol");function Br(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Rk(e,t,s){return y.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),s&&(typeof s=="function"?s(r):Br(s)&&(s.current=r))},[t])}const Mf=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Lk="framerAppearId",Ib="data-"+Mf(Lk),Ob=y.createContext({});function Ik(e,t,s,r,a){var g,w;const{visualElement:i}=y.useContext(hc),o=y.useContext(Sb),l=y.useContext(dc),c=y.useContext(uc).reducedMotion,d=y.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:i,props:s,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const u=d.current,h=y.useContext(Ob);u&&!u.projection&&a&&(u.type==="html"||u.type==="svg")&&Ok(d.current,s,a,h);const f=y.useRef(!1);y.useInsertionEffect(()=>{u&&f.current&&u.update(s,l)});const v=s[Ib],b=y.useRef(!!v&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,v))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,v)));return cc(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),b.current&&u.animationState&&u.animationState.animateChanges())}),y.useEffect(()=>{u&&(!b.current&&u.animationState&&u.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)==null||p.call(window,v)}),b.current=!1),u.enteringChildren=void 0)}),u}function Ok(e,t,s,r){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:Bb(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&Br(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:d})}function Bb(e){if(e)return e.options.allowProjection!==!1?e.projection:Bb(e.parent)}function cd(e,{forwardMotionProps:t=!1}={},s,r){s&&uk(s);const a=Af(e)?Pk:Tk;function i(l,c){let d;const u={...y.useContext(uc),...l,layoutId:Bk(l)},{isStatic:h}=u,f=xk(l),v=a(l,h);if(!h&&tf){$k();const b=Uk(u);d=b.MeasureLayout,f.visualElement=Ik(e,v,u,r,b.ProjectionNode)}return n.jsxs(hc.Provider,{value:f,children:[d&&f.visualElement?n.jsx(d,{visualElement:f.visualElement,...u}):null,kk(e,l,Rk(v,f.visualElement,c),v,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=y.forwardRef(i);return o[Mk]=e,o}function Bk({layoutId:e}){const t=y.useContext(ef).id;return t&&e!==void 0?t+"-"+e:e}function $k(e,t){y.useContext(Sb).strict}function Uk(e){const{drag:t,layout:s}=ga;if(!t&&!s)return{};const r={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(e)||s!=null&&s.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function zk(e,t){if(typeof Proxy>"u")return cd;const s=new Map,r=(i,o)=>cd(i,o,e,t),a=(i,o)=>r(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?r:(s.has(o)||s.set(o,cd(o,void 0,e,t)),s.get(o))})}function $b({top:e,left:t,right:s,bottom:r}){return{x:{min:t,max:s},y:{min:e,max:r}}}function Vk({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Wk(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function dd(e){return e===void 0||e===1}function $u({scale:e,scaleX:t,scaleY:s}){return!dd(e)||!dd(t)||!dd(s)}function Wn(e){return $u(e)||Ub(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ub(e){return Xp(e.x)||Xp(e.y)}function Xp(e){return e&&e!=="0%"}function Tl(e,t,s){const r=e-s,a=t*r;return s+a}function Zp(e,t,s,r,a){return a!==void 0&&(e=Tl(e,a,r)),Tl(e,s,r)+t}function Uu(e,t=0,s=1,r,a){e.min=Zp(e.min,t,s,r,a),e.max=Zp(e.max,t,s,r,a)}function zb(e,{x:t,y:s}){Uu(e.x,t.translate,t.scale,t.originPoint),Uu(e.y,s.translate,s.scale,s.originPoint)}const ex=.999999999999,tx=1.0000000000001;function qk(e,t,s,r=!1){const a=s.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=s[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ur(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,zb(e,o)),r&&Wn(i.latestValues)&&Ur(e,i.latestValues))}t.x<tx&&t.x>ex&&(t.x=1),t.y<tx&&t.y>ex&&(t.y=1)}function $r(e,t){e.min=e.min+t,e.max=e.max+t}function sx(e,t,s,r,a=.5){const i=Ie(e.min,e.max,a);Uu(e,t,s,i,r)}function Ur(e,t){sx(e.x,t.x,t.scaleX,t.scale,t.originX),sx(e.y,t.y,t.scaleY,t.scale,t.originY)}function Vb(e,t){return $b(Wk(e.getBoundingClientRect(),t))}function Hk(e,t,s){const r=Vb(e,s),{scroll:a}=t;return a&&($r(r.x,a.offset.x),$r(r.y,a.offset.y)),r}const nx=()=>({translate:0,scale:1,origin:0,originPoint:0}),zr=()=>({x:nx(),y:nx()}),rx=()=>({min:0,max:0}),We=()=>({x:rx(),y:rx()}),zu={current:null},Wb={current:!1};function Yk(){if(Wb.current=!0,!!tf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>zu.current=e.matches;e.addEventListener("change",t),t()}else zu.current=!1}const Kk=new WeakMap;function Gk(e,t,s){for(const r in t){const a=t[r],i=s[r];if(ut(a))e.addValue(r,a);else if(ut(i))e.addValue(r,ls(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(r);e.addValue(r,ls(o!==void 0?o:a,{owner:e}))}}for(const r in s)t[r]===void 0&&e.removeValue(r);return t}const ax=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Qk{scrapeMotionValuesFromProps(t,s,r){return{}}constructor({parent:t,props:s,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Ct.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Se.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=mc(s),this.isVariantNode=kb(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in h){const v=h[f];c[f]!==void 0&&ut(v)&&v.set(c[f])}}mount(t){var s;this.current=t,Kk.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),Wb.current||Yk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zu.current,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),hs(this.notifyUpdate),hs(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const r=this.features[s];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=ka.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Se.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{a(),i&&i(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ga){const s=ga[t];if(!s)continue;const{isEnabled:r,Feature:a}=s;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):We()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<ax.length;r++){const a=ax[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=Gk(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const r=this.values.get(t);s!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&s!==void 0&&(r=ls(s===null?void 0:s,{owner:this}),this.addValue(t,r)),r}readValue(t,s){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Mw(r)||Lw(r))?r=parseFloat(r):!rk(r)&&_n.test(s)&&(r=vb(t,s)),this.setBaseTarget(t,ut(r)?r.get():r)),ut(r)?r.get():r}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var i;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const o=Tf(this.props,s,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(s&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!ut(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new af),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){Cf.render(this.render)}}class qb extends Qk{constructor(){super(...arguments),this.KeyframeResolver=IF}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:r}){delete s[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ut(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Hb(e,{style:t,vars:s},r,a){const i=e.style;let o;for(o in t)i[o]=t[o];a==null||a.applyProjectionStyles(i,r);for(o in s)i.setProperty(o,s[o])}function Jk(e){return window.getComputedStyle(e)}class Xk extends qb{constructor(){super(...arguments),this.type="html",this.renderInstance=Hb}readValueFromInstance(t,s){var r;if(ka.has(s))return(r=this.projection)!=null&&r.isProjecting?Pu(s):nF(t,s);{const a=Jk(t),i=(df(s)?a.getPropertyValue(s):a[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:s}){return Vb(t,s)}build(t,s,r){kf(t,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,s,r){return Pf(t,s,r)}}const Yb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Zk(e,t,s,r){Hb(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(Yb.has(a)?a:Mf(a),t.attrs[a])}class eD extends qb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=We}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(ka.has(s)){const r=gb(s);return r&&r.default||0}return s=Yb.has(s)?s:Mf(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,r){return Lb(t,s,r)}build(t,s,r){Tb(t,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,s,r,a){Zk(t,s,r,a)}mount(t){this.isSVGTag=Mb(t.tagName),super.mount(t)}}const tD=(e,t)=>Af(e)?new eD(t):new Xk(t,{allowProjection:e!==y.Fragment});function Qr(e,t,s){const r=e.getProps();return Tf(r,t,s!==void 0?s:r.custom,e)}const Vu=e=>Array.isArray(e);function sD(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,ls(s))}function nD(e){return Vu(e)?e[e.length-1]||0:e}function rD(e,t){const s=Qr(e,t);let{transitionEnd:r={},transition:a={},...i}=s||{};i={...i,...r};for(const o in i){const l=nD(i[o]);sD(e,o,l)}}function aD(e){return!!(ut(e)&&e.add)}function Wu(e,t){const s=e.getValue("willChange");if(aD(s))return s.add(t);if(!s&&$s.WillChange){const r=new $s.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Kb(e){return e.props[Ib]}const iD=e=>e!==null;function oD(e,{repeat:t,repeatType:s="loop"},r){const a=e.filter(iD),i=t&&s!=="loop"&&t%2===1?0:a.length-1;return a[i]}const lD={type:"spring",stiffness:500,damping:25,restSpeed:10},cD=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),dD={type:"keyframes",duration:.8},uD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hD=(e,{keyframes:t})=>t.length>2?dD:ka.has(e)?e.startsWith("scale")?cD(t[1]):lD:uD;function fD({when:e,delay:t,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const Rf=(e,t,s,r={},a,i)=>o=>{const l=bf(r,e)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ns(c);const u={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:a};fD(l)||Object.assign(u,hD(e,u)),u.duration&&(u.duration=Ns(u.duration)),u.repeatDelay&&(u.repeatDelay=Ns(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Ou(u),u.delay===0&&(h=!0)),($s.instantAnimations||$s.skipAnimations)&&(h=!0,Ou(u),u.delay=0),u.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const f=oD(u.keyframes,l);if(f!==void 0){Se.update(()=>{u.onUpdate(f),u.onComplete()});return}}return l.isSync?new yf(u):new _F(u)};function mD({protectedKeys:e,needsAnimating:t},s){const r=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,r}function Gb(e,t,{delay:s=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(i=r);const c=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const u in l){const h=e.getValue(u,e.latestValues[u]??null),f=l[u];if(f===void 0||d&&mD(d,u))continue;const v={delay:s,...bf(i||{},u)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===b&&!v.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const p=Kb(e);if(p){const m=window.MotionHandoffAnimation(p,u,Se);m!==null&&(v.startTime=m,g=!0)}}Wu(e,u),h.start(Rf(u,h,f,e.shouldReduceMotion&&mb.has(u)?{type:!1}:v,e,g));const w=h.animation;w&&c.push(w)}return o&&Promise.all(c).then(()=>{Se.update(()=>{o&&rD(e,o)})}),c}function Qb(e,t,s,r=0,a=1){const i=Array.from(e).sort((d,u)=>d.sortNodePosition(u)).indexOf(t),o=e.size,l=(o-1)*r;return typeof s=="function"?s(i,o):a===1?i*r:l-i*r}function qu(e,t,s={}){var c;const r=Qr(e,t,s.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const i=r?()=>Promise.all(Gb(e,r,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=a;return pD(e,t,d,u,h,f,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,u]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>u())}else return Promise.all([i(),o(s.delay)])}function pD(e,t,s=0,r=0,a=0,i=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(qu(c,t,{...o,delay:s+(typeof r=="function"?0:r)+Qb(e.variantChildren,c,r,a,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function xD(e,t,s={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>qu(e,i,s));r=Promise.all(a)}else if(typeof t=="string")r=qu(e,t,s);else{const a=typeof t=="function"?Qr(e,t,s.custom):t;r=Promise.all(Gb(e,a,s))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Jb(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(t[r]!==e[r])return!1;return!0}const gD=Ff.length;function Xb(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?Xb(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<gD;s++){const r=Ff[s],a=e.props[r];($i(a)||a===!1)&&(t[r]=a)}return t}const vD=[...Sf].reverse(),yD=Sf.length;function wD(e){return t=>Promise.all(t.map(({animation:s,options:r})=>xD(e,s,r)))}function bD(e){let t=wD(e),s=ix(),r=!0;const a=c=>(d,u)=>{var f;const h=Qr(e,u,c==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:v,transitionEnd:b,...g}=h;d={...d,...g,...b}}return d};function i(c){t=c(e)}function o(c){const{props:d}=e,u=Xb(e.parent)||{},h=[],f=new Set;let v={},b=1/0;for(let w=0;w<yD;w++){const p=vD[w],m=s[p],x=d[p]!==void 0?d[p]:u[p],N=$i(x),j=p===c?m.isActive:null;j===!1&&(b=w);let C=x===u[p]&&x!==d[p]&&N;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),m.protectedKeys={...v},!m.isActive&&j===null||!x&&!m.prevProp||fc(x)||typeof x=="boolean")continue;const E=jD(m.prevProp,x);let _=E||p===c&&m.isActive&&!C&&N||w>b&&N,S=!1;const F=Array.isArray(x)?x:[x];let A=F.reduce(a(p),{});j===!1&&(A={});const{prevResolvedValues:M={}}=m,L={...M,...A},P=H=>{_=!0,f.has(H)&&(S=!0,f.delete(H)),m.needsAnimating[H]=!0;const k=e.getValue(H);k&&(k.liveStyle=!1)};for(const H in L){const k=A[H],R=M[H];if(v.hasOwnProperty(H))continue;let U=!1;Vu(k)&&Vu(R)?U=!Jb(k,R):U=k!==R,U?k!=null?P(H):f.add(H):k!==void 0&&f.has(H)?P(H):m.protectedKeys[H]=!0}m.prevProp=x,m.prevResolvedValues=A,m.isActive&&(v={...v,...A}),r&&e.blockInitialAnimation&&(_=!1);const q=C&&E;_&&(!q||S)&&h.push(...F.map(H=>{const k={type:p};if(typeof H=="string"&&r&&!q&&e.manuallyAnimateOnMount&&e.parent){const{parent:R}=e,U=Qr(R,H);if(R.enteringChildren&&U){const{delayChildren:J}=U.transition||{};k.delay=Qb(R.enteringChildren,e,J)}}return{animation:H,options:k}}))}if(f.size){const w={};if(typeof d.initial!="boolean"){const p=Qr(e,Array.isArray(d.initial)?d.initial[0]:d.initial);p&&p.transition&&(w.transition=p.transition)}f.forEach(p=>{const m=e.getBaseTarget(p),x=e.getValue(p);x&&(x.liveStyle=!0),w[p]=m??null}),h.push({animation:w})}let g=!!h.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(h):Promise.resolve()}function l(c,d){var h;if(s[c].isActive===d)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var v;return(v=f.animationState)==null?void 0:v.setActive(c,d)}),s[c].isActive=d;const u=o(c);for(const f in s)s[f].protectedKeys={};return u}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s,reset:()=>{s=ix()}}}function jD(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Jb(t,e):!1}function In(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ix(){return{animate:In(!0),whileInView:In(),whileHover:In(),whileTap:In(),whileDrag:In(),whileFocus:In(),exit:In()}}class Dn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class ND extends Dn{constructor(t){super(t),t.animationState||(t.animationState=bD(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();fc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let CD=0;class _D extends Dn{constructor(){super(...arguments),this.id=CD++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);s&&!t&&a.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const ED={animation:{Feature:ND},exit:{Feature:_D}};function zi(e,t,s,r={passive:!0}){return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s)}function so(e){return{point:{x:e.pageX,y:e.pageY}}}const SD=e=>t=>_f(t)&&e(t,so(t));function hi(e,t,s,r){return zi(e,t,SD(s),r)}const Zb=1e-4,FD=1-Zb,kD=1+Zb,e0=.01,DD=0-e0,AD=0+e0;function gt(e){return e.max-e.min}function TD(e,t,s){return Math.abs(e-t)<=s}function ox(e,t,s,r=.5){e.origin=r,e.originPoint=Ie(t.min,t.max,e.origin),e.scale=gt(s)/gt(t),e.translate=Ie(s.min,s.max,e.origin)-e.originPoint,(e.scale>=FD&&e.scale<=kD||isNaN(e.scale))&&(e.scale=1),(e.translate>=DD&&e.translate<=AD||isNaN(e.translate))&&(e.translate=0)}function fi(e,t,s,r){ox(e.x,t.x,s.x,r?r.originX:void 0),ox(e.y,t.y,s.y,r?r.originY:void 0)}function lx(e,t,s){e.min=s.min+t.min,e.max=e.min+gt(t)}function PD(e,t,s){lx(e.x,t.x,s.x),lx(e.y,t.y,s.y)}function cx(e,t,s){e.min=t.min-s.min,e.max=e.min+gt(t)}function mi(e,t,s){cx(e.x,t.x,s.x),cx(e.y,t.y,s.y)}function Ut(e){return[e("x"),e("y")]}const t0=({current:e})=>e?e.ownerDocument.defaultView:null,dx=(e,t)=>Math.abs(e-t);function MD(e,t){const s=dx(e.x,t.x),r=dx(e.y,t.y);return Math.sqrt(s**2+r**2)}class s0{constructor(t,s,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=hd(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=MD(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!b)return;const{point:g}=f,{timestamp:w}=Qe;this.history.push({...g,timestamp:w});const{onStart:p,onMove:m}=this.handlers;v||(p&&p(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,f)},this.handlePointerMove=(f,v)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ud(v,this.transformPagePoint),Se.update(this.updatePoint,!0)},this.handlePointerUp=(f,v)=>{this.end();const{onEnd:b,onSessionEnd:g,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=hd(f.type==="pointercancel"?this.lastMoveEventInfo:ud(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(f,p),g&&g(f,p)},!_f(t))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=a||window;const l=so(t),c=ud(l,this.transformPagePoint),{point:d}=c,{timestamp:u}=Qe;this.history=[{...d,timestamp:u}];const{onSessionStart:h}=s;h&&h(t,hd(c,this.history)),this.removeListeners=Zi(hi(this.contextWindow,"pointermove",this.handlePointerMove),hi(this.contextWindow,"pointerup",this.handlePointerUp),hi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),hs(this.updatePoint)}}function ud(e,t){return t?{point:t(e.point)}:e}function ux(e,t){return{x:e.x-t.x,y:e.y-t.y}}function hd({point:e},t){return{point:e,delta:ux(e,n0(t)),offset:ux(e,RD(t)),velocity:LD(t,.1)}}function RD(e){return e[0]}function n0(e){return e[e.length-1]}function LD(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const a=n0(e);for(;s>=0&&(r=e[s],!(a.timestamp-r.timestamp>Ns(t)));)s--;if(!r)return{x:0,y:0};const i=Yt(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ID(e,{min:t,max:s},r){return t!==void 0&&e<t?e=r?Ie(t,e,r.min):Math.max(e,t):s!==void 0&&e>s&&(e=r?Ie(s,e,r.max):Math.min(e,s)),e}function hx(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function OD(e,{top:t,left:s,bottom:r,right:a}){return{x:hx(e.x,s,a),y:hx(e.y,t,r)}}function fx(e,t){let s=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}function BD(e,t){return{x:fx(e.x,t.x),y:fx(e.y,t.y)}}function $D(e,t){let s=.5;const r=gt(e),a=gt(t);return a>r?s=xa(t.min,t.max-r,e.min):r>a&&(s=xa(e.min,e.max-a,t.min)),_s(0,1,s)}function UD(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Hu=.35;function zD(e=Hu){return e===!1?e=0:e===!0&&(e=Hu),{x:mx(e,"left","right"),y:mx(e,"top","bottom")}}function mx(e,t,s){return{min:px(e,t),max:px(e,s)}}function px(e,t){return typeof e=="number"?e:e[t]||0}const VD=new WeakMap;class WD{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=We(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(so(h).point)},o=(h,f)=>{const{drag:v,dragPropagation:b,onDragStart:g}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$F(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ut(p=>{let m=this.getAxisMotionValue(p).get()||0;if(Cs.test(m)){const{projection:x}=this.visualElement;if(x&&x.layout){const N=x.layout.layoutBox[p];N&&(m=gt(N)*(parseFloat(m)/100))}}this.originPoint[p]=m}),g&&Se.postRender(()=>g(h,f)),Wu(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:g,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:p}=f;if(b&&this.currentDirection===null){this.currentDirection=qD(p),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,p),this.updateAxis("y",f.point,p),this.visualElement.render(),w&&w(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ut(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new s0(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:t0(this.visualElement)})}stop(t,s){const r=t||this.latestPointerEvent,a=s||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!r)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Se.postRender(()=>l(r,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,r){const{drag:a}=this.getProps();if(!r||!Ao(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=ID(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;t&&Br(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=OD(r.layoutBox,t):this.constraints=!1,this.elastic=zD(s),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ut(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=UD(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Br(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=Hk(r,a.root,this.visualElement.getTransformPagePoint());let o=BD(a.layout.layoutBox,i);if(s){const l=s(Vk(o));this.hasMutatedConstraints=!!l,l&&(o=$b(l))}return o}startAnimation(t){const{drag:s,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Ut(u=>{if(!Ao(u,s,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const f=a?200:1e6,v=a?40:1e7,b={type:"inertia",velocity:r?t[u]:0,bounceStiffness:f,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,b)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const r=this.getAxisMotionValue(t);return Wu(this.visualElement,t),r.start(Rf(t,r,0,s,this.visualElement,!1))}stopAnimation(){Ut(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ut(t=>{var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[s];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ut(s=>{const{drag:r}=this.getProps();if(!Ao(s,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[s];i.set(t[s]-Ie(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Br(s)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ut(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=$D({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ut(o=>{if(!Ao(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Ie(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;VD.set(this.visualElement,this);const t=this.visualElement.current,s=hi(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Br(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Se.read(r);const o=zi(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ut(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Hu,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Ao(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function qD(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class HD extends Dn{constructor(t){super(t),this.removeGroupControls=Ft,this.removeListeners=Ft,this.controls=new WD(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ft}unmount(){this.removeGroupControls(),this.removeListeners()}}const xx=e=>(t,s)=>{e&&Se.postRender(()=>e(t,s))};class YD extends Dn{constructor(){super(...arguments),this.removePointerDownListener=Ft}onPointerDown(t){this.session=new s0(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:t0(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:xx(t),onStart:xx(s),onMove:r,onEnd:(i,o)=>{delete this.session,a&&Se.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=hi(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Va={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ce.test(e))e=parseFloat(e);else return e;const s=gx(e,t.target.x),r=gx(e,t.target.y);return`${s}% ${r}%`}},KD={correct:(e,{treeScale:t,projectionDelta:s})=>{const r=e,a=_n.parse(e);if(a.length>5)return r;const i=_n.createTransformer(e),o=typeof a[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=Ie(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};let fd=!1;class GD extends y.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;gk(QD),i&&(s.group&&s.group.add(i),r&&r.register&&a&&r.register(i),fd&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Jo.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:r,drag:a,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,fd=!0,a||t.layoutDependency!==s||s===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Se.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Cf.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:a}=t;fd=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function r0(e){const[t,s]=Eb(),r=y.useContext(ef);return n.jsx(GD,{...e,layoutGroup:r,switchLayoutGroup:y.useContext(Ob),isPresent:t,safeToRemove:s})}const QD={borderRadius:{...Va,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Va,borderTopRightRadius:Va,borderBottomLeftRadius:Va,borderBottomRightRadius:Va,boxShadow:KD};function JD(e,t,s){const r=ut(e)?e:ls(e);return r.start(Rf("",r,t,s)),r.animation}const XD=(e,t)=>e.depth-t.depth;class ZD{constructor(){this.children=[],this.isDirty=!1}add(t){sf(this.children,t),this.isDirty=!0}remove(t){nf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(XD),this.isDirty=!1,this.children.forEach(t)}}function e5(e,t){const s=Ct.now(),r=({timestamp:a})=>{const i=a-s;i>=t&&(hs(r),e(i-t))};return Se.setup(r,!0),()=>hs(r)}const a0=["TopLeft","TopRight","BottomLeft","BottomRight"],t5=a0.length,vx=e=>typeof e=="string"?parseFloat(e):e,yx=e=>typeof e=="number"||ce.test(e);function s5(e,t,s,r,a,i){a?(e.opacity=Ie(0,s.opacity??1,n5(r)),e.opacityExit=Ie(t.opacity??1,0,r5(r))):i&&(e.opacity=Ie(t.opacity??1,s.opacity??1,r));for(let o=0;o<t5;o++){const l=`border${a0[o]}Radius`;let c=wx(t,l),d=wx(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||yx(c)===yx(d)?(e[l]=Math.max(Ie(vx(c),vx(d),r),0),(Cs.test(d)||Cs.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||s.rotate)&&(e.rotate=Ie(t.rotate||0,s.rotate||0,r))}function wx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const n5=i0(0,.5,Vw),r5=i0(.5,.95,Ft);function i0(e,t,s){return r=>r<e?0:r>t?1:s(xa(e,t,r))}function bx(e,t){e.min=t.min,e.max=t.max}function $t(e,t){bx(e.x,t.x),bx(e.y,t.y)}function jx(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Nx(e,t,s,r,a){return e-=t,e=Tl(e,1/s,r),a!==void 0&&(e=Tl(e,1/a,r)),e}function a5(e,t=0,s=1,r=.5,a,i=e,o=e){if(Cs.test(t)&&(t=parseFloat(t),t=Ie(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Ie(i.min,i.max,r);e===i&&(l-=t),e.min=Nx(e.min,t,s,l,a),e.max=Nx(e.max,t,s,l,a)}function Cx(e,t,[s,r,a],i,o){a5(e,t[s],t[r],t[a],t.scale,i,o)}const i5=["x","scaleX","originX"],o5=["y","scaleY","originY"];function _x(e,t,s,r){Cx(e.x,t,i5,s?s.x:void 0,r?r.x:void 0),Cx(e.y,t,o5,s?s.y:void 0,r?r.y:void 0)}function Ex(e){return e.translate===0&&e.scale===1}function o0(e){return Ex(e.x)&&Ex(e.y)}function Sx(e,t){return e.min===t.min&&e.max===t.max}function l5(e,t){return Sx(e.x,t.x)&&Sx(e.y,t.y)}function Fx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function l0(e,t){return Fx(e.x,t.x)&&Fx(e.y,t.y)}function kx(e){return gt(e.x)/gt(e.y)}function Dx(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class c5{constructor(){this.members=[]}add(t){sf(this.members,t),t.scheduleRender()}remove(t){if(nf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(a=>t===a);if(s===0)return!1;let r;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,s){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,s&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:r}=t;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function d5(e,t,s){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(s==null?void 0:s.z)||0;if((a||i||o)&&(r=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:f,skewX:v,skewY:b}=s;d&&(r=`perspective(${d}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),v&&(r+=`skewX(${v}deg) `),b&&(r+=`skewY(${b}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const md=["","X","Y","Z"],u5=1e3;let h5=0;function pd(e,t,s,r){const{latestValues:a}=t;a[e]&&(s[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function c0(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=Kb(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",Se,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&c0(r)}function d0({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=h5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(p5),this.nodes.forEach(y5),this.nodes.forEach(w5),this.nodes.forEach(x5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZD)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new af),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Ef(o)&&!tk(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let u,h=0;const f=()=>this.root.updateBlockedByResize=!1;Se.read(()=>{h=window.innerWidth}),e(o,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,u&&u(),u=e5(f,250),Jo.hasAnimatedSinceResize&&(Jo.hasAnimatedSinceResize=!1,this.nodes.forEach(Px)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||d.getDefaultTransition()||_5,{onLayoutAnimationStart:g,onLayoutAnimationComplete:w}=d.getProps(),p=!this.targetLayout||!l0(this.targetLayout,v),m=!h&&f;if(this.options.layoutRoot||this.resumeFrom||m||h&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...bf(b,"layout"),onPlay:g,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(u,m)}else h||Px(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),hs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(b5),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&c0(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ax);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Tx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(v5),this.nodes.forEach(f5),this.nodes.forEach(m5)):this.nodes.forEach(Tx),this.clearAllSnapshots();const l=Ct.now();Qe.delta=_s(0,1e3/60,l-Qe.timestamp),Qe.timestamp=l,Qe.isProcessing=!0,nd.update.process(Qe),nd.preRender.process(Qe),nd.render.process(Qe),Qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(g5),this.sharedNodes.forEach(j5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gt(this.snapshot.measuredBox.x)&&!gt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=We(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!o0(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||Wn(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),E5(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return We();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(S5))){const{scroll:u}=this.root;u&&($r(l.x,u.offset.x),$r(l.y,u.offset.y))}return l}removeElementScroll(o){var c;const l=We();if($t(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&$t(l,o),$r(l.x,h.offset.x),$r(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=We();$t(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ur(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Wn(u.latestValues)&&Ur(c,u.latestValues)}return Wn(this.latestValues)&&Ur(c,this.latestValues),c}removeTransform(o){const l=We();$t(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Wn(d.latestValues))continue;$u(d.latestValues)&&d.updateSnapshot();const u=We(),h=d.measurePageBox();$t(u,h),_x(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Wn(this.latestValues)&&_x(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=Qe.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=We(),this.relativeTargetOrigin=We(),mi(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=We(),this.targetWithTransforms=We()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),PD(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$t(this.target,this.layout.layoutBox),zb(this.target,this.targetDelta)):$t(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=We(),this.relativeTargetOrigin=We(),mi(this.relativeTargetOrigin,this.target,v.target),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$u(this.parent.latestValues)||Ub(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Qe.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;$t(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;qk(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=We());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jx(this.prevProjectionDelta.x,this.projectionDelta.x),jx(this.prevProjectionDelta.y,this.projectionDelta.y)),fi(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Dx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Dx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zr(),this.projectionDelta=zr(),this.projectionDeltaWithTransform=zr()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=zr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=We(),v=c?c.source:void 0,b=this.layout?this.layout.source:void 0,g=v!==b,w=this.getStack(),p=!w||w.members.length<=1,m=!!(g&&!p&&this.options.crossfade===!0&&!this.path.some(C5));this.animationProgress=0;let x;this.mixTargetDelta=N=>{const j=N/1e3;Mx(h.x,o.x,j),Mx(h.y,o.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mi(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),N5(this.relativeTarget,this.relativeTargetOrigin,f,j),x&&l5(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=We()),$t(x,this.relativeTarget)),g&&(this.animationValues=u,s5(u,d,this.latestValues,j,m,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(hs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Se.update(()=>{Jo.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ls(0)),this.currentAnimation=JD(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(u5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&u0(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||We();const h=gt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=gt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}$t(l,c),Ur(l,u),fi(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new c5),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&pd("z",o,d,this.animationValues);for(let u=0;u<md.length;u++)pd(`rotate${md[u]}`,o,d,this.animationValues),pd(`skew${md[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Qo(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Qo(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Wn(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=d5(this.projectionDeltaWithTransform,this.treeScale,u);c&&(h=c(u,h)),o.transform=h;const{x:f,y:v}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${v.origin*100}% 0`,d.animationValues?o.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const b in Ui){if(u[b]===void 0)continue;const{correct:g,applyTo:w,isCSSVariable:p}=Ui[b],m=h==="none"?u[b]:g(u[b],d);if(w){const x=w.length;for(let N=0;N<x;N++)o[w[N]]=m}else p?this.options.visualElement.renderState.vars[b]=m:o[b]=m}this.options.layoutId&&(o.pointerEvents=d===this?Qo(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Ax),this.root.sharedNodes.clear()}}}function f5(e){e.updateLayout()}function m5(e){var s;const t=((s=e.resumeFrom)==null?void 0:s.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?Ut(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],v=gt(f);f.min=r[h].min,f.max=f.min+v}):u0(i,t.layoutBox,r)&&Ut(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],v=gt(r[h]);f.max=f.min+v,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+v)});const l=zr();fi(l,r,t.layoutBox);const c=zr();o?fi(c,e.applyTransform(a,!0),t.measuredBox):fi(c,r,t.layoutBox);const d=!o0(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:v}=h;if(f&&v){const b=We();mi(b,t.layoutBox,f.layoutBox);const g=We();mi(g,r,v.layoutBox),l0(b,g)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=b,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function p5(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function x5(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function g5(e){e.clearSnapshot()}function Ax(e){e.clearMeasurements()}function Tx(e){e.isLayoutDirty=!1}function v5(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Px(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function y5(e){e.resolveTargetDelta()}function w5(e){e.calcProjection()}function b5(e){e.resetSkewAndRotation()}function j5(e){e.removeLeadSnapshot()}function Mx(e,t,s){e.translate=Ie(t.translate,0,s),e.scale=Ie(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function Rx(e,t,s,r){e.min=Ie(t.min,s.min,r),e.max=Ie(t.max,s.max,r)}function N5(e,t,s,r){Rx(e.x,t.x,s.x,r),Rx(e.y,t.y,s.y,r)}function C5(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const _5={duration:.45,ease:[.4,0,.1,1]},Lx=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ix=Lx("applewebkit/")&&!Lx("chrome/")?Math.round:Ft;function Ox(e){e.min=Ix(e.min),e.max=Ix(e.max)}function E5(e){Ox(e.x),Ox(e.y)}function u0(e,t,s){return e==="position"||e==="preserve-aspect"&&!TD(kx(t),kx(s),.2)}function S5(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const F5=d0({attachResizeListener:(e,t)=>zi(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xd={current:void 0},h0=d0({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!xd.current){const e=new F5({});e.mount(window),e.setOptions({layoutScroll:!0}),xd.current=e}return xd.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),k5={pan:{Feature:YD},drag:{Feature:HD,ProjectionNode:h0,MeasureLayout:r0}};function Bx(e,t,s){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,i=r[a];i&&Se.postRender(()=>i(t,so(t)))}class D5 extends Dn{mount(){const{current:t}=this.node;t&&(this.unmount=UF(t,(s,r)=>(Bx(this.node,r,"Start"),a=>Bx(this.node,a,"End"))))}unmount(){}}class A5 extends Dn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zi(zi(this.node.current,"focus",()=>this.onFocus()),zi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $x(e,t,s){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),i=r[a];i&&Se.postRender(()=>i(t,so(t)))}class T5 extends Dn{mount(){const{current:t}=this.node;t&&(this.unmount=qF(t,(s,r)=>($x(this.node,r,"Start"),(a,{success:i})=>$x(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Yu=new WeakMap,gd=new WeakMap,P5=e=>{const t=Yu.get(e.target);t&&t(e)},M5=e=>{e.forEach(P5)};function R5({root:e,...t}){const s=e||document;gd.has(s)||gd.set(s,{});const r=gd.get(s),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(M5,{root:e,...t})),r[a]}function L5(e,t,s){const r=R5(t);return Yu.set(e,s),r.observe(e),()=>{Yu.delete(e),r.unobserve(e)}}const I5={some:0,all:1};class O5 extends Dn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:r,amount:a="some",once:i}=t,o={root:s?s.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:I5[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=d?u:h;f&&f(c)};return L5(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(B5(t,s))&&this.startObserver()}unmount(){}}function B5({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const $5={inView:{Feature:O5},tap:{Feature:T5},focus:{Feature:A5},hover:{Feature:D5}},U5={layout:{ProjectionNode:h0,MeasureLayout:r0}},z5={...ED,...$5,...k5,...U5},Ts=zk(z5,tD),V5=50,Ux=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),W5=()=>({time:0,x:Ux(),y:Ux()}),q5={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function zx(e,t,s,r){const a=s[t],{length:i,position:o}=q5[t],l=a.current,c=s.time;a.current=e[`scroll${o}`],a.scrollLength=e[`scroll${i}`]-e[`client${i}`],a.offset.length=0,a.offset[0]=0,a.offset[1]=a.scrollLength,a.progress=xa(0,a.scrollLength,a.current);const d=r-c;a.velocity=d>V5?0:of(a.current-l,d)}function H5(e,t,s){zx(e,"x",t,s),zx(e,"y",t,s),t.time=s}function Y5(e,t){const s={x:0,y:0};let r=e;for(;r&&r!==t;)if(Nf(r))s.x+=r.offsetLeft,s.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const a=r.getBoundingClientRect();r=r.parentElement;const i=r.getBoundingClientRect();s.x+=a.left-i.left,s.y+=a.top-i.top}else if(r instanceof SVGGraphicsElement){const{x:a,y:i}=r.getBBox();s.x+=a,s.y+=i;let o=null,l=r.parentNode;for(;!o;)l.tagName==="svg"&&(o=l),l=r.parentNode;r=o}else break;return s}const Ku={start:0,center:.5,end:1};function Vx(e,t,s=0){let r=0;if(e in Ku&&(e=Ku[e]),typeof e=="string"){const a=parseFloat(e);e.endsWith("px")?r=a:e.endsWith("%")?e=a/100:e.endsWith("vw")?r=a/100*document.documentElement.clientWidth:e.endsWith("vh")?r=a/100*document.documentElement.clientHeight:e=a}return typeof e=="number"&&(r=t*e),s+r}const K5=[0,0];function G5(e,t,s,r){let a=Array.isArray(e)?e:K5,i=0,o=0;return typeof e=="number"?a=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?a=e.split(" "):a=[e,Ku[e]?e:"0"]),i=Vx(a[0],s,r),o=Vx(a[1],t),i-o}const Q5={All:[[0,0],[1,1]]},J5={x:0,y:0};function X5(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Z5(e,t,s){const{offset:r=Q5.All}=s,{target:a=e,axis:i="y"}=s,o=i==="y"?"height":"width",l=a!==e?Y5(a,e):J5,c=a===e?{width:e.scrollWidth,height:e.scrollHeight}:X5(a),d={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let u=!t[i].interpolate;const h=r.length;for(let f=0;f<h;f++){const v=G5(r[f],d[o],c[o],l[i]);!u&&v!==t[i].interpolatorOffsets[f]&&(u=!0),t[i].offset[f]=v}u&&(t[i].interpolate=xf(t[i].offset,rb(r),{clamp:!1}),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=_s(0,1,t[i].interpolate(t[i].current))}function eA(e,t=e,s){if(s.x.targetOffset=0,s.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)s.x.targetOffset+=r.offsetLeft,s.y.targetOffset+=r.offsetTop,r=r.offsetParent}s.x.targetLength=t===e?t.scrollWidth:t.clientWidth,s.y.targetLength=t===e?t.scrollHeight:t.clientHeight,s.x.containerLength=e.clientWidth,s.y.containerLength=e.clientHeight}function tA(e,t,s,r={}){return{measure:a=>{eA(e,r.target,s),H5(e,s,a),(r.offset||r.target)&&Z5(e,s,r)},notify:()=>t(s)}}const Wa=new WeakMap,Wx=new WeakMap,vd=new WeakMap,qx=e=>e===document.scrollingElement?window:e;function f0(e,{container:t=document.scrollingElement,...s}={}){if(!t)return Ft;let r=vd.get(t);r||(r=new Set,vd.set(t,r));const a=W5(),i=tA(t,e,a,s);if(r.add(i),!Wa.has(t)){const l=()=>{for(const h of r)h.measure(Qe.timestamp);Se.preUpdate(c)},c=()=>{for(const h of r)h.notify()},d=()=>Se.read(l);Wa.set(t,d);const u=qx(t);window.addEventListener("resize",d,{passive:!0}),t!==document.documentElement&&Wx.set(t,ek(t,d)),u.addEventListener("scroll",d,{passive:!0}),d()}const o=Wa.get(t);return Se.read(o,!1,!0),()=>{var d;hs(o);const l=vd.get(t);if(!l||(l.delete(i),l.size))return;const c=Wa.get(t);Wa.delete(t),c&&(qx(t).removeEventListener("scroll",c),(d=Wx.get(t))==null||d(),window.removeEventListener("resize",c))}}const Hx=new Map;function sA(e){const t={value:0},s=f0(r=>{t.value=r[e.axis].progress*100},e);return{currentTime:t,cancel:s}}function m0({source:e,container:t,...s}){const{axis:r}=s;e&&(t=e);const a=Hx.get(t)??new Map;Hx.set(t,a);const i=s.target??"self",o=a.get(i)??{},l=r+(s.offset??[]).join(",");return o[l]||(o[l]=!s.target&&lb()?new ScrollTimeline({source:t,axis:r}):sA({container:t,...s})),o[l]}function nA(e,t){const s=m0(t);return e.attachTimeline({timeline:t.target?void 0:s,observe:r=>(r.pause(),_b(a=>{r.time=r.iterationDuration*a},s))})}function rA(e){return e.length===2}function aA(e,t){return rA(e)?f0(s=>{e(s[t.axis].progress,s)},t):_b(e,m0(t))}function iA(e,{axis:t="y",container:s=document.scrollingElement,...r}={}){if(!s)return Ft;const a={axis:t,container:s,...r};return typeof e=="function"?aA(e,a):nA(e,a)}const oA=()=>({scrollX:ls(0),scrollY:ls(0),scrollXProgress:ls(0),scrollYProgress:ls(0)}),To=e=>e?!e.current:!1;function lA({container:e,target:t,...s}={}){const r=Ea(oA),a=y.useRef(null),i=y.useRef(!1),o=y.useCallback(()=>(a.current=iA((l,{x:c,y:d})=>{r.scrollX.set(c.current),r.scrollXProgress.set(c.progress),r.scrollY.set(d.current),r.scrollYProgress.set(d.progress)},{...s,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0}),()=>{var l;(l=a.current)==null||l.call(a)}),[e,t,JSON.stringify(s.offset)]);return cc(()=>{if(i.current=!1,To(e)||To(t)){i.current=!0;return}else return o()},[o]),y.useEffect(()=>{if(i.current)return Ii(!To(e)),Ii(!To(t)),o()},[o]),r}function cA(e){const t=Ea(()=>ls(e)),{isStatic:s}=y.useContext(uc);if(s){const[,r]=y.useState(e);y.useEffect(()=>t.on("change",r),[])}return t}function p0(e,t){const s=cA(t()),r=()=>s.set(t());return r(),cc(()=>{const a=()=>Se.preRender(r,!1,!0),i=e.map(o=>o.on("change",a));return()=>{i.forEach(o=>o()),hs(r)}}),s}function dA(e){ui.current=[],e();const t=p0(ui.current,e);return ui.current=void 0,t}function yd(e,t,s,r){if(typeof e=="function")return dA(e);const a=typeof t=="function"?t:sk(t,s,r);return Array.isArray(e)?Yx(e,a):Yx([e],([i])=>a(i))}function Yx(e,t){const s=Ea(()=>[]);return p0(e,()=>{s.length=0;const r=e.length;for(let a=0;a<r;a++)s[a]=e[a].get();return t(s)})}const ps={degreesToRadians:e=>e*(Math.PI/180),radiansToDegrees:e=>e*(180/Math.PI),sphericalToCartesian:(e,t,s)=>({x:e*Math.sin(s)*Math.cos(t),y:e*Math.cos(s),z:e*Math.sin(s)*Math.sin(t)}),calculateDistance:(e,t={x:0,y:0,z:0})=>{const s=e.x-t.x,r=e.y-t.y,a=e.z-t.z;return Math.sqrt(s*s+r*r+a*a)},normalizeAngle:e=>{for(;e>180;)e-=360;for(;e<-180;)e+=360;return e}},uA=({images:e=[],containerSize:t=400,sphereRadius:s=200,dragSensitivity:r=.5,momentumDecay:a=.95,maxRotationSpeed:i=5,baseImageScale:o=.12,hoverScale:l=1.2,perspective:c=1e3,autoRotate:d=!1,autoRotateSpeed:u=.3,className:h=""})=>{const[f,v]=y.useState(!1),[b,g]=y.useState({x:15,y:15,z:0}),[w,p]=y.useState({x:0,y:0}),[m,x]=y.useState(!1),[N,j]=y.useState(null),[C,E]=y.useState([]),[_,S]=y.useState(null),F=y.useRef(null),A=y.useRef({x:0,y:0}),M=y.useRef(null),L=s||t*.5,P=t*o,q=y.useCallback(()=>{const W=[],se=e.length,O=(1+Math.sqrt(5))/2,z=2*Math.PI/O;for(let G=0;G<se;G++){const ue=G/se,fe=Math.acos(1-2*ue),he=z*G;let ie=fe*180/Math.PI,ye=he*180/Math.PI%360;const Ne=Math.pow(Math.abs(ie-90)/90,.6)*35;ie<90?ie=Math.max(5,ie-Ne):ie=Math.min(175,ie+Ne),ie=15+ie/180*150;const rt=(Math.random()-.5)*20;ye=(ye+rt)%360,ie=Math.max(0,Math.min(180,ie+(Math.random()-.5)*10)),W.push({theta:ye,phi:ie,radius:L})}return W},[e.length,L]),Z=y.useCallback(()=>{const se=[...C.map((O,z)=>{const G=ps.degreesToRadians(O.theta),ue=ps.degreesToRadians(O.phi),fe=ps.degreesToRadians(b.x),he=ps.degreesToRadians(b.y);let ie=O.radius*Math.sin(ue)*Math.cos(G),ye=O.radius*Math.cos(ue),Ne=O.radius*Math.sin(ue)*Math.sin(G);const rt=ie*Math.cos(he)+Ne*Math.sin(he),fs=-ie*Math.sin(he)+Ne*Math.cos(he);ie=rt,Ne=fs;const Da=ye*Math.cos(fe)-Ne*Math.sin(fe),Ws=ye*Math.sin(fe)+Ne*Math.cos(fe);ye=Da,Ne=Ws;const ft={x:ie,y:ye,z:Ne},no=-10,Tn=-30,ro=ft.z>Tn;let Pn=1;ft.z<=no&&(Pn=Math.max(0,(ft.z-Tn)/(no-Tn)));const be=O.phi<30||O.phi>150,ke=Math.sqrt(ft.x*ft.x+ft.y*ft.y),je=Math.min(ke/L,1),xc=Math.max(.3,1-je*(be?.4:.7)),gc=(ft.z+L)/(2*L),vc=xc*Math.max(.5,.8+gc*.3);return{...ft,scale:vc,zIndex:Math.round(1e3+ft.z),isVisible:ro,fadeOpacity:Pn,originalIndex:z}})];for(let O=0;O<se.length;O++){const z=se[O];if(!z.isVisible)continue;let G=z.scale;const ue=P*G;for(let fe=0;fe<se.length;fe++){if(O===fe)continue;const he=se[fe];if(!he.isVisible)continue;const ie=P*he.scale,ye=z.x-he.x,Ne=z.y-he.y,rt=Math.sqrt(ye*ye+Ne*Ne),fs=(ue+ie)/2+25;if(rt<fs&&rt>0){const Da=fs-rt,Ws=Math.max(.4,1-Da/fs*.6);G=Math.min(G,G*Ws)}}se[O]={...z,scale:Math.max(.25,G)}}return se},[C,b,L,P]),H=y.useCallback(W=>Math.max(-i,Math.min(i,W)),[i]),k=y.useCallback(()=>{m||(p(W=>{const se={x:W.x*a,y:W.y*a};return!d&&Math.abs(se.x)<.01&&Math.abs(se.y)<.01?{x:0,y:0}:se}),g(W=>{let se=W.y;return d&&(se+=u),se+=H(w.y),{x:ps.normalizeAngle(W.x+H(w.x)),y:ps.normalizeAngle(se),z:W.z}}))},[m,a,w,H,d,u]),R=y.useCallback(W=>{W.preventDefault(),x(!0),p({x:0,y:0}),A.current={x:W.clientX,y:W.clientY}},[]),U=y.useCallback(W=>{if(!m)return;const se=W.clientX-A.current.x,z={x:-(W.clientY-A.current.y)*r,y:se*r};g(G=>({x:ps.normalizeAngle(G.x+H(z.x)),y:ps.normalizeAngle(G.y+H(z.y)),z:G.z})),p({x:H(z.x),y:H(z.y)}),A.current={x:W.clientX,y:W.clientY}},[m,r,H]),J=y.useCallback(()=>{x(!1)},[]),K=y.useCallback(W=>{W.preventDefault();const se=W.touches[0];x(!0),p({x:0,y:0}),A.current={x:se.clientX,y:se.clientY}},[]),ae=y.useCallback(W=>{if(!m)return;W.preventDefault();const se=W.touches[0],O=se.clientX-A.current.x,G={x:-(se.clientY-A.current.y)*r,y:O*r};g(ue=>({x:ps.normalizeAngle(ue.x+H(G.x)),y:ps.normalizeAngle(ue.y+H(G.y)),z:ue.z})),p({x:H(G.x),y:H(G.y)}),A.current={x:se.clientX,y:se.clientY}},[m,r,H]),oe=y.useCallback(()=>{x(!1)},[]);y.useEffect(()=>{v(!0)},[]),y.useEffect(()=>{E(q())},[q]),y.useEffect(()=>{const W=()=>{k(),M.current=requestAnimationFrame(W)};return f&&(M.current=requestAnimationFrame(W)),()=>{M.current&&cancelAnimationFrame(M.current)}},[f,k]),y.useEffect(()=>{if(!(!f||!F.current))return document.addEventListener("mousemove",U),document.addEventListener("mouseup",J),document.addEventListener("touchmove",ae,{passive:!1}),document.addEventListener("touchend",oe),()=>{document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",J),document.removeEventListener("touchmove",ae),document.removeEventListener("touchend",oe)}},[f,U,J,ae,oe]);const le=Z(),pe=y.useCallback((W,se)=>{const O=le[se];if(!O||!O.isVisible)return null;P*O.scale;const G=_===se?Math.min(l,l/O.scale):1;return n.jsx("div",{className:"absolute cursor-pointer select-none transition-transform duration-200 ease-out",style:{width:`${P/t*100}%`,height:`${P/t*100}%`,left:`${50+O.x/t*100}%`,top:`${50+O.y/t*100}%`,opacity:O.fadeOpacity,transform:`translate(-50%, -50%) scale(${G})`,zIndex:O.zIndex},onMouseEnter:()=>S(se),onMouseLeave:()=>S(null),onClick:()=>j(W),children:n.jsx("div",{className:"relative w-full h-full rounded-full overflow-hidden shadow-lg border-2 border-white/20",children:n.jsx("img",{src:W.src,alt:W.alt,className:"w-full h-full object-cover",draggable:!1,loading:se<3?"eager":"lazy"})})},W.id)},[le,P,t,_,l]),ee=()=>N?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30",onClick:()=>j(null),style:{animation:"fadeIn 0.3s ease-out"},children:n.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full overflow-hidden",onClick:W=>W.stopPropagation(),style:{animation:"scaleIn 0.3s ease-out"},children:[n.jsxs("div",{className:"relative aspect-square",children:[n.jsx("img",{src:N.src,alt:N.alt,className:"w-full h-full object-cover"}),n.jsx("button",{onClick:()=>j(null),className:"absolute top-2 right-2 w-8 h-8 bg-black bg-opacity-50 rounded-full text-white flex items-center justify-center hover:bg-opacity-70 transition-all cursor-pointer",children:n.jsx("span",{className:"text-sm leading-none",children:""})})]}),(N.title||N.description)&&n.jsxs("div",{className:"p-6",children:[N.title&&n.jsx("h3",{className:"text-xl font-bold mb-2",children:N.title}),N.description&&n.jsx("p",{className:"text-gray-600",children:N.description})]})]})}):null;return f?e.length?n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { transform: scale(0.8); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
      `}),n.jsx("div",{ref:F,className:`relative select-none cursor-grab active:cursor-grabbing w-full h-full max-w-[250px] max-h-[250px] md:max-w-[420px] md:max-h-[420px] ${h}`,style:{perspective:`${c}px`},onMouseDown:R,onTouchStart:K,children:n.jsx("div",{className:"relative w-full h-full",style:{zIndex:10},children:e.map((W,se)=>pe(W,se))})}),ee()]}):n.jsx("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",style:{width:t,height:t},children:n.jsxs("div",{className:"text-gray-400 text-center",children:[n.jsx("p",{children:"No images provided"}),n.jsx("p",{className:"text-sm",children:"Add images to the images prop"})]})}):n.jsx("div",{className:"bg-gray-100 rounded-lg animate-pulse flex items-center justify-center",style:{width:t,height:t},children:n.jsx("div",{className:"text-gray-400",children:"Loading..."})})},hA="/assets/Ready-to-Share%20Social%20Media%20Posts%20to%20Amplify%20Your%20Brand%20on%20Pinterest-DaRwwLah.jpeg";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x0=(...e)=>e.filter((t,s,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===s).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},c)=>y.createElement("svg",{ref:c,...mA,width:t,height:t,stroke:e,strokeWidth:r?Number(s)*24/Number(t):s,className:x0("lucide",a),...l},[...o.map(([d,u])=>y.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=(e,t)=>{const s=y.forwardRef(({className:r,...a},i)=>y.createElement(pA,{ref:i,iconNode:t,className:x0(`lucide-${fA(e)}`,r),...a}));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],g0=Xt("Bell",xA);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],v0=Xt("Check",gA);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],yA=Xt("ChevronLeft",vA);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bA=Xt("ChevronRight",wA);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],y0=Xt("Copy",jA);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],w0=Xt("EllipsisVertical",NA);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],b0=Xt("Ellipsis",CA);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],j0=Xt("Flag",_A);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],N0=Xt("Reply",EA);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],C0=Xt("Settings",SA);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],_0=Xt("Trash2",FA);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 19h-6",key:"vcuq98"}]],E0=Xt("UserRoundMinus",kA),DA=({testimonials:e,autoplay:t=!1,className:s=""})=>{const[r,a]=y.useState(0),i=()=>{a(u=>(u+1)%e.length)},o=()=>{a(u=>(u-1+e.length)%e.length)};y.useEffect(()=>{if(!t)return;const u=setInterval(i,5e3);return()=>clearInterval(u)},[t]);const l=u=>u===r,c=()=>Math.floor(Math.random()*21)-10,d=e[r];return n.jsx("div",{className:`max-w-sm md:max-w-4xl mx-auto px-4 md:px-8 lg:px-12 py-12 md:py-20 ${s}`,children:n.jsxs("div",{className:"relative grid grid-cols-1 gap-12 md:grid-cols-2 md:gap-20",children:[n.jsx("div",{children:n.jsx("div",{className:"relative h-72 w-full md:h-80",children:n.jsx(Kp,{children:e.map((u,h)=>n.jsx(Ts.div,{initial:{opacity:0,scale:.9,z:-100,rotate:c()},animate:{opacity:l(h)?1:.7,scale:l(h)?1:.95,z:l(h)?0:-100,rotate:l(h)?0:c(),zIndex:l(h)?999:e.length+2-h,y:l(h)?[0,-40,0]:0},exit:{opacity:0,scale:.9,z:100,rotate:c()},transition:{duration:.4,ease:"easeInOut"},className:"absolute inset-0 origin-bottom overflow-hidden rounded-3xl border border-[#E9ECEF] bg-white shadow-[var(--shadow-lg)]",children:n.jsx("img",{src:u.src,alt:u.name,draggable:!1,className:"h-full w-full object-cover object-center"})},u.src))})})}),n.jsxs("div",{className:"flex flex-col justify-between py-2",children:[n.jsx(Kp,{mode:"wait",children:n.jsxs(Ts.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:.2,ease:"easeInOut"},children:[n.jsx("h3",{className:"text-2xl font-bold text-[#212529]",children:d.name}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:d.designation}),n.jsx("p",{className:"mt-6 text-base text-[#343A40] md:text-lg",children:d.quote})]},r)}),n.jsxs("div",{className:"mt-8 flex gap-4 md:mt-12",children:[n.jsx("button",{type:"button",onClick:o,className:"flex h-8 w-8 items-center justify-center rounded-full bg-[#F1F3F5] text-[#212529] shadow-sm transition-transform duration-300 hover:-translate-x-0.5",children:n.jsx(yA,{className:"h-4 w-4"})}),n.jsx("button",{type:"button",onClick:i,className:"flex h-8 w-8 items-center justify-center rounded-full bg-[#F1F3F5] text-[#212529] shadow-sm transition-transform duration-300 hover:translate-x-0.5",children:n.jsx(bA,{className:"h-4 w-4"})})]})]})]})})},Pl=[{name:"Priya Sharma",category:" Gamer",followers:"52K followers",priceRange:"120-360",avatar:"PS",highlight:"Speedruns & strategy coaching"},{name:"Rohan Gupta",category:" Chef",followers:"68K followers",priceRange:"90-280",avatar:"RG",highlight:"Teaches restaurant-style recipes"},{name:"Amit Singh",category:" Artist",followers:"74K followers",priceRange:"150-400",avatar:"AS",highlight:"Live sketching + portfolio reviews"},{name:"Neha Kapoor",category:" Life Coach",followers:"38K followers",priceRange:"200-420",avatar:"NK",highlight:"Career clarity & confidence boosts"},{name:"Arjun Mehta",category:" Musician",followers:"81K followers",priceRange:"110-300",avatar:"AM",highlight:"Song breakdowns + songwriting tips"},{name:"Sana Rao",category:" Fitness",followers:"46K followers",priceRange:"95-260",avatar:"SR",highlight:"At-home workouts & accountability"}],Kx=["https://images.pexels.com/photos/1181519/pexels-photo-1181519.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181670/pexels-photo-1181670.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181681/pexels-photo-1181681.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181675/pexels-photo-1181675.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181672/pexels-photo-1181672.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181680/pexels-photo-1181680.jpeg?auto=compress&cs=tinysrgb&w=800"],AA=Array.from({length:32}).map((e,t)=>{const s=Pl[t%Pl.length],r=Kx[t%Kx.length];return{id:`featured-${t}`,src:r,alt:s.name,title:s.name,description:`${s.category}  ${s.highlight}`}}),TA=[{icon:"",title:"Pick Your Creator",description:"Find someone you want to meet. Could be a YouTuber, chef, gamer, or anyone awesome!",step:"1"},{icon:"",title:"Bid (It's Like an Auction)",description:"Place a bid to win a video call. The highest bid wins! Don't worry - if you lose, you get most of your money back!",step:"2"},{icon:"",title:"Meet Them on Video Call",description:"If you win, you get 5-10 minutes to chat one-on-one. How cool is that?!",step:"3"}],PA=[{value:"1,247",label:"Happy Fans Joined"},{value:"200",label:"Video Meets Completed"},{value:"95%",label:"Success Rate (Fans Win)"}],MA=[{value:"89",label:"Creators Active Now"},{value:"4.5L",label:"Total Money Creators Earned"},{value:"10",label:"Minutes Average Meeting Time"},{value:"2-10",label:"Minutes Call Length Options"}],RA=[{name:"Priya Sharma  Content Creator  52K followers",quote:"I've done brand deals, sponsorships, everything. But FanMeet is different. I actually get to TALK to my supporters. I earned 45,000 last month and it helps fund new content!",duration:"60 sec clip"},{name:"Rohan Verma  Gaming Streamer  48K followers",quote:"My fans are the reason I do this. FanMeet lets me give back. These 10-minute calls remind me why I started. Plus, the extra income upgrades my setup. Win-win!",duration:"75 sec clip"}],Gx=[{id:"photo-1",quote:"Dreams come true! ",context:"Got cooking tips from Chef Amit!"},{id:"photo-2",quote:"Best birthday surprise ever ",context:"He sang my favourite song live!"},{id:"photo-3",quote:"She remembered my username!! ",context:"Finally spoke to my art icon"},{id:"photo-4",quote:"Career clarity in 10 minutes",context:"Life coach gave me a plan"},{id:"photo-5",quote:"We geeked out over anime ",context:"Felt like chatting with a friend"},{id:"photo-6",quote:"He reviewed my vlog setup ",context:"Got technical tips + motivation"}],Qx=["https://images.pexels.com/photos/1181675/pexels-photo-1181675.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181671/pexels-photo-1181671.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1183266/pexels-photo-1183266.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181519/pexels-photo-1181519.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181670/pexels-photo-1181670.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?auto=compress&cs=tinysrgb&w=800"],Jx=[{quote:"I've been following Chef Amit for 2 years on YouTube and never thought I'd get to talk to him personally. FanMeet made it possible! He gave me tips on starting my own food blog and even shared his secret recipe. Best 350 I ever spent. Thank you FanMeet! ",name:"Neha Kapoor, 26  Food Blogger  Mumbai",met:"Met: Chef Amit Gupta"},{quote:"As an introvert, I was scared to bid. But I really wanted career advice from Aditi. I won at 280. The call was so comfortable! She answered all my questions and even followed up with resources via email. Worth every rupee.",name:"Anonymous Fan, 23  Software Engineer",met:"Met: Aditi Sharma (Career Coach)"},{quote:"Booked a FanMeet for my little brother with his favourite tech creator. They both nerded out about gadgets for 10 minutes. He's still smiling a week later. 300 very well spent!",name:"Pooja Malhotra, 27  Pune",met:"Met: Tech with Raj"},{quote:"I used FanMeet to get feedback on my indie game from a gaming creator I admire. He gave me 3 actionable tips and shared my demo with his Discord server. Instant confidence boost!",name:"Harsh Patel, 21  Game Developer  Ahmedabad",met:"Met: Rohan Live"}],LA=[{icon:"",title:"Secure Payments",bullets:["All payments encrypted via Razorpay","Your card details never touch our servers","Same security as Amazon & Flipkart"],badge:"Razorpay Partner"},{icon:"",title:"Safe Refunds",bullets:["Get 90% back if you do not win","Instant & automatic  no forms to fill","1.2 lakh refunded with 98.5% success rate"],badge:"90% Refund Guarantee"},{icon:"",title:"Verified Creators",bullets:["Every creator manually approved by our team","Identity + social media checks","No fake accounts allowed"],badge:"Human Verified"},{icon:"",title:"24/7 Support",bullets:["Real humans reply within 2.3 hours","Email, chat, or call anytime","We stay with you till the call ends"],badge:"Always On"}],IA=[{title:"Paid Events (Bidding)",description:"Highest bid wins a 5-10 minute one-on-one call.",highlights:["Starting bids at 50 or 100","If you lose, 90% is refunded automatically","Average winning bid 250-400"],story:"I bid 250 for a 10-minute call with my favourite YouTuber. I won! The other 22 bidders got 225 back. Losing would cost only 25  cheaper than a coffee!  Rahul, College Student, Delhi",cta:"Browse Paid Events"},{title:"Free Events (Lucky Draw)",description:"Zero cost entries for surprise video calls.",highlights:["0 entry  completely free","Random winner chosen, no risk at all","Calls last 5-10 minutes just like paid events"],story:"I joined a free draw for Chef Amit and actually got picked! No money spent, just pure luck.  Priya, Food Blogger, Mumbai",cta:"Join Free Draws"}],OA=[{name:"Arjun Singh",role:"Founder",bio:"I once drove 8 hours to meet my favourite musician. Worth it. Now I help others meet their heroes from the couch!",funFact:"Biggest fan of Samay Raina"},{name:"Priya Mehta",role:"Co-Founder",bio:"Former food blogger (15K followers). I know both sides of the fan-creator equation. We built this for YOU.",funFact:"Made 47 prototypes before the final design"},{name:"Rahul Verma",role:"Tech Lead",bio:"I make sure calls never lag and payments stay secure. Boring? Yes. Important? Also yes.",funFact:"Fixed a bug at 3 AM while eating Maggi"},{name:"Neha Kapoor",role:"Customer Support",bio:"I reply to every email personally. Got a question? I am on it!",funFact:"Fastest typer in the team (110 WPM)"},{name:"Amit Gupta",role:"Marketing",bio:"I find awesome creators, make memes, and keep the community buzzing.",funFact:"Binged 200 YouTube channels for research"},{name:"Sneha Sharma",role:"Operations",bio:"I approve creator applications and keep every event running smooth.",funFact:"Interviewed 89 creators personally"}],Xx=["https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=crop&w=900&q=80","https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=900&q=80","https://images.unsplash.com/photo-1544723795-432537d12f6c?auto=format&fit=crop&w=900&q=80","https://images.unsplash.com/photo-1544723795-3fb0b90c07c1?auto=format&fit=crop&w=900&q=80","https://images.unsplash.com/photo-1525130413817-d45c1d127c42?auto=format&fit=crop&w=900&q=80","https://images.unsplash.com/photo-1525130413817-9e0b0a50b9d5?auto=format&fit=crop&w=900&q=80"],BA=OA.map((e,t)=>({quote:e.bio,name:e.name,designation:e.role,src:Xx[t%Xx.length]})),$A=[{category:"Fans",question:"What if I don't win the bid?",answer:"You automatically get 90% of your money back within 5-7 business days. If you bid 200, you only risk 20  less than a movie ticket!"},{category:"Fans",question:"How do I know creators are real?",answer:"Every creator is manually verified by our team. We check social media, identity, and test their video setup. No fake accounts allowed."},{category:"Fans",question:"What can I talk about in the call?",answer:"Anything! Ask questions, get advice, request shoutouts, share your story. It's your 10 minutes. Just be kind and respectful."},{category:"Fans",question:"What if my internet is bad?",answer:"Our video software works on 3G/4G. If there is a technical issue on our end, you get 100% refund or a reschedule  your choice."},{category:"Creators",question:"How do payouts work?",answer:"You keep 90% of the winning bid. Withdraw anytime via UPI or bank transfer. We process payouts within 2-3 business days."},{category:"Creators",question:"What if a fan is rude?",answer:"End the call immediately. We ban that user and you still keep your earnings. Your safety comes first."},{category:"Creators",question:"Do I need lots of followers?",answer:"If you have 1,000+ followers or a unique skill people want to learn, you are good to go. Smaller creators often get more bids!"},{category:"General",question:"Is FanMeet available outside India?",answer:"Right now we are India-only, but the waitlist is open. Drop your email and we will notify you when we expand."},{category:"General",question:"How is this different from Cameo?",answer:"Cameo is pre-recorded videos. FanMeet is live, two-way conversations. Ask follow-ups, share screens, and build a real connection."}],UA=[{type:"press",name:"YourStory",quote:"FanMeet is building Indias most intimate creator-fan marketplace.",url:"#"},{type:"press",name:"Inc42",quote:"A refreshing take on live interactions. Fans are bidding for moments, not merch.",url:"#"},{type:"social",name:"@creatorsneha",quote:"Just wrapped my third FanMeet. Tears, laughs, and a fan who wants to start creating again. ",url:"#"},{type:"social",name:"@chefamit",quote:"FanMeet calls feel like cooking with friends. 25 bids last night!",url:"#"}],zA=[{feature:"Real-time interaction",fanmeet:" Yes",social:" One-way comments",cameo:" Pre-recorded"},{feature:"Two-way conversation",fanmeet:" Talk & listen",social:" No",cameo:" No"},{feature:"Length of experience",fanmeet:"5-10 minutes",social:"Few seconds",cameo:"30-60 seconds"},{feature:"Ask follow-up questions",fanmeet:" Unlimited",social:" Maybe answered",cameo:" No"},{feature:"Typical price",fanmeet:"50-400",social:"Free (ignored)",cameo:"500-5000"},{feature:"Refund if you do not win",fanmeet:" 90-100%",social:"N/A",cameo:" No"}],VA=[{title:"From Fan to Friend",before:"Rahul followed gaming creator Rohan for 3 years without a single reply.",during:"He won a 320 bid and spent 10 minutes discussing streaming tips.",after:"Rohan now recognizes Rahul in chat and they exchange DMs about upcoming games. Confidence boosted x100."},{title:"Career-Changing Advice",before:"Priya was torn between UX design and product management.",during:"She paid 400 to chat with a career coach creator who mapped a 90-day plan.",after:"Priya launched her own service studio within two months. Her first paying client came from that creators recommendation."},{title:"Gift That Made Her Cry",before:"Amit wanted a meaningful birthday surprise for his partner, an art lover.",during:"He booked a FanMeet with her favourite illustrator who live-sketched her while they talked.",after:"She cried happy tears and the sketch now hangs in their living room."}],jr={fanmeet:{tagline:"Connecting fans and creators, one call at a time.",socials:[{label:"Instagram",url:"#"},{label:"Twitter",url:"#"},{label:"YouTube",url:"#"},{label:"LinkedIn",url:"#"}]},fans:[{label:"Browse Events",url:"#"},{label:"How It Works",url:"#how-it-works"},{label:"Pricing",url:"#pricing"},{label:"FAQs",url:"#faq"},{label:"Free Events",url:"#"}],creators:[{label:"Apply Now",url:"#creators"},{label:"Creator Guide",url:"#"},{label:"Earnings Calculator",url:"#"},{label:"Success Stories",url:"#success-stories"},{label:"Creator FAQs",url:"#faq"}],company:[{label:"About Us",url:"#team"},{label:"Our Team",url:"#team"},{label:"Press & Media",url:"#press"},{label:"Careers (We're Hiring!)",url:"#"},{label:"Blog",url:"#"}],support:[{label:"Help Center",url:"#"},{label:"Contact Us",url:"#"},{label:"Terms of Service",url:"#"},{label:"Privacy Policy",url:"#"},{label:"Refund Policy",url:"#"}]},WA=["Razorpay","Visa","Mastercard","UPI"],qA=({titleComponent:e,children:t})=>{const s=y.useRef(null),{scrollYProgress:r}=lA({target:s}),[a,i]=y.useState(!1);y.useEffect(()=>{const u=()=>{typeof window<"u"&&i(window.innerWidth<=768)};return u(),window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[]);const o=a?[.9,1]:[1.05,1],l=yd(r,[0,1],[20,0]),c=yd(r,[0,1],o),d=yd(r,[0,1],[0,-80]);return n.jsx("div",{className:"h-[38rem] md:h-[49rem] flex justify-center relative px-2 md:px-16",ref:s,children:n.jsxs("div",{className:"py-5 md:py-8 w-full relative",style:{perspective:"1000px"},children:[n.jsx(HA,{translate:d,titleComponent:e}),n.jsx(YA,{rotate:l,scale:c,children:t})]})})},HA=({translate:e,titleComponent:t})=>n.jsx(Ts.div,{style:{translateY:e},className:"max-w-5xl mx-auto text-center mb-6 md:mb-8",children:t}),YA=({rotate:e,scale:t,children:s})=>n.jsx(Ts.div,{style:{rotateX:e,scale:t,boxShadow:"0 0 #0000004d, 0 9px 20px #0000004a, 0 37px 37px #00000042, 0 84px 50px #00000026, 0 149px 60px #0000000a, 0 233px 65px #00000003"},className:"max-w-5xl mx-auto h-[28rem] md:h-[38rem] w-full border-4 border-[#6C6C6C] p-3 md:p-6 bg-[#222222] rounded-[30px] shadow-2xl",children:n.jsx("div",{className:"h-full w-full overflow-hidden rounded-2xl bg-gray-100 dark:bg-zinc-900 flex",children:s})});function KA(){const e=nt(),[t,s]=y.useState("All"),[r,a]=y.useState(!1),[i,o]=y.useState(!1),l=t==="All"?Pl:Pl.filter(c=>c.category.toLowerCase().includes(t.toLowerCase()));return n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("section",{className:"relative overflow-hidden bg-[#050014] text-white",children:[n.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(0,213,255,0.32)_0,_transparent_55%),radial-gradient(circle_at_bottom,_rgba(236,72,153,0.32)_0,_transparent_55%)]"}),n.jsxs("div",{className:"relative z-10 mx-auto flex max-w-none flex-col px-2 pb-4 pt-6 md:max-w-7xl md:px-8 md:pb-6 md:pt-8",children:[n.jsxs("div",{className:"flex items-center justify-between text-white",children:[n.jsxs("div",{className:"flex items-center gap-6 md:gap-10",children:[n.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold md:text-xl",children:[n.jsx("span",{className:"h-8 w-8 rounded-2xl bg-gradient-to-br from-[#C045FF] via-[#FF6B9D] to-[#8B3FFF] shadow-[0_0_25px_rgba(192,69,255,0.6)]"}),n.jsx("span",{children:"FanMeet"})]}),n.jsxs("nav",{className:"hidden items-center gap-6 text-sm font-medium text-white/80 md:flex",children:[n.jsx("button",{type:"button",onClick:()=>e("/browse-events"),className:"transition-colors hover:text-white",children:"Browse Events"}),n.jsx("button",{type:"button",onClick:()=>e("/how-it-works"),className:"transition-colors hover:text-white",children:"How It Works"}),n.jsx("button",{type:"button",onClick:()=>e("/for-creators"),className:"transition-colors hover:text-white",children:"For Creators"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"button",className:"hidden rounded-full border border-white/30 bg-black/40 px-4 py-1.5 text-xs font-medium text-white shadow-lg backdrop-blur-xl transition-all hover:-translate-y-0.5 hover:border-white hover:bg-black/60 hover:shadow-[0_0_25px_rgba(255,255,255,0.6)] md:inline-flex",onClick:()=>e("/auth"),children:"Log in"}),n.jsx("button",{type:"button",className:"hidden rounded-full border border-transparent bg-gradient-to-r from-[#C045FF] via-[#FF6B9D] to-[#8B3FFF] px-4 py-1.5 text-xs font-semibold text-white shadow-lg transition-all hover:-translate-y-0.5 hover:shadow-[0_0_35px_rgba(192,69,255,0.8)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[#E6FF00] md:inline-flex",onClick:()=>e("/auth"),children:"Sign up"}),n.jsxs("button",{type:"button",className:"flex items-center justify-center rounded-full border border-white/40 bg-black/40 p-2 text-white shadow-md backdrop-blur-xl transition-colors md:hidden",onClick:()=>o(c=>!c),children:[n.jsx("span",{className:"sr-only",children:"Toggle navigation"}),n.jsxs("div",{className:"flex flex-col gap-[3px]",children:[n.jsx("span",{className:"h-[2px] w-4 bg-white"}),n.jsx("span",{className:"h-[2px] w-4 bg-white"}),n.jsx("span",{className:"h-[2px] w-4 bg-white"})]})]})]})]}),i&&n.jsxs("div",{className:"mt-3 flex flex-col gap-2 rounded-2xl border border-white/20 bg-black/70 p-4 text-sm md:hidden",children:[n.jsx("button",{type:"button",className:"w-full rounded-full bg-white/10 px-4 py-2 text-left font-medium text-white hover:bg-white/20",onClick:()=>{o(!1),e("/browse-events")},children:"Browse Events"}),n.jsx("button",{type:"button",className:"w-full rounded-full bg-white/10 px-4 py-2 text-left font-medium text-white hover:bg-white/20",onClick:()=>{o(!1),e("/how-it-works")},children:"How It Works"}),n.jsx("button",{type:"button",className:"w-full rounded-full bg-white/10 px-4 py-2 text-left font-medium text-white hover:bg-white/20",onClick:()=>{o(!1),e("/for-creators")},children:"For Creators"}),n.jsxs("div",{className:"mt-1 flex flex-col gap-2",children:[n.jsx("button",{type:"button",className:"w-full rounded-full border border-white/40 bg-black/60 px-4 py-2 text-center text-xs font-medium text-white hover:bg-black/80",onClick:()=>{o(!1),e("/auth")},children:"Log in"}),n.jsx("button",{type:"button",className:"w-full rounded-full bg-gradient-to-r from-[#C045FF] via-[#FF6B9D] to-[#8B3FFF] px-4 py-2 text-center text-xs font-semibold text-white shadow-md hover:shadow-[0_0_25px_rgba(192,69,255,0.8)]",onClick:()=>{o(!1),e("/auth")},children:"Sign up"})]})]}),n.jsxs(Ts.div,{className:"mt-6 flex flex-col gap-8 md:mt-12 md:flex-row md:items-stretch",initial:{opacity:0,y:32},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[n.jsxs("div",{className:"flex w-full flex-col md:w-1/2 lg:w-3/5",children:[n.jsxs("div",{className:"max-w-xl space-y-6",children:[n.jsx("p",{className:"inline-block text-xl font-normal text-white/90 drop-shadow-[0_8px_30px_rgba(0,0,0,0.8)] sm:text-2xl",style:{fontFamily:"cursive"},children:"meet your favourite creators on fanmet"}),n.jsxs("h1",{className:"text-4xl font-extrabold leading-tight sm:text-5xl lg:text-6xl",children:["Live 1:1 video calls",n.jsx("span",{className:"block text-[#FACC15]",children:"with the people you actually care about."})]}),n.jsx("div",{className:"h-1 w-24 rounded-full bg-gradient-to-r from-[#C045FF] via-[#FF6B9D] to-[#8B3FFF]"}),n.jsx("p",{className:"max-w-lg text-sm text-white/80 sm:text-base",children:"Bid in tiny live auctions to win 510 minute video hangs with creators, gamers, chefs, coaches and other internet favourites. If you don't win, you get most of your money back."}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[n.jsx("button",{type:"button",onClick:()=>e("/fan"),className:"inline-flex items-center justify-center rounded-full bg-gradient-to-r from-[#C045FF] via-[#FF6B9D] to-[#8B3FFF] px-7 py-3 text-sm font-semibold text-white shadow-[0_18px_50px_rgba(0,0,0,0.7)] transition-transform duration-200 hover:-translate-y-1 hover:shadow-[0_24px_70px_rgba(192,69,255,0.9)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#E6FF00] focus-visible:ring-offset-2",children:"Explore live meets"}),n.jsxs("button",{type:"button",onClick:()=>{const c=document.getElementById("how-it-works");c&&c.scrollIntoView({behavior:"smooth",block:"start"})},className:"inline-flex items-center justify-center rounded-full border border-white/40 bg-black/40 px-5 py-2.5 text-sm font-medium text-white shadow-md backdrop-blur-xl transition-transform duration-200 hover:-translate-y-0.5 hover:bg-black/70",children:[n.jsx("span",{className:"mr-2 text-base",children:""}),"How FanMeet works"]})]})]}),n.jsxs("div",{className:"mt-4 grid gap-4 text-xs text-white/80 sm:grid-cols-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[#22C55E]/20 text-sm",children:""}),n.jsx("span",{children:"90% refund if you don't win the bid."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[#00D5FF]/20 text-sm",children:""}),n.jsx("span",{children:"Verified creators, safe payments, no fake profiles."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-[#EC4899]/20 text-sm",children:""}),n.jsx("span",{children:"Built in India for Indian fans & creators."})]})]})]}),n.jsx(Ts.div,{className:"hidden w-full h-[280px] md:block md:h-[440px] md:w-1/2 lg:h-[530px] lg:w-2/5",initial:{clipPath:"polygon(100% 0, 100% 0, 100% 100%, 100% 100%)"},animate:{clipPath:"polygon(25% 0, 100% 0, 100% 100%, 0% 100%)"},transition:{duration:1.2,ease:"circOut"},children:n.jsxs("div",{className:"h-full w-full overflow-hidden rounded-[32px] shadow-[0_28px_80px_rgba(0,0,0,0.85)]",children:[n.jsx("img",{src:hA,alt:"FanMeet colourful hero",className:"h-full w-full object-cover"}),n.jsx("div",{className:"hidden h-full w-full rounded-[32px] bg-gradient-to-t from-black/60 via-black/10 to-transparent md:block"})]})})]})]})]}),n.jsx("section",{id:"how-it-works",className:"bg-white px-6 py-16 md:px-16 md:py-24",children:n.jsxs("div",{className:"mx-auto max-w-6xl",children:[n.jsxs("div",{className:"mb-10 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#140423]",children:"Scroll through how FanMeet works"}),n.jsx("p",{className:"mt-2 text-base text-[#4A3B78]",children:"Cards stack as you scroll, revealing every piece of the fan-meet journey  from bidding to posting your own events."})]}),n.jsxs("div",{className:"mt-8 grid gap-6 md:grid-cols-3",children:[n.jsx(Ts.article,{className:"relative w-full overflow-hidden rounded-3xl bg-gradient-to-br from-[#FF6B9D] via-[#FFC46B] to-[#E6FF00] p-[1px] shadow-[0_18px_45px_rgba(255,107,157,0.55)]",whileHover:{y:-12,rotateX:3,rotateY:-3},transition:{type:"spring",stiffness:220,damping:20},children:n.jsxs("div",{className:"flex h-full flex-col rounded-[26px] bg-white/95 p-5 text-left",children:[n.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-[0.16em] text-[#C045FF]",children:"Step 1"}),n.jsx("h3",{className:"text-lg font-semibold text-[#140423]",children:"How it works"}),n.jsx("p",{className:"mt-2 text-sm text-[#4A3B78]",children:"Browse upcoming events, pick your creator, and place a bid to win a live 1:1 video call."}),n.jsx("ul",{className:"mt-4 space-y-2 text-sm text-[#4A3B78]",children:TA.map(c=>n.jsxs("li",{className:"flex gap-2",children:[n.jsx("span",{className:"mt-0.5 text-base",children:c.icon}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-[#140423]",children:c.title}),n.jsx("p",{className:"text-xs text-[#6C5A9C]",children:c.description})]})]},c.step))})]})}),n.jsx(Ts.article,{className:"relative w-full overflow-hidden rounded-3xl bg-gradient-to-br from-[#FFE66B] via-[#E6FF00] to-[#00F0FF] p-[1px] shadow-[0_18px_45px_rgba(0,240,255,0.45)]",whileHover:{y:-12,rotateX:3,rotateY:3},transition:{type:"spring",stiffness:220,damping:20},children:n.jsxs("div",{className:"flex h-full flex-col rounded-[26px] bg-white/95 p-5 text-left",children:[n.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-[0.16em] text-[#00A3FF]",children:"Step 2"}),n.jsx("h3",{className:"text-lg font-semibold text-[#140423]",children:"Featured creators"}),n.jsx("p",{className:"mt-2 text-sm text-[#4A3B78]",children:"Discover creators across categories. Tap a chip to filter the grid."}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:["All","Beauty","Cosplay","Fitness","Music","Sports","Gaming"].map(c=>n.jsx("button",{type:"button",onClick:()=>s(c),className:"rounded-full px-3 py-1 font-medium transition-colors "+(t===c?"bg-[#140423] text-white":"bg-white/80 text-[#4A3B78] hover:bg-white"),children:c},c))}),n.jsx("div",{className:"mt-4 grid gap-3 text-xs text-[#4A3B78] md:grid-cols-2",children:l.slice(0,4).map(c=>n.jsxs("div",{className:"flex items-center gap-2 rounded-2xl bg-[#F8F5FF] px-3 py-2",children:[n.jsx(Mt,{initials:c.avatar,size:"sm"}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[n.jsx("p",{className:"text-xs font-semibold text-[#140423]",children:c.name}),n.jsx(Q,{variant:"primary",className:"px-2 py-0.5 text-[9px] leading-tight",children:"Verified"})]}),n.jsxs("p",{className:"text-[11px] text-[#6C5A9C]",children:[c.category,"  ",c.followers]}),n.jsxs("p",{className:"text-[11px] text-[#C045FF]",children:["From ",c.priceRange]})]})]},c.name))})]})}),n.jsx(Ts.article,{className:"relative w-full overflow-hidden rounded-3xl bg-gradient-to-br from-[#00F0FF] via-[#6B6BFF] to-[#C045FF] p-[1px] shadow-[0_18px_45px_rgba(107,107,255,0.55)]",whileHover:{y:-12,rotateX:-3,rotateY:3},transition:{type:"spring",stiffness:220,damping:20},children:n.jsxs("div",{className:"flex h-full flex-col rounded-[26px] bg-white/95 p-5 text-left",children:[n.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-[0.16em] text-[#C045FF]",children:"Step 3"}),n.jsx("h3",{className:"text-lg font-semibold text-[#140423]",children:"Get verified as a creator"}),n.jsx("p",{className:"mt-2 text-sm text-[#4A3B78]",children:"Apply once, get verified, and start hosting paid or free fan meets from anywhere."}),n.jsxs("ul",{className:"mt-4 space-y-2 text-sm text-[#4A3B78]",children:[n.jsx("li",{children:" 1K+ followers or a unique skill people want to learn"}),n.jsx("li",{children:" Simple KYC & social verification by our team"}),n.jsx("li",{children:" 90% payout on every winning bid  no hidden fees"})]}),n.jsx("button",{type:"button",onClick:()=>e("/creator"),className:"mt-4 inline-flex items-center justify-center rounded-full bg-white px-4 py-2 text-xs font-semibold text-[#140423] shadow-md transition-transform hover:-translate-y-0.5",children:"Apply to get verified"})]})})]})]})}),n.jsx("section",{className:"bg-[radial-gradient(circle_at_top,_#FDF4FF_0,_#FFFFFF_55%),radial-gradient(circle_at_bottom,_#ECFEFF_0,_#FFFFFF_55%)] px-6 py-20 md:px-16",id:"featured",children:n.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col items-center gap-10",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#212529]",children:"Who Can You Meet on FanMeet?"}),n.jsx("p",{className:"mt-2 text-base text-[#6C757D]",children:"We have creators from every field!"})]}),n.jsx("div",{className:"flex w-full flex-col items-center justify-center",children:n.jsx("div",{className:"w-[250px] h-[250px] md:w-[420px] md:h-[420px] flex items-center justify-center",children:n.jsx(uA,{images:AA,containerSize:280,sphereRadius:130,autoRotate:!0,autoRotateSpeed:.35,dragSensitivity:.7,className:"mx-auto"})})})]})}),n.jsx("section",{className:"hidden bg-[radial-gradient(circle_at_top,_#00D5FF_0,_#050014_50%),radial-gradient(circle_at_bottom,_#F97316_0,_#050014_55%)] px-6 py-16 md:px-16",children:n.jsxs("div",{className:"mx-auto max-w-6xl",children:[n.jsxs("div",{className:"mb-12 text-center",children:[n.jsx("h2",{className:"mb-4 text-3xl font-bold text-white",children:"Join Thousands of Happy Fans! "}),n.jsx("p",{className:"text-lg text-[#ADB5BD]",children:"Real numbers from real people having real conversations"})]}),n.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-4",children:PA.map(c=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mb-2 text-4xl font-bold text-[#FACC15]",children:c.value}),n.jsx("div",{className:"text-sm text-[#ADB5BD]",children:c.label})]},c.label))}),n.jsx("div",{className:"mt-8 grid gap-8 md:grid-cols-2 lg:grid-cols-4",children:MA.map(c=>n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mb-2 text-4xl font-bold text-[#22C55E]",children:c.value}),n.jsx("div",{className:"text-sm text-[#ADB5BD]",children:c.label})]},c.label))})]})}),n.jsxs("section",{className:"relative overflow-hidden bg-[#050014] px-6 py-16 text-white md:px-16 md:py-24",children:[n.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(0,213,255,0.32)_0,_transparent_55%),radial-gradient(circle_at_bottom,_rgba(236,72,153,0.32)_0,_transparent_55%)]"}),n.jsxs("div",{className:"relative z-10 mx-auto flex max-w-6xl flex-col gap-10 md:grid md:grid-cols-[minmax(0,1.1fr)_minmax(0,1.1fr)] md:items-center",children:[n.jsxs("div",{className:"space-y-4 text-left text-white",children:[n.jsx("p",{className:"inline-flex items-center rounded-full bg-white/10 px-3 py-1 text-xs font-medium uppercase tracking-[0.16em] text-[#E6FF00] backdrop-blur-md",children:"LIVE DEMO"}),n.jsx("h2",{className:"text-3xl font-extrabold leading-tight sm:text-4xl lg:text-[2.6rem]",children:"See how a real FanMeet feels in under 2 minutes"}),n.jsx("p",{className:"max-w-xl text-sm text-white/80 sm:text-base",children:"Watch a real fan bid, win, and jump into a live video call with their favourite creator. No scripts, no actors  just genuine reactions."}),n.jsxs("ul",{className:"mt-4 space-y-2 text-sm text-white/80",children:[n.jsx("li",{children:" What the bidding screen looks like in action"}),n.jsx("li",{children:" How we keep calls safe, timed, and high-quality"}),n.jsx("li",{children:" The moment a fan realises their call is actually happening"})]})]}),n.jsx("div",{className:"relative mx-auto w-full max-w-3xl",children:n.jsx("div",{className:"relative overflow-hidden rounded-[28px] bg-black/40 p-[2px] shadow-[0_20px_60px_rgba(5,0,20,0.7)]",children:n.jsx("div",{className:"relative aspect-video w-full overflow-hidden rounded-[24px] bg-black",children:r?n.jsx("iframe",{className:"h-full w-full",src:"https://www.youtube.com/embed/S5IQtZlgNC8?autoplay=1&rel=0&modestbranding=1",title:"FanMeet overview video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):n.jsxs("button",{type:"button",onClick:()=>a(!0),className:"group relative h-full w-full",children:[n.jsx("img",{src:"https://cdn.prod.website-files.com/62c48d78ef34931f8a604ef5/67630876396363c467036ede_video-poster.webp",alt:"FanMeet overview video preview",className:"h-full w-full object-cover opacity-90 transition-opacity group-hover:opacity-100"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4 text-center text-white",children:[n.jsxs("div",{className:"inline-flex items-center gap-3 rounded-full bg-white/10 px-4 py-2 text-xs font-medium backdrop-blur-md",children:[n.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-white text-sm font-semibold text-[#C045FF] shadow-lg",children:""}),n.jsx("span",{className:"text-xs sm:text-sm",children:"Play 2 min overview"})]}),n.jsx("p",{className:"max-w-md text-xs text-white/80 sm:text-sm",children:'"This feels like a private show with your favourite creator. I forgot we were on camera."  real fan'})]})]})})})})]})]}),n.jsx("section",{className:"bg-[radial-gradient(circle_at_top,_#FDF4FF_0,_#F8F9FA_55%),radial-gradient(circle_at_bottom,_#ECFEFF_0,_#F8F9FA_55%)] px-6 py-20 md:px-16",children:n.jsxs("div",{className:"mx-auto max-w-5xl",children:[n.jsxs("div",{className:"mb-12 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#212529]",children:"Creators Love FanMeet Too"}),n.jsx("p",{className:"mt-2 text-base text-[#6C757D]",children:"Hear how meaningful conversations boost their community and income"})]}),n.jsx("div",{className:"grid gap-8 md:grid-cols-2",children:RA.map(c=>n.jsxs(I,{elevated:!0,className:"overflow-hidden border border-[#E9ECEF]",children:[n.jsx("div",{className:"relative aspect-[16/9] bg-gradient-to-br from-[#212529] via-[#343A40] to-[#212529]",children:n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("span",{className:"rounded-full bg-white px-4 py-2 text-sm font-semibold text-[#C045FF] shadow",children:[" ",c.duration]})})}),n.jsxs(B,{className:"flex flex-col gap-4 p-6",children:[n.jsx("p",{className:"text-sm font-semibold text-[#212529]",children:c.name}),n.jsxs("p",{className:"text-sm text-[#6C757D]",children:["",c.quote,""]})]})]},c.name))})]})}),n.jsx("section",{className:"bg-[radial-gradient(circle_at_top,_#FFF7ED_0,_#FFFFFF_55%),radial-gradient(circle_at_bottom,_#FDF4FF_0,_#FFFFFF_55%)] px-6 py-16 md:px-16",children:n.jsxs("div",{className:"mx-auto max-w-6xl",children:[n.jsxs("div",{className:"mb-10 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#212529]",children:"Real FanMeets"}),n.jsx("p",{className:"mt-2 text-base text-[#6C757D]",children:"Real moments and reactions captured from live FanMeet calls."})]}),n.jsx("div",{className:"flex flex-col gap-6 md:gap-8",children:Array.from({length:6}).map((c,d)=>{const u=Gx[d%Gx.length],h=Jx[d%Jx.length],f=Qx[d%Qx.length];return n.jsx(qA,{titleComponent:n.jsxs("div",{className:"mt-6 md:mt-0",children:[n.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#C045FF]",children:["Real FanMeet #",d+1]}),n.jsx("p",{className:"mt-1 text-sm text-[#6C757D]",children:u.context})]}),children:n.jsx("div",{className:"flex h-full",children:n.jsxs("div",{className:"flex h-full flex-col md:flex-row gap-4 rounded-2xl bg-white p-3 md:p-4 shadow-md border border-[#F1F3F5] w-full",children:[n.jsx("div",{className:"w-full md:w-1/2",children:n.jsx("div",{className:"h-full w-full overflow-hidden rounded-xl",children:n.jsx("img",{src:f,alt:u.context,className:"h-full w-full object-cover"})})}),n.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#C045FF]",children:"Full Review"}),n.jsxs("p",{className:"mt-2 text-sm font-semibold text-[#212529]",children:["",h.quote,""]})]}),n.jsxs("div",{className:"mt-3 flex flex-col gap-1 text-xs text-[#6C757D]",children:[n.jsx("span",{className:"font-semibold text-[#212529]",children:h.name}),n.jsx("span",{children:h.met}),n.jsxs("span",{className:"text-[11px] text-[#868E96]",children:["Moment: ",u.context]}),n.jsx("span",{className:"flex items-center gap-1 text-[#C045FF]",children:"".split("").map((v,b)=>n.jsx("span",{children:v},`${u.id}-star-${b}`))})]})]})]})})},`${u.id}-scroll-${d}`)})})]})}),n.jsx("section",{className:"bg-[radial-gradient(circle_at_top,_#FDF4FF_0,_#FFFFFF_55%),radial-gradient(circle_at_bottom,_#ECFEFF_0,_#FFFFFF_55%)] px-6 py-20 md:px-16",id:"trust",children:n.jsxs("div",{className:"mx-auto max-w-6xl",children:[n.jsxs("div",{className:"mb-10 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#212529]",children:"Trust Comes First"}),n.jsx("p",{className:"mt-2 text-base text-[#6C757D]",children:"We built FanMeet to be safe, secure, and fan-friendly from day one."})]}),n.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-4",children:LA.map(c=>n.jsx(I,{elevated:!0,className:"h-full border border-[#F1F3F5]",children:n.jsxs(B,{className:"flex h-full flex-col gap-4 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 text-[#C045FF]",children:[n.jsx("span",{className:"text-2xl",children:c.icon}),n.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide text-[#6C757D]",children:c.badge})]}),n.jsx("h3",{className:"text-lg font-semibold text-[#212529]",children:c.title}),n.jsx("ul",{className:"space-y-2 text-sm text-[#6C757D]",children:c.bullets.map(d=>n.jsxs("li",{className:"flex gap-2",children:[n.jsx("span",{className:"text-[#C045FF]",children:""}),n.jsx("span",{children:d})]},d))})]})},c.title))})]})}),n.jsx("section",{className:"bg-[radial-gradient(circle_at_top,_#ECFEFF_0,_#F8F9FA_55%),radial-gradient(circle_at_bottom,_#FDF4FF_0,_#F8F9FA_55%)] px-6 py-20 md:px-16",id:"pricing",children:n.jsxs("div",{className:"mx-auto max-w-6xl",children:[n.jsxs("div",{className:"mb-12 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#212529]",children:"Two Ways to Meet Your Heroes"}),n.jsx("p",{className:"mt-2 text-base text-[#6C757D]",children:"Whether you want to bid or try your luck, FanMeet keeps it fair and transparent."})]}),n.jsx("div",{className:"grid gap-8 md:grid-cols-2",children:IA.map(c=>n.jsxs(I,{elevated:!0,className:"border border-[#E9ECEF] bg-white",children:[n.jsx($,{title:c.title,subtitle:c.description,className:"border-b border-[#F1F3F5]"}),n.jsxs(B,{className:"flex flex-col gap-4 p-6",children:[n.jsx("ul",{className:"space-y-3 text-sm text-[#212529]",children:c.highlights.map(d=>n.jsxs("li",{className:"flex gap-2",children:[n.jsx("span",{className:"text-[#C045FF]",children:""}),n.jsx("span",{children:d})]},d))}),n.jsx("p",{className:"rounded-[14px] bg-[#FFF3ED] p-4 text-sm text-[#6C757D]",children:c.story}),n.jsx(T,{className:"mt-2 w-full",variant:"secondary",children:c.cta})]})]},c.title))})]})}),n.jsx("section",{className:"bg-[radial-gradient(circle_at_top,_#FDF4FF_0,_#F8F9FA_55%),radial-gradient(circle_at_bottom,_#ECFEFF_0,_#F8F9FA_55%)] px-6 py-20 md:px-16",id:"team",children:n.jsxs("div",{className:"mx-auto max-w-6xl",children:[n.jsx("div",{className:"mb-8 text-center",children:n.jsx("h2",{className:"text-3xl font-bold tracking-[0.25em] text-[#212529]",children:"ABOUT US"})}),n.jsx(DA,{testimonials:BA,autoplay:!0})]})}),n.jsx("section",{className:"hidden bg-[radial-gradient(circle_at_top,_#FFF7ED_0,_#FFFFFF_55%),radial-gradient(circle_at_bottom,_#FDF4FF_0,_#FFFFFF_55%)] px-6 py-20 md:px-16",id:"faq",children:n.jsxs("div",{className:"mx-auto max-w-5xl",children:[n.jsxs("div",{className:"mb-10 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#212529]",children:"Questions? We Already Answered Them."}),n.jsx("p",{className:"mt-2 text-base text-[#6C757D]",children:"Everything fans and creators ask before hitting that Bid or Apply button."})]}),n.jsx("div",{className:"flex flex-col gap-4",children:$A.map(c=>n.jsxs("details",{className:"group rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5",children:[n.jsxs("summary",{className:"flex cursor-pointer list-none items-center justify-between gap-4 text-left text-sm font-semibold text-[#212529]",children:[n.jsxs("span",{className:"text-[#C045FF]",children:["[",c.category,"]"]}),n.jsx("span",{className:"flex-1 text-[#212529]",children:c.question}),n.jsx("span",{className:"text-[#ADB5BD] transition-transform group-open:rotate-45",children:"+"})]}),n.jsx("p",{className:"mt-3 text-sm text-[#6C757D]",children:c.answer})]},`${c.category}-${c.question}`))})]})}),n.jsx("section",{className:"hidden bg-[radial-gradient(circle_at_top,_#00D5FF_0,_#050014_50%),radial-gradient(circle_at_bottom,_#EC4899_0,_#050014_55%)] px-6 py-20 text-white md:px-16",id:"press",children:n.jsxs("div",{className:"mx-auto max-w-6xl",children:[n.jsxs("div",{className:"mb-10 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold",children:"People Are Talking About FanMeet"}),n.jsx("p",{className:"mt-2 text-base text-[#CED4DA]",children:"Press features, creator shoutouts, and community buzz."})]}),n.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:UA.map(c=>n.jsx(I,{className:"border border-[#343A40] bg-[#2C3036]",children:n.jsxs(B,{className:"flex flex-col gap-3 p-6",children:[n.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-[#C045FF]",children:c.type==="press"?"As Seen In":"From the Community"}),n.jsx("h3",{className:"text-lg font-semibold text-[#212529]",children:c.name}),n.jsx("p",{className:"text-sm text-[#212529]",children:c.quote}),n.jsx(T,{variant:"ghost",className:"self-start px-0 text-sm text-[#C045FF]",children:"Read more "})]})},`${c.type}-${c.name}`))})]})}),n.jsx("section",{className:"hidden bg-[radial-gradient(circle_at_top,_#ECFEFF_0,_#FFFFFF_55%),radial-gradient(circle_at_bottom,_#FDF4FF_0,_#FFFFFF_55%)] px-6 py-20 md:px-16",id:"comparison",children:n.jsxs("div",{className:"mx-auto max-w-5xl",children:[n.jsxs("div",{className:"mb-8 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#212529]",children:"Why FanMeet Beats DMs and Cameo"}),n.jsx("p",{className:"mt-2 text-base text-[#6C757D]",children:"The only place for real, two-way conversations with creators you admire."})]}),n.jsx("div",{className:"overflow-x-auto rounded-[18px] border border-[#E9ECEF]",children:n.jsxs("table",{className:"min-w-full divide-y divide-[#E9ECEF]",children:[n.jsx("thead",{className:"bg-[#F8F9FA] text-sm uppercase tracking-wide text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Feature"}),n.jsx("th",{className:"px-4 py-3 text-left text-[#C045FF]",children:"FanMeet"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Commenting"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Paid Shoutouts"})]})}),n.jsx("tbody",{className:"divide-y divide-[#F1F3F5] text-sm text-[#212529]",children:zA.map(c=>n.jsxs("tr",{className:"bg-white",children:[n.jsx("td",{className:"px-4 py-3 font-medium text-[#212529]",children:c.feature}),n.jsx("td",{className:"px-4 py-3 text-[#20C997]",children:c.fanmeet}),n.jsx("td",{className:"px-4 py-3 text-[#6C757D]",children:c.social}),n.jsx("td",{className:"px-4 py-3 text-[#6C757D]",children:c.cameo})]},c.feature))})]})}),n.jsx("p",{className:"mt-6 text-center text-sm text-[#6C757D]",children:"FanMeet is the only place to have a REAL conversation with creators you admire."})]})}),n.jsx("section",{className:"hidden bg-[radial-gradient(circle_at_top,_#FDF4FF_0,_#F8F9FA_55%),radial-gradient(circle_at_bottom,_#FFF7ED_0,_#F8F9FA_55%)] px-6 py-20 md:px-16",id:"success-stories",children:n.jsxs("div",{className:"mx-auto max-w-5xl",children:[n.jsxs("div",{className:"mb-10 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#212529]",children:"Three Stories You Will Brag About Later"}),n.jsx("p",{className:"mt-2 text-base text-[#6C757D]",children:"Real transformations from fans who hit Bid and never looked back."})]}),n.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:VA.map(c=>n.jsx(I,{elevated:!0,className:"border border-[#E9ECEF]",children:n.jsxs(B,{className:"flex h-full flex-col gap-3 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-[#212529]",children:c.title}),n.jsxs("div",{className:"space-y-2 text-sm text-[#6C757D]",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold text-[#212529]",children:"Before:"})," ",c.before]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold text-[#212529]",children:"During:"})," ",c.during]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold text-[#212529]",children:"After:"})," ",c.after]})]})]})},c.title))})]})}),n.jsx("section",{className:"bg-[radial-gradient(circle_at_top,_#FFF7ED_0,_#FFFFFF_55%),radial-gradient(circle_at_bottom,_#FDF4FF_0,_#FFFFFF_55%)] px-6 py-20 md:px-16",children:n.jsxs("div",{className:"mx-auto max-w-4xl rounded-[24px] border border-[#F1F3F5] bg-[radial-gradient(circle_at_top,_#FDF2EC_0,_#FFFFFF_70%)] p-10 text-center shadow-[var(--shadow-lg)]",children:[n.jsx("h2",{className:"text-3xl font-bold text-[#212529]",children:"Ready to Meet Your Hero?"}),n.jsx("p",{className:"mt-3 text-base text-[#6C757D]",children:"Join 1,247 people who already had life-changing conversations."}),n.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-4",children:[n.jsx(T,{size:"lg",className:"px-8 text-base",children:"Browse Events & Start Bidding "}),n.jsx(T,{size:"lg",variant:"secondary",className:"px-8 text-base",children:"Apply to Become a Creator "})]}),n.jsxs("div",{className:"mt-6 grid gap-3 md:grid-cols-2",children:[n.jsx("div",{className:"rounded-[16px] bg-white p-4 text-sm text-[#6C757D]",children:"I bid 280, won the call, and my creator remembered me on stream a week later.  Neeraj, Pune"}),n.jsx("div",{className:"rounded-[16px] bg-white p-4 text-sm text-[#6C757D]",children:"Applications took 2 minutes. I now run weekly coaching calls and finally understand my fans.  Ananya, Creator"})]}),n.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-4 text-xs text-[#6C757D]",children:[n.jsx("span",{children:" 90% Refund Guarantee"}),n.jsx("span",{children:" Verified Creators Only"}),n.jsx("span",{children:" Secure Payments"}),n.jsx("span",{children:" 24/7 Support"})]})]})}),n.jsx("footer",{className:"bg-[#1B1C1F] px-6 py-16 text-white md:px-16",children:n.jsxs("div",{className:"mx-auto max-w-6xl",children:[n.jsxs("div",{className:"grid gap-10 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,3fr)]",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl font-bold text-[#C045FF]",children:"FanMeet"}),n.jsx("p",{className:"mt-2 text-sm text-[#ADB5BD]",children:jr.fanmeet.tagline})]}),n.jsx("div",{className:"flex flex-wrap items-center gap-3 text-sm text-[#ADB5BD]",children:WA.map(c=>n.jsx("span",{className:"rounded-full border border-[#343A40] px-3 py-1",children:c},c))}),n.jsx("div",{className:"flex flex-wrap gap-3 text-sm text-[#ADB5BD]",children:jr.fanmeet.socials.map(c=>n.jsxs(T,{variant:"ghost",className:"px-0 text-sm text-[#ADB5BD]",children:[c.label," "]},c.label))})]}),n.jsxs("div",{className:"grid gap-8 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-[#C045FF]",children:"For Fans"}),n.jsx("ul",{className:"mt-3 space-y-2 text-sm text-[#ADB5BD]",children:jr.fans.map(c=>n.jsx("li",{children:c.label},c.label))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-[#C045FF]",children:"For Creators"}),n.jsx("ul",{className:"mt-3 space-y-2 text-sm text-[#ADB5BD]",children:jr.creators.map(c=>n.jsx("li",{children:c.label},c.label))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-[#C045FF]",children:"Company"}),n.jsx("ul",{className:"mt-3 space-y-2 text-sm text-[#ADB5BD]",children:jr.company.map(c=>n.jsx("li",{children:c.label},c.label))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide text-[#C045FF]",children:"Support"}),n.jsx("ul",{className:"mt-3 space-y-2 text-sm text-[#ADB5BD]",children:jr.support.map(c=>n.jsx("li",{children:c.label},c.label))})]})]})]}),n.jsxs("div",{className:"mt-10 border-t border-[#343A40] pt-6 text-center text-xs text-[#6C757D]",children:[" ",new Date().getFullYear()," FanMeet. Made with  in India. All rights reserved."]})]})})]})}const GA=[{title:"300+ creators onboarded",description:"Host exclusive AMA sessions, workshops, and meet & greets."},{title:"10k+ fan requests",description:"Fans are lining up for authentic, small-group interactions."}];function QA(){const[e,t]=y.useState("login"),[s,r]=y.useState("fan"),[a,i]=y.useState(""),[o,l]=y.useState(""),[c,d]=y.useState(""),[u,h]=y.useState(!1),f=nt(),[v]=Yh(),{login:b,signup:g,isAuthenticated:w,user:p}=ve();y.useEffect(()=>{w&&p&&f({fan:"/fan",creator:"/creator",admin:"/admin"}[p.role],{replace:!0})},[w,p,f]);const m=async x=>{if(x.preventDefault(),!a.trim()||!o.trim()){d("Please enter both email and password.");return}d(""),h(!0);try{const N={fan:"/fan",creator:"/creator",admin:"/admin"},j=e==="signup"?await g({email:a,password:o,role:s}):await b({email:a,password:o}),C=v.get("redirect"),E=N[j.role],_=C&&C.trim().length>0?C:E;f(_,{replace:!0})}catch(N){N instanceof Error?d(N.message):d("Something went wrong. Please try again.")}finally{h(!1)}};return n.jsxs("div",{className:"grid min-h-[calc(100vh-70px)] grid-cols-1 bg-gradient-to-b from-white to-[#F8F0FF] md:grid-cols-[minmax(0,1.1fr)_minmax(0,0.9fr)]",children:[n.jsxs("section",{className:"relative hidden h-full w-full items-start justify-start bg-gradient-to-br from-[#FCE7FF] via-[#F4E6FF] to-[#E5DEFF] px-10 py-9 text-[#050014] md:flex",children:[n.jsxs("div",{className:"relative z-10 mx-auto flex max-w-xl flex-col gap-6",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/70 px-4 py-1 text-sm font-medium tracking-wide text-[#C045FF]",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-[#C045FF]"})," LIVE MOMENTS  REAL CONNECTIONS"]}),n.jsx("h1",{className:"text-2xl font-bold leading-tight text-[#050014] md:text-3xl lg:text-4xl",children:"Bring creators and fans together through premium digital meetups"}),n.jsx("p",{className:"text-xs text-[#4B445F] md:text-sm lg:text-base",children:"Secure bidding, curated events, and rich creator tooling packaged in one vibrant platform."})]}),n.jsxs("div",{className:"hidden xl:flex xl:flex-col xl:gap-4",children:[n.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:GA.map(x=>n.jsx(I,{className:"bg-white/10 backdrop-blur-md transition hover:bg-white/20",elevated:!0,children:n.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-[#050014]",children:x.title}),n.jsx("p",{className:"text-sm text-[#4B445F]",children:x.description})]})},x.title))}),n.jsxs("div",{className:"relative mt-2",children:[n.jsx("img",{src:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&w=1200&q=80",alt:"Creators collaborating",className:"h-36 w-full rounded-3xl object-cover shadow-2xl shadow-[#C045FF]/40"}),n.jsx("div",{className:"absolute bottom-2 left-1/2 w-[85%] -translate-x-1/2 rounded-2xl bg-white/95 p-3 shadow-xl shadow-[#C045FF]/15",children:n.jsxs("div",{className:"flex items-center gap-2.5",children:[n.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-[#C045FF]/10 text-2xl",children:""}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-[#C045FF]",children:"Creator Spotlight"}),n.jsx("p",{className:"text-sm text-[#212529]",children:"My fans love our micro-meet sessionsit feels personal and seamless."})]})]})})]})]})]}),n.jsx("div",{className:"absolute right-0 top-0 h-full w-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"})]}),n.jsx("section",{className:"flex items-start justify-center px-4 py-4 md:px-6 md:py-4",children:n.jsxs("div",{className:"flex w-full max-w-md flex-col gap-4 md:gap-3.5",children:[n.jsxs("div",{className:"flex flex-col gap-1.5 text-center md:text-left",children:[n.jsx(Lr,{to:"/",className:"text-sm font-semibold text-[#C045FF]",children:" Back to home"}),n.jsx("h2",{className:"text-2xl font-bold text-[#212529] md:text-3xl",children:e==="login"?"Welcome back":"Create your FanMeet account"}),n.jsx("p",{className:"hidden text-sm text-[#6C757D] lg:block",children:e==="login"?"Sign in to manage your events, track bids, and stay close to your community.":"Sign up once to access your fan or creator dashboard and manage all your sessions."})]}),n.jsxs("form",{className:"flex flex-col gap-3",onSubmit:m,children:[n.jsxs("div",{className:"flex items-center justify-between rounded-full bg-[#F1F3F5] p-1 text-xs font-medium text-[#495057]",children:[n.jsx("button",{type:"button",onClick:()=>{t("login"),d("")},className:Gn("flex-1 rounded-full px-3 py-1.5 transition-all",e==="login"?"bg-white text-[#212529] shadow-sm":"bg-transparent"),children:"Log in"}),n.jsx("button",{type:"button",onClick:()=>{t("signup"),d("")},className:Gn("flex-1 rounded-full px-3 py-1.5 transition-all",e==="signup"?"bg-white text-[#212529] shadow-sm":"bg-transparent"),children:"Sign up"})]}),n.jsx("div",{className:"flex flex-col gap-1.5",children:e==="signup"&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-sm font-medium text-[#212529]",children:"Sign up as"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Fan",value:"fan",emoji:""},{label:"Creator",value:"creator",emoji:""}].map(x=>n.jsxs("button",{type:"button",onClick:()=>r(x.value),className:Gn("flex items-center gap-2.5 rounded-[14px] border-2 px-3.5 py-2.5 text-left transition-all","shadow-[var(--shadow-sm)] hover:shadow-[var(--shadow-md)]",s===x.value?"border-[#C045FF] bg-[#F4E6FF] text-[#212529]":"border-[#E9ECEF] bg-white text-[#6C757D] hover:border-[#C045FF]/40"),children:[n.jsx("span",{className:"text-lg",children:x.emoji}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[13px] font-semibold",children:x.label}),n.jsxs("p",{className:"text-[11px] text-[#6C757D]",children:[x.value==="fan"&&"Bid, join meets, and manage your sessions.",x.value==="creator"&&"Host immersive experiences and track earnings."]})]})]},x.value))})]})}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx(te,{label:"Email",placeholder:"you@example.com",type:"email",required:!0,value:a,onChange:x=>i(x.target.value)}),n.jsx(te,{label:"Password",placeholder:"Enter your password",type:"password",required:!0,value:o,onChange:x=>l(x.target.value)}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("label",{className:"flex items-center gap-2 text-[#6C757D]",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-[#CBD5F5] text-[#C045FF] focus:ring-[#C045FF]"}),"Remember me"]}),n.jsx(Lr,{to:"#",className:"font-medium text-[#C045FF] hover:text-[#8B3FFF]",children:"Forgot password?"})]})]}),c?n.jsx("p",{className:"text-[11px] font-medium text-[#DC3545]",children:c}):null,n.jsx(T,{type:"submit",size:"md",className:"h-9 text-[13px]",children:"Continue with email"}),n.jsxs("div",{className:"flex items-center gap-2.5",children:[n.jsx("span",{className:"h-px flex-1 bg-[#E9ECEF]"}),n.jsx("span",{className:"text-sm font-medium text-[#6C757D]",children:"or"}),n.jsx("span",{className:"h-px flex-1 bg-[#E9ECEF]"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(T,{variant:"secondary",size:"md",className:"h-9 text-[13px]",children:"Continue with Google"}),n.jsx(T,{variant:"ghost",size:"md",className:"h-9 text-[13px]",children:"Continue with Apple"})]})]}),n.jsxs("p",{className:"hidden text-xs text-[#ADB5BD] lg:block",children:["By continuing, you agree to our"," ",n.jsx(Lr,{to:"#",className:"font-medium text-[#C045FF]",children:"Terms of Service"})," ","and"," ",n.jsx(Lr,{to:"#",className:"font-medium text-[#C045FF]",children:"Privacy Policy"}),"."]})]})})]})}function JA(){const{login:e,isAuthenticated:t,user:s,logout:r}=ve(),[a,i]=y.useState(""),[o,l]=y.useState(""),[c,d]=y.useState(""),[u,h]=y.useState(!1),f=nt();y.useEffect(()=>{t&&(s==null?void 0:s.role)==="admin"&&f("/admin",{replace:!0})},[t,s,f]);const v=async b=>{if(b.preventDefault(),!a.trim()||!o.trim()){d("Please enter both email and password.");return}d(""),h(!0);try{if((await e({email:a,password:o})).role!=="admin"){d("This account is not an admin."),await r();return}f("/admin",{replace:!0})}catch(g){g instanceof Error?d(g.message):d("Something went wrong. Please try again.")}finally{h(!1)}};return n.jsxs("div",{className:"grid min-h-[calc(100vh-70px)] grid-cols-1 bg-gradient-to-b from-white to-[#F8F0FF] md:grid-cols-[minmax(0,1.1fr)_minmax(0,0.9fr)]",children:[n.jsxs("section",{className:"relative hidden h-full w-full items-start justify-start bg-gradient-to-br from-[#FCE7FF] via-[#F4E6FF] to-[#E5DEFF] px-10 py-9 text-[#050014] md:flex",children:[n.jsx("div",{className:"relative z-10 mx-auto flex max-w-xl flex-col gap-6",children:n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/70 px-4 py-1 text-sm font-medium tracking-wide text-[#C045FF]",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-[#C045FF]"})," ADMIN ACCESS"]}),n.jsx("h1",{className:"text-2xl font-bold leading-tight text-[#050014] md:text-3xl lg:text-4xl",children:"Sign in to your FanMeet admin console"}),n.jsx("p",{className:"text-xs text-[#4B445F] md:text-sm lg:text-base",children:"Manage creators, fans, events, payouts, and platform settings from a single secure dashboard."})]})}),n.jsx("div",{className:"absolute right-0 top-0 h-full w-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"})]}),n.jsx("section",{className:"flex items-start justify-center px-4 py-4 md:px-6 md:py-4",children:n.jsxs("div",{className:"flex w-full max-w-md flex-col gap-4 md:gap-3.5",children:[n.jsxs("div",{className:"flex flex-col gap-1.5 text-center md:text-left",children:[n.jsx(Lr,{to:"/",className:"text-sm font-semibold text-[#C045FF]",children:" Back to home"}),n.jsx("h2",{className:"text-2xl font-bold text-[#212529] md:text-3xl",children:"Admin sign in"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Use your admin credentials to access the platform controls."})]}),n.jsxs("form",{className:"flex flex-col gap-3",onSubmit:v,children:[n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx(te,{label:"Admin email",placeholder:"you@company.com",type:"email",required:!0,value:a,onChange:b=>i(b.target.value)}),n.jsx(te,{label:"Password",placeholder:"Enter your password",type:"password",required:!0,value:o,onChange:b=>l(b.target.value)})]}),c?n.jsx("p",{className:"text-[11px] font-medium text-[#DC3545]",children:c}):null,n.jsx(T,{type:"submit",size:"md",className:"h-9 text-[13px]",disabled:u,children:u?"Signing in":"Sign in as admin"}),n.jsx(I,{className:"mt-2 border-[#FFE5D9] bg-[#FFF8F3] p-3 text-xs text-[#6C757D]",children:"Admin access is restricted. If you believe you should have access, contact the platform owner."})]})]})})]})}const Zx=[{id:"1",creator:"Priya Sharma",category:"Gaming",status:"LIVE",bids:18,currentBid:450,basePrice:100,duration:"10 minutes"},{id:"2",creator:"Rohan Gupta",category:"Cooking",status:"UPCOMING",bids:8,currentBid:220,basePrice:80,duration:"5 minutes"},{id:"3",creator:"Amit Singh",category:"Art & Design",status:"UPCOMING",bids:4,currentBid:150,basePrice:60,duration:"10 minutes"}];function XA(){const[e]=Yh(),t=e.get("q")||"",s=y.useMemo(()=>{if(!t)return Zx;const r=t.toLowerCase();return Zx.filter(a=>a.creator.toLowerCase().includes(r)||a.category.toLowerCase().includes(r))},[t]);return n.jsxs("div",{className:"mx-auto flex max-w-5xl flex-col gap-8 px-4 py-8 md:px-0 md:py-10",children:[n.jsxs("section",{className:"space-y-4",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C045FF]",children:"Browse Events"}),n.jsx("h1",{className:"text-2xl font-semibold text-[#050014] md:text-3xl",children:"Explore live and upcoming FanMeet events."}),n.jsx("p",{className:"max-w-2xl text-sm text-[#6C757D] md:text-base",children:"This is a public browse page so fans can get a feel for the experience before creating an account. When you are ready to bid or join, you can sign up in a single step."})]}),n.jsx("section",{className:"grid gap-6 md:grid-cols-2",children:s.length>0?s.map(r=>n.jsxs(I,{elevated:!0,className:"flex h-full flex-col overflow-hidden p-0",children:[n.jsx("div",{className:"relative h-36 w-full flex-shrink-0 bg-gradient-to-br from-[#FCE7FF] via-white to-[#E5DEFF]"}),n.jsxs("div",{className:"flex flex-1 flex-col gap-4 px-6 pb-6 pt-5",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx(Q,{variant:r.status==="LIVE"?"danger":"primary",className:"mb-1 text-[11px] uppercase tracking-wide",children:r.status==="LIVE"?" Live Now":" Upcoming"}),n.jsx("div",{className:"text-lg font-semibold text-[#212529]",children:r.creator}),n.jsx("div",{className:"text-xs text-[#6C757D]",children:r.category})]}),n.jsxs("div",{className:"text-right text-xs text-[#6C757D]",children:[n.jsx("div",{children:r.duration}),n.jsxs("div",{className:"mt-1",children:["Base price: ",r.basePrice]})]})]}),n.jsxs("div",{className:"rounded-[14px] border border-[#F4E6FF] bg-[#F8F9FA] p-4 text-sm text-[#343A40]",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Current highest bid"}),n.jsxs("span",{className:"text-base font-semibold text-[#C045FF]",children:["",r.currentBid]})]}),n.jsxs("div",{className:"mt-1 text-xs text-[#6C757D]",children:[r.bids," fans bidding"]})]}),n.jsx(T,{className:"mt-auto w-full bg-[#050014] text-white hover:bg-[#140423]",size:"sm",children:"View event details"})]})]},r.id)):n.jsxs("div",{className:"col-span-full text-center py-12 text-[#6C757D]",children:['No events found matching "',t,'"']})}),n.jsx("section",{children:n.jsxs(I,{elevated:!0,className:"border-dashed border-[#E9ECEF] bg-[#F8F9FA]",children:[n.jsx($,{title:"Ready to bid or join a free event?",subtitle:"Create a fan account in less than 30 seconds and keep track of all your bids and meetings."}),n.jsxs(B,{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsx("p",{className:"max-w-md text-sm text-[#6C757D]",children:"Login or sign up from the top-right corner when you are ready. You can browse this page without an account."}),n.jsx(T,{size:"sm",children:"Go to login / sign up"})]})]})})]})}function ZA(){return n.jsxs("div",{className:"mx-auto flex max-w-5xl flex-col gap-8 px-4 py-8 md:px-0 md:py-10",children:[n.jsxs("section",{className:"space-y-4",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C045FF]",children:"How It Works"}),n.jsx("h1",{className:"text-2xl font-semibold text-[#050014] md:text-3xl",children:"Simple 3-step flow for fans and creators."}),n.jsx("p",{className:"max-w-2xl text-sm text-[#6C757D] md:text-base",children:"This page gives a high-level explanation of FanMeet without requiring login. Use it from marketing, ads, or the header navigation to explain the product."})]}),n.jsxs("section",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"1. Pick a creator",subtitle:"Browse public events and choose the creator you want to meet."}),n.jsx(B,{className:"text-sm text-[#6C757D]",children:"Filter by category, price, and availability. Each event clearly shows duration, base price, and current winning bid."})]}),n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"2. Bid or join",subtitle:"Place a bid for paid events or join free lucky-draw sessions."}),n.jsx(B,{className:"text-sm text-[#6C757D]",children:"Highest bid wins the call. If you do not win, you receive up to 90% of your money back automatically."})]}),n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"3. Meet on video",subtitle:"Enjoy a live 1:1 video call from your laptop or phone."}),n.jsx(B,{className:"text-sm text-[#6C757D]",children:"Join directly from your FanMeet dashboard at the scheduled time. No extra apps needed."})]})]}),n.jsx("section",{children:n.jsxs(I,{elevated:!0,className:"border-dashed border-[#E9ECEF] bg-[#F8F9FA]",children:[n.jsx($,{title:"For fans and creators",subtitle:"Fans get intimate access. Creators get a new revenue stream and deeper community."}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2 text-sm text-[#6C757D]",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"mb-2 text-sm font-semibold text-[#212529]",children:"Fans"}),n.jsxs("ul",{className:"list-disc space-y-1 pl-5",children:[n.jsx("li",{children:"Bid safely with transparent pricing and refund rules."}),n.jsx("li",{children:"Win 510 minute live calls with creators you truly care about."}),n.jsx("li",{children:"Ask questions, get advice, or just share a moment."})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"mb-2 text-sm font-semibold text-[#212529]",children:"Creators"}),n.jsxs("ul",{className:"list-disc space-y-1 pl-5",children:[n.jsx("li",{children:"Host live micro-meets with your most engaged supporters."}),n.jsx("li",{children:"Set your own prices and schedule, we handle payments and refunds."}),n.jsx("li",{children:"Turn superfans into long-term community members."})]})]})]})]})})]})}const eT=[{label:"Typical monthly earnings",value:"30k50k",note:"for active mid-sized creators"},{label:"Refund handled by FanMeet",value:"90%",note:"we manage all payment flows"},{label:"Average call length",value:"510 min",note:"short, meaningful conversations"}];function tT(){return n.jsxs("div",{className:"mx-auto flex max-w-5xl flex-col gap-8 px-4 py-8 md:px-0 md:py-10",children:[n.jsxs("section",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C045FF]",children:"For Creators"}),n.jsx("h1",{className:"text-2xl font-semibold text-[#050014] md:text-3xl",children:"Turn your audience into premium, live 1:1 experiences."}),n.jsx("p",{className:"max-w-xl text-sm text-[#6C757D] md:text-base",children:"This is a public overview page about the creator side of FanMeet. Share it with potential creators before they sign up."})]}),n.jsx(Q,{variant:"primary",className:"self-start md:self-auto",children:"Early creator program open"})]}),n.jsx("section",{className:"grid gap-4 md:grid-cols-3",children:eT.map(e=>n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:e.label}),n.jsxs(B,{className:"space-y-1 text-sm text-[#6C757D]",children:[n.jsx("div",{className:"text-xl font-semibold text-[#050014]",children:e.value}),n.jsx("div",{className:"text-xs text-[#6C757D]",children:e.note})]})]},e.label))}),n.jsx("section",{children:n.jsxs(I,{elevated:!0,className:"bg-[#050014] text-white",children:[n.jsx($,{title:"Why creators love FanMeet",subtitle:"You focus on the conversation. We handle everything else."}),n.jsxs(B,{className:"grid gap-4 text-sm md:grid-cols-2",children:[n.jsxs("ul",{className:"space-y-1 list-disc pl-5 text-white/80",children:[n.jsx("li",{children:"Host paid or free events for superfans."}),n.jsx("li",{children:"Flexible schedule that fits around your content calendar."}),n.jsx("li",{children:"Dashboard to track bids, winners, and upcoming calls."})]}),n.jsxs("ul",{className:"space-y-1 list-disc pl-5 text-white/80",children:[n.jsx("li",{children:"Secure payments, refunds, and payouts managed by FanMeet."}),n.jsx("li",{children:"Human review of fans and clear safety controls for calls."}),n.jsx("li",{children:"Dedicated support team for you and your community."})]})]})]})}),n.jsx("section",{children:n.jsxs(I,{elevated:!0,className:"border-dashed border-[#E9ECEF] bg-[#F8F9FA]",children:[n.jsx($,{title:"Interested in hosting events?",subtitle:"Start by creating a creator account. You can explore the dashboard before running your first event."}),n.jsxs(B,{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsx("p",{className:"max-w-md text-sm text-[#6C757D]",children:"Use the login / sign up button in the header when you are ready. Once you are in, switch to the creator panel from the role selector."}),n.jsx(T,{size:"sm",children:"Login / Sign up"})]})]})})]})}const S0=y.createContext(void 0);function sT(e,t){return!e&&!t?"":e?t?`${e}   ${t}`:e:t}const nT=({children:e})=>{const[t,s]=y.useState([]),[r,a]=y.useState([]),[i,o]=y.useState([]),[l,c]=y.useState([]),[d,u]=y.useState(!0),{user:h}=ve();y.useEffect(()=>{(async()=>{const{data:E,error:_}=await D.from("events").select("*");if(_){console.error("Error fetching events:",_);return}if(!E)return;const{data:S}=await D.from("bids").select("*"),F=E.map(P=>P.creator_id),{data:A}=await D.from("profiles").select("user_id, username, display_name").in("user_id",F),M=new Map((A==null?void 0:A.map(P=>[P.user_id,P]))||[]),L=E.map(P=>{const q=(S==null?void 0:S.filter(W=>W.event_id===P.id))||[],Z=q.length>0?Math.max(...q.map(W=>W.amount)):0,H=new Set(q.map(W=>W.fan_id)).size,k=new Date(P.starts_at),R=new Date,J=(P.bidding_closes_at?new Date(P.bidding_closes_at):k).getTime()-R.getTime();let K="Bidding Closed";if(J>0){const W=Math.floor(J/36e5);W>24?K=`${Math.floor(W/24)} days left to bid`:W>0?K=`${W} hours left to bid`:K=`${Math.floor(J/6e4)} minutes left to bid`}const ae=k.toLocaleDateString(),oe=k.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),le=M.get(P.creator_id),pe=((le==null?void 0:le.username)||`user${P.creator_id.substring(0,8)}`).toLowerCase();let ee;return P.status==="completed"||P.status==="cancelled"?ee="Completed":P.bidding_closes_at&&new Date(P.bidding_closes_at)>R?ee="Accepting Bids":P.status==="live"?ee="LIVE":ee="Upcoming",{id:P.id,creatorUsername:pe,creatorDisplayName:(le==null?void 0:le.display_name)||"Unknown",title:P.title,description:P.description,category:P.category||"general",status:ee,date:`${ae} @ ${oe}`,duration:`${P.duration_minutes} minutes`,basePrice:P.base_price,currentBid:Math.max(P.base_price,Z),participants:H,endsIn:K}});s(L),u(!1)})()},[]),y.useEffect(()=>{if(!h){a([]),o([]);return}(async()=>{const{data:E,error:_}=await D.from("bids").select("*").eq("fan_id",h.id);if(!_&&E){const A=E.map(H=>H.event_id),{data:M}=await D.from("events").select("id, title, creator_id").in("id",A),L=new Map((M==null?void 0:M.map(H=>[H.id,H]))||[]),P=Array.from(new Set((M??[]).map(H=>H.creator_id).filter(Boolean))),{data:q}=P.length?await D.from("profiles").select("user_id, username").in("user_id",P):{data:null},Z=new Map((q??[]).map(H=>[H.user_id,H.username]));a(E.map(H=>{const k=L.get(H.event_id),R=k?Z.get(k.creator_id):void 0;return{id:H.id,eventId:H.event_id,amount:H.amount,status:H.status,createdAt:H.created_at,eventTitle:k==null?void 0:k.title,creatorUsername:R}}))}else _&&console.error("Error fetching bids:",_);const{data:S,error:F}=await D.from("meets").select("*").eq("fan_id",h.id).eq("status","scheduled");if(!F&&S){const A=S.map(P=>P.creator_id),{data:M}=await D.from("profiles").select("user_id, username, display_name").in("user_id",A),L=new Map((M==null?void 0:M.map(P=>[P.user_id,P]))||[]);o(S.map(P=>{const q=L.get(P.creator_id);return{id:P.id,eventId:P.event_id,creatorId:P.creator_id,creatorUsername:(q==null?void 0:q.username)||"unknown",creatorDisplayName:(q==null?void 0:q.display_name)||"Unknown",scheduledAt:P.scheduled_at,durationMinutes:P.duration_minutes,meetingLink:P.meeting_link,status:P.status}}))}else F&&console.error("Error fetching meets:",F)})()},[h]);const f=async C=>{if(!h)throw new Error("User not logged in");const E=new Date(`${C.date}T${C.time}`).toISOString(),_=new Date(`${C.biddingDeadlineDate}T${C.biddingDeadlineTime}`).toISOString(),S=parseInt(C.duration.replace(/\D/g,""),10)||15,{data:F,error:A}=await D.from("events").insert({creator_id:h.id,title:C.title,description:C.description,status:"upcoming",starts_at:E,bidding_closes_at:_,duration_minutes:S,base_price:C.basePrice,is_paid:C.basePrice>0,meeting_link:C.meetingLink}).select().single();if(A)throw console.error("Error creating event:",A),A;const M={id:F.id,creatorUsername:h.username.toLowerCase(),creatorDisplayName:C.creatorDisplayName,title:F.title,description:F.description,status:"Upcoming",date:sT(C.date,C.time),duration:C.duration,basePrice:F.base_price,currentBid:0,participants:0,endsIn:"Bid ding open"};return s(L=>[...L,M]),M},v=C=>{const E=C.trim().replace(/^@/,"").toLowerCase();return t.filter(_=>_.creatorUsername===E)},b=C=>{if(!h)return 0;const E=r.filter(_=>_.eventId===C&&_.status==="active");return E.length===0?0:Math.max(...E.map(_=>_.amount))},g=async C=>{const{data:E,error:_}=await D.from("bids").select("id, fan_id, amount, created_at").eq("event_id",C).order("created_at",{ascending:!1}).limit(5);if(_||!E)return console.error("Error fetching bid history:",_),[];const S=E.map(P=>P.fan_id),{data:F}=await D.from("profiles").select("user_id, username").in("user_id",S),A=new Map((F==null?void 0:F.map(P=>[P.user_id,P.username]))||[]),M=E.length>0?Math.max(...E.map(P=>P.amount)):0,L=E.map(P=>({id:P.id,fanId:P.fan_id,fanUsername:A.get(P.fan_id)||"Anonymous",amount:P.amount,createdAt:P.created_at,isCurrentLeader:P.amount===M}));return c(L),L},w=async(C,E)=>{if(!E||Number.isNaN(E))return;if(!h)throw console.error("User must be logged in to bid"),new Error("Please log in to place a bid");const{data:_}=await D.from("wallets").select("id, balance").eq("user_id",h.id).single(),S=(_==null?void 0:_.balance)||0;if(S>0&&(_!=null&&_.id)){const A=Math.min(S,E),{error:M}=await D.from("wallets").update({balance:S-A}).eq("id",_.id);M&&console.error("Error deducting from wallet:",M)}const{error:F}=await D.from("bids").insert({event_id:C,fan_id:h.id,amount:E,status:"active"});if(F)throw console.error("Error placing bid:",F),new Error("Failed to place bid. Please try again.");s(A=>A.map(M=>M.id!==C||E<=M.currentBid?M:{...M,currentBid:E,participants:M.participants+1})),await m(),await g(C)},p=async(C,E,_)=>{if(!(!E||Number.isNaN(E)))throw h?new Error(`PAYMENT_REQUIRED:${E}:${C}`):new Error("Please log in to place a bid")},m=async()=>{if(!h)return;const{data:C}=await D.from("bids").select("*").eq("fan_id",h.id);if(C){const E=C.map(L=>L.event_id),{data:_}=await D.from("events").select("id, title, creator_id").in("id",E),S=new Map((_==null?void 0:_.map(L=>[L.id,L]))||[]),F=Array.from(new Set((_??[]).map(L=>L.creator_id).filter(Boolean))),{data:A}=F.length?await D.from("profiles").select("user_id, username").in("user_id",F):{data:null},M=new Map((A??[]).map(L=>[L.user_id,L.username]));a(C.map(L=>{const P=S.get(L.event_id),q=P?M.get(P.creator_id):void 0;return{id:L.id,eventId:L.event_id,amount:L.amount,status:L.status,createdAt:L.created_at,eventTitle:P==null?void 0:P.title,creatorUsername:q}}))}},x=async(C,E)=>{const{error:_}=await D.from("meets").update({status:E}).eq("id",C);if(_)throw console.error("Error updating meet status:",_),_;await N()},N=async()=>{if(!h)return;const{data:C,error:E}=await D.from("meets").select("*").eq("fan_id",h.id).eq("status","scheduled");if(!E&&C){const _=C.map(A=>A.creator_id),{data:S}=await D.from("profiles").select("user_id, username, display_name").in("user_id",_),F=new Map((S==null?void 0:S.map(A=>[A.user_id,A]))||[]);o(C.map(A=>{const M=F.get(A.creator_id);return{id:A.id,eventId:A.event_id,creatorId:A.creator_id,creatorUsername:(M==null?void 0:M.username)||"unknown",creatorDisplayName:(M==null?void 0:M.display_name)||"Unknown",scheduledAt:A.scheduled_at,durationMinutes:A.duration_minutes,meetingLink:A.meeting_link,status:A.status}}))}},j=y.useMemo(()=>({events:t,myBids:r,myMeets:i,bidHistory:l,isLoading:d,createEvent:f,getEventsForCreator:v,placeBid:w,placeBidWithPayment:p,updateMeetStatus:x,refreshMeets:N,getBidHistory:g,getUserCurrentBidForEvent:b}),[t,r,i,l,d]);return n.jsx(S0.Provider,{value:j,children:e})},An=()=>{const e=y.useContext(S0);if(!e)throw new Error("useEvents must be used within an EventProvider");return e},rT=[{value:"all",label:"All Events",emoji:""},{value:"entertainment",label:"Entertainment",emoji:""},{value:"music",label:"Music",emoji:""},{value:"education",label:"Education",emoji:""},{value:"fitness",label:"Fitness",emoji:""},{value:"gaming",label:"Gaming",emoji:""},{value:"lifestyle",label:"Lifestyle",emoji:""},{value:"general",label:"General",emoji:""}],aT=[{value:"popular",label:"Most Popular"},{value:"ending-soon",label:"Ending Soon"},{value:"price-low",label:"Price: Low to High"},{value:"price-high",label:"Price: High to Low"},{value:"newest",label:"Newly Added"}];function iT(){const e=nt(),[t]=Yh(),{events:s,myBids:r}=An(),[a,i]=y.useState("all"),[o,l]=y.useState("popular"),[c,d]=y.useState(t.get("q")||"");y.useEffect(()=>{const f=t.get("q");f!==null&&f!==c&&d(f)},[t]);const u=y.useMemo(()=>[...s.filter(b=>{var g;if(a!=="all"&&b.category!==a)return!1;if(c){const w=c.toLowerCase();return b.title.toLowerCase().includes(w)||b.creatorDisplayName.toLowerCase().includes(w)||((g=b.description)==null?void 0:g.toLowerCase().includes(w))}return!0})].sort((b,g)=>{switch(o){case"popular":return g.participants-b.participants;case"price-low":return b.basePrice-g.basePrice;case"price-high":return g.basePrice-b.basePrice;case"newest":return g.id.localeCompare(b.id);case"ending-soon":const w=p=>p.includes("Closed")?999999:p.includes("days")?parseInt(p)*24*60:p.includes("hours")?parseInt(p)*60:p.includes("minutes")?parseInt(p):0;return w(b.endsIn)-w(g.endsIn);default:return 0}}),[s,a,o,c]),h=y.useMemo(()=>{const f=r.length,v=r.filter(w=>w.status==="won").length,b=f>0?Math.round(v/f*100):0,g=r.filter(w=>w.status==="lost").reduce((w,p)=>w+Math.floor(p.amount*.9),0);return[{id:"stat-1",label:"Bids placed",value:String(f),hint:`${r.filter(w=>w.status==="active"||w.status==="outbid").length} active`},{id:"stat-2",label:"Win rate",value:`${b}%`,hint:`${v} wins out of ${f}`},{id:"stat-3",label:"Refunds received",value:V(g),hint:"90% back on lost bids"},{id:"stat-4",label:"Meets completed",value:String(v),hint:`Across ${new Set(r.filter(w=>w.status==="won").map(w=>w.creatorUsername)).size} creators`}]},[r]);return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsx(I,{elevated:!0,className:"overflow-hidden border-none bg-gradient-to-r from-[#FCE7FF] via-[#F4E6FF] to-[#E5DEFF] shadow-[0_24px_60px_rgba(160,64,255,0.18)]",children:n.jsxs("div",{className:"relative flex flex-col gap-6 px-6 py-6 md:flex-row md:items-center md:px-8 md:py-8",children:[n.jsxs("div",{className:"max-w-xl space-y-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C045FF]",children:"Browse Events"}),n.jsx("h1",{className:"text-2xl font-semibold text-[#050014] md:text-3xl",children:"Find a live FanMeet that matches your vibe."}),n.jsx("p",{className:"text-sm text-[#4B445F]",children:"Browse, bid, and secure your spot with your favorite creators in small, exclusive meetups."})]}),n.jsx("div",{className:"flex-shrink-0 text-6xl md:text-7xl",children:""})]})}),n.jsx(I,{children:n.jsxs(B,{className:"gap-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search events or creators...",value:c,onChange:f=>d(f.target.value),className:"w-full rounded-[12px] border-2 border-[#E9ECEF] px-4 py-3 pr-12 text-sm focus:border-[#C045FF] focus:outline-none"}),n.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xl",children:""})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-[#212529]",children:"Categories"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:rT.map(f=>n.jsxs("button",{onClick:()=>i(f.value),className:`rounded-full border-2 px-4 py-2 text-sm font-medium transition-all ${a===f.value?"border-[#C045FF] bg-[#F4E6FF] text-[#C045FF]":"border-[#E9ECEF] bg-white text-[#6C757D] hover:border-[#C045FF]/40"}`,children:[n.jsx("span",{className:"mr-1",children:f.emoji}),f.label]},f.value))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-[#212529]",children:"Sort By"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:aT.map(f=>n.jsx("button",{onClick:()=>l(f.value),className:`rounded-full border-2 px-4 py-2 text-sm font-medium transition-all ${o===f.value?"border-[#C045FF] bg-[#C045FF] text-white":"border-[#E9ECEF] bg-white text-[#6C757D] hover:border-[#C045FF]/40"}`,children:f.label},f.value))})]})]})}),n.jsxs("div",{children:[n.jsx("div",{className:"mb-4 flex items-center justify-between",children:n.jsxs("h2",{className:"text-xl font-semibold text-[#212529]",children:[u.length," ",u.length===1?"Event":"Events"," Found"]})}),u.length===0?n.jsx(I,{children:n.jsxs(B,{className:"py-12 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"text-lg font-semibold text-[#212529] mb-2",children:"No events found"}),n.jsx("p",{className:"text-sm text-[#6C757D] mb-4",children:"Try adjusting your filters or search query"}),n.jsx(T,{onClick:()=>{i("all"),d("")},children:"Clear Filters"})]})}):n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(f=>n.jsx(I,{className:"group cursor-pointer transition-all hover:shadow-[0_12px_30px_rgba(160,64,255,0.15)]",onClick:()=>e(`/events/${f.id}`),children:n.jsxs(B,{className:"gap-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"mb-1 text-xs text-[#6C757D]",children:f.creatorDisplayName}),n.jsx("h3",{className:"text-base font-semibold text-[#212529] group-hover:text-[#C045FF]",children:f.title})]}),f.status==="Accepting Bids"?n.jsx("div",{className:"rounded-[8px] bg-[#1E4620] px-2 py-1",children:n.jsx("span",{className:"text-xs font-semibold text-[#4ADE80]",children:" Accepting Bids"})}):n.jsx(Q,{variant:f.status==="LIVE"?"danger":"primary",children:f.status})]}),f.description&&n.jsx("p",{className:"line-clamp-2 text-sm text-[#6C757D]",children:f.description}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-[#6C757D]",children:"Current Bid"}),n.jsx("div",{className:"font-semibold text-[#C045FF]",children:V(f.currentBid)})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-xs text-[#6C757D]",children:"Base Price"}),n.jsx("div",{className:"font-semibold text-[#212529]",children:V(f.basePrice)})]})]}),n.jsxs("div",{className:"flex items-center justify-between border-t border-[#E9ECEF] pt-3 text-xs text-[#6C757D]",children:[n.jsxs("span",{children:[" ",f.participants," bidding"]}),n.jsxs("span",{children:[" ",f.endsIn]})]}),n.jsx(T,{className:"w-full",size:"sm",children:"View & Bid "})]})},f.id))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Your Activity",subtitle:"Track your bidding performance"}),n.jsx(B,{children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:h.map(f=>n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-gradient-to-br from-[#F8F9FA] to-white p-4",children:[n.jsx("div",{className:"text-xs font-semibold uppercase tracking-[0.16em] text-[#6C757D]",children:f.label}),n.jsx("div",{className:"mt-1 text-2xl font-bold text-[#212529]",children:f.value}),n.jsx("div",{className:"mt-1 text-xs text-[#6C757D]",children:f.hint})]},f.id))})})]})]})}function oT(){const{myBids:e,events:t}=An(),s=nt(),r=e.filter(o=>o.status==="active"||o.status==="outbid"),a=e.filter(o=>o.status==="won"||o.status==="lost"||o.status==="cancelled"),i=o=>t.find(l=>l.id===o);return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"My Bids"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Track your bidding activity and results."})]}),n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"Active Bids",subtitle:"Stay on top of the events you are currently bidding on"}),n.jsx(B,{className:"gap-6",children:r.length===0?n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-8 text-center",children:[n.jsx("p",{className:"text-sm text-[#6C757D]",children:"You don't have any active bids."}),n.jsx(T,{className:"mt-4",onClick:()=>s("/fan"),children:"Browse Events"})]}):r.map(o=>{const l=i(o.eventId),c=o.status==="outbid";return n.jsxs("div",{className:`grid gap-3 rounded-[16px] border p-4 md:grid-cols-[1.5fr_1fr_auto] md:items-center ${c?"border-[#FFC107] bg-[#FFF9E6]":"border-[#E9ECEF] bg-[#F8F9FA]"}`,children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#6C757D]",children:(l==null?void 0:l.creatorDisplayName)||"Unknown Creator"}),n.jsx("div",{className:"text-base font-semibold text-[#212529]",children:o.eventTitle||"Event"}),c&&n.jsx(Q,{variant:"danger",className:"mt-1",children:" You've been outbid!"}),(l==null?void 0:l.status)==="Accepting Bids"&&!c&&n.jsx("div",{className:"mt-1 inline-flex rounded-[8px] bg-[#1E4620] px-2 py-0.5",children:n.jsx("span",{className:"text-[10px] font-semibold text-[#4ADE80]",children:" Accepting Bids"})})]}),n.jsxs("div",{className:"grid gap-1 text-sm text-[#6C757D] md:justify-items-end",children:[n.jsxs("span",{children:["Your Bid: ",n.jsx("strong",{className:"text-[#212529]",children:V(o.amount)})]}),l&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{children:["Current: ",n.jsx("strong",{className:"text-[#C045FF]",children:V(l.currentBid)})]}),n.jsxs("span",{children:[" ",l.endsIn]})]})]}),n.jsxs("div",{className:"flex gap-2 md:justify-end",children:[n.jsx(T,{size:"sm",variant:c?"primary":"secondary",onClick:()=>s(`/events/${o.eventId}`),children:c?"Increase Bid Now":"Increase Bid"}),n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>s(`/events/${o.eventId}`),children:"Details "})]})]},o.id)})})]}),n.jsxs(I,{children:[n.jsx($,{title:"Bid Results"}),n.jsx(B,{className:"overflow-x-auto",children:a.length===0?n.jsx("div",{className:"py-8 text-center text-sm text-[#6C757D]",children:"No past bid results yet."}):n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] pb-3",children:"Creator"}),n.jsx("th",{className:"border-b border-[#E9ECEF] pb-3",children:"Event"}),n.jsx("th",{className:"border-b border-[#E9ECEF] pb-3",children:"Your Bid"}),n.jsx("th",{className:"border-b border-[#E9ECEF] pb-3",children:"Result"})]})}),n.jsx("tbody",{className:"text-[#212529]",children:a.map(o=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3",children:o.creatorUsername||"Unknown"}),n.jsx("td",{className:"py-3",children:o.eventTitle||"Event"}),n.jsx("td",{className:"py-3",children:V(o.amount)}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:o.status==="won"?"success":"danger",children:o.status==="won"?" Won":o.status==="lost"?" Lost":"Cancelled"})})]},o.id))})]})})]})]})}function lT(e){const t=new Date(e),s=new Date,r=t.getTime()-s.getTime();if(r<=0)return"Starting soon";const a=Math.floor(r/(1e3*60)),i=Math.floor(a/60),o=Math.floor(i/24),l=a%60;if(o>0){const c=i%24;return`${o} day${o>1?"s":""}${c>0?` ${c} hr${c>1?"s":""}`:""}`}return i>0?`${i} hr${i>1?"s":""}${l>0?` ${l} min`:""}`:`${l} min`}function cT(){const{myMeets:e}=An(),t=e.filter(a=>a.status==="scheduled").sort((a,i)=>new Date(a.scheduledAt).getTime()-new Date(i.scheduledAt).getTime()),s=a=>{a&&navigator!=null&&navigator.clipboard&&navigator.clipboard.writeText(a)},r=a=>{a&&window.open(a,"_blank","noopener,noreferrer")};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Upcoming Meets"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Access your confirmed sessions and join on time."})]}),t.length===0?n.jsx(I,{elevated:!0,className:"grid min-h-[320px] place-items-center text-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("span",{className:"text-5xl",children:""}),n.jsx("h3",{className:"text-xl font-semibold text-[#212529]",children:"No meets yet"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Win an event to see your meeting details right here."}),n.jsx(T,{children:"Browse Events "})]})}):n.jsxs(I,{elevated:!0,className:"border-l-4 border-[#28A745]",children:[n.jsx($,{title:" You Won!",subtitle:"Get ready for your upcoming 1-on-1 session",className:"border-b border-[#E9ECEF] pb-4"}),n.jsx(B,{className:"gap-6",children:t.map(a=>n.jsxs("div",{className:"grid gap-4 md:grid-cols-[auto_1fr] md:gap-6",children:[n.jsx(Q,{variant:"primary",className:"w-fit px-4 py-2 text-sm",children:a.status}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-semibold text-[#212529]",children:["Meeting with ",a.creatorDisplayName||a.creatorUsername]}),n.jsxs("p",{className:"text-sm text-[#6C757D]",children:[de(a.scheduledAt),"  Duration ",a.durationMinutes," minutes"]})]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-col gap-2 rounded-[12px] border border-[#E9ECEF] bg-[#F8F9FA] p-4",children:[n.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Meeting Link"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("span",{className:"break-all text-sm text-[#212529]",children:a.meetingLink||"Link not available yet"}),a.meetingLink&&n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>s(a.meetingLink),children:"Copy"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsx(T,{variant:"secondary",children:"Add to Calendar"}),n.jsx(T,{disabled:!a.meetingLink,onClick:()=>r(a.meetingLink),children:"Join Meeting "})]}),n.jsxs("span",{className:"text-sm text-[#6C757D]",children:[" Starts in:"," ",n.jsx("strong",{className:"text-[#C045FF]",children:lT(a.scheduledAt)})]})]})]})]},a.id))})]})]})}const eg="https://iktldcrkyphkvxjwmxyb.supabase.co",dT=()=>new Promise(e=>{if(window.Razorpay){e(!0);return}const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>e(!0),t.onerror=()=>e(!1),document.body.appendChild(t)}),uT={topup:"Wallet Top-up",manual_adjustment:"Credit Added",bid_authorization:"Bid Placed",bid_refund:"Bid Refunded (90%)",withdrawal:"Withdrawal"};function hT(){const{user:e}=ve(),[t,s]=y.useState(0),[r,a]=y.useState(null),[i,o]=y.useState(!0),[l,c]=y.useState(!1),[d,u]=y.useState(!1),[h,f]=y.useState(""),[v,b]=y.useState(""),[g,w]=y.useState(""),[p,m]=y.useState(!1),[x,N]=y.useState(!1),[j,C]=y.useState([]);y.useEffect(()=>{(async()=>{if(!e){s(0),a(null),C([]),o(!1);return}o(!0);try{const{data:A,error:M}=await D.from("wallets").select("id, balance").eq("user_id",e.id).maybeSingle();if(M){console.error("Error fetching wallet:",M),o(!1);return}if(!A){s(0),a(null),C([]),o(!1);return}s(A.balance||0),a(A.id);const{data:L}=await D.from("wallet_transactions").select("id, type, direction, amount, description, created_at").eq("wallet_id",A.id).order("created_at",{ascending:!1}).limit(20),P=(L??[]).map(q=>({id:q.id,date:new Date(q.created_at).toLocaleDateString("en-IN",{month:"short",day:"2-digit"}),description:q.description||uT[q.type]||q.type,amount:q.amount,type:q.direction,status:(q.direction==="credit","completed")}));C(P)}finally{o(!1)}})()},[e]);const E=async()=>{if(!e||!h)return;const F=parseInt(h,10);if(isNaN(F)||F<100){alert("Minimum amount is 100");return}m(!0),N(!0);try{if(!await dT()){alert("Failed to load payment gateway. Please try again.");return}const{data:{session:M}}=await D.auth.getSession();if(!M){alert("Please log in to add credits.");return}const L=await fetch(`${eg}/functions/v1/razorpay-create-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M.access_token}`},body:JSON.stringify({amount:F})});if(!L.ok){const k=await L.json();alert(k.error||"Failed to create order. Please try again.");return}const{orderId:P,keyId:q}=await L.json(),Z={key:q,amount:F*100,currency:"INR",name:"FanMeet",description:"Wallet Top-up",order_id:P,handler:async k=>{const R=await fetch(`${eg}/functions/v1/razorpay-verify-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M.access_token}`},body:JSON.stringify({razorpay_order_id:k.razorpay_order_id,razorpay_payment_id:k.razorpay_payment_id,razorpay_signature:k.razorpay_signature})});if(R.ok){const{newBalance:U}=await R.json();s(U),C(J=>[{id:`temp-${Date.now()}`,date:new Date().toLocaleDateString("en-IN",{month:"short",day:"2-digit"}),description:"Wallet top-up via Razorpay",amount:F,type:"credit",status:"completed"},...J]),f(""),c(!1),alert(` Successfully added ${V(F)} to your wallet!`)}else{const U=await R.json();alert(U.error||"Payment verification failed. Please contact support.")}},prefill:{email:e.email||""},theme:{color:"#C045FF"},modal:{ondismiss:()=>{m(!1)}}},H=new window.Razorpay(Z);N(!1),H.open()}catch(A){N(!1),console.error("Error:",A),alert("Something went wrong. Please try again.")}finally{m(!1),N(!1)}},_=()=>n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:n.jsxs("div",{className:"flex flex-col items-center gap-6",children:[n.jsx("div",{className:"animate-bounce",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-5xl font-bold text-white",children:"Fan"}),n.jsx("span",{className:"text-5xl font-bold text-[#C045FF]",children:"Meet"})]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-3 w-3 animate-pulse rounded-full bg-[#C045FF]",style:{animationDelay:"0ms"}}),n.jsx("div",{className:"h-3 w-3 animate-pulse rounded-full bg-[#C045FF]",style:{animationDelay:"150ms"}}),n.jsx("div",{className:"h-3 w-3 animate-pulse rounded-full bg-[#C045FF]",style:{animationDelay:"300ms"}})]}),n.jsx("p",{className:"text-lg text-white/90",children:"Preparing secure payment..."})]})}),S=async()=>{if(!e||!r){alert("Please add credits first to create a wallet.");return}const F=parseInt(v,10);if(isNaN(F)||F<=0){alert("Please enter a valid amount");return}if(F<100){alert("Minimum withdrawal amount is 100.");return}if(F>t){alert(`You can only withdraw up to ${V(t)}.`);return}if(!g.trim()){alert("Please enter a destination account.");return}m(!0);try{const{error:A}=await D.from("wallets").update({balance:t-F,updated_at:new Date().toISOString()}).eq("id",r);if(A){console.error("Error updating wallet:",A),alert("Failed to process withdrawal. Please try again.");return}await D.from("wallet_transactions").insert({wallet_id:r,type:"withdrawal",direction:"debit",amount:F,description:`Withdrawal to ${g.trim()}`,created_at:new Date().toISOString()}),s(t-F),C(M=>[{id:`temp-${Date.now()}`,date:new Date().toLocaleDateString("en-IN",{month:"short",day:"2-digit"}),description:`Withdrawal to ${g.trim()}`,amount:F,type:"debit",status:"pending"},...M]),b(""),w(""),u(!1),alert(`Withdrawal request of ${V(F)} submitted successfully!`)}finally{m(!1)}};return n.jsxs(n.Fragment,{children:[x&&n.jsx(_,{}),n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Wallet & Refunds"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Track your credits, withdrawals, and refund status."})]}),n.jsxs(I,{elevated:!0,className:"max-w-md",children:[n.jsx($,{title:"Wallet Balance",subtitle:"All refunds are auto-processed"}),n.jsxs(B,{className:"gap-3",children:[n.jsx("div",{className:"text-4xl font-bold text-[#212529]",children:i?"":V(t)}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(T,{variant:"primary",size:"sm",onClick:()=>{c(!l),u(!1)},disabled:p,children:l?"Cancel":"+ Add Credits"}),n.jsx(T,{variant:"secondary",size:"sm",onClick:()=>{u(!d),c(!1)},disabled:p||t<100,children:d?"Cancel":"Request Withdrawal"})]}),l&&n.jsxs("div",{className:"mt-4 rounded-lg border border-[#E9ECEF] bg-[#F8F9FA] p-4",children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-[#212529]",children:"Add Credits"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx(te,{type:"number",label:"Amount ()",placeholder:"Enter amount",value:h,onChange:F=>f(F.target.value)}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",size:"sm",onClick:()=>f("500"),children:"+500"}),n.jsx(T,{variant:"secondary",size:"sm",onClick:()=>f("1000"),children:"+1000"}),n.jsx(T,{variant:"secondary",size:"sm",onClick:()=>f("5000"),children:"+5000"})]}),n.jsx(T,{onClick:E,disabled:p,children:p?"Adding":`Add ${h?V(parseInt(h)):"Credits"}`})]})]}),d&&n.jsxs("div",{className:"mt-4 rounded-lg border border-[#E9ECEF] bg-[#F8F9FA] p-4",children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-[#212529]",children:"Request Withdrawal"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx(te,{type:"number",label:"Amount ()",placeholder:"Enter amount",value:v,onChange:F=>b(F.target.value)}),n.jsx(te,{label:"Destination account",placeholder:"HDFC Bank 8290",value:g,onChange:F=>w(F.target.value)}),n.jsxs("div",{className:"text-xs text-[#6C757D]",children:["Minimum withdrawal: 100. Available balance: ",V(t)]}),n.jsx(T,{onClick:S,disabled:p,children:p?"Submitting":"Submit Withdrawal"})]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Transaction History"}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Date"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Description"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Amount"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Type"})]})}),n.jsx("tbody",{className:"text-[#212529]",children:i&&j.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"py-4 text-center text-sm text-[#6C757D]",children:"Loading transactions"})}):j.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"py-4 text-center text-sm text-[#6C757D]",children:"No transactions yet."})}):j.map(F=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3",children:F.date}),n.jsx("td",{className:"py-3",children:F.description}),n.jsx("td",{className:"py-3",children:n.jsxs("span",{className:F.type==="credit"?"text-green-600":"text-red-600",children:[F.type==="credit"?"+":"-",V(F.amount)]})}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:F.type==="credit"?"success":"danger",children:F.type==="credit"?"Credit":"Debit"})})]},F.id))})]})})]})]})]})}function fT(){const{user:e}=ve(),t=nt(),[s,r]=y.useState([]),[a,i]=y.useState(!0);return y.useEffect(()=>{async function o(){if(e)try{const{data:l,error:c}=await D.from("creator_follows").select("creator_id").eq("fan_id",e.id);if(c)throw c;if(l&&l.length>0){const d=l.map(f=>f.creator_id),{data:u,error:h}=await D.from("profiles").select("*").in("user_id",d);if(h)throw h;u&&r(u)}else r([])}catch(l){console.error("Error fetching following:",l)}finally{i(!1)}}o()},[e]),a?n.jsx("div",{className:"p-8 text-center text-[#6C757D]",children:"Loading..."}):n.jsxs("div",{className:"mx-auto flex max-w-4xl flex-col gap-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-[#212529]",children:"Following"}),n.jsx("p",{className:"mt-1 text-sm text-[#6C757D]",children:"Creators you follow. Join their upcoming events faster from here."})]}),n.jsxs("div",{className:"space-y-4",children:[s.map(o=>{var l,c;return n.jsx(I,{elevated:!0,className:"border-none bg-white/95",children:n.jsxs(B,{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsx("div",{className:"flex flex-col gap-1",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Mt,{src:o.avatar_url,initials:((l=o.display_name)==null?void 0:l.charAt(0))||((c=o.username)==null?void 0:c.charAt(0)),size:"md"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-sm font-semibold text-[#212529]",children:o.display_name||o.username}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:["@",o.username]})]})]})}),n.jsxs("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[n.jsx(Q,{variant:"primary",children:"Following"}),n.jsx("div",{className:"flex gap-2",children:n.jsx(T,{size:"sm",className:"rounded-full",onClick:()=>t(`/${o.username}`),children:"View profile"})})]})]})},o.user_id)}),s.length===0&&n.jsx(I,{children:n.jsx(B,{children:n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Youre not following any creators yet. Start by placing a bid or hitting follow on a creator profile."})})})]})]})}const mT={active:"primary",lost:"danger",won:"success"};function pT(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState([]),[i,o]=y.useState(!0);return y.useEffect(()=>{(async()=>{if(e)try{const{data:c,error:d}=await D.from("meets").select(`
            id,
            scheduled_at,
            status,
            event_id,
            creator_id
          `).eq("fan_id",e.id).eq("status","completed").order("scheduled_at",{ascending:!1});if(d)throw d;const u=await Promise.all((c||[]).map(async b=>{const{data:g}=await D.from("events").select("title").eq("id",b.event_id).single(),{data:w}=await D.from("profiles").select("display_name").eq("user_id",b.creator_id).single(),{data:p}=await D.from("bids").select("amount").eq("event_id",b.event_id).eq("bidder_id",e.id).eq("status","won").single();return{id:b.id,creator_name:(w==null?void 0:w.display_name)||"Unknown Creator",event_title:(g==null?void 0:g.title)||"Unknown Event",scheduled_at:b.scheduled_at,amount:(p==null?void 0:p.amount)||0,status:b.status}}));s(u);const{data:h,error:f}=await D.from("bids").select(`
            id,
            amount,
            status,
            created_at,
            event_id
          `).eq("bidder_id",e.id).eq("status","active").order("created_at",{ascending:!1});if(f)throw f;const v=await Promise.all((h||[]).map(async b=>{const{data:g}=await D.from("events").select("title, creator_id").eq("id",b.event_id).single();let w="Unknown Creator";if(g!=null&&g.creator_id){const{data:p}=await D.from("profiles").select("display_name").eq("user_id",g.creator_id).single();w=(p==null?void 0:p.display_name)||"Unknown Creator"}return{id:b.id,creator_name:w,event_title:(g==null?void 0:g.title)||"Unknown Event",created_at:b.created_at,amount:b.amount,status:b.status}}));a(v)}catch(c){console.error("Error fetching history:",c)}finally{o(!1)}})()},[e]),i?n.jsx("div",{className:"p-8 text-center text-[#6C757D]",children:"Loading history..."}):n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"History"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Catch up on your past sessions and keep tabs on upcoming requests."})]}),n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"Past Experiences",subtitle:"Rate your meets and revisit standout memories.",className:"border-b border-[#E9ECEF] pb-4"}),n.jsx(B,{className:"gap-6",children:t.length===0?n.jsx("div",{className:"text-center text-sm text-[#6C757D] py-4",children:"No past meets yet."}):t.map(l=>n.jsxs("div",{className:"flex flex-col gap-3 rounded-[14px] border border-[#E9ECEF] p-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx(Q,{variant:"primary",children:l.creator_name}),n.jsx("span",{className:"text-sm text-[#6C757D]",children:de(new Date(l.scheduled_at))})]}),n.jsx("h3",{className:"mt-2 text-lg font-semibold text-[#212529]",children:l.event_title})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx("span",{className:"text-sm text-[#6C757D]",children:"Winning Bid"}),n.jsx("span",{className:"text-xl font-semibold text-[#212529]",children:V(l.amount)})]})]},l.id))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Pending Requests",subtitle:"Stay updated on events waiting for confirmation.",className:"border-b border-[#E9ECEF] pb-4"}),n.jsxs(B,{className:"gap-4",children:[r.length===0?n.jsx("div",{className:"text-center text-sm text-[#6C757D] py-4",children:"No pending requests."}):r.map(l=>n.jsxs("div",{className:"flex flex-col gap-3 rounded-[12px] border border-[#E9ECEF] bg-white p-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-[#6C757D]",children:["Requested on ",de(new Date(l.created_at))]}),n.jsx("h3",{className:"text-lg font-semibold text-[#212529]",children:l.event_title}),n.jsxs("p",{className:"text-sm text-[#6C757D]",children:["with ",l.creator_name]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx(Q,{variant:mT[l.status]??"default",children:l.status}),n.jsxs("span",{className:"text-sm font-medium text-[#212529]",children:["Bid: ",V(l.amount)]})]})]},l.id)),n.jsx(T,{variant:"ghost",className:"self-start",children:"View all requests "})]})]})]})}function xT(){const{notifications:e,markNotificationAsRead:t,markAllNotificationsAsRead:s}=Xi();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-[#111827]",children:"Notifications"}),n.jsx("p",{className:"text-[#6C757D]",children:"Manage your alerts and preferences"})]}),n.jsxs("button",{onClick:()=>s(),className:"flex items-center gap-2 text-sm font-medium text-[#FF6B35] hover:text-[#E85D2E]",children:[n.jsx(v0,{className:"h-4 w-4"}),"Mark all as read"]})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[n.jsx("div",{className:"lg:col-span-2 space-y-4",children:n.jsxs("div",{className:"rounded-xl border border-[#E9ECEF] bg-white p-6 shadow-sm",children:[n.jsx("h2",{className:"mb-4 text-lg font-semibold text-[#111827]",children:"Latest alerts"}),n.jsx("div",{className:"space-y-4",children:e.length===0?n.jsx("div",{className:"text-center py-8 text-[#6C757D]",children:"No notifications yet"}):e.map(r=>n.jsxs("div",{className:`flex gap-4 rounded-lg border p-4 transition-colors cursor-pointer ${r.read?"border-transparent bg-white":"border-[#FFE5D9] bg-[#FFF5F2]"}`,onClick:()=>!r.read&&t(r.id),children:[n.jsx("div",{className:`mt-1 flex h-8 w-8 flex-none items-center justify-center rounded-full ${r.read?"bg-[#F8F9FA] text-[#6C757D]":"bg-[#FFE5D9] text-[#FF6B35]"}`,children:n.jsx(g0,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("h3",{className:`font-medium ${r.read?"text-[#111827]":"text-[#FF6B35]"}`,children:r.title}),n.jsx("span",{className:"whitespace-nowrap text-xs text-[#6C757D]",children:hr(new Date(r.created_at),"MMM d, h:mm a")})]}),n.jsx("p",{className:"mt-1 text-sm text-[#6C757D]",children:r.message})]}),!r.read&&n.jsx("div",{className:"mt-2 h-2 w-2 rounded-full bg-[#FF6B35]"})]},r.id))})]})}),n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"rounded-xl border border-[#E9ECEF] bg-white p-6 shadow-sm",children:[n.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[n.jsx(C0,{className:"h-5 w-5 text-[#6C757D]"}),n.jsx("h2",{className:"text-lg font-semibold text-[#111827]",children:"Preferences"})]}),n.jsx("div",{className:"space-y-4",children:["Email notifications","Push notifications","SMS alerts"].map(r=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-[#111827]",children:r}),n.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[n.jsx("input",{type:"checkbox",className:"peer sr-only",defaultChecked:!0}),n.jsx("div",{className:"peer h-6 w-11 rounded-full bg-[#E9ECEF] after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-[#FF6B35] peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#FFE5D9]"})]})]},r))})]})})]})]})}function gT(){const{user:e}=ve(),[t,s]=y.useState(!1),[r,a]=y.useState(!1),[i,o]=y.useState(""),[l,c]=y.useState(""),[d,u]=y.useState(""),[h,f]=y.useState(""),[v,b]=y.useState(""),[g,w]=y.useState([]);y.useEffect(()=>{if(!e)return;(async()=>{s(!0);try{const{data:x,error:N}=await D.from("profiles").select("display_name, username, bio, primary_language, timezone").eq("user_id",e.id).single();N?console.error("Error fetching profile:",N):x&&(o(x.display_name||""),c(x.username||""),u(x.bio||""),f(x.primary_language||""),b(x.timezone||""));const{data:j,error:C}=await D.from("security_logs").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5);C?console.error("Error fetching security logs:",C):j&&w(j)}catch(x){console.error("Unexpected error fetching data:",x)}finally{s(!1)}})()},[e]);const p=async()=>{if(e){a(!0);try{if(l){const{data:x,error:N}=await D.from("profiles").select("user_id").eq("username",l).neq("user_id",e.id).maybeSingle();if(N){console.error("Error checking username:",N),alert("Error checking username availability."),a(!1);return}if(x){alert("Username already taken. Please choose another one."),a(!1);return}}const{error:m}=await D.from("profiles").update({display_name:i,username:l,bio:d,primary_language:h,timezone:v,updated_at:new Date().toISOString()}).eq("user_id",e.id);alert(m?"Error updating profile: "+m.message:"Profile updated successfully!")}catch(m){console.error("Error saving profile:",m),alert("Failed to save profile.")}finally{a(!1)}}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Settings"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Update your profile details, preferences, and review recent security activity."})]}),n.jsxs("div",{className:"grid gap-6 xl:grid-cols-[minmax(0,1.2fr)_minmax(0,0.8fr)]",children:[n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"Profile",subtitle:"Let creators know who theyre meeting."}),n.jsxs(B,{className:"gap-5",children:[n.jsx(te,{label:"Full name",placeholder:"Your Name",value:i,onChange:m=>o(m.target.value),disabled:t}),n.jsx(te,{label:"Public username",placeholder:"@username",value:l,onChange:m=>c(m.target.value),disabled:t}),n.jsx(Re,{label:"About you",placeholder:"Share your interests, favorite creators, and background.",value:d,onChange:m=>u(m.target.value),rows:4,disabled:t}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Preferred language",placeholder:"English",value:h,onChange:m=>f(m.target.value),disabled:t}),n.jsx(te,{label:"Timezone",placeholder:"IST",value:v,onChange:m=>b(m.target.value),disabled:t})]}),n.jsx(T,{size:"lg",onClick:p,disabled:t||r,children:r?"Saving...":"Save profile"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Communication",subtitle:"Choose how we keep you informed."}),n.jsxs(B,{className:"gap-4 text-sm text-[#212529]",children:[n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-5 w-5 rounded border-[#CBD5F5] text-[#C045FF] focus:ring-[#C045FF]"}),"Email me when Im outbid on an event"]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-5 w-5 rounded border-[#CBD5F5] text-[#C045FF] focus:ring-[#C045FF]"}),"Remind me 24 hours before a meet"]}),n.jsxs("label",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-[#CBD5F5] text-[#C045FF] focus:ring-[#C045FF]"}),"Send me creator spotlights and platform updates"]}),n.jsx(T,{variant:"secondary",className:"self-start",children:"Save preferences"})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Security activity",subtitle:"Recent actions that impact your account safety.",className:"border-b border-[#E9ECEF] pb-4"}),n.jsxs(B,{className:"gap-4",children:[g.length===0?n.jsx("div",{className:"text-sm text-[#6C757D]",children:"No recent security activity found."}):g.map(m=>n.jsxs("div",{className:"flex flex-col gap-3 rounded-[14px] border border-[#E9ECEF] bg-white p-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-[#212529]",children:m.event_type}),n.jsxs("p",{className:"text-sm text-[#6C757D]",children:[new Date(m.created_at).toLocaleString(),"  ",m.location||"Unknown Location"]})]}),n.jsx(Q,{variant:"default",children:"Logged"})]},m.id)),n.jsx(T,{variant:"ghost",className:"self-start",children:"Review all security events "})]})]})]})}const vT={online:"#22c55e",dnd:"#ef4444",offline:"#9ca3af"};function yT({status:e}){return n.jsx("span",{"aria-label":e,className:"inline-block h-2.5 w-2.5 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:vT[e]}})}function wT(){const[e,t]=y.useState(""),[s,r]=y.useState(null),{messages:a,sendMessage:i,markMessageAsRead:o}=Xi(),{user:l}=ve(),c=y.useMemo(()=>{if(!l||!a)return[];const f=new Map;return a.forEach(v=>{const b=v.sender_id===l.id?v.receiver_id:v.sender_id,g=v.sender_id===l.id?v.receiver_display_name:v.sender_display_name,w=v.sender_id===l.id?v.receiver_username:v.sender_username,p=f.get(b),m=!v.read&&v.receiver_id===l.id;p?(new Date(v.created_at)>new Date(p.lastTime)&&(p.lastMessage=v.message,p.lastTime=v.created_at),m&&(p.unread+=1)):f.set(b,{id:b,participant:{id:b,name:g||"Unknown User",username:w||"unknown",avatar:`https://api.dicebear.com/9.x/initials/svg?seed=${g||"User"}`,status:"offline"},lastMessage:v.message,lastTime:v.created_at,unread:m?1:0})}),Array.from(f.values()).sort((v,b)=>new Date(b.lastTime).getTime()-new Date(v.lastTime).getTime())},[a,l]),d=y.useMemo(()=>c.find(f=>f.id===s)||null,[c,s]),u=y.useMemo(()=>a.filter(f=>f.sender_id===(l==null?void 0:l.id)&&f.receiver_id===s||f.sender_id===s&&f.receiver_id===(l==null?void 0:l.id)),[a,l,s]);y.useEffect(()=>{s&&l&&u.filter(v=>!v.read&&v.receiver_id===l.id).forEach(v=>o(v.id))},[s,u,l,o]);const h=async f=>{if(f.preventDefault(),!(!e.trim()||!s))try{await i(s,e),t("")}catch(v){console.error("Failed to send message:",v)}};return n.jsxs("div",{className:"flex h-[calc(100vh-140px)] flex-col gap-4 md:flex-row",children:[n.jsxs("div",{className:`flex w-full flex-col gap-3 md:w-80 ${d?"hidden md:flex":"flex"}`,children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Messages"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Chat with creators after your meets."})]}),n.jsxs(I,{className:"flex h-full min-h-[260px] flex-col overflow-hidden",children:[n.jsx($,{className:"flex flex-row items-center justify-between gap-2 border-b border-[#E9ECEF] pb-3",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#212529]",children:"Conversations"}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Tap a creator to open your chat."})]})}),n.jsx(B,{className:"min-h-0 flex-1 gap-2 p-0",children:n.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[c.map(f=>{const v=f.id===s;return n.jsxs("button",{type:"button",onClick:()=>r(f.id),className:`mb-2 flex w-full items-center gap-3 rounded-[12px] border px-3 py-2 text-left text-sm transition-colors ${v?"border-[#C045FF] bg-[#F4E6FF] text-[#140423]":"border-[#E9ECEF] bg-white text-[#212529] hover:border-[#C045FF]/50 hover:bg-[#F8F5FF]"}`,children:[n.jsx(Mt,{src:f.participant.avatar,alt:f.participant.name,initials:f.participant.name.charAt(0),size:"sm"}),n.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"truncate text-[13px] font-semibold",children:f.participant.name}),n.jsx("span",{className:"whitespace-nowrap text-[11px] text-[#6C757D]",children:hr(new Date(f.lastTime),"h:mm a")})]}),n.jsx("span",{className:"mt-0.5 line-clamp-1 text-[12px] text-[#6C757D]",children:f.lastMessage})]}),f.unread>0&&n.jsx("span",{className:"ml-1 inline-flex h-5 min-w-[20px] items-center justify-center rounded-full bg-[#C045FF] px-1 text-[11px] font-semibold text-white",children:f.unread})]},f.id)}),c.length===0&&n.jsx("p",{className:"pt-4 text-center text-xs text-[#6C757D]",children:"No conversations yet. Join a FanMeet to start chatting with creators."})]})})]})]}),n.jsx(I,{elevated:!0,className:`flex h-full w-full flex-1 flex-col overflow-hidden ${d?"flex":"hidden md:flex"}`,children:d?n.jsxs(n.Fragment,{children:[n.jsxs($,{className:"flex flex-row items-center justify-between gap-3 border-b border-[#E9ECEF] bg-white/80 py-3 backdrop-blur",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"button",className:"flex h-8 w-8 items-center justify-center rounded-full border border-[#E9ECEF] bg-white text-sm text-[#343A40] md:hidden",onClick:()=>r(null),children:""}),n.jsx(Mt,{src:d.participant.avatar,alt:d.participant.name,initials:d.participant.name.charAt(0),size:"sm"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("div",{className:"text-sm font-semibold text-[#212529]",children:d.participant.name}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#6C757D]",children:[d.participant.status&&n.jsx(yT,{status:d.participant.status}),n.jsx("span",{children:d.participant.status==="online"?"Online now":"Offline"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(T,{variant:"ghost",size:"icon",className:"rounded-full border border-[#E9ECEF] bg-white text-[#6C757D]",children:n.jsx(E0,{className:"h-4 w-4","aria-hidden":"true"})}),n.jsx(T,{variant:"ghost",size:"icon",className:"rounded-full border border-[#E9ECEF] bg-white text-[#6C757D]",children:n.jsx(w0,{className:"h-4 w-4","aria-hidden":"true"})})]})]}),n.jsxs(B,{className:"flex min-h-0 flex-1 flex-col p-0",children:[n.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto bg-[#F8F9FA] p-4",children:u.map(f=>{var b;const v=f.sender_id===(l==null?void 0:l.id);return n.jsx("div",{className:`group my-2 flex gap-2 ${v?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`flex max-w-[80%] items-start gap-2 ${v?"flex-row-reverse":"flex-row"}`,children:[n.jsx(Mt,{src:v?`https://api.dicebear.com/9.x/initials/svg?seed=${((b=l==null?void 0:l.user_metadata)==null?void 0:b.full_name)||"Me"}`:d.participant.avatar,alt:v?"Me":d.participant.name,initials:v?"Me":d.participant.name.charAt(0),size:"sm"}),n.jsxs("div",{children:[n.jsx("div",{className:`rounded-2xl px-3 py-2 text-sm ${v?"bg-gradient-to-r from-[#C045FF] via-[#FF6B9D] to-[#8B3FFF] text-white shadow-[0_10px_30px_rgba(0,0,0,0.25)]":"border border-[#E9ECEF] bg-white text-[#212529]"}`,children:f.message}),n.jsxs("div",{className:"mt-1 flex items-center gap-2 text-[11px] text-[#6C757D]",children:[n.jsx("time",{dateTime:f.created_at,children:hr(new Date(f.created_at),"h:mm a")}),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:[n.jsx("button",{type:"button",className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/80 text-[#6C757D] shadow-sm",children:n.jsx(N0,{className:"h-3 w-3","aria-hidden":"true"})}),n.jsx("button",{type:"button",className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/80 text-[#6C757D] shadow-sm",children:n.jsx(y0,{className:"h-3 w-3","aria-hidden":"true"})}),!v&&n.jsx("button",{type:"button",className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/80 text-[#E63946] shadow-sm",children:n.jsx(j0,{className:"h-3 w-3","aria-hidden":"true"})}),v&&n.jsx("button",{type:"button",className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/80 text-[#E63946] shadow-sm",children:n.jsx(_0,{className:"h-3 w-3","aria-hidden":"true"})}),n.jsx("button",{type:"button",className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/80 text-[#6C757D] shadow-sm",children:n.jsx(b0,{className:"h-3 w-3","aria-hidden":"true"})})]})]})]})]})},f.id)})}),n.jsx("div",{className:"border-t border-[#E9ECEF] bg-white p-3",children:n.jsxs("form",{onSubmit:h,className:"flex items-center gap-3",children:[n.jsx("input",{type:"text",value:e,onChange:f=>t(f.target.value),placeholder:"Type your message...",className:"h-11 flex-1 rounded-[12px] border-2 border-[#E9ECEF] bg-white px-4 text-sm text-[#212529] placeholder:text-[#ADB5BD] focus:border-[#C045FF] focus:shadow-[0_0_0_3px_rgba(192,69,255,0.18)] focus:outline-none"}),n.jsx(T,{type:"submit",size:"md",disabled:!e.trim(),className:"px-5 text-sm",children:"Send"})]})})]})]}):n.jsx("div",{className:"flex h-full flex-1 items-center justify-center bg-[#F8F9FA] p-6 text-center text-sm text-[#6C757D]",children:n.jsx("p",{className:"max-w-xs",children:"Select a conversation to start messaging a creator. After your next FanMeet, their chat will appear here."})})})]})}const bT={open:"primary",in_progress:"warning",resolved:"success",closed:"danger"};function jT(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState([]),[i,o]=y.useState(""),[l,c]=y.useState(""),[d,u]=y.useState(!1),[h,f]=y.useState(!0),[v,b]=y.useState(null),[g,w]=y.useState(""),[p,m]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!e){f(!1);return}const{data:C,error:E}=await D.from("support_tickets").select("id, subject, description, status, created_at, updated_at").eq("user_id",e.id).order("created_at",{ascending:!1});if(E||!C){console.error("Error fetching support tickets:",E),s([]),f(!1);return}s(C.map(_=>({id:_.id,subject:_.subject,description:_.description,status:_.status,createdAt:_.created_at,updatedAt:_.updated_at}))),f(!1)})()},[e]),y.useEffect(()=>{(async()=>{if(!v){a([]);return}const{data:C,error:E}=await D.from("ticket_replies").select("id, message, is_admin_reply, created_at").eq("ticket_id",v).order("created_at",{ascending:!0});if(E||!C){console.error("Error fetching replies:",E),a([]);return}a(C.map(_=>({id:_.id,message:_.message,isAdminReply:_.is_admin_reply,createdAt:_.created_at})))})()},[v]);const x=async()=>{if(!e||!v||!g.trim()){alert("Please enter a message.");return}m(!0);try{const{error:j}=await D.from("ticket_replies").insert({ticket_id:v,user_id:e.id,message:g.trim(),is_admin_reply:!1});if(j){console.error("Error sending reply:",j),alert("Failed to send reply.");return}a(C=>[...C,{id:`temp-${Date.now()}`,message:g.trim(),isAdminReply:!1,createdAt:new Date().toISOString()}]),w(""),alert("Reply sent! Our support team will respond soon.")}finally{m(!1)}};t.find(j=>j.id===v);const N=async()=>{if(!e){alert("Please log in to raise a support ticket.");return}if(!i.trim()||!l.trim()){alert("Please enter a subject and description.");return}u(!0);try{const{data:j,error:C}=await D.from("support_tickets").insert({user_id:e.id,subject:i.trim(),description:l.trim(),status:"open"}).select("id, subject, description, status, created_at, updated_at").single();if(C||!j){console.error("Error creating support ticket:",C),alert("Failed to create support ticket.");return}s(E=>[{id:j.id,subject:j.subject,description:j.description,status:j.status,createdAt:j.created_at,updatedAt:j.updated_at},...E]),o(""),c(""),alert("Support ticket created successfully. Our team will get back to you.")}finally{u(!1)}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs(I,{children:[n.jsx($,{title:"Help & Support",subtitle:"Raise a ticket if you face issues with payments, meets, or your account."}),n.jsxs(B,{className:"gap-4",children:[n.jsx(Re,{label:"Subject",rows:2,placeholder:"Briefly describe your issue",value:i,onChange:j=>o(j.target.value)}),n.jsx(Re,{label:"Details",rows:5,placeholder:"Share as many details as possible, including event names, creators, dates, and screenshots where relevant.",value:l,onChange:j=>c(j.target.value)}),n.jsx(T,{onClick:N,disabled:d,children:d?"Submitting":"Submit Ticket"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Your Tickets",subtitle:"Click a ticket to view the conversation and reply."}),n.jsx(B,{className:"flex flex-col gap-3",children:h?n.jsx("div",{className:"py-4 text-center text-sm text-[#6C757D]",children:"Loading tickets"}):t.length===0?n.jsx("div",{className:"py-4 text-center text-sm text-[#6C757D]",children:"You have not raised any tickets yet."}):t.map(j=>n.jsxs("div",{children:[n.jsxs("button",{type:"button",onClick:()=>b(v===j.id?null:j.id),className:`w-full text-left rounded-[12px] border p-4 text-sm text-[#212529] transition-all ${v===j.id?"border-[#C045FF] bg-[#F4E6FF]/30":"border-[#E9ECEF] bg-white hover:border-[#C045FF]/50"}`,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-semibold",children:j.subject}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:de(j.createdAt)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Q,{variant:bT[j.status],children:j.status.replace("_"," ")}),n.jsx("span",{className:"text-[#6C757D]",children:v===j.id?"":""})]})]}),n.jsx("p",{className:"mt-1 line-clamp-2 text-sm text-[#6C757D] whitespace-pre-line",children:j.description})]}),v===j.id&&n.jsxs("div",{className:"mt-2 ml-4 border-l-2 border-[#C045FF] pl-4 space-y-4",children:[n.jsx("div",{className:"space-y-3",children:r.length===0?n.jsx("p",{className:"text-sm text-[#6C757D] py-2",children:"No replies yet. Our support team will respond soon."}):r.map(C=>n.jsxs("div",{className:`rounded-[10px] p-3 text-sm ${C.isAdminReply?"bg-[#F4E6FF] border-l-4 border-[#C045FF]":"bg-[#F8F9FA]"}`,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsx("span",{className:`font-semibold ${C.isAdminReply?"text-[#C045FF]":"text-[#212529]"}`,children:C.isAdminReply?" Support Team":"You"}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:de(C.createdAt)})]}),n.jsx("p",{className:"text-[#212529] whitespace-pre-line",children:C.message})]},C.id))}),j.status!=="closed"&&j.status!=="resolved"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Re,{label:"Reply to this ticket",rows:3,placeholder:"Type your message...",value:g,onChange:C=>w(C.target.value)}),n.jsx(T,{size:"sm",onClick:x,disabled:p||!g.trim(),children:p?"Sending...":"Send Reply"})]}),(j.status==="closed"||j.status==="resolved")&&n.jsxs("p",{className:"text-sm text-[#6C757D] italic",children:["This ticket is ",j.status,". Create a new ticket if you need further assistance."]})]})]},j.id))})]})]})}const NT="your_cloud_name",CT="fanmeet_profiles";function _T(e){const t=typeof e=="string"?new Date(e):e,s=Date.now()-t.getTime(),r=Math.floor(s/1e3);if(r<60)return"Just now";const a=Math.floor(r/60);if(a<60)return`${a} min${a===1?"":"s"} ago`;const i=Math.floor(a/60);if(i<24)return`${i} hour${i===1?"":"s"} ago`;const o=Math.floor(i/24);if(o<7)return`${o} day${o===1?"":"s"} ago`;const l=Math.floor(o/7);return`${l} week${l===1?"":"s"} ago`}function ET(e){const t=e.trim();if(!t)return"";const s=t.split(/\s+/);return s.length===1?s[0].slice(0,2).toUpperCase():`${s[0][0]}${s[1][0]}`.toUpperCase()}function ST(){var q,Z,H;const e=nt(),{user:t}=ve(),{events:s}=An(),[r,a]=y.useState([]),[i,o]=y.useState(!1),[l,c]=y.useState(0),[d,u]=y.useState(0),[h,f]=y.useState(0),[v,b]=y.useState(void 0),[g,w]=y.useState([]),[p,m]=y.useState(!1),[x,N]=y.useState(null),[j,C]=y.useState(""),[E,_]=y.useState(!1),S=y.useRef(null);y.useEffect(()=>{(async()=>{if(!t)return;const{data:R}=await D.from("profiles").select("profile_photo_url, display_name").eq("user_id",t.id).single();R&&(N(R.profile_photo_url||null),C(R.display_name||""))})()},[t]);const F=async k=>{var U;const R=(U=k.target.files)==null?void 0:U[0];if(!(!R||!t)){if(!R.type.startsWith("image/")){alert("Please select an image file.");return}if(R.size>5*1024*1024){alert("Image must be less than 5MB.");return}_(!0);try{const J=new FormData;J.append("file",R),J.append("upload_preset",CT),J.append("folder","fanmeet/profiles");const K=await fetch(`https://api.cloudinary.com/v1_1/${NT}/image/upload`,{method:"POST",body:J});if(!K.ok)throw new Error("Upload failed");const ae=await K.json();await D.from("profiles").update({profile_photo_url:ae.secure_url}).eq("user_id",t.id),N(ae.secure_url),alert("Profile photo updated!")}catch(J){console.error("Upload error:",J),alert("Failed to upload photo.")}finally{_(!1),S.current&&(S.current.value="")}}},A=async()=>{if(!(!t||!confirm("Remove your profile photo?"))){_(!0);try{await D.from("profiles").update({profile_photo_url:null}).eq("user_id",t.id),N(null),alert("Profile photo removed.")}catch{alert("Failed to remove photo.")}finally{_(!1)}}};y.useEffect(()=>{(async()=>{o(!0);try{const R=new Date,U=new Date(R.getFullYear(),R.getMonth(),1),J=new Date(R.getFullYear(),R.getMonth()+1,1),{data:K,error:ae}=await D.from("bids").select("event_id, amount, status, created_at").eq("status","won").gte("created_at",U.toISOString()).lt("created_at",J.toISOString());if(ae||!K||K.length===0){a([]);return}const oe=Array.from(new Set(K.map(fe=>fe.event_id)));if(oe.length===0){a([]);return}const{data:le,error:pe}=await D.from("events").select("id, creator_id").in("id",oe);if(pe||!le||le.length===0){a([]);return}const ee=new Map(le.map(fe=>[fe.id,fe.creator_id])),W=new Map;for(const fe of K){const he=ee.get(fe.event_id);if(!he)continue;const ie=W.get(he)??0;W.set(he,ie+(fe.amount??0))}if(W.size===0){a([]);return}const se=Array.from(W.entries()).sort((fe,he)=>he[1]-fe[1]).slice(0,3),O=se.map(([fe])=>fe),{data:z}=await D.from("profiles").select("user_id, display_name, username, category").in("user_id",O),G=new Map((z??[]).map(fe=>[fe.user_id,fe])),ue=se.map(([fe,he])=>{const ie=G.get(fe),ye=(ie==null?void 0:ie.display_name)||(ie==null?void 0:ie.username)||"Creator",Ne=ie!=null&&ie.username?`@${ie.username}`:"@creator",rt=(ie==null?void 0:ie.category)||"general";return{id:fe,displayName:ye,handle:Ne,category:rt,earnings:he,initials:ET(ye)}});a(ue)}finally{o(!1)}})()},[]),y.useEffect(()=>{(async()=>{if(!t){c(0),u(0),f(0),w([]),b(void 0);return}m(!0);try{let R=0,U=0,J;const{count:K}=await D.from("meets").select("id",{count:"exact",head:!0}).eq("creator_id",t.id).eq("status","completed");f(typeof K=="number"?K:0);const{data:ae}=await D.from("events").select("id, title").eq("creator_id",t.id),oe=new Map((ae??[]).map(O=>[O.id,O.title])),le=Array.from(oe.keys()),pe=[];if(le.length>0){const{data:O}=await D.from("bids").select("id, event_id, amount, status, created_at").in("event_id",le).order("created_at",{ascending:!1}),z=(O??[]).filter(G=>G.status==="won");if(z.length>0){const G=new Date;R=z.reduce((ye,Ne)=>ye+(Ne.amount??0),0);const ue=new Date(G.getFullYear(),G.getMonth(),1),fe=new Date(G.getFullYear(),G.getMonth()-1,1),he=z.filter(ye=>new Date(ye.created_at)>=ue).reduce((ye,Ne)=>ye+(Ne.amount??0),0),ie=z.filter(ye=>{const Ne=new Date(ye.created_at);return Ne>=fe&&Ne<ue}).reduce((ye,Ne)=>ye+(Ne.amount??0),0);if(ie>0){const ye=(he-ie)/ie*100,Ne=Math.round(ye);J=`${Ne>=0?"+":""}${Ne}% vs last month`}else he>0?J="New this month":J=void 0}(O??[]).forEach(G=>{const ue=oe.get(G.event_id)??"Event";pe.push({id:`bid-${G.id}`,description:`New bid of ${V(G.amount)} on ${ue}`,createdAt:G.created_at})})}const{data:ee}=await D.from("withdrawal_requests").select("id, amount, status, requested_at").eq("creator_id",t.id).order("requested_at",{ascending:!1}).limit(10);let W=0;(ee??[]).forEach(O=>{O.status==="completed"&&(W+=O.amount??0),pe.push({id:`wd-${O.id}`,description:`Withdrawal request of ${V(O.amount)} (${O.status})`,createdAt:O.requested_at})}),U=Math.max(R-W,0),c(R),u(U),b(J),pe.sort((O,z)=>new Date(z.createdAt).getTime()-new Date(O.createdAt).getTime());const se=pe.slice(0,10).map(O=>({id:O.id,description:O.description,time:_T(O.createdAt)}));w(se)}finally{m(!1)}})()},[t]);const L=(t?s.filter(k=>k.creatorUsername===t.username):[]).filter(k=>k.status==="LIVE"||k.status==="Upcoming").length,P=[{id:"stat-1",icon:"",title:"Total Earnings",value:l,change:v},{id:"stat-2",icon:"",title:"Active Events",value:L.toString(),caption:`${L} upcoming or live`},{id:"stat-3",icon:"",title:"Pending Balance",value:d,action:"Withdraw "},{id:"meets",icon:"",title:"Completed Meets",value:h.toString(),caption:"Happy fans across sessions"}];return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsx(I,{elevated:!0,className:"border-none",children:n.jsx(B,{className:"gap-4",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"relative",children:x?n.jsx("img",{src:x,alt:"Profile",className:"h-20 w-20 rounded-full object-cover ring-2 ring-[#C045FF]/30"}):n.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-[#C045FF] to-[#7B2CBF] flex items-center justify-center text-white font-bold text-2xl ring-2 ring-[#C045FF]/30",children:((q=j==null?void 0:j.charAt(0))==null?void 0:q.toUpperCase())||((H=(Z=t==null?void 0:t.email)==null?void 0:Z.charAt(0))==null?void 0:H.toUpperCase())||"?"})}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-[#212529]",children:j||"Creator"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:t==null?void 0:t.email})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:F,className:"hidden"}),n.jsx(T,{variant:"secondary",size:"sm",onClick:()=>{var k;return(k=S.current)==null?void 0:k.click()},disabled:E,children:E?"Uploading...":x?"Change Photo":"Add Photo"}),x&&n.jsx(T,{variant:"ghost",size:"sm",onClick:A,disabled:E,className:"text-red-500 hover:text-red-600",children:"Remove"})]})]})]})})}),n.jsx(I,{elevated:!0,className:"overflow-hidden border-none bg-gradient-to-r from-[#FCE7FF] via-[#F4E6FF] to-[#E5DEFF] shadow-[0_24px_60px_rgba(160,64,255,0.18)]",children:n.jsxs("div",{className:"relative flex flex-col gap-6 px-6 py-6 md:flex-row md:items-center md:px-8 md:py-8",children:[n.jsxs("div",{className:"max-w-xl space-y-3",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C045FF]",children:"Creator earnings"}),n.jsx("h1",{className:"text-2xl font-semibold text-[#050014] md:text-3xl",children:"See how top creators earn with FanMeet."}),n.jsx("p",{className:"text-sm text-[#6C757D] md:text-base",children:"Track your revenue, learn from other creators, and turn every 1:1 meet into predictable income."}),n.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:n.jsx("span",{className:"text-xs text-[#6C757D]",children:"Your personal earnings, events, and activity summary are updated live from your FanMeet account."})})]}),n.jsxs("div",{className:"mt-4 w-full max-w-md rounded-[20px] bg-white/90 p-4 shadow-[0_18px_45px_rgba(15,23,42,0.18)] md:ml-auto md:mt-0",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsx("div",{className:"text-xs font-semibold uppercase tracking-[0.16em] text-[#6C757D]",children:"Top creators this month"})}),n.jsx("div",{className:"mt-3 space-y-3",children:i?n.jsx("div",{className:"text-xs text-[#6C757D]",children:"Loading top creators"}):r.length===0?n.jsx("div",{className:"text-xs text-[#6C757D]",children:"No earnings data yet this month."}):r.map(k=>n.jsxs("div",{className:"flex items-center justify-between rounded-[12px] bg-[#F8F9FA] px-3 py-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-[#C045FF] via-[#FF6B9D] to-[#8B3FFF] text-xs font-semibold text-white",children:k.initials}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-semibold text-[#212529]",children:k.displayName}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:[k.handle,"  ",k.category]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm font-bold text-[#050014]",children:V(k.earnings)}),n.jsx("div",{className:"text-xs text-[#6C757D]",children:"This month"})]})]},k.id))})]})]})}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-[#212529]",children:"Overview"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"High-level snapshot of your performance."})]}),n.jsx(T,{variant:"primary",className:"bg-[#050014] text-white hover:bg-[#140423]",onClick:()=>e("/creator/events/new"),children:"Create Event "})]}),n.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-4",children:P.map(k=>n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:k.icon}),n.jsx("span",{children:k.title})]})}),n.jsxs(B,{className:"gap-2",children:[n.jsx("div",{className:"text-3xl font-bold text-[#212529]",children:typeof k.value=="number"?V(k.value):k.value}),k.change?n.jsx(Q,{variant:"success",className:"w-fit",children:k.change}):null,k.caption?n.jsx("p",{className:"text-sm text-[#6C757D]",children:k.caption}):null,k.action?n.jsx(T,{variant:"primary",size:"sm",className:"mt-2 w-fit bg-[#050014] text-white hover:bg-[#140423]",children:k.action}):null]})]},k.id))}),n.jsxs(I,{children:[n.jsx($,{title:"Recent Activity",subtitle:"Latest updates from your events and fans"}),n.jsx(B,{className:"gap-4",children:p&&g.length===0?n.jsx("div",{className:"text-sm text-[#6C757D]",children:"Loading activity"}):g.length===0?n.jsx("div",{className:"text-sm text-[#6C757D]",children:"No recent activity yet."}):g.map(k=>n.jsxs("div",{className:"rounded-[12px] border border-[#E9ECEF] bg-[#F8F9FA] p-4 text-sm text-[#212529]",children:[n.jsx("div",{children:k.description}),n.jsx("div",{className:"text-xs text-[#6C757D]",children:k.time})]},k.id))})]})]})}function FT(){const e=nt(),{user:t}=ve(),{events:s}=An(),r=(t==null?void 0:t.role)==="creator"?t.username:null,a=r?s.filter(o=>o.creatorUsername===r):[],i=o=>{const l=`${window.location.origin}/events/${o}`;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(l).then(()=>{window.alert("Share link copied to clipboard. Send it to your fans to start receiving bids.")},()=>{window.prompt("Share this link with your fans:",l)}):window.prompt("Share this link with your fans:",l)};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"My Events"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Manage and monitor all of your scheduled sessions."})]}),n.jsx("div",{className:"flex gap-2",children:["All","Upcoming","Live","Completed"].map(o=>n.jsx(T,{size:"sm",variant:o==="All"?"primary":"secondary",className:"rounded-full px-4",children:o},o))})]}),n.jsx("div",{className:"flex flex-col gap-6",children:r&&a.length>0?a.map(o=>n.jsxs(I,{elevated:!0,className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx(Q,{variant:o.status==="LIVE"?"danger":"primary",children:o.status==="LIVE"?" LIVE":o.status}),n.jsx("span",{className:"text-sm text-[#6C757D]",children:o.date})]}),n.jsx("h3",{className:"text-xl font-semibold text-[#212529]",children:o.title}),n.jsxs("div",{className:"text-sm text-[#6C757D]",children:["Duration: ",o.duration,"  Base Price: ",V(o.basePrice)]}),n.jsxs("div",{className:"grid gap-2 rounded-[12px] border border-[#E9ECEF] bg-[#F8F9FA] p-4 text-sm",children:[n.jsxs("span",{children:[" Current Bid:"," ",n.jsx("strong",{className:"text-[#212529]",children:V(o.currentBid)})]}),n.jsxs("span",{children:[" ",o.participants," participants"]}),n.jsxs("span",{children:[" ",o.endsIn]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsx(T,{variant:"secondary",children:"Edit"}),n.jsx(T,{variant:"danger",children:"Delete"}),n.jsx(T,{onClick:()=>i(o.id),children:"Copy Link"}),n.jsx(T,{variant:"ghost",onClick:()=>e(`/events/${o.id}`),children:"View Details "})]})]},o.id)):n.jsx(I,{elevated:!0,className:"grid min-h-[220px] place-items-center text-center",children:n.jsxs(B,{className:"flex flex-col items-center gap-3",children:[n.jsx("span",{className:"text-4xl",children:""}),n.jsx("h3",{className:"text-lg font-semibold text-[#212529]",children:"No events yet"}),n.jsx("p",{className:"max-w-md text-sm text-[#6C757D]",children:"Create your first FanMeet event to start receiving bids. Once created, youll see it listed here and can share your public link with fans."})]})})})]})}const kT=["50","100","150"],DT=["5 minutes","10 minutes","15 minutes"];function AT(){const e=nt(),{user:t}=ve(),{createEvent:s}=An(),[r,a]=y.useState(""),[i,o]=y.useState(""),[l,c]=y.useState(null),[d,u]=y.useState(""),[h,f]=y.useState(""),[v,b]=y.useState(""),[g,w]=y.useState(""),[p,m]=y.useState(""),[x,N]=y.useState(""),[j,C]=y.useState(""),[E,_]=y.useState("paid"),S=async()=>{if(!t||t.role!=="creator"){window.alert("Please login as a creator to create events."),e("/auth?redirect=/creator/events/new");return}if(t.creatorProfileStatus!=="approved"){const L=t.creatorProfileStatus==="pending"?"Your creator profile is pending approval. Please wait for admin approval before creating events.":"Your creator profile has been rejected. Please contact support for more information.";window.alert(` ${L}`);return}if(!r.trim()||l===null||!d||!h||!v||!g||!p||!x){C("Please fill in all required fields before creating the event.");return}C("");const M=t.email.split("@")[0]||t.username;try{const L=await s({creatorUsername:t.username,creatorDisplayName:M,title:r.trim(),description:i.trim()||void 0,basePrice:l,duration:d,date:h,time:v,biddingDeadlineDate:g,biddingDeadlineTime:p,meetingLink:x.trim()}),P=`${window.location.origin}/events/${L.id}`;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(P).then(()=>{window.alert("Event created! Share link copied to your clipboard.")},()=>{window.prompt("Event created! Share this link with your fans:",P)}):window.prompt("Event created! Share this link with your fans:",P),e("/creator/events")}catch(L){console.error("Failed to create event:",L),C("Failed to create event. Please try again.")}},F=(t==null?void 0:t.creatorProfileStatus)==="approved",A=(t==null?void 0:t.creatorProfileStatus)==="pending";return n.jsxs("div",{className:"flex flex-col gap-8",children:[t&&t.role==="creator"&&!F&&n.jsx("div",{className:`rounded-[12px] p-4 ${A?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:A?"":""}),n.jsxs("div",{children:[n.jsx("h3",{className:`font-semibold ${A?"text-yellow-800":"text-red-800"}`,children:A?"Profile Pending Approval":"Profile Not Approved"}),n.jsx("p",{className:`text-sm ${A?"text-yellow-700":"text-red-700"}`,children:A?"Your creator profile is being reviewed by our team. You cannot create events until approved.":"Your creator profile was not approved. Please contact support for more information."})]})]})}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Create New Event"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Set up a new live experience for your fans."})]}),n.jsx(Q,{variant:"primary",className:"px-4 py-2 text-sm",children:"Preview updates in real time"})]}),n.jsxs("div",{className:"grid gap-6 xl:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[n.jsxs(I,{elevated:!0,className:"p-0",children:[n.jsx($,{title:"Event Details",subtitle:"Provide the basics so fans know what to expect",className:"border-b border-[#E9ECEF] px-8 py-6"}),n.jsxs(B,{className:"gap-6 px-8 py-6",children:[n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx("span",{className:"text-sm font-semibold text-[#212529]",children:"Event Type *"}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsx(T,{variant:E==="paid"?"secondary":"ghost",size:"sm",className:"rounded-[8px]",onClick:()=>{_("paid"),c(null)},children:"Paid Event"}),n.jsx(T,{variant:E==="free"?"secondary":"ghost",size:"sm",className:"rounded-[8px]",onClick:()=>{_("free"),c(0)},children:"Free Event"})]})]}),n.jsx(te,{label:"Event Title *",placeholder:"Give your event an exciting headline",required:!0,value:r,onChange:M=>a(M.target.value)}),n.jsx(Re,{label:"Description",placeholder:"Describe the experience, topics, or value fans will get.",rows:5,value:i,onChange:M=>o(M.target.value)}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("span",{className:"text-sm font-semibold text-[#212529]",children:"Base Price *"}),n.jsx("div",{className:"flex flex-wrap gap-3",children:E==="free"?n.jsx(T,{variant:"primary",size:"sm",className:"rounded-[8px]",disabled:!0,children:"Free (0)"}):kT.map(M=>{const L=parseInt(M.replace(/[^0-9]/g,""),10)||0,P=l===L;return n.jsx(T,{variant:P?"primary":"secondary",size:"sm",className:"rounded-[8px]",onClick:()=>c(L),children:M},M)})})]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("span",{className:"text-sm font-semibold text-[#212529]",children:"Duration *"}),n.jsx("div",{className:"flex flex-wrap gap-3",children:DT.map(M=>n.jsx(T,{variant:d===M?"primary":"secondary",size:"sm",className:"rounded-[8px]",onClick:()=>u(M),children:M},M))})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{type:"date",label:"Event Date *",required:!0,value:h,onChange:M=>f(M.target.value)}),n.jsx(te,{type:"time",label:"Event Time *",required:!0,value:v,onChange:M=>b(M.target.value)})]}),n.jsxs("div",{className:"rounded-[12px] border border-[#E9ECEF] bg-[#F8F9FA] p-4",children:[n.jsx("div",{className:"mb-3 text-sm font-semibold text-[#212529]",children:" Bidding Window *"}),n.jsx("p",{className:"mb-4 text-xs text-[#6C757D]",children:"Set when bidding closes. Fans can bid until this time, and the highest bidder wins."}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{type:"date",label:"Bidding Closes Date *",required:!0,value:g,onChange:M=>w(M.target.value)}),n.jsx(te,{type:"time",label:"Bidding Closes Time *",required:!0,value:p,onChange:M=>m(M.target.value)})]})]}),n.jsxs("div",{className:"rounded-[12px] border border-[#E9ECEF] bg-[#F8F9FA] p-4",children:[n.jsx("div",{className:"mb-3 text-sm font-semibold text-[#212529]",children:" Meeting Link *"}),n.jsx("p",{className:"mb-4 text-xs text-[#6C757D]",children:"Add the Google Meet link for the session. This will be automatically sent to the winner."}),n.jsx(te,{type:"url",label:"Google Meet Link",placeholder:"https://meet.google.com/...",required:!0,value:x,onChange:M=>N(M.target.value)})]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("span",{className:"text-sm font-semibold text-[#212529]",children:"Cover Image (optional)"}),n.jsxs("div",{className:"flex h-44 flex-col items-center justify-center gap-3 rounded-[16px] border-2 border-dashed border-[#E9ECEF] bg-[#F8F9FA]",children:[n.jsx("span",{className:"text-2xl",children:""}),n.jsx("span",{className:"text-sm font-medium text-[#212529]",children:"Drag & Drop or click to upload"}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:"JPG, PNG, or WEBP up to 5MB"}),n.jsx(T,{size:"sm",variant:"secondary",children:"Browse Files"})]})]}),j?n.jsx("p",{className:"text-sm font-medium text-[#DC3545]",children:j}):null]}),n.jsxs("div",{className:"flex justify-end gap-3 border-t border-[#E9ECEF] px-8 py-6",children:[n.jsx(T,{variant:"secondary",children:"Cancel"}),n.jsx(T,{onClick:S,children:"Create Event "})]})]}),n.jsxs(I,{className:"h-fit",children:[n.jsx($,{title:"Preview",subtitle:"Fans will see this layout before bidding"}),n.jsxs(B,{className:"gap-4",children:[n.jsx("div",{className:"h-32 rounded-[16px] bg-gradient-to-br from-[#FFE5D9] to-white"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h3",{className:"text-xl font-semibold text-[#212529]",children:"Meet & Greet - Q&A Session"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Jan 15  4:00 PM IST  10 minutes"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx(Q,{variant:"danger",children:" LIVE SOON"}),n.jsx(Q,{variant:"primary",children:"Base Price: 100"})]}),n.jsx("div",{className:"rounded-[12px] bg-[#F8F9FA] p-4 text-sm text-[#6C757D]",children:"Fans can view event info, schedule, and place their bids here."})]})]})]})]})}const F0=y.createContext(void 0),TT=()=>`${Date.now()}-${Math.random().toString(16).slice(2)}`,PT=({children:e})=>{const[t,s]=y.useState([]),[r,a]=y.useState([]),{user:i}=ve(),[o,l]=y.useState([]);y.useEffect(()=>{(async()=>{const{data:m,error:x}=await D.from("profiles").select("username, display_name, bio, profile_photo_url");if(x){console.error("Error fetching profiles:",x);return}m&&s(m.map(N=>({username:N.username,displayName:N.display_name||"",bio:N.bio||"",profilePhotoUrl:N.profile_photo_url||void 0})))})()},[]),y.useEffect(()=>{if(!i){l([]);return}(async()=>{const{data:m,error:x}=await D.from("creator_follows").select("creator_id").eq("fan_id",i.id);if(x){console.error("Error fetching following:",x);return}if(m&&m.length>0){const N=m.map(E=>E.creator_id),{data:j}=await D.from("profiles").select("username").in("user_id",N),C=(j==null?void 0:j.map(E=>E.username).filter(Boolean))||[];l(C)}})()},[i]);const c=p=>t.find(m=>m.username===p),d=async({username:p,displayName:m,bio:x})=>{const N=t.find(C=>C.username===p),j={username:p,displayName:m,bio:x};if(s(N?C=>C.map(E=>E.username===p?j:E):C=>[...C,j]),i){const{error:C}=await D.from("profiles").upsert({user_id:i.id,username:p,display_name:m,bio:x,updated_at:new Date().toISOString()});C&&console.error("Error updating profile:",C)}return j},u=async p=>{if(!i)return;l(N=>[...N,p]);const{data:m}=await D.from("profiles").select("user_id").eq("username",p).single();if(!m)return;const{error:x}=await D.from("creator_follows").insert({fan_id:i.id,creator_id:m.user_id});x&&(console.error("Error following creator:",x),l(N=>N.filter(j=>j!==p)))},h=async p=>{if(!i)return;l(N=>N.filter(j=>j!==p));const{data:m}=await D.from("profiles").select("user_id").eq("username",p).single();if(!m)return;const{error:x}=await D.from("creator_follows").delete().eq("fan_id",i.id).eq("creator_id",m.user_id);x&&(console.error("Error unfollowing creator:",x),l(N=>[...N,p]))},f=p=>r.filter(m=>m.username===p).sort((m,x)=>m.id<x.id?1:-1),v=({username:p,text:m})=>{const x=m.trim();if(!x)throw new Error("Post text cannot be empty");const N={id:TT(),username:p,text:x,createdAtLabel:"Just now"};return a(j=>[N,...j]),N},b=(p,m)=>{a(x=>x.map(N=>N.id===p?{...N,text:m.trim()}:N))},g=p=>{a(m=>m.filter(x=>x.id!==p))},w=y.useMemo(()=>({profiles:t,posts:r,following:o,getProfile:c,upsertProfile:d,followCreator:u,unfollowCreator:h,getPostsForCreator:f,addPost:v,updatePost:b,deletePost:g}),[t,r,o]);return n.jsx(F0.Provider,{value:w,children:e})},Lf=()=>{const e=y.useContext(F0);if(!e)throw new Error("useCreatorProfiles must be used within a CreatorProfileProvider");return e};function MT(){const{user:e}=ve(),{getProfile:t,upsertProfile:s}=Lf();if(!e||e.role!=="creator")return n.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[n.jsx("h1",{className:"text-xl font-semibold text-[#212529]",children:"Creator profile setup"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Please sign in as a creator to edit your public profile."})]});const r=t(e.username),a=(r==null?void 0:r.displayName)||e.email.split("@")[0]||e.username,i=(r==null?void 0:r.bio)||"Tell fans who you are, what you create, and what kind of micro-meets or AMAs they can expect.",[o,l]=y.useState(a),[c,d]=y.useState(i),[u,h]=y.useState(!1),f=async()=>{await s({username:e.username,displayName:o.trim(),bio:c.trim()}),h(!0),window.setTimeout(()=>h(!1),2e3)},v=()=>{const b=`${window.location.origin}/${e.username}`;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(b).then(()=>{window.alert("Profile link copied. Share it with your fans.")},()=>{window.prompt("Share this profile link with your fans:",b)}):window.prompt("Share this profile link with your fans:",b)};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Public profile setup"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Update what fans see on your public page."})]}),n.jsxs("div",{className:"grid gap-6 xl:grid-cols-[minmax(0,1.3fr)_minmax(0,0.7fr)]",children:[n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"Profile details",subtitle:"These details are shown at the top of your public page."}),n.jsxs(B,{className:"gap-5",children:[n.jsx(te,{label:"Display name",placeholder:"Your public display name",value:o,onChange:b=>l(b.target.value)}),n.jsx(te,{label:"Public username",value:`@${e.username}`,disabled:!0,helperText:"Your profile link uses this username."}),n.jsx(Re,{label:"Bio",rows:4,value:c,onChange:b=>d(b.target.value),placeholder:"Short description that appears on your public profile."}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(T,{onClick:f,children:"Save profile"}),u&&n.jsx("span",{className:"text-xs font-medium text-[#28A745]",children:"Saved. Your public page is updated."})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Public page preview",subtitle:"Fans visiting your profile will see something like this."}),n.jsxs(B,{className:"gap-4",children:[n.jsxs("div",{className:"rounded-[16px] bg-gradient-to-br from-[#FFE5D9] via-white to-[#F4E6FF] p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-[#050014] text-center text-sm font-semibold leading-10 text-white",children:o.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-sm font-semibold text-[#212529]",children:o}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:["@",e.username]})]})]}),n.jsx("p",{className:"mt-3 text-xs text-[#6C757D]",children:c})]}),n.jsxs("div",{className:"flex items-center justify-between gap-3 text-xs text-[#6C757D]",children:[n.jsxs("p",{children:["Visit ",n.jsxs("span",{className:"font-mono font-semibold",children:["/",e.username]})," to see your public page in a new tab."]}),n.jsx(T,{size:"sm",variant:"secondary",onClick:v,children:"Share profile"})]})]})]})]})]})}const RT=10,LT=e=>Math.floor(e*(100-RT)/100);function IT(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState([]),[i,o]=y.useState(0),[l,c]=y.useState(0),[d,u]=y.useState(0),[h,f]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!e){s([]),a([]),o(0),c(0),u(0);return}f(!0);try{const{data:m,error:x}=await D.from("events").select("id, title, status, starts_at").eq("creator_id",e.id);if(x||!m||m.length===0){s([]),a([]),o(0),c(0),u(0);return}const N=m.map(K=>K.id),{data:j}=await D.from("bids").select("id, event_id, fan_id, amount, status, created_at").in("event_id",N),{data:C}=await D.from("meets").select("event_id, status").in("event_id",N),E=Array.from(new Set((j??[]).map(K=>K.fan_id).filter(Boolean)));let _=null;if(E.length>0){const{data:K}=await D.from("profiles").select("user_id, display_name, username").in("user_id",E);_=K??[]}const S=new Map((_??[]).map(K=>[K.user_id,K])),F=new Map;for(const K of j??[]){const ae=F.get(K.event_id)??[];ae.push(K),F.set(K.event_id,ae)}const A=new Map;for(const K of C??[]){const ae=A.get(K.event_id)??[];ae.push(K),A.set(K.event_id,ae)}const M=new Date,L=new Date(M.getFullYear(),M.getMonth(),1),P=new Date(M);P.setDate(M.getDate()-29);let q=0,Z=0;const H=new Map,k=[];for(const K of m){const ae=F.get(K.id)??[],oe=ae.length,le=ae.filter(he=>he.status==="won"),pe=le.length>0?le.reduce((he,ie)=>ie.amount>he.amount?ie:he,le[0]):null,ee=(pe==null?void 0:pe.amount)??0,W=LT(ee);let se="-",O=null;if(pe){const he=S.get(pe.fan_id);se=(he==null?void 0:he.display_name)||(he==null?void 0:he.username)||"Winner",O=new Date(pe.created_at)}else K.starts_at&&(O=new Date(K.starts_at));if(W>0&&O&&(q+=W,O>=L&&(Z+=W),O>=P)){const he=O.toISOString().slice(0,10),ie=H.get(he)??0;H.set(he,ie+W)}const ue=(A.get(K.id)??[]).some(he=>he.status==="completed")?"Cleared":"Upcoming",fe=O?O.toLocaleDateString("en-IN",{month:"short",day:"2-digit"}):"-";k.push({id:K.id,date:fe,event:K.title,bids:oe,winner:se,grossAmount:ee,earned:W,status:ue})}const R=k.filter(K=>K.earned>0).length,U=R>0?q/R:0,J=[];for(let K=0;K<30;K+=1){const ae=new Date(P);ae.setDate(P.getDate()+K);const oe=ae.toISOString().slice(0,10),le=H.get(oe)??0;J.push({dateKey:oe,label:ae.toLocaleDateString("en-IN",{month:"short",day:"2-digit"}),total:le})}k.sort((K,ae)=>K.date<ae.date?1:-1),s(k),a(J),o(q),c(Z),u(U)}finally{f(!1)}})()},[e]);const v=()=>{if(!t.length){alert("No earnings to export yet.");return}const x=[["Date","Event","Bids","Winner","Earned","Status"].join(","),...t.map(E=>{const _=S=>`"${S.replace(/"/g,'""')}"`;return[_(E.date),_(E.event),E.bids.toString(),_(E.winner),E.earned.toString(),_(E.status)].join(",")})].join(`
`),N=new Blob([x],{type:"text/csv;charset=utf-8;"}),j=URL.createObjectURL(N),C=document.createElement("a");C.href=j,C.setAttribute("download","earnings.csv"),document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(j)},b=[{id:"sum-1",title:"Total Earned",value:i},{id:"sum-2",title:"This Month",value:l},{id:"sum-3",title:"Average/Event",value:d}],g=r.reduce((p,m)=>m.total>p?m.total:p,0),w={Cleared:"success",Upcoming:"primary"};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Earnings"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Track revenue trends and payment history."})]}),n.jsx(T,{variant:"secondary",onClick:v,children:"Export CSV"})]}),n.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:b.map(p=>n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:p.title}),n.jsx(B,{children:n.jsx("div",{className:"text-3xl font-bold text-[#212529]",children:h?"":V(p.value)})})]},p.id))}),n.jsxs(I,{children:[n.jsx($,{title:"Revenue (Last 30 days)",subtitle:"Visualize how your earnings have changed over time"}),n.jsx(B,{children:n.jsx("div",{className:"flex h-64 items-end gap-1 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] px-4 py-4",children:r.every(p=>p.total===0)?n.jsx("div",{className:"m-auto text-sm text-[#6C757D]",children:"No earnings in the last 30 days."}):n.jsx("div",{className:"flex h-full w-full items-end gap-1",children:r.map(p=>n.jsxs("div",{className:"flex flex-1 flex-col items-center gap-1",children:[n.jsx("div",{className:"flex h-full w-full items-end",children:n.jsx("div",{className:"w-full rounded-t-md bg-[#FF6B35]",style:{height:g>0?`${Math.max(6,p.total/g*100)}%`:"6px"}})}),n.jsx("div",{className:"text-[10px] text-[#6C757D]",children:p.label})]},p.dateKey))})})})]}),n.jsxs(I,{children:[n.jsx($,{title:"Earnings Breakdown"}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Date"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Event"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Bids"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Winner"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Net Earnings"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"})]})}),n.jsx("tbody",{className:"text-[#212529]",children:h&&t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-4 text-center text-sm text-[#6C757D]",children:"Loading earnings"})}):t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-4 text-center text-sm text-[#6C757D]",children:"No earnings yet."})}):t.map(p=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3",children:p.date}),n.jsx("td",{className:"py-3",children:p.event}),n.jsx("td",{className:"py-3",children:p.bids}),n.jsx("td",{className:"py-3",children:p.winner}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium text-green-600",children:V(p.earned)}),p.grossAmount>0&&n.jsxs("span",{className:"text-xs text-[#6C757D]",children:["(Bid: ",V(p.grossAmount)," - 10% fee)"]})]})}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:w[p.status]??"primary",children:p.status})})]},p.id))})]})})]})]})}const OT={completed:"success",in_review:"warning",pending:"primary",failed:"danger"},BT={completed:"Completed",in_review:"In review",pending:"Pending",failed:"Failed"},$T=10,UT=e=>Math.floor(e*(100-$T)/100);function zT(){const{user:e}=ve(),[t,s]=y.useState(0),[r,a]=y.useState(0),[i,o]=y.useState(null),[l,c]=y.useState([]),[d,u]=y.useState(!1),[h,f]=y.useState(!1),[v,b]=y.useState(""),[g,w]=y.useState(""),[p,m]=y.useState(!1),[x,N]=y.useState("");y.useEffect(()=>{(async()=>{if(!e){s(0),a(0),o(null),c([]);return}u(!0);try{const{data:E,error:_}=await D.from("users").select("role, account_status, creator_profile_status").eq("id",e.id).maybeSingle();if(_||!E){m(!0),N("We could not load your creator profile. Please contact support."),u(!1);return}if(E.role!=="creator"){m(!0),N("Withdrawals are only available for creator accounts."),u(!1);return}if(E.account_status&&E.account_status!=="active"){m(!0),N("Your creator account is not active. Please contact support."),u(!1);return}if(E.creator_profile_status&&E.creator_profile_status!=="approved"){m(!0),N("Your creator profile is not approved yet. Once an admin approves you, withdrawals will be enabled."),u(!1);return}const{data:S}=await D.from("events").select("id").eq("creator_id",e.id),F=(S??[]).map(U=>U.id);let A=0,M=0;if(F.length>0){const{data:U}=await D.from("bids").select("event_id, amount, status, created_at").in("event_id",F).eq("status","won"),{data:J}=await D.from("meets").select("event_id, status").in("event_id",F),K=new Map;for(const ae of J??[]){const oe=K.get(ae.event_id)??[];oe.push(ae),K.set(ae.event_id,oe)}for(const ae of U??[]){const oe=UT(ae.amount??0);A+=oe,(K.get(ae.event_id)??[]).some(ee=>ee.status==="completed")||(M+=oe)}}const{data:L}=await D.from("withdrawal_requests").select("*").eq("creator_id",e.id).order("requested_at",{ascending:!1});let P=0,q=0,Z=null;const H=[];for(const U of L??[])U.status==="completed"?(P+=U.amount??0,!Z&&U.processed_at&&(Z={amount:U.amount,processedAt:new Date(U.processed_at)})):(U.status==="pending"||U.status==="in_review")&&(q+=U.amount??0),H.push({id:U.id,amount:U.amount,status:U.status,destination:U.destination||"Not specified",requestedAt:new Date(U.requested_at),processedAt:U.processed_at?new Date(U.processed_at):null});const k=A-M,R=Math.max(k-P-q,0);s(R),a(M),o(Z),c(H)}finally{u(!1)}})()},[e]);const j=async()=>{if(!e){alert("Please log in to request a withdrawal.");return}if(p){alert(x||"Withdrawals are currently unavailable for your account. Please contact support.");return}const C=parseInt(v,10);if(isNaN(C)||C<=0){alert("Please enter a valid amount.");return}if(C<500){alert("Minimum withdrawal amount is 500.");return}if(C>t){alert(`You can only withdraw up to ${V(t)}.`);return}if(!g.trim()){alert("Please enter a destination account.");return}f(!0);try{const{error:E}=await D.from("withdrawal_requests").insert({creator_id:e.id,amount:C,destination:g.trim(),status:"pending",requested_at:new Date().toISOString(),created_at:new Date().toISOString()});if(E){console.error("Error submitting withdrawal:",E),alert("Failed to submit withdrawal request. Please try again.");return}alert(`Withdrawal request of ${V(C)} submitted successfully!`),b(""),w(""),s(_=>_-C),c(_=>[{id:`temp-${Date.now()}`,amount:C,status:"pending",destination:g.trim(),requestedAt:new Date,processedAt:null},..._])}finally{f(!1)}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Withdrawals"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Track your payout requests, bank destinations, and release timelines."})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)]",children:[n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"Available Balance",subtitle:"Withdraw to your linked account any time."}),n.jsxs(B,{className:"gap-6",children:[n.jsxs("div",{className:"rounded-[16px] bg-[#F4E6FF]/60 p-6",children:[n.jsx("span",{className:"text-sm text-[#6C757D]",children:"Ready to withdraw"}),n.jsx("p",{className:"text-4xl font-bold text-[#C045FF]",children:d?"":V(t)})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-[12px] border border-[#E9ECEF] bg-white p-4",children:[n.jsx("span",{className:"text-sm text-[#6C757D]",children:"Pending clearance"}),n.jsx("p",{className:"text-xl font-semibold text-[#212529]",children:d?"":V(r)}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Net earnings (90%) after 10% platform fee. Available after 24h."})]}),n.jsxs("div",{className:"rounded-[12px] border border-[#E9ECEF] bg-white p-4",children:[n.jsx("span",{className:"text-sm text-[#6C757D]",children:"Last payout"}),n.jsx("p",{className:"text-xl font-semibold text-[#212529]",children:d?"":i?V(i.amount):""}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:i?`Processed ${de(i.processedAt)}`:"No payouts yet"})]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Request Withdrawal",subtitle:"Transfers typically arrive in 2-3 business days."}),n.jsxs(B,{className:"gap-5",children:[p&&n.jsx("div",{className:"rounded-[12px] border border-[#FECACA] bg-[#FFF5F5] p-3 text-xs text-[#B91C1C]",children:x}),n.jsxs("div",{className:"grid gap-4",children:[n.jsx(te,{label:"Amount",placeholder:"5,000",type:"number",min:500,step:100,value:v,onChange:C=>b(C.target.value)}),n.jsx(te,{label:"Destination account",placeholder:"HDFC Bank 8290",value:g,onChange:C=>w(C.target.value)})]}),n.jsxs("div",{className:"rounded-[12px] bg-[#F8F9FA] p-4 text-sm text-[#6C757D]",children:["Note: We process withdrawals above 500. Ensure your KYC details are up to date for smoother payouts.",t>0&&n.jsxs("span",{className:"mt-1 block font-medium text-[#212529]",children:["Maximum available: ",V(t)]})]}),n.jsx(T,{size:"lg",onClick:j,disabled:h||t<500||p,children:h?"Submitting":"Submit request"})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Payout History",subtitle:"A log of all recent withdrawal activity.",className:"border-b border-[#E9ECEF] pb-4"}),n.jsx(B,{className:"gap-4",children:d&&l.length===0?n.jsx("div",{className:"py-4 text-center text-sm text-[#6C757D]",children:"Loading payout history"}):l.length===0?n.jsx("div",{className:"py-4 text-center text-sm text-[#6C757D]",children:"No withdrawal requests yet."}):l.map(C=>n.jsxs("div",{className:"flex flex-col gap-3 rounded-[14px] border border-[#E9ECEF] bg-white p-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx(Q,{variant:OT[C.status]??"default",children:BT[C.status]??C.status}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:["Requested ",de(C.requestedAt)]})]}),n.jsxs("p",{className:"text-sm text-[#6C757D]",children:["Destination: ",C.destination]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsx("span",{className:"text-sm text-[#6C757D]",children:"Amount"}),n.jsx("span",{className:"text-xl font-semibold text-[#212529]",children:V(C.amount)}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:C.processedAt?`Processed ${de(C.processedAt)}`:"Awaiting processing"})]})]},C.id))})]})]})}const VT=["Review fan questions in advance to personalize the session.","Test your audio/video setup 15 minutes before the meet.","Keep exclusive content ready to reward high bidders.","Use the built-in timer to stay on schedule."],WT={scheduled:"success",completed:"primary",cancelled:"danger",no_show:"warning"};function qT(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState(!0),i=async()=>{if(!e)return;const{data:u,error:h}=await D.from("meets").select(`
        *,
        events:event_id (title, base_price)
      `).eq("creator_id",e.id).order("scheduled_at",{ascending:!0});if(h){console.error("Error fetching meets:",h),a(!1);return}if(console.log(" Fetched meets for creator:",e.id),console.log(" Meets data:",u),console.log(" Number of meets:",(u==null?void 0:u.length)||0),u&&u.length>0){const f=[...new Set(u.map(m=>m.fan_id))],{data:v}=await D.from("profiles").select("user_id, display_name, username").in("user_id",f),b=new Map((v==null?void 0:v.map(m=>[m.user_id,m]))||[]),g=[...new Set(u.map(m=>m.event_id))],{data:w}=await D.from("bids").select("event_id, amount").in("event_id",g),p=u.map(m=>({...m,fan_profile:b.get(m.fan_id),bids:(w==null?void 0:w.filter(x=>x.event_id===m.event_id))||[]}));s(p)}else s(u||[]);a(!1)};y.useEffect(()=>{i()},[e]);const o=async u=>{if(!e)return;console.log(" Marking meet as complete:",u);const{data:h,error:f}=await D.from("meets").update({status:"completed",updated_at:new Date().toISOString()}).eq("id",u).eq("creator_id",e.id).select("id, status");if(f){console.error("Error marking meet as complete:",f),alert("Failed to mark meeting as complete");return}console.log(" Meet update result:",h),i()},l=async u=>{if(!e)return;console.log(" Marking meet as pending:",u);const{data:h,error:f}=await D.from("meets").update({status:"scheduled",updated_at:new Date().toISOString()}).eq("id",u).eq("creator_id",e.id).select("id, status");if(f){console.error("Error marking meet as pending:",f),alert("Failed to mark meeting as pending");return}console.log(" Meet update result (pending):",h),i()},c=t.filter(u=>u.status==="scheduled"),d=t.filter(u=>u.status==="completed");return console.log(" Upcoming meets (scheduled):",c.length,c),console.log(" Completed meets:",d.length,d),console.log(" All meets:",t.length,t),r?n.jsx("div",{className:"p-8 text-center",children:"Loading meets..."}):n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"My Meets"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Manage your scheduled sessions and turn every meet into a wow moment."})]}),n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"Session Prep Center",subtitle:"Best practices to deliver memorable fan experiences.",className:"border-b border-[#E9ECEF] pb-4"}),n.jsx(B,{className:"gap-3",children:VT.map(u=>n.jsxs("div",{className:"flex items-start gap-3 rounded-[12px] border border-[#E9ECEF] bg-white p-4",children:[n.jsx("span",{className:"mt-1 text-lg",children:""}),n.jsx("p",{className:"text-sm text-[#212529]",children:u})]},u))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Upcoming Sessions",subtitle:"Direct links and status updates for your upcoming meets.",className:"border-b border-[#E9ECEF] pb-4"}),n.jsxs(B,{className:"gap-4",children:[c.map(u=>{var f,v,b,g;const h=u.bids&&u.bids.length>0?Math.max(...u.bids.map(w=>w.amount)):((f=u.events)==null?void 0:f.base_price)||0;return n.jsx("div",{className:"flex flex-col gap-4 rounded-[14px] border border-[#E9ECEF] bg-white p-4",children:n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[n.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx(Q,{variant:WT[u.status]??"default",children:u.status}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:[de(u.scheduled_at),"  ",u.duration_minutes," mins"]}),n.jsxs("span",{className:"text-xs font-semibold text-[#28A745]",children:["Amount: ",V(h)]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-[#212529]",children:((v=u.events)==null?void 0:v.title)||"Untitled Event"}),n.jsxs("p",{className:"text-sm text-[#6C757D]",children:["with ",((b=u.fan_profile)==null?void 0:b.display_name)||((g=u.fan_profile)==null?void 0:g.username)||"Unknown Fan"]})]}),n.jsxs("div",{className:"text-sm text-[#6C757D]",children:[n.jsx("span",{className:"font-medium",children:"Meeting Link: "}),n.jsx("span",{className:"break-all",children:u.meeting_link||"No link yet"})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[u.meeting_link&&n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>navigator.clipboard.writeText(u.meeting_link),children:"Copy Link"}),n.jsx(T,{size:"sm",variant:"primary",onClick:()=>o(u.id),children:" Mark as Done"})]})]})},u.id)}),c.length===0&&n.jsx("p",{className:"text-sm text-[#6C757D]",children:"No upcoming meets scheduled."})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Completed Sessions",subtitle:"Your past meets and earnings.",className:"border-b border-[#E9ECEF] pb-4"}),n.jsxs(B,{className:"gap-4",children:[d.map(u=>{var f,v,b,g;const h=u.bids&&u.bids.length>0?Math.max(...u.bids.map(w=>w.amount)):((f=u.events)==null?void 0:f.base_price)||0;return n.jsx("div",{className:"flex flex-col gap-4 rounded-[14px] border border-[#28A745] bg-gradient-to-r from-green-50 to-white p-4",children:n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[n.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx(Q,{variant:"success",children:" Completed"}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:[de(u.scheduled_at),"  ",u.duration_minutes," mins"]}),n.jsx("div",{className:"flex items-center gap-2 rounded-full bg-[#28A745] px-3 py-1",children:n.jsxs("span",{className:"text-xs font-bold text-white",children:[" ",V(h)]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-[#212529]",children:((v=u.events)==null?void 0:v.title)||"Untitled Event"}),n.jsxs("p",{className:"text-sm text-[#6C757D]",children:["with ",((b=u.fan_profile)==null?void 0:b.display_name)||((g=u.fan_profile)==null?void 0:g.username)||"Unknown Fan"]})]})]}),n.jsx("div",{className:"flex flex-col gap-2",children:n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>l(u.id),children:" Mark as Pending"})})]})},u.id)}),d.length===0&&n.jsx("p",{className:"text-sm text-[#6C757D]",children:"No completed meets yet."})]})]})]})}function HT(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState(!0);return y.useEffect(()=>{async function i(){if(e)try{const{data:o,error:l}=await D.from("creator_follows").select("fan_id").eq("creator_id",e.id);if(l)throw l;if(o&&o.length>0){const c=o.map(h=>h.fan_id),{data:d,error:u}=await D.from("profiles").select("*").in("user_id",c);if(u)throw u;d&&s(d)}else s([])}catch(o){console.error("Error fetching followers:",o)}finally{a(!1)}}i()},[e]),r?n.jsx("div",{className:"p-8 text-center text-[#6C757D]",children:"Loading..."}):n.jsxs("div",{className:"mx-auto flex max-w-4xl flex-col gap-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold text-[#212529]",children:"Followers"}),n.jsx("p",{className:"mt-1 text-sm text-[#6C757D]",children:"People who follow you on FanMeet. Use this list to understand who shows up for your events most often."})]}),n.jsxs("div",{className:"space-y-4",children:[t.map(i=>{var o,l;return n.jsx(I,{elevated:!0,className:"border-none bg-white/95",children:n.jsxs(B,{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[n.jsx("div",{className:"flex flex-col gap-1",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Mt,{src:i.avatar_url,initials:((o=i.display_name)==null?void 0:o.charAt(0))||((l=i.username)==null?void 0:l.charAt(0)),size:"md"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-sm font-semibold text-[#212529]",children:i.display_name||i.username}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:["@",i.username]})]})]})}),n.jsxs("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[n.jsx(Q,{variant:"primary",children:"Follower"}),n.jsx("div",{className:"flex gap-2",children:n.jsx(T,{size:"sm",variant:"secondary",className:"rounded-full",children:"Message"})})]})]})},i.user_id)}),t.length===0&&n.jsx(I,{children:n.jsx(B,{children:n.jsx("p",{className:"text-sm text-[#6C757D]",children:"You dont have any followers yet. Share your profile link and host a few events to start building your fan list."})})})]})]})}function YT(){const{notifications:e,markNotificationAsRead:t,markAllNotificationsAsRead:s}=Xi();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-[#111827]",children:"Notifications"}),n.jsx("p",{className:"text-[#6C757D]",children:"Manage your alerts and preferences"})]}),n.jsxs("button",{onClick:()=>s(),className:"flex items-center gap-2 text-sm font-medium text-[#FF6B35] hover:text-[#E85D2E]",children:[n.jsx(v0,{className:"h-4 w-4"}),"Mark all as read"]})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[n.jsx("div",{className:"lg:col-span-2 space-y-4",children:n.jsxs("div",{className:"rounded-xl border border-[#E9ECEF] bg-white p-6 shadow-sm",children:[n.jsx("h2",{className:"mb-4 text-lg font-semibold text-[#111827]",children:"Latest alerts"}),n.jsx("div",{className:"space-y-4",children:e.length===0?n.jsx("div",{className:"text-center py-8 text-[#6C757D]",children:"No notifications yet"}):e.map(r=>n.jsxs("div",{className:`flex gap-4 rounded-lg border p-4 transition-colors cursor-pointer ${r.read?"border-transparent bg-white":"border-[#FFE5D9] bg-[#FFF5F2]"}`,onClick:()=>!r.read&&t(r.id),children:[n.jsx("div",{className:`mt-1 flex h-8 w-8 flex-none items-center justify-center rounded-full ${r.read?"bg-[#F8F9FA] text-[#6C757D]":"bg-[#FFE5D9] text-[#FF6B35]"}`,children:n.jsx(g0,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("h3",{className:`font-medium ${r.read?"text-[#111827]":"text-[#FF6B35]"}`,children:r.title}),n.jsx("span",{className:"whitespace-nowrap text-xs text-[#6C757D]",children:hr(new Date(r.created_at),"MMM d, h:mm a")})]}),n.jsx("p",{className:"mt-1 text-sm text-[#6C757D]",children:r.message})]}),!r.read&&n.jsx("div",{className:"mt-2 h-2 w-2 rounded-full bg-[#FF6B35]"})]},r.id))})]})}),n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"rounded-xl border border-[#E9ECEF] bg-white p-6 shadow-sm",children:[n.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[n.jsx(C0,{className:"h-5 w-5 text-[#6C757D]"}),n.jsx("h2",{className:"text-lg font-semibold text-[#111827]",children:"Preferences"})]}),n.jsx("div",{className:"space-y-4",children:["Email notifications","Push notifications","SMS alerts"].map(r=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-[#111827]",children:r}),n.jsxs("label",{className:"relative inline-flex cursor-pointer items-center",children:[n.jsx("input",{type:"checkbox",className:"peer sr-only",defaultChecked:!0}),n.jsx("div",{className:"peer h-6 w-11 rounded-full bg-[#E9ECEF] after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-[#FF6B35] peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#FFE5D9]"})]})]},r))})]})})]})]})}const KT="your_cloud_name",GT="fanmeet_profiles",QT={Connected:"success","Reconnect required":"warning"};function JT(){var Z,H;const{user:e}=ve(),[t,s]=y.useState(!0),[r,a]=y.useState(!1),[i,o]=y.useState(!1),[l,c]=y.useState(!1),[d,u]=y.useState(!1),[h,f]=y.useState(!1),[v,b]=y.useState(null),g=y.useRef(null),[w,p]=y.useState({display_name:"",username:"",bio:"",category:"",primary_language:""}),[m,x]=y.useState({bank_account_number:"",bank_ifsc:"",bank_account_name:"",upi_id:""}),[N,j]=y.useState({contact_email:"",phone_number:"",sms_alerts:!1,share_calendar:!1}),[C,E]=y.useState([]),[_,S]=y.useState({instagram:"",youtube:"",twitter:"",linkedin:"",website:""});y.useEffect(()=>{async function k(){if(e)try{const{data:R}=await D.from("profiles").select("*").eq("user_id",e.id).single();R&&(p({display_name:R.display_name||"",username:R.username||"",bio:R.bio||"",category:R.category||"",primary_language:R.primary_language||""}),b(R.profile_photo_url||null),S({instagram:R.instagram_url||"",youtube:R.youtube_url||"",twitter:R.twitter_url||"",linkedin:R.linkedin_url||"",website:R.website_url||""}),x({bank_account_number:R.bank_account_number||"",bank_ifsc:R.bank_ifsc||"",bank_account_name:R.bank_account_name||"",upi_id:R.upi_id||""}));const{data:U}=await D.from("creator_settings").select("*").eq("user_id",e.id).single();U&&j({contact_email:U.contact_email||"",phone_number:U.phone_number||"",sms_alerts:U.sms_alerts||!1,share_calendar:U.share_calendar||!1});const{data:J}=await D.from("linked_channels").select("*").eq("user_id",e.id);J&&E(J)}catch(R){console.error("Error fetching settings:",R)}finally{s(!1)}}k()},[e]);const F=async()=>{if(e){a(!0);try{const{error:k}=await D.from("profiles").update(w).eq("user_id",e.id);if(k)throw k;alert("Profile updated successfully!")}catch(k){console.error("Error updating profile:",k),alert("Failed to update profile.")}finally{a(!1)}}},A=async k=>{var U;const R=(U=k.target.files)==null?void 0:U[0];if(!(!R||!e)){if(!R.type.startsWith("image/")){alert("Please select an image file.");return}if(R.size>5*1024*1024){alert("Image must be less than 5MB.");return}f(!0);try{const J=new FormData;J.append("file",R),J.append("upload_preset",GT),J.append("folder","fanmeet/profiles");const K=await fetch(`https://api.cloudinary.com/v1_1/${KT}/image/upload`,{method:"POST",body:J});if(!K.ok)throw new Error("Failed to upload image");const oe=(await K.json()).secure_url,{error:le}=await D.from("profiles").update({profile_photo_url:oe}).eq("user_id",e.id);if(le)throw le;b(oe),alert("Profile photo updated successfully!")}catch(J){console.error("Error uploading photo:",J),alert("Failed to upload photo. Please try again.")}finally{f(!1),g.current&&(g.current.value="")}}},M=async()=>{if(e&&confirm("Are you sure you want to remove your profile photo?")){f(!0);try{const{error:k}=await D.from("profiles").update({profile_photo_url:null}).eq("user_id",e.id);if(k)throw k;b(null),alert("Profile photo removed.")}catch(k){console.error("Error removing photo:",k),alert("Failed to remove photo.")}finally{f(!1)}}},L=async()=>{if(e){u(!0);try{const{error:k}=await D.from("profiles").update({instagram_url:_.instagram||null,youtube_url:_.youtube||null,twitter_url:_.twitter||null,linkedin_url:_.linkedin||null,website_url:_.website||null}).eq("user_id",e.id);if(k)throw k;alert("Social links updated successfully!")}catch(k){console.error("Error updating social links:",k),alert("Failed to update social links.")}finally{u(!1)}}},P=async()=>{if(e){o(!0);try{const{data:k}=await D.from("creator_settings").select("user_id").eq("user_id",e.id).single();let R;if(k){const{error:U}=await D.from("creator_settings").update(N).eq("user_id",e.id);R=U}else{const{error:U}=await D.from("creator_settings").insert({...N,user_id:e.id});R=U}if(R)throw R;alert("Contact settings updated successfully!")}catch(k){console.error("Error updating contact settings:",k),alert("Failed to update contact settings.")}finally{o(!1)}}},q=async()=>{if(e){c(!0);try{const{error:k}=await D.from("profiles").update(m).eq("user_id",e.id);if(k)throw k;alert("Bank details updated successfully! Your earnings will be auto-withdrawn to this account after 24 hours.")}catch(k){console.error("Error updating bank details:",k),alert("Failed to update bank details.")}finally{c(!1)}}};return t?n.jsx("div",{className:"p-8 text-center",children:"Loading settings..."}):n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Settings"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Fine-tune your public profile, contact preferences, and streaming setup."})]}),n.jsxs("div",{className:"grid gap-6 xl:grid-cols-[minmax(0,1.2fr)_minmax(0,0.8fr)]",children:[n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"Profile information",subtitle:"Fans see these details before bidding."}),n.jsxs(B,{className:"gap-5",children:[n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("label",{className:"text-sm font-medium text-[#212529]",children:"Profile Photo"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"relative",children:v?n.jsx("img",{src:v,alt:"Profile",className:"h-24 w-24 rounded-full object-cover ring-2 ring-[#C045FF]/20"}):n.jsx("div",{className:"h-24 w-24 rounded-full bg-gradient-to-br from-[#C045FF] to-[#7B2CBF] flex items-center justify-center text-white font-bold text-2xl ring-2 ring-[#C045FF]/20",children:((H=(Z=w.display_name)==null?void 0:Z.charAt(0))==null?void 0:H.toUpperCase())||"?"})}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:A,className:"hidden",id:"profile-photo-upload"}),n.jsx(T,{variant:"secondary",size:"sm",onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},disabled:h,children:h?"Uploading...":v?"Change Photo":"Upload Photo"}),v&&n.jsx(T,{variant:"ghost",size:"sm",onClick:M,disabled:h,className:"text-red-500 hover:text-red-600",children:"Remove Photo"}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"JPG, PNG, GIF. Max 5MB."})]})]})]}),n.jsx(te,{label:"Display name",placeholder:"Your Name",value:w.display_name,onChange:k=>p({...w,display_name:k.target.value})}),n.jsx(te,{label:"Public username",placeholder:"@username",value:w.username,onChange:k=>p({...w,username:k.target.value})}),n.jsx(Re,{label:"Bio",placeholder:"Tell your fans what to expect...",value:w.bio,onChange:k=>p({...w,bio:k.target.value}),rows:4}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Category",placeholder:"e.g. Music, Tech",value:w.category,onChange:k=>p({...w,category:k.target.value})}),n.jsx(te,{label:"Primary language",placeholder:"e.g. English",value:w.primary_language,onChange:k=>p({...w,primary_language:k.target.value})})]}),n.jsx(T,{size:"lg",onClick:F,disabled:r,children:r?"Saving...":"Save profile"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Contact settings",subtitle:"Well use this for payouts and urgent reminders."}),n.jsxs(B,{className:"gap-4",children:[n.jsx(te,{label:"Contact email",placeholder:"email@example.com",value:N.contact_email,onChange:k=>j({...N,contact_email:k.target.value})}),n.jsx(te,{label:"Phone number",placeholder:"+1 234 567 8900",value:N.phone_number,onChange:k=>j({...N,phone_number:k.target.value})}),n.jsxs("label",{className:"flex items-center gap-3 text-sm text-[#212529]",children:[n.jsx("input",{type:"checkbox",checked:N.sms_alerts,onChange:k=>j({...N,sms_alerts:k.target.checked}),className:"h-5 w-5 rounded border-[#CBD5F5] text-[#C045FF] focus:ring-[#C045FF]"}),"Send SMS alerts for high-value bids"]}),n.jsxs("label",{className:"flex items-center gap-3 text-sm text-[#212529]",children:[n.jsx("input",{type:"checkbox",checked:N.share_calendar,onChange:k=>j({...N,share_calendar:k.target.checked}),className:"h-5 w-5 rounded border-[#CBD5F5] text-[#C045FF] focus:ring-[#C045FF]"}),"Share calendar availability with FanMeet team"]}),n.jsx(T,{variant:"secondary",className:"self-start",onClick:P,disabled:i,children:i?"Updating...":"Update contact info"})]})]})]}),n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"Social Media Links",subtitle:"Add your social media profiles so fans can find and follow you."}),n.jsxs(B,{className:"gap-5",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Instagram",placeholder:"https://instagram.com/yourhandle",value:_.instagram,onChange:k=>S({..._,instagram:k.target.value})}),n.jsx(te,{label:"YouTube",placeholder:"https://youtube.com/@yourhandle",value:_.youtube,onChange:k=>S({..._,youtube:k.target.value})})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Twitter / X",placeholder:"https://twitter.com/yourhandle",value:_.twitter,onChange:k=>S({..._,twitter:k.target.value})}),n.jsx(te,{label:"LinkedIn",placeholder:"https://linkedin.com/in/yourprofile",value:_.linkedin,onChange:k=>S({..._,linkedin:k.target.value})})]}),n.jsx(te,{label:"Website",placeholder:"https://yourwebsite.com",value:_.website,onChange:k=>S({..._,website:k.target.value})}),n.jsx(T,{size:"lg",onClick:L,disabled:d,children:d?"Saving...":"Save Social Links"})]})]}),n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"Bank & Payout Details",subtitle:"Add your bank account or UPI for automatic withdrawals. Earnings are auto-transferred 24 hours after event completion."}),n.jsxs(B,{className:"gap-5",children:[n.jsx("div",{className:"rounded-[12px] bg-[#F4E6FF]/60 p-4",children:n.jsxs("p",{className:"text-sm text-[#6C757D]",children:[" ",n.jsx("strong",{children:"Auto-withdrawal:"})," Your earnings (90% after platform fee) are automatically transferred to your account 24 hours after each event ends. Add either bank account OR UPI details below."]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Bank Account Number",placeholder:"Enter account number",value:m.bank_account_number,onChange:k=>x({...m,bank_account_number:k.target.value})}),n.jsx(te,{label:"IFSC Code",placeholder:"e.g. HDFC0001234",value:m.bank_ifsc,onChange:k=>x({...m,bank_ifsc:k.target.value.toUpperCase()})})]}),n.jsx(te,{label:"Account Holder Name",placeholder:"Name as per bank records",value:m.bank_account_name,onChange:k=>x({...m,bank_account_name:k.target.value})}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"h-px flex-1 bg-[#E9ECEF]"}),n.jsx("span",{className:"text-sm text-[#6C757D]",children:"OR"}),n.jsx("div",{className:"h-px flex-1 bg-[#E9ECEF]"})]}),n.jsx(te,{label:"UPI ID",placeholder:"yourname@upi",value:m.upi_id,onChange:k=>x({...m,upi_id:k.target.value})}),n.jsx(T,{size:"lg",onClick:q,disabled:l,children:l?"Saving...":"Save Payout Details"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Streaming & channel integrations",subtitle:"Connect tools to streamline your live experiences.",className:"border-b border-[#E9ECEF] pb-4"}),n.jsxs(B,{className:"gap-4",children:[C.map(k=>n.jsxs("div",{className:"flex flex-col gap-3 rounded-[14px] border border-[#E9ECEF] bg-white p-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("p",{className:"text-sm font-semibold text-[#212529]",children:k.platform}),n.jsx("span",{className:"text-sm text-[#6C757D]",children:k.handle})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Q,{variant:QT[k.status]??"default",children:k.status}),n.jsx(T,{variant:"ghost",size:"sm",children:"Manage"})]})]},k.id)),C.length===0&&n.jsx("p",{className:"text-sm text-[#6C757D]",children:"No channels connected yet."}),n.jsx(T,{variant:"ghost",className:"self-start",children:"+ Connect new channel"})]})]})]})}const XT={},tg=e=>{let t;const s=new Set,r=(u,h)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const v=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),s.forEach(b=>b(t,v))}},a=()=>t,c={setState:r,getState:a,getInitialState:()=>d,subscribe:u=>(s.add(u),()=>s.delete(u)),destroy:()=>{(XT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},d=t=e(r,a,c);return c},ZT=e=>e?tg(e):tg;var k0={exports:{}},D0={},A0={exports:{}},T0={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var va=y;function eP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tP=typeof Object.is=="function"?Object.is:eP,sP=va.useState,nP=va.useEffect,rP=va.useLayoutEffect,aP=va.useDebugValue;function iP(e,t){var s=t(),r=sP({inst:{value:s,getSnapshot:t}}),a=r[0].inst,i=r[1];return rP(function(){a.value=s,a.getSnapshot=t,wd(a)&&i({inst:a})},[e,s,t]),nP(function(){return wd(a)&&i({inst:a}),e(function(){wd(a)&&i({inst:a})})},[e]),aP(s),s}function wd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!tP(e,s)}catch{return!0}}function oP(e,t){return t()}var lP=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?oP:iP;T0.useSyncExternalStore=va.useSyncExternalStore!==void 0?va.useSyncExternalStore:lP;A0.exports=T0;var cP=A0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc=y,dP=cP;function uP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hP=typeof Object.is=="function"?Object.is:uP,fP=dP.useSyncExternalStore,mP=pc.useRef,pP=pc.useEffect,xP=pc.useMemo,gP=pc.useDebugValue;D0.useSyncExternalStoreWithSelector=function(e,t,s,r,a){var i=mP(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=xP(function(){function c(v){if(!d){if(d=!0,u=v,v=r(v),a!==void 0&&o.hasValue){var b=o.value;if(a(b,v))return h=b}return h=v}if(b=h,hP(u,v))return b;var g=r(v);return a!==void 0&&a(b,g)?b:(u=v,h=g)}var d=!1,u,h,f=s===void 0?null:s;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,s,r,a]);var l=fP(e,i[0],i[1]);return pP(function(){o.hasValue=!0,o.value=l},[l]),gP(l),l};k0.exports=D0;var vP=k0.exports;const yP=yg(vP),P0={},{useDebugValue:wP}=Zu,{useSyncExternalStoreWithSelector:bP}=yP;let sg=!1;const jP=e=>e;function NP(e,t=jP,s){(P0?"production":void 0)!=="production"&&s&&!sg&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),sg=!0);const r=bP(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return wP(r),r}const ng=e=>{(P0?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?ZT(e):e,s=(r,a)=>NP(t,r,a);return Object.assign(s,t),s},CP=e=>e?ng(e):ng,M0="fanmeet-demo-creator-dm-open",_P=()=>typeof window>"u"?"open":window.localStorage.getItem(M0)==="closed"?"closed":"open",EP=CP(e=>({creatorDmStatus:_P(),setCreatorDmStatus:t=>{typeof window<"u"&&window.localStorage.setItem(M0,t),e({creatorDmStatus:t})}}));function SP(){const[e,t]=y.useState(""),{creatorDmStatus:s,setCreatorDmStatus:r}=EP(),[a,i]=y.useState(null),{messages:o,sendMessage:l,markMessageAsRead:c}=Xi(),{user:d}=ve(),u=s==="open",h=y.useMemo(()=>{if(!d||!o)return[];const w=new Map;return o.forEach(p=>{const m=p.sender_id===d.id?p.receiver_id:p.sender_id,x=p.sender_id===d.id?p.receiver_display_name:p.sender_display_name,N=p.sender_id===d.id?p.receiver_username:p.sender_username,j=w.get(m),C=!p.read&&p.receiver_id===d.id;j?(new Date(p.created_at)>new Date(j.lastTime)&&(j.lastMessage=p.message,j.lastTime=p.created_at),C&&(j.unread+=1)):w.set(m,{id:m,participant:{id:m,name:x||"Unknown User",username:N||"unknown",avatar:`https://api.dicebear.com/9.x/initials/svg?seed=${x||"User"}`,status:"offline"},lastMessage:p.message,lastTime:p.created_at,unread:C?1:0})}),Array.from(w.values()).sort((p,m)=>new Date(m.lastTime).getTime()-new Date(p.lastTime).getTime())},[o,d]),f=y.useMemo(()=>h.find(w=>w.id===a)||null,[h,a]),v=y.useMemo(()=>o.filter(w=>w.sender_id===(d==null?void 0:d.id)&&w.receiver_id===a||w.sender_id===a&&w.receiver_id===(d==null?void 0:d.id)),[o,d,a]);y.useEffect(()=>{a&&d&&v.filter(p=>!p.read&&p.receiver_id===d.id).forEach(p=>c(p.id))},[a,v,d,c]);const b=async w=>{if(w.preventDefault(),!(!e.trim()||!u||!a))try{await l(a,e),t("")}catch(p){console.error("Failed to send message:",p)}},g=()=>{r(u?"closed":"open")};return n.jsxs("div",{className:"flex h-[calc(100vh-140px)] flex-col gap-4 md:flex-row",children:[n.jsxs("div",{className:`flex w-full flex-col gap-3 md:w-80 ${f?"hidden md:flex":"flex"}`,children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Messages"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Chat with fans who have joined your FanMeets."})]}),n.jsxs(I,{className:"flex h-full min-h-[260px] flex-col overflow-hidden",children:[n.jsxs($,{className:"flex flex-row items-center justify-between gap-2 border-b border-[#E9ECEF] pb-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#212529]",children:"Conversations"}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Select a fan to view your chat."})]}),n.jsx(T,{type:"button",size:"sm",variant:"secondary",className:"rounded-full px-3 text-[11px]",onClick:g,children:u?"Turn off DMs":"Turn on DMs"})]}),n.jsx(B,{className:"min-h-0 flex-1 gap-2 p-0",children:n.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[h.map(w=>{const p=w.id===a;return n.jsxs("button",{type:"button",onClick:()=>i(w.id),className:`mb-2 flex w-full items-center gap-3 rounded-[12px] border px-3 py-2 text-left text-sm transition-colors ${p?"border-[#C045FF] bg-[#F4E6FF] text-[#140423]":"border-[#E9ECEF] bg-white text-[#212529] hover:border-[#C045FF]/50 hover:bg-[#F8F5FF]"}`,children:[n.jsx(Mt,{src:w.participant.avatar,alt:w.participant.name,initials:w.participant.name.charAt(0),size:"sm"}),n.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"truncate text-[13px] font-semibold",children:w.participant.name}),n.jsx("span",{className:"whitespace-nowrap text-[11px] text-[#6C757D]",children:hr(new Date(w.lastTime),"h:mm a")})]}),n.jsx("span",{className:"mt-0.5 line-clamp-1 text-[12px] text-[#6C757D]",children:w.lastMessage})]}),w.unread>0&&n.jsx("span",{className:"ml-1 inline-flex h-5 min-w-[20px] items-center justify-center rounded-full bg-[#C045FF] px-1 text-[11px] font-semibold text-white",children:w.unread})]},w.id)}),h.length===0&&n.jsx("p",{className:"pt-4 text-center text-xs text-[#6C757D]",children:"No fan conversations yet. Once a fan wins your FanMeet, their chat will appear here."})]})})]})]}),n.jsx(I,{elevated:!0,className:`flex h-full w-full flex-1 flex-col overflow-hidden ${f?"flex":"hidden md:flex"}`,children:f?n.jsxs(n.Fragment,{children:[n.jsxs($,{className:"flex flex-row items-center justify-between gap-3 border-b border-[#E9ECEF] bg-white/80 py-3 backdrop-blur",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"button",className:"flex h-8 w-8 items-center justify-center rounded-full border border-[#E9ECEF] bg-white text-sm text-[#343A40] md:hidden",onClick:()=>i(null),children:""}),n.jsx(Mt,{src:f.participant.avatar,alt:f.participant.name,initials:f.participant.name.charAt(0),size:"sm"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("div",{className:"text-sm font-semibold text-[#212529]",children:f.participant.name}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#6C757D]",children:[n.jsx("span",{className:"h-2 w-2 rounded-full bg-[#C045FF]"}),n.jsx("span",{children:"Fan"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(T,{variant:"ghost",size:"icon",className:"rounded-full border border-[#E9ECEF] bg-white text-[#6C757D]",children:n.jsx(E0,{className:"h-4 w-4","aria-hidden":"true"})}),n.jsx(T,{variant:"ghost",size:"icon",className:"rounded-full border border-[#E9ECEF] bg-white text-[#6C757D]",children:n.jsx(w0,{className:"h-4 w-4","aria-hidden":"true"})})]})]}),n.jsxs(B,{className:"flex min-h-0 flex-1 flex-col p-0",children:[n.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto bg-[#F8F9FA] p-4",children:v.map(w=>{var m;const p=w.sender_id===(d==null?void 0:d.id);return n.jsx("div",{className:`group my-2 flex gap-2 ${p?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`flex max-w-[80%] items-start gap-2 ${p?"flex-row-reverse":"flex-row"}`,children:[n.jsx(Mt,{src:p?`https://api.dicebear.com/9.x/initials/svg?seed=${((m=d==null?void 0:d.user_metadata)==null?void 0:m.full_name)||"Me"}`:f.participant.avatar,alt:p?"Me":f.participant.name,initials:p?"Me":f.participant.name.charAt(0),size:"sm"}),n.jsxs("div",{children:[n.jsx("div",{className:`rounded-2xl px-3 py-2 text-sm ${p?"bg-gradient-to-r from-[#C045FF] via-[#FF6B9D] to-[#8B3FFF] text-white shadow-[0_10px_30px_rgba(0,0,0,0.25)]":"border border-[#E9ECEF] bg-white text-[#212529]"}`,children:w.message}),n.jsxs("div",{className:"mt-1 flex items-center gap-2 text-[11px] text-[#6C757D]",children:[n.jsx("time",{dateTime:w.created_at,children:hr(new Date(w.created_at),"h:mm a")}),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:[n.jsx("button",{type:"button",className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/80 text-[#6C757D] shadow-sm",children:n.jsx(N0,{className:"h-3 w-3","aria-hidden":"true"})}),n.jsx("button",{type:"button",className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/80 text-[#6C757D] shadow-sm",children:n.jsx(y0,{className:"h-3 w-3","aria-hidden":"true"})}),!p&&n.jsx("button",{type:"button",className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/80 text-[#E63946] shadow-sm",children:n.jsx(j0,{className:"h-3 w-3","aria-hidden":"true"})}),p&&n.jsx("button",{type:"button",className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/80 text-[#E63946] shadow-sm",children:n.jsx(_0,{className:"h-3 w-3","aria-hidden":"true"})}),n.jsx("button",{type:"button",className:"flex h-6 w-6 items-center justify-center rounded-full bg-white/80 text-[#6C757D] shadow-sm",children:n.jsx(b0,{className:"h-3 w-3","aria-hidden":"true"})})]})]})]})]})},w.id)})}),n.jsxs("div",{className:"border-t border-[#E9ECEF] bg-white p-3",children:[!u&&n.jsx("p",{className:"mb-2 text-xs font-medium text-[#E63946]",children:"You have turned off direct messages. Fans can still see past messages but cannot send you new DMs."}),n.jsxs("form",{onSubmit:b,className:"flex items-center gap-3",children:[n.jsx("input",{type:"text",value:e,onChange:w=>t(w.target.value),placeholder:u?"Type your message to this fan...":"DMs are currently turned off",disabled:!u,className:"h-11 flex-1 rounded-[12px] border-2 border-[#E9ECEF] bg-white px-4 text-sm text-[#212529] placeholder:text-[#ADB5BD] focus:border-[#C045FF] focus:shadow-[0_0_0_3px_rgba(192,69,255,0.18)] focus:outline-none disabled:cursor-not-allowed disabled:bg-[#F8F9FA]"}),n.jsx(T,{type:"submit",size:"md",disabled:!u||!e.trim(),className:"px-5 text-sm",children:"Send"})]})]})]})]}):n.jsx("div",{className:"flex h-full flex-1 items-center justify-center bg-[#F8F9FA] p-6 text-center text-sm text-[#6C757D]",children:n.jsx("p",{className:"max-w-xs",children:"Select a fan conversation to start messaging. After your next FanMeet, their chat will appear here."})})})]})}const FP={open:"primary",in_progress:"warning",resolved:"success",closed:"danger"};function kP(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState([]),[i,o]=y.useState(""),[l,c]=y.useState(""),[d,u]=y.useState(!1),[h,f]=y.useState(!0),[v,b]=y.useState(null),[g,w]=y.useState(""),[p,m]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!e){f(!1);return}const{data:C,error:E}=await D.from("support_tickets").select("id, subject, description, status, created_at, updated_at").eq("user_id",e.id).order("created_at",{ascending:!1});if(E||!C){console.error("Error fetching support tickets:",E),s([]),f(!1);return}s(C.map(_=>({id:_.id,subject:_.subject,description:_.description,status:_.status,createdAt:_.created_at,updatedAt:_.updated_at}))),f(!1)})()},[e]),y.useEffect(()=>{(async()=>{if(!v){a([]);return}const{data:C,error:E}=await D.from("ticket_replies").select("id, message, is_admin_reply, created_at").eq("ticket_id",v).order("created_at",{ascending:!0});if(E||!C){console.error("Error fetching replies:",E),a([]);return}a(C.map(_=>({id:_.id,message:_.message,isAdminReply:_.is_admin_reply,createdAt:_.created_at})))})()},[v]);const x=async()=>{if(!e||!v||!g.trim()){alert("Please enter a message.");return}m(!0);try{const{error:j}=await D.from("ticket_replies").insert({ticket_id:v,user_id:e.id,message:g.trim(),is_admin_reply:!1});if(j){console.error("Error sending reply:",j),alert("Failed to send reply.");return}a(C=>[...C,{id:`temp-${Date.now()}`,message:g.trim(),isAdminReply:!1,createdAt:new Date().toISOString()}]),w(""),alert("Reply sent! Our support team will respond soon.")}finally{m(!1)}},N=async()=>{if(!e){alert("Please log in to raise a support ticket.");return}if(!i.trim()||!l.trim()){alert("Please enter a subject and description.");return}u(!0);try{const{data:j,error:C}=await D.from("support_tickets").insert({user_id:e.id,subject:i.trim(),description:l.trim(),status:"open"}).select("id, subject, description, status, created_at, updated_at").single();if(C||!j){console.error("Error creating support ticket:",C),alert("Failed to create support ticket.");return}s(E=>[{id:j.id,subject:j.subject,description:j.description,status:j.status,createdAt:j.created_at,updatedAt:j.updated_at},...E]),o(""),c(""),alert("Support ticket created successfully. Our team will get back to you.")}finally{u(!1)}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs(I,{children:[n.jsx($,{title:"Creator Support",subtitle:"Raise a ticket for payout issues, events, or other account questions."}),n.jsxs(B,{className:"gap-4",children:[n.jsx(Re,{label:"Subject",rows:2,placeholder:"Briefly describe your issue",value:i,onChange:j=>o(j.target.value)}),n.jsx(Re,{label:"Details",rows:5,placeholder:"Share as many details as possible, including event names, fans, dates, and screenshots where relevant.",value:l,onChange:j=>c(j.target.value)}),n.jsx(T,{onClick:N,disabled:d,children:d?"Submitting":"Submit Ticket"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Your Tickets",subtitle:"Click a ticket to view the conversation and reply."}),n.jsx(B,{className:"flex flex-col gap-3",children:h?n.jsx("div",{className:"py-4 text-center text-sm text-[#6C757D]",children:"Loading tickets"}):t.length===0?n.jsx("div",{className:"py-4 text-center text-sm text-[#6C757D]",children:"You have not raised any tickets yet."}):t.map(j=>n.jsxs("div",{children:[n.jsxs("button",{type:"button",onClick:()=>b(v===j.id?null:j.id),className:`w-full text-left rounded-[12px] border p-4 text-sm text-[#212529] transition-all ${v===j.id?"border-[#C045FF] bg-[#F4E6FF]/30":"border-[#E9ECEF] bg-white hover:border-[#C045FF]/50"}`,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-semibold",children:j.subject}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:de(j.createdAt)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Q,{variant:FP[j.status],children:j.status.replace("_"," ")}),n.jsx("span",{className:"text-[#6C757D]",children:v===j.id?"":""})]})]}),n.jsx("p",{className:"mt-1 line-clamp-2 text-sm text-[#6C757D] whitespace-pre-line",children:j.description})]}),v===j.id&&n.jsxs("div",{className:"mt-2 ml-4 border-l-2 border-[#C045FF] pl-4 space-y-4",children:[n.jsx("div",{className:"space-y-3",children:r.length===0?n.jsx("p",{className:"text-sm text-[#6C757D] py-2",children:"No replies yet. Our support team will respond soon."}):r.map(C=>n.jsxs("div",{className:`rounded-[10px] p-3 text-sm ${C.isAdminReply?"bg-[#F4E6FF] border-l-4 border-[#C045FF]":"bg-[#F8F9FA]"}`,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsx("span",{className:`font-semibold ${C.isAdminReply?"text-[#C045FF]":"text-[#212529]"}`,children:C.isAdminReply?" Support Team":"You"}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:de(C.createdAt)})]}),n.jsx("p",{className:"text-[#212529] whitespace-pre-line",children:C.message})]},C.id))}),j.status!=="closed"&&j.status!=="resolved"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Re,{label:"Reply to this ticket",rows:3,placeholder:"Type your message...",value:g,onChange:C=>w(C.target.value)}),n.jsx(T,{size:"sm",onClick:x,disabled:p||!g.trim(),children:p?"Sending...":"Send Reply"})]}),(j.status==="closed"||j.status==="resolved")&&n.jsxs("p",{className:"text-sm text-[#6C757D] italic",children:["This ticket is ",j.status,". Create a new ticket if you need further assistance."]})]})]},j.id))})]})]})}function Po(e){const t=new Date,s=new Date(e),r=t.getTime()-s.getTime(),a=Math.floor(r/6e4),i=Math.floor(a/60),o=Math.floor(i/24);return a<1?"just now":a<60?`${a} min${a>1?"s":""} ago`:i<24?`${i} hour${i>1?"s":""} ago`:`${o} day${o>1?"s":""} ago`}function DP(){var x,N;const e=nt(),[t,s]=y.useState(!0),[r,a]=y.useState(new Date),[i,o]=y.useState({totalUsers:0,activeEvents:0,liveNow:0,revenueThisMonth:0,commission:0,creators:0,fans:0,pendingWithdrawals:0,pendingWithdrawalsAmount:0,totalBids:0,bidsToday:0,refundsThisMonth:0}),[l,c]=y.useState({newFansToday:0,newCreatorsToday:0,activeMeetsNow:0,eventsEndingToday:0}),[d,u]=y.useState([]),[h,f]=y.useState([]),[v,b]=y.useState([]),[g,w]=y.useState([]),p=y.useCallback(async()=>{var j;s(!0);try{const C=new Date,E=new Date(C.getFullYear(),C.getMonth(),C.getDate()),_=new Date(C.getFullYear(),C.getMonth(),1),S=new Date(C.getTime()+60*60*1e3),F=new Date(C.getTime()-29*24*60*60*1e3),{count:A}=await D.from("users").select("*",{count:"exact",head:!0}),{count:M}=await D.from("users").select("*",{count:"exact",head:!0}).eq("role","creator"),{count:L}=await D.from("users").select("*",{count:"exact",head:!0}).eq("role","fan"),{count:P}=await D.from("events").select("*",{count:"exact",head:!0}).in("status",["live","upcoming"]),{count:q}=await D.from("events").select("*",{count:"exact",head:!0}).eq("status","live"),{data:Z}=await D.from("bids").select("amount, status, created_at").gte("created_at",_.toISOString()),H=(Z??[]).filter(be=>be.status==="won"),k=(Z??[]).filter(be=>be.status==="lost"),R=H.reduce((be,ke)=>be+(ke.amount??0),0),U=[...H,...k].reduce((be,ke)=>be+(ke.amount??0),0),J=Math.round(U*.1),{data:K}=await D.from("withdrawal_requests").select("amount").in("status",["pending","in_review"]),ae=(K==null?void 0:K.length)??0,oe=(K??[]).reduce((be,ke)=>be+(ke.amount??0),0),{count:le}=await D.from("bids").select("*",{count:"exact",head:!0}),{count:pe}=await D.from("bids").select("*",{count:"exact",head:!0}).gte("created_at",E.toISOString()),{data:ee}=await D.from("wallet_transactions").select("amount").eq("type","bid_refund").gte("created_at",_.toISOString()),W=(ee??[]).reduce((be,ke)=>be+(ke.amount??0),0);o({totalUsers:A??0,activeEvents:P??0,liveNow:q??0,revenueThisMonth:R,commission:J,creators:M??0,fans:L??0,pendingWithdrawals:ae,pendingWithdrawalsAmount:oe,totalBids:le??0,bidsToday:pe??0,refundsThisMonth:W});const{count:se}=await D.from("users").select("*",{count:"exact",head:!0}).eq("role","fan").gte("created_at",E.toISOString()),{count:O}=await D.from("users").select("*",{count:"exact",head:!0}).eq("role","creator").gte("created_at",E.toISOString()),z=new Date(C.getTime()-30*60*1e3),G=new Date(C.getTime()+60*60*1e3),{count:ue}=await D.from("meets").select("*",{count:"exact",head:!0}).eq("status","scheduled").gte("scheduled_at",z.toISOString()).lte("scheduled_at",G.toISOString()),fe=new Date(E.getTime()+24*60*60*1e3),{count:he}=await D.from("events").select("*",{count:"exact",head:!0}).gte("starts_at",E.toISOString()).lt("starts_at",fe.toISOString());c({newFansToday:se??0,newCreatorsToday:O??0,activeMeetsNow:ue??0,eventsEndingToday:he??0});const ie=[],{count:ye}=await D.from("events").select("*",{count:"exact",head:!0}).gte("starts_at",C.toISOString()).lte("starts_at",S.toISOString());(ye??0)>0&&ie.push({id:"events-soon",emoji:"",text:`${ye} event${ye===1?"":"s"} starting in the next hour`,count:ye??0}),ae>0&&ie.push({id:"pending-wd",emoji:"",text:`${ae} withdrawal request${ae===1?"":"s"} awaiting review`,count:ae});const{count:Ne}=await D.from("meets").select("*",{count:"exact",head:!0}).eq("status","completed").gte("updated_at",new Date(C.getTime()-24*60*60*1e3).toISOString());(Ne??0)>0&&ie.push({id:"completed-meets",emoji:"",text:`${Ne} meet${Ne===1?"":"s"} completed in last 24h`,count:Ne??0}),u(ie);const rt=[],{data:fs}=await D.from("events").select("id, title, created_at, creator_id").order("created_at",{ascending:!1}).limit(3);if(fs&&fs.length>0){const be=fs.map(je=>je.creator_id),{data:ke}=await D.from("profiles").select("user_id, username").in("user_id",be),kt=new Map((ke??[]).map(je=>[je.user_id,je.username]));for(const je of fs){const Fs=kt.get(je.creator_id)||"creator";rt.push({id:`event-${je.id}`,emoji:"",text:`New event "${je.title}" by @${Fs}`,time:Po(je.created_at)})}}const{data:Da}=await D.from("users").select("id, email, role, created_at").order("created_at",{ascending:!1}).limit(3);for(const be of Da??[]){const ke=((j=be.email)==null?void 0:j.split("@")[0])||"User";rt.push({id:`user-${be.id}`,emoji:"",text:`New ${be.role} signup: ${ke}`,time:Po(be.created_at)})}const{data:Ws}=await D.from("withdrawal_requests").select("id, amount, requested_at, creator_id").order("requested_at",{ascending:!1}).limit(3);if(Ws&&Ws.length>0){const be=Ws.map(je=>je.creator_id),{data:ke}=await D.from("profiles").select("user_id, username").in("user_id",be),kt=new Map((ke??[]).map(je=>[je.user_id,je.username]));for(const je of Ws){const Fs=kt.get(je.creator_id)||"creator";rt.push({id:`wd-${je.id}`,emoji:"",text:`Withdrawal request: ${V(je.amount)} by @${Fs}`,time:Po(je.requested_at)})}}const{data:ft}=await D.from("meets").select("id, event_id, updated_at").eq("status","completed").order("updated_at",{ascending:!1}).limit(2);if(ft&&ft.length>0){const be=ft.map(je=>je.event_id),{data:ke}=await D.from("events").select("id, title").in("id",be),kt=new Map((ke??[]).map(je=>[je.id,je.title]));for(const je of ft){const Fs=kt.get(je.event_id)||"Event";rt.push({id:`meet-${je.id}`,emoji:"",text:`Meet completed: "${Fs}"`,time:Po(je.updated_at)})}}rt.sort((be,ke)=>0),f(rt.slice(0,8));const{data:no}=await D.from("bids").select("amount, created_at").eq("status","won").gte("created_at",F.toISOString()),Tn=new Map;for(const be of no??[]){const ke=new Date(be.created_at).toISOString().slice(0,10),kt=Tn.get(ke)??0;Tn.set(ke,kt+(be.amount??0))}const ro=[];for(let be=0;be<30;be++){const ke=new Date(F);ke.setDate(F.getDate()+be);const kt=ke.toISOString().slice(0,10);ro.push({date:kt,label:ke.toLocaleDateString("en-IN",{month:"short",day:"2-digit"}),value:Tn.get(kt)??0})}b(ro);const{data:Pn}=await D.from("bids").select("event_id, amount").eq("status","won").gte("created_at",_.toISOString());if(Pn&&Pn.length>0){const be=[...new Set(Pn.map(Ze=>Ze.event_id))],{data:ke}=await D.from("events").select("id, creator_id").in("id",be),kt=new Map((ke??[]).map(Ze=>[Ze.id,Ze.creator_id])),je=new Map;for(const Ze of Pn){const Mn=kt.get(Ze.event_id);if(!Mn)continue;const qs=je.get(Mn)??0;je.set(Mn,qs+(Ze.amount??0))}const Fs=Array.from(je.entries()).sort((Ze,Mn)=>Mn[1]-Ze[1]).slice(0,10),xc=Fs.map(([Ze])=>Ze),{data:gc}=await D.from("profiles").select("user_id, display_name, username").in("user_id",xc),vc=new Map((gc??[]).map(Ze=>[Ze.user_id,Ze])),L0=Fs.map(([Ze,Mn])=>{const qs=vc.get(Ze);return{id:Ze,name:(qs==null?void 0:qs.display_name)||(qs==null?void 0:qs.username)||"Creator",earnings:Mn}});w(L0)}else w([]);a(new Date)}finally{s(!1)}},[]);y.useEffect(()=>{p();const j=setInterval(p,6e4);return()=>clearInterval(j)},[p]);const m=Math.max(...v.map(j=>j.value),1);return n.jsxs("div",{className:"flex flex-col gap-10",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx(Q,{variant:"primary",pill:!1,className:"mb-2 w-fit",children:" Admin Control Center"}),n.jsx("h1",{className:"text-3xl font-semibold text-[#1B1C1F]",children:"Platform Overview"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Real-time glance at health, revenue, and moderation signals across FanMeet."})]}),n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsx(T,{variant:"secondary",size:"sm",onClick:p,disabled:t,children:t?" Refreshing":" Refresh"}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:["Last updated: ",r.toLocaleTimeString()]})]})]}),n.jsxs("section",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:n.jsx("span",{className:"text-sm font-medium text-[#6C757D] uppercase tracking-wide",children:"Total Users"}),className:"pb-2"}),n.jsxs(B,{className:"gap-2",children:[n.jsx("span",{className:"text-3xl font-bold text-[#212529]",children:t?"":i.totalUsers.toLocaleString()}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:[i.fans," fans  ",i.creators," creators"]})]})]}),n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:n.jsx("span",{className:"text-sm font-medium text-[#6C757D] uppercase tracking-wide",children:"Active Events"}),className:"pb-2"}),n.jsxs(B,{className:"gap-2",children:[n.jsx("span",{className:"text-3xl font-bold text-[#212529]",children:t?"":i.activeEvents}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:[i.liveNow," Live Now"]})]})]}),n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:n.jsx("span",{className:"text-sm font-medium text-[#6C757D] uppercase tracking-wide",children:"Winning Bid Volume (This Month)"}),className:"pb-2"}),n.jsx(B,{className:"gap-2",children:n.jsx("span",{className:"text-3xl font-bold text-[#212529]",children:t?"":V(i.revenueThisMonth)})})]}),n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:n.jsx("span",{className:"text-sm font-medium text-[#6C757D] uppercase tracking-wide",children:"Commission (10%)"}),className:"pb-2"}),n.jsx(B,{className:"gap-2",children:n.jsx("span",{className:"text-3xl font-bold text-[#28A745]",children:t?"":V(i.commission)})})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:n.jsx("span",{className:"text-sm font-medium text-[#6C757D] uppercase tracking-wide",children:"Creators"}),className:"pb-2"}),n.jsx(B,{className:"gap-2",children:n.jsx("span",{className:"text-3xl font-bold text-[#212529]",children:t?"":i.creators})})]}),n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:n.jsx("span",{className:"text-sm font-medium text-[#6C757D] uppercase tracking-wide",children:"Pending Withdrawals"}),className:"pb-2"}),n.jsxs(B,{className:"gap-2",children:[n.jsx("span",{className:"text-3xl font-bold text-[#212529]",children:t?"":i.pendingWithdrawals}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:V(i.pendingWithdrawalsAmount)})]})]}),n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:n.jsx("span",{className:"text-sm font-medium text-[#6C757D] uppercase tracking-wide",children:"Total Bids"}),className:"pb-2"}),n.jsxs(B,{className:"gap-2",children:[n.jsx("span",{className:"text-3xl font-bold text-[#212529]",children:t?"":i.totalBids.toLocaleString()}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:["Today: ",i.bidsToday]})]})]}),n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:n.jsx("span",{className:"text-sm font-medium text-[#6C757D] uppercase tracking-wide",children:"Refunds (This Month)"}),className:"pb-2"}),n.jsx(B,{className:"gap-2",children:n.jsx("span",{className:"text-3xl font-bold text-[#212529]",children:t?"":V(i.refundsThisMonth)})})]})]})]}),n.jsxs("section",{className:"grid gap-4 lg:grid-cols-2",children:[n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:"Quick Stats",subtitle:"Operational health snapshots"}),n.jsxs(B,{className:"gap-3",children:[n.jsxs("ul",{className:"flex flex-col gap-2 text-sm text-[#212529]",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"mt-1 text-[#C045FF]",children:""}),n.jsxs("span",{children:["New signups today: ",l.newFansToday," fans, ",l.newCreatorsToday," creators"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"mt-1 text-[#C045FF]",children:""}),n.jsxs("span",{children:["Active meets right now: ",l.activeMeetsNow]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"mt-1 text-[#C045FF]",children:""}),n.jsxs("span",{children:["Events starting today: ",l.eventsEndingToday]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"mt-1 text-[#C045FF]",children:""}),n.jsxs("span",{children:["Pending withdrawals: ",i.pendingWithdrawals]})]})]}),n.jsx(T,{variant:"primary",className:"self-start bg-[#050014] text-white hover:bg-[#140423]",size:"sm",onClick:()=>e("/admin/business-analytics"),children:"View detailed reports "})]})]}),n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:"Alerts & Notifications",subtitle:"Attention-required items"}),n.jsxs(B,{className:"gap-3",children:[n.jsx("div",{className:"flex flex-col gap-3",children:d.length===0?n.jsx("div",{className:"rounded-[12px] border border-[#E9ECEF] bg-[#F8F9FA] px-4 py-3 text-sm text-[#6C757D]",children:" No urgent alerts at this time"}):d.map(j=>n.jsxs("div",{className:"rounded-[12px] border border-[#F4E6FF] bg-[#F4E6FF]/60 px-4 py-3 text-sm text-[#C045FF]",children:[j.emoji," ",j.text]},j.id))}),n.jsx(T,{variant:"primary",size:"sm",className:"self-start bg-[#050014] text-white hover:bg-[#140423]",onClick:()=>e("/admin/withdrawals"),children:"Review withdrawals"})]})]})]}),n.jsxs("section",{className:"grid gap-4 xl:grid-cols-2",children:[n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:"Revenue Trend",subtitle:"Total Revenue  Last 30 days"}),n.jsxs(B,{children:[n.jsx("div",{className:"flex h-48 items-end gap-1",children:v.map(j=>n.jsx("div",{className:"group relative flex-1",title:`${j.label}: ${V(j.value)}`,children:n.jsx("div",{className:"w-full rounded-t bg-[#C045FF] transition-all hover:bg-[#A030DD]",style:{height:`${Math.max(j.value/m*100,2)}%`,minHeight:j.value>0?"4px":"2px"}})},j.date))}),n.jsxs("div",{className:"mt-2 flex justify-between text-xs text-[#6C757D]",children:[n.jsx("span",{children:(x=v[0])==null?void 0:x.label}),n.jsx("span",{children:(N=v[v.length-1])==null?void 0:N.label})]})]})]}),n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:"Top Creators by Revenue",subtitle:"Top 10 creators this month"}),n.jsx(B,{children:g.length===0?n.jsx("div",{className:"flex h-48 items-center justify-center text-sm text-[#6C757D]",children:"No creator earnings this month yet"}):n.jsx("div",{className:"flex flex-col gap-2",children:g.map((j,C)=>n.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-[#E9ECEF] bg-white px-3 py-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-[#F4E6FF] text-xs font-bold text-[#C045FF]",children:C+1}),n.jsx("span",{className:"text-sm font-medium text-[#212529]",children:j.name})]}),n.jsx("span",{className:"text-sm font-semibold text-[#28A745]",children:V(j.earnings)})]},j.id))})})]})]}),n.jsxs("section",{className:"grid gap-4 xl:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:"Recent Activity",subtitle:"Latest admin, user, and system events"}),n.jsx(B,{className:"divide-y divide-[#F0F1F3]",children:h.length===0?n.jsx("div",{className:"py-4 text-center text-sm text-[#6C757D]",children:"No recent activity"}):h.map(j=>n.jsx("div",{className:"flex items-center justify-between py-3 text-sm text-[#212529]",children:n.jsxs("span",{children:[j.emoji," ",j.text,n.jsxs("span",{className:"ml-2 text-xs text-[#6C757D]",children:["(",j.time,")"]})]})},j.id))})]}),n.jsxs(I,{className:"border-[#F0F1F3] bg-white",children:[n.jsx($,{title:"Quick Actions",subtitle:"Jump to critical modules"}),n.jsxs(B,{className:"gap-3",children:[n.jsx(T,{variant:"primary",size:"sm",className:"justify-start gap-2 bg-[#050014] text-white hover:bg-[#140423]",onClick:()=>e("/admin/audit-logs"),children:" Review audit logs"}),n.jsx(T,{variant:"primary",size:"sm",className:"justify-start gap-2 bg-[#050014] text-white hover:bg-[#140423]",onClick:()=>e("/admin/support-tickets"),children:" Open support queue"}),n.jsx(T,{variant:"primary",size:"sm",className:"justify-start gap-2 bg-[#050014] text-white hover:bg-[#140423]",onClick:()=>e("/admin/withdrawals"),children:" Review withdrawals"}),n.jsx(T,{variant:"primary",size:"sm",className:"justify-start gap-2 bg-[#050014] text-white hover:bg-[#140423]",onClick:()=>e("/admin/revenue-reports"),children:" Export revenue summary"})]})]})]})]})}const AP=[{label:"All",value:"all"},{label:"Fans",value:"fan"},{label:"Creators",value:"creator"},{label:"Admins",value:"admin"}],TP=[{label:"All",value:"all"},{label:"Active",value:"active"},{label:"Suspended",value:"suspended"},{label:"Banned",value:"banned"}];function PP(){const[e,t]=y.useState([]),[s,r]=y.useState(!1),[a,i]=y.useState(""),[o,l]=y.useState("all"),[c,d]=y.useState("all"),[u,h]=y.useState(null);y.useEffect(()=>{(async()=>{r(!0);try{const{data:w,error:p}=await D.from("users").select("id, email, display_name, role, account_status, created_at, updated_at");if(p||!w){console.error("Error fetching users:",p),t([]);return}const{data:m}=await D.from("bids").select("event_id, fan_id, amount, status").eq("status","won"),x=new Map;for(const _ of m??[]){const S=x.get(_.fan_id)??0;x.set(_.fan_id,S+(_.amount??0))}const{data:N}=await D.from("events").select("id, creator_id"),j=new Map((N??[]).map(_=>[_.id,_.creator_id])),C=new Map;for(const _ of m??[]){const S=j.get(_.event_id);if(!S)continue;const F=C.get(S)??0;C.set(S,F+(_.amount??0))}const E=w.map(_=>{const S=_.display_name||(_.email?_.email.split("@")[0]:"User"),F=_.role,A=_.account_status??"active",M=x.get(_.id)??0,L=C.get(_.id)??0;return{id:_.id,email:_.email,displayName:S,role:F,accountStatus:A,joinedAt:_.created_at,lastActiveAt:_.updated_at,totalAmount:F==="fan"?M:F==="creator"?L:0}});t(E),E.length>0&&!u&&h(E[0].id)}finally{r(!1)}})()},[u]);const f=y.useMemo(()=>{const g=a.trim().toLowerCase();return e.filter(w=>o!=="all"&&w.role!==o||c!=="all"&&w.accountStatus!==c?!1:g?w.displayName.toLowerCase().includes(g)||w.email.toLowerCase().includes(g)||w.id.toLowerCase().includes(g):!0)},[e,a,o,c]),v=y.useMemo(()=>e.find(g=>g.id===u)??null,[e,u]),b=async(g,w)=>{const p={active:"Activate",suspended:"Suspend",banned:"Ban"};if(window.confirm(`${p[w]} ${g.displayName}? This will update their account status.`)){r(!0);try{const{error:x}=await D.from("users").update({account_status:w}).eq("id",g.id);if(x){console.error("Error updating account status:",x),alert("Failed to update account status.");return}t(N=>N.map(j=>j.id===g.id?{...j,accountStatus:w}:j))}finally{r(!1)}}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"All Users"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Search, filter, and take bulk actions across the entire user base."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",disabled:!0,children:"Export CSV"}),n.jsx(T,{disabled:!0,children:"Send Notification"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Filters",subtitle:"Refine the user list by role, status, or activity."}),n.jsxs(B,{className:"grid gap-4 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Search",placeholder:"Name, email, or ID",value:a,onChange:g=>i(g.target.value)}),n.jsx(te,{label:"Registration Date",placeholder:"(coming soon)",disabled:!0}),n.jsx(te,{label:"Last Active",placeholder:"(coming soon)",disabled:!0}),n.jsx(te,{label:"Verification",placeholder:"(coming soon)",disabled:!0})]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Roles"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:AP.map(g=>n.jsx("button",{className:`rounded-full border px-3 py-1 text-xs font-medium ${o===g.value?"border-[#C045FF] bg-[#F4E6FF] text-[#C045FF]":"border-[#E9ECEF] bg-white text-[#6C757D] hover:border-[#C045FF]/40"}`,type:"button",onClick:()=>l(g.value),children:g.label},g.value))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Status"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:TP.map(g=>n.jsx("button",{className:`rounded-full border px-3 py-1 text-xs font-medium ${c===g.value?"border-[#C045FF] bg-[#F4E6FF] text-[#C045FF]":"border-[#E9ECEF] bg-white text-[#6C757D] hover:border-[#C045FF]/40"}`,type:"button",onClick:()=>d(g.value),children:g.label},g.value))})]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Users",subtitle:"Bulk manage accounts and view key metrics."}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Select"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Name"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Email"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Role"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Joined"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Last Active"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Total Spent / Earned"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Actions"})]})}),n.jsxs("tbody",{children:[f.map(g=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3",children:n.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-[#CED4DA]"})}),n.jsx("td",{className:"py-3 text-[#212529]",children:g.displayName}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:g.email}),n.jsx("td",{className:"py-3 text-[#212529]",children:g.role}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:g.accountStatus==="active"?"success":g.accountStatus==="suspended"?"warning":"danger",children:g.accountStatus==="active"?"Active":g.accountStatus==="suspended"?"Suspended":"Banned"})}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:de(g.joinedAt)}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:g.lastActiveAt?de(g.lastActiveAt):""}),n.jsx("td",{className:"py-3 text-[#212529]",children:g.totalAmount>0?V(g.totalAmount):""}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>h(g.id),children:"View"}),g.accountStatus!=="banned"&&n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>b(g,g.accountStatus==="suspended"?"active":"suspended"),children:g.accountStatus==="suspended"?"Unsuspend":"Suspend"}),g.accountStatus==="banned"?n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>b(g,"active"),children:"Unban"}):n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>b(g,"banned"),children:"Ban"})]})})]},g.id)),f.length===0&&!s&&n.jsx("tr",{children:n.jsx("td",{colSpan:9,className:"py-6 text-center text-sm text-[#6C757D]",children:"No users match your filters."})})]})]})})]}),n.jsxs(I,{children:[n.jsx($,{title:v?`User Detail  ${v.displayName}`:"User Detail",subtitle:"Full profile view for context and actions."}),n.jsx(B,{className:"grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:v?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-4 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsxs("div",{className:"grid gap-2 text-sm text-[#212529] md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Email"}),n.jsx("p",{children:v.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Role"}),n.jsx(Q,{variant:"primary",children:v.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Joined"}),n.jsx("p",{children:de(v.joinedAt)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Last Active"}),n.jsx("p",{children:v.lastActiveAt?de(v.lastActiveAt):""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Status"}),n.jsx(Q,{variant:v.accountStatus==="active"?"success":v.accountStatus==="suspended"?"warning":"danger",children:v.accountStatus==="active"?"Active":v.accountStatus==="suspended"?"Suspended":"Banned"})]})]}),n.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:n.jsxs("div",{className:"rounded-[12px] bg-white p-4 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:v.role==="fan"?"Total Spent":v.role==="creator"?"Total Earned":"Total Volume"}),n.jsx("p",{className:"text-xl font-semibold",children:v.totalAmount>0?V(v.totalAmount):""})]})})]}),n.jsxs("div",{className:"flex flex-col gap-4 rounded-[16px] border border-[#E9ECEF] bg-white p-6 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:"Admin Actions"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(T,{variant:"secondary",onClick:()=>b(v,v.accountStatus==="active"?"suspended":"active"),children:v.accountStatus==="suspended"?"Unsuspend Account":"Suspend Account"}),n.jsx(T,{variant:"danger",onClick:()=>b(v,"banned"),children:"Ban Account"})]})]})]}):n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Select a user from the table above to view details."})})]})]})}const MP=[{label:"All",value:"all"},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Rejected",value:"rejected"}],rg={pending:"primary",approved:"success",rejected:"danger"},ag={pending:"Pending",approved:"Approved",rejected:"Rejected"};function RP(){const[e,t]=y.useState([]),[s,r]=y.useState(!1),[a,i]=y.useState(""),[o,l]=y.useState("all"),[c,d]=y.useState(null),u=async()=>{r(!0);try{const{data:p,error:m}=await D.from("users").select("id, email, display_name, role, creator_profile_status, created_at").eq("role","creator");if(m||!p||p.length===0){m&&console.error("Error fetching creators:",m),t([]);return}const x=p.map(L=>L.id);let N=[];if(x.length>0){const{data:L}=await D.from("profiles").select("user_id, username, display_name, bio").in("user_id",x);N=L??[]}const j=new Map(N.map(L=>[L.user_id,L]));let C=[];if(x.length>0){const{data:L}=await D.from("creator_settings").select("user_id, phone_number").in("user_id",x);C=L??[]}const E=new Map(C.map(L=>[L.user_id,L]));let _=[];if(x.length>0){const{data:L}=await D.from("linked_channels").select("user_id, platform, handle").in("user_id",x);_=L??[]}const S=new Map;for(const L of _){const P=S.get(L.user_id)??{};L.platform==="instagram"?P.instagram=L.handle:L.platform==="youtube"&&(P.youtube=L.handle),S.set(L.user_id,P)}let F=[];if(x.length>0){const{data:L}=await D.from("events").select("id, creator_id").in("creator_id",x);F=L??[]}const A=new Map;for(const L of F){const P=L.creator_id;A.set(P,(A.get(P)??0)+1)}const M=p.map(L=>{const P=j.get(L.id),q=E.get(L.id),Z=S.get(L.id)??{},H=(P==null?void 0:P.display_name)||L.display_name||(L.email?L.email.split("@")[0]:"Creator"),k=P!=null&&P.username?`@${P.username}`:"@creator",R=L.creator_profile_status??"pending";return{id:L.id,name:H,username:k,email:L.email,joinedAt:L.created_at,status:R,phone:(q==null?void 0:q.phone_number)??null,bio:(P==null?void 0:P.bio)??null,instagram:Z.instagram??null,youtube:Z.youtube??null,totalEvents:A.get(L.id)??0}});t(M),d(L=>{var P;return L??((P=M[0])==null?void 0:P.id)??null})}finally{r(!1)}};y.useEffect(()=>{u()},[]);const h=y.useMemo(()=>{const p=a.trim().toLowerCase();return e.filter(m=>o!=="all"&&m.status!==o?!1:p?m.name.toLowerCase().includes(p)||m.email.toLowerCase().includes(p)||m.username.toLowerCase().includes(p):!0)},[e,a,o]),f=y.useMemo(()=>h.filter(p=>p.status==="pending"),[h]),v=y.useMemo(()=>h.filter(p=>p.status==="approved"),[h]),b=y.useMemo(()=>h.find(p=>p.id===c)??null,[h,c]),g=async(p,m)=>{if(window.confirm(`${m==="approved"?"Approve":"Reject"} ${p.name}?`)){r(!0);try{const{error:N}=await D.from("users").update({creator_profile_status:m}).eq("id",p.id);if(N){console.error("Error updating creator status:",N),alert("Failed to update creator status.");return}const{error:j}=await D.from("profiles").update({creator_profile_status:m}).eq("user_id",p.id);j&&console.error("Error updating creator status on profile:",j),t(C=>C.map(E=>E.id===p.id?{...E,status:m}:E))}finally{r(!1)}}},w=p=>{try{return new Date(p).toLocaleDateString("en-IN",{month:"short",day:"2-digit",year:"numeric"})}catch{return p}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Creator Approvals"}),n.jsx("p",{className:"text-sm text-[#ADB5BD]",children:"Review new applications and manage existing creators."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",disabled:s,children:"Export"}),n.jsx(T,{disabled:s,children:"Invite Creator"})]})]}),n.jsxs(I,{className:"bg-[#2C2F33] text-white",children:[n.jsx($,{title:"Filters",subtitle:"Search and filter creators by status.",className:"border-b border-[#3A3D42]"}),n.jsxs(B,{className:"grid gap-4 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.jsx(te,{label:"Search",placeholder:"Name, username, or email",value:a,onChange:p=>i(p.target.value)})}),n.jsx("div",{className:"flex flex-col gap-3",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#ADB5BD]",children:"Status"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:MP.map(p=>n.jsx("button",{type:"button",onClick:()=>l(p.value),className:`rounded-full border px-3 py-1 font-medium ${o===p.value?"border-[#C045FF] bg-[#3A1B4D] text-[#F7E9FF]":"border-[#3A3D42] bg-[#1F2124] text-[#ADB5BD] hover:border-[#C045FF]/60"}`,children:p.label},p.value))})]})})]})]}),n.jsxs(I,{className:"bg-[#2C2F33] text-white",children:[n.jsx($,{title:"Pending Approval",subtitle:"Creators awaiting manual review before onboarding",className:"border-b border-[#3A3D42]"}),n.jsx(B,{className:"gap-6",children:s&&f.length===0?n.jsx("p",{className:"text-sm text-[#ADB5BD]",children:"Loading pending creators"}):f.length===0?n.jsx("p",{className:"text-sm text-[#ADB5BD]",children:"No creators pending approval."}):f.map(p=>n.jsxs("div",{className:"rounded-[16px] border border-[#3A3D42] bg-[#1F2124] p-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-semibold",children:p.name}),n.jsx("div",{className:"text-sm text-[#ADB5BD]",children:p.username})]}),n.jsxs(Q,{variant:"primary",children:["Joined ",w(p.joinedAt)]})]}),n.jsxs("div",{className:"mt-4 grid gap-3 text-sm text-[#ADB5BD] md:grid-cols-2",children:[n.jsxs("div",{children:["Email: ",p.email]}),n.jsxs("div",{children:["Phone: ",p.phone??"Not provided"]}),n.jsxs("div",{className:"md:col-span-2",children:["Bio: ",p.bio??"Not provided"]}),n.jsxs("div",{children:[" Instagram: ",p.instagram??"Not linked"]}),n.jsxs("div",{children:[" YouTube: ",p.youtube??"Not linked"]})]}),n.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[n.jsx(T,{variant:"danger",onClick:()=>g(p,"rejected"),disabled:s,children:" Reject"}),n.jsx(T,{onClick:()=>g(p,"approved"),disabled:s,children:" Approve"}),n.jsx(T,{variant:"secondary",onClick:()=>d(p.id),disabled:s,children:"View details"})]})]},p.id))})]}),n.jsxs(I,{className:"bg-[#2C2F33] text-white",children:[n.jsx($,{title:"Approved Creators"}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#ADB5BD]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#3A3D42] py-3",children:"Creator"}),n.jsx("th",{className:"border-b border-[#3A3D42] py-3",children:"Username"}),n.jsx("th",{className:"border-b border-[#3A3D42] py-3",children:"Status"}),n.jsx("th",{className:"border-b border-[#3A3D42] py-3",children:"Events"}),n.jsx("th",{className:"border-b border-[#3A3D42] py-3",children:"Joined"}),n.jsx("th",{className:"border-b border-[#3A3D42] py-3",children:"Actions"})]})}),n.jsxs("tbody",{children:[v.map(p=>n.jsxs("tr",{className:"border-b border-[#3A3D42]",children:[n.jsx("td",{className:"py-3 text-white",children:p.name}),n.jsx("td",{className:"py-3 text-[#ADB5BD]",children:p.username}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:rg[p.status],children:ag[p.status]})}),n.jsx("td",{className:"py-3 text-white",children:p.totalEvents}),n.jsx("td",{className:"py-3 text-[#ADB5BD]",children:w(p.joinedAt)}),n.jsx("td",{className:"py-3",children:n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>d(p.id),disabled:s,children:"View"})})]},p.id)),v.length===0&&!s&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-4 text-center text-sm text-[#ADB5BD]",children:"No approved creators yet."})})]})]})})]}),n.jsxs(I,{className:"bg-[#2C2F33] text-white",children:[n.jsx($,{title:b?`Creator Detail  ${b.name}`:"Creator Detail",subtitle:"Full profile view and admin actions for this creator.",className:"border-b border-[#3A3D42]"}),n.jsx(B,{className:"grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:b?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-4 rounded-[16px] border border-[#3A3D42] bg-[#1F2124] p-6",children:[n.jsxs("div",{className:"grid gap-3 text-sm text-[#ADB5BD] md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Email"}),n.jsx("p",{className:"text-white",children:b.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Username"}),n.jsx("p",{className:"text-white",children:b.username})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Status"}),n.jsx(Q,{variant:rg[b.status],children:ag[b.status]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Joined"}),n.jsx("p",{className:"text-white",children:w(b.joinedAt)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Total Events"}),n.jsx("p",{className:"text-white",children:b.totalEvents})]})]}),n.jsxs("div",{className:"grid gap-3 text-sm text-[#ADB5BD]",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Phone"}),n.jsx("p",{className:"text-white",children:b.phone??"Not provided"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Instagram"}),n.jsx("p",{className:"text-white",children:b.instagram??"Not linked"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"YouTube"}),n.jsx("p",{className:"text-white",children:b.youtube??"Not linked"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Bio"}),n.jsx("p",{className:"text-white",children:b.bio??"Not provided"})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4 rounded-[16px] border border-[#3A3D42] bg-[#1F2124] p-6 text-sm text-white",children:[n.jsx("p",{className:"text-[#ADB5BD]",children:"Admin Actions"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[b.status!=="approved"&&n.jsx(T,{onClick:()=>g(b,"approved"),disabled:s,children:"Approve Creator"}),b.status!=="rejected"&&n.jsx(T,{variant:"danger",onClick:()=>g(b,"rejected"),disabled:s,children:"Reject Creator"})]})]})]}):n.jsx("p",{className:"text-sm text-[#ADB5BD]",children:"Select a creator from the list above to view details."})})]})]})}const ig={segments:["High Spenders","Active Bidders","Inactive","Multiple Wins","Never Won","Refund Issues"],sortOptions:["Total Spent","Number of Bids","Wins Count","Join Date","Last Activity"]};function LP(e){if(!e)return"No bids yet";const t=new Date(e),r=new Date().getTime()-t.getTime(),a=Math.floor(r/(1e3*60));if(a<1)return"Just now";if(a<60)return`${a} min ago`;const i=Math.floor(a/60);return i<24?`${i} h ago`:`${Math.floor(i/24)} d ago`}function og(e,t,s,r){const a=t.find(w=>w.id===e);if(!a)return null;const i=s.filter(w=>w.fanId===e),o=i.length,l=i.reduce((w,p)=>w+(p.amount??0),0),c=i.reduce((w,p)=>Math.max(w,p.amount??0),0),d=i.filter(w=>w.status==="won").length,u=o>0?Math.round(d/o*100):0,h=i.filter(w=>w.status==="lost").reduce((w,p)=>w+Math.floor((p.amount??0)*.9),0),f=new Map;for(const w of i){const p=r[w.eventId],m=(p==null?void 0:p.category)||"General";f.set(m,(f.get(m)??0)+1)}const v=Array.from(f.entries()).sort((w,p)=>p[1]-w[1]).slice(0,3).map(([w])=>w),b=v.length>0?v.join(", "):"No data yet",g=i.slice().sort((w,p)=>new Date(p.createdAt).getTime()-new Date(w.createdAt).getTime()).slice(0,5).map(w=>{const p=r[w.eventId],x=new Date(w.createdAt).toLocaleDateString("en-IN",{month:"short",day:"2-digit"});let N;return w.status==="won"?N=" Won":w.status==="lost"?N=" Lost":w.status==="cancelled"?N="Cancelled":N=w.status,{date:x,event:(p==null?void 0:p.title)??"Event",amountLabel:V(w.amount??0),resultLabel:N}});return{profile:{id:a.id,code:a.code,name:a.name,email:a.email,phone:null,joinDate:de(a.joinedAt),preferredEvents:b,status:a.status,isVip:a.isVip,isFlagged:a.isFlagged},spending:{averageBid:o>0?l/o:0,highestBid:c,winRate:u,refundsTotal:h},bidHistory:g}}function IP(){const[e,t]=y.useState([]),[s,r]=y.useState([]),[a,i]=y.useState({}),[o,l]=y.useState(null),[c,d]=y.useState(null),[u,h]=y.useState(!1),[f,v]=y.useState("");y.useEffect(()=>{(async()=>{var j;h(!0);try{const{data:C,error:E}=await D.from("users").select("id, email, display_name, account_status, created_at, updated_at, is_vip, is_flagged_for_review").eq("role","fan");if(E||!C){console.error("Error fetching fans:",E),t([]),r([]),i({}),l(null),d(null);return}const{data:_}=await D.from("bids").select("id, event_id, fan_id, amount, status, created_at"),S=(_??[]).map(k=>({id:k.id,fanId:k.fan_id,eventId:k.event_id,amount:k.amount??0,status:k.status,createdAt:k.created_at})),F=Array.from(new Set(S.map(k=>k.eventId).filter(Boolean))),{data:A}=F.length?await D.from("events").select("id, title, category").in("id",F):{data:null},M={};for(const k of A??[])M[k.id]={id:k.id,title:k.title,category:k.category};const L=new Map;for(const k of S){const R=L.get(k.fanId)??[];R.push(k),L.set(k.fanId,R)}const P=new Date,q=C.map(k=>{const R=L.get(k.id)??[],U=R.filter(W=>W.status==="won").reduce((W,se)=>W+(se.amount??0),0),J=R.length,K=R.filter(W=>W.status==="won").length,ae=R.reduce((W,se)=>W?new Date(se.createdAt)>new Date(W.createdAt)?se:W:se,null),oe=ae?ae.createdAt:null;let le="Inactive";if(!oe)le="Inactive";else{const W=(P.getTime()-new Date(oe).getTime())/864e5;W<=7?le="Active":W<=30?le="At risk":le="Inactive"}const pe=`#F-${String(k.id).slice(0,4).toUpperCase()}`,ee=k.display_name||(k.email?k.email.split("@")[0]:"Fan");return{id:k.id,code:pe,name:ee,email:k.email,totalSpent:U,bids:J,wins:K,lastBidAt:oe,status:le,joinedAt:k.created_at,isVip:k.is_vip??!1,isFlagged:k.is_flagged_for_review??!1}});q.sort((k,R)=>R.totalSpent-k.totalSpent);const Z=((j=q[0])==null?void 0:j.id)??null,H=Z?og(Z,q,S,M):null;t(q),r(S),i(M),l(Z),d(H)}finally{h(!1)}})()},[]);const b=y.useMemo(()=>{const N=f.trim().toLowerCase();let j=[...e];return N&&(j=j.filter(C=>C.name.toLowerCase().includes(N)||C.email.toLowerCase().includes(N)||C.code.toLowerCase().includes(N))),j.sort((C,E)=>E.totalSpent-C.totalSpent),j},[e,f]),g=N=>{l(N);const j=og(N,e,s,a);d(j)},w=async(N,j)=>{const C=window.prompt(`Enter offer amount () to send to ${j}:`,"100");if(!C)return;const E=parseInt(C,10);if(isNaN(E)||E<=0){alert("Please enter a valid amount.");return}h(!0);try{const{error:_}=await D.from("fan_offers").insert({fan_id:N,offer_type:"discount",offer_details:`${E} discount offer`,status:"pending",expires_at:new Date(Date.now()+6048e5).toISOString()});if(_){console.error("Error creating offer:",_),alert("Failed to send offer.");return}alert(`Offer of ${E} sent to ${j}!`)}finally{h(!1)}},p=async()=>{if(!o||!c)return;const N=window.prompt(`Enter loyalty reward amount () to add to ${c.profile.name}'s wallet:`,"500");if(!N)return;const j=parseInt(N,10);if(isNaN(j)||j<=0){alert("Please enter a valid amount.");return}h(!0);try{const{error:C}=await D.from("loyalty_rewards").insert({fan_id:o,reward_type:"credits",amount:j,description:`Loyalty reward of ${j}`});if(C){console.error("Error creating loyalty reward:",C),alert("Failed to create loyalty reward record.");return}const{data:E}=await D.from("wallets").select("id, balance").eq("user_id",o).maybeSingle();E?await D.from("wallets").update({balance:(E.balance??0)+j}).eq("id",E.id):await D.from("wallets").insert({user_id:o,balance:j}),alert(`Loyalty reward of ${j} added to ${c.profile.name}'s wallet!`)}finally{h(!1)}},m=async()=>{if(!o||!c)return;const N=c.profile.isVip,j=N?"remove VIP status from":"grant VIP status to";if(window.confirm(`${j} ${c.profile.name}?`)){h(!0);try{const{error:E}=await D.from("users").update({is_vip:!N}).eq("id",o);if(E){console.error("Error updating VIP status:",E),alert("Failed to update VIP status.");return}t(_=>_.map(S=>S.id===o?{...S,isVip:!N}:S)),d(_=>_?{..._,profile:{..._.profile,isVip:!N}}:null),alert(`${c.profile.name} ${N?"removed from":"marked as"} VIP!`)}finally{h(!1)}}},x=async()=>{if(!o||!c)return;const N=c.profile.isFlagged;let j=null;if(N){if(!window.confirm(`Remove flag from ${c.profile.name}?`))return}else if(j=window.prompt("Enter reason for flagging this fan for review:"),j===null)return;h(!0);try{const{error:C}=await D.from("users").update({is_flagged_for_review:!N,flagged_reason:N?null:j}).eq("id",o);if(C){console.error("Error updating flag status:",C),alert("Failed to update flag status.");return}t(E=>E.map(_=>_.id===o?{..._,isFlagged:!N}:_)),d(E=>E?{...E,profile:{...E.profile,isFlagged:!N}}:null),alert(`${c.profile.name} ${N?"unflagged":"flagged for review"}!`)}finally{h(!1)}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Fans Management"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Surface high-value fans, address churn risk, and track spending patterns."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",children:"Create Segment"}),n.jsx(T,{children:"Send Campaign"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Filters",subtitle:"Mix and match segments to focus on specific fan cohorts."}),n.jsxs(B,{className:"grid gap-4 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Search Fans",placeholder:"Name, email, or ID",value:f,onChange:N=>v(N.target.value)}),n.jsx(te,{label:"Date Range",placeholder:"Last activity"}),n.jsx(te,{label:"Total Spent",placeholder:"> 5,000"}),n.jsx(te,{label:"Win Rate",placeholder:"> 20%"})]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Segments"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:ig.segments.map(N=>n.jsx(Q,{variant:"primary",children:N},N))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Sort By"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:ig.sortOptions.map(N=>n.jsx(Q,{variant:"warning",children:N},N))})]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Fan Leaderboard",subtitle:"Compare engagement, wins, and spend at a glance."}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Fan"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Email"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Total Spent"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Bids"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Wins"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Last Bid"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Actions"})]})}),n.jsx("tbody",{children:b.map(N=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#212529]",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("span",{className:"font-medium",children:[N.name,N.isVip&&n.jsx("span",{className:"ml-1 text-xs text-[#FFD700]",children:" VIP"}),N.isFlagged&&n.jsx("span",{className:"ml-1 text-xs text-[#DC3545]",children:""})]}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:N.code})]})}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:N.email}),n.jsx("td",{className:"py-3 text-[#212529]",children:V(N.totalSpent)}),n.jsx("td",{className:"py-3 text-[#212529]",children:N.bids}),n.jsx("td",{className:"py-3 text-[#212529]",children:N.wins}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:LP(N.lastBidAt)}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:N.status==="Active"?"success":N.status==="At risk"?"warning":"danger",children:N.status})}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>g(N.id),children:"View Profile"}),n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>w(N.id,N.name),disabled:u,children:"Send Offer"})]})})]},N.id))})]})})]}),n.jsxs(I,{children:[n.jsx($,{title:"Fan Detail",subtitle:"Deep dive into engagement and outcomes for a specific fan."}),n.jsx(B,{className:"grid gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:c?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-4 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6 text-sm text-[#212529]",children:[n.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Name / ID"}),n.jsx("p",{children:c.profile.name}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:c.profile.code})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Email"}),n.jsx("p",{children:c.profile.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Phone"}),n.jsx("p",{children:c.profile.phone??"Not provided"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Joined"}),n.jsx("p",{children:c.profile.joinDate})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Status"}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsx(Q,{variant:c.profile.status==="Active"?"success":c.profile.status==="At risk"?"warning":"danger",children:c.profile.status}),c.profile.isVip&&n.jsx(Q,{variant:"warning",children:" VIP"}),c.profile.isFlagged&&n.jsx(Q,{variant:"danger",children:" Flagged"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Preferences"}),n.jsx("p",{children:c.profile.preferredEvents})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-[#6C757D]",children:"Spending Pattern"}),n.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[n.jsxs("div",{className:"rounded-[12px] bg-white p-4",children:[n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Average Bid"}),n.jsx("p",{className:"text-lg font-semibold",children:V(c.spending.averageBid)})]}),n.jsxs("div",{className:"rounded-[12px] bg-white p-4",children:[n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Highest Bid"}),n.jsx("p",{className:"text-lg font-semibold",children:V(c.spending.highestBid)})]}),n.jsxs("div",{className:"rounded-[12px] bg-white p-4",children:[n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Win Rate"}),n.jsxs("p",{className:"text-lg font-semibold",children:[c.spending.winRate,"%"]})]}),n.jsxs("div",{className:"rounded-[12px] bg-white p-4",children:[n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Refunds"}),n.jsx("p",{className:"text-lg font-semibold",children:V(c.spending.refundsTotal)})]})]})]})]}),n.jsxs("div",{className:"space-y-4 rounded-[16px] border border-[#E9ECEF] bg-white p-6 text-sm text-[#212529]",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Recent Bid History"}),n.jsx("ul",{className:"mt-2 space-y-2",children:c.bidHistory.map(N=>n.jsxs("li",{className:"flex items-center justify-between rounded-[10px] bg-[#F8F9FA] px-3 py-2",children:[n.jsxs("span",{children:[n.jsx("strong",{children:N.date}),"  ",N.event]}),n.jsxs("span",{children:[N.amountLabel," ",N.resultLabel]})]},`${N.date}-${N.event}-${N.amountLabel}`))})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(T,{variant:"secondary",onClick:p,disabled:u,children:" Send Loyalty Reward"}),n.jsx(T,{variant:c.profile.isVip?"ghost":"primary",onClick:m,disabled:u,children:c.profile.isVip?" Remove VIP":" Mark as VIP"}),n.jsx(T,{variant:c.profile.isFlagged?"secondary":"danger",onClick:x,disabled:u,children:c.profile.isFlagged?" Unflag":" Flag for Review"})]})]})]}):n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Select a fan from the leaderboard above to view detailed stats."})})]})]})}const OP={live:{label:" LIVE",variant:"danger"},upcoming:{label:" Upcoming",variant:"primary"},completed:{label:" Completed",variant:"success"},cancelled:{label:" Cancelled",variant:"danger"},draft:{label:" Draft",variant:"warning"}};function BP(){const[e,t]=y.useState([]),[s,r]=y.useState(null),[a,i]=y.useState(!1),[o,l]=y.useState(""),[c,d]=y.useState("all"),u=async()=>{i(!0);try{const{data:w,error:p}=await D.from("events").select("id, creator_id, title, description, status, base_price, starts_at, duration_minutes, category, meeting_link").order("created_at",{ascending:!1});if(p||!w){console.error("Error fetching events:",p),t([]);return}const m=Array.from(new Set(w.map(_=>_.creator_id))),{data:x}=await D.from("profiles").select("user_id, display_name, username").in("user_id",m),N=new Map;for(const _ of x??[])N.set(_.user_id,{displayName:_.display_name||_.username||"Creator",username:_.username||"creator"});const{data:j}=await D.from("bids").select("event_id, amount"),C=new Map;for(const _ of j??[]){const S=C.get(_.event_id)??{count:0,highest:0};C.set(_.event_id,{count:S.count+1,highest:Math.max(S.highest,_.amount??0)})}const E=w.map(_=>{const S=N.get(_.creator_id),F=C.get(_.id)??{count:0,highest:0};return{id:_.id,code:`#E-${_.id.slice(0,4).toUpperCase()}`,creatorId:_.creator_id,creatorName:(S==null?void 0:S.displayName)??"Unknown",title:_.title,status:_.status,bidsCount:F.count,highestBid:F.highest,basePrice:_.base_price??0,startsAt:_.starts_at,category:_.category??"general"}});t(E)}finally{i(!1)}};y.useEffect(()=>{u()},[]);const h=y.useMemo(()=>{let w=[...e];c!=="all"&&(w=w.filter(m=>m.status===c));const p=o.trim().toLowerCase();return p&&(w=w.filter(m=>m.title.toLowerCase().includes(p)||m.creatorName.toLowerCase().includes(p)||m.code.toLowerCase().includes(p))),w},[e,c,o]),f=async w=>{const p=e.find(N=>N.id===w);if(!p)return;const{data:m}=await D.from("events").select("*").eq("id",w).single(),{data:x}=await D.from("users").select("email").eq("id",p.creatorId).single();m&&r({id:m.id,code:`#E-${m.id.slice(0,4).toUpperCase()}`,title:m.title,description:m.description,creatorName:p.creatorName,creatorEmail:(x==null?void 0:x.email)??"N/A",status:m.status,category:m.category??"general",basePrice:m.base_price??0,highestBid:p.highestBid,bidsCount:p.bidsCount,startsAt:m.starts_at,durationMinutes:m.duration_minutes,meetingLink:m.meeting_link})},v=async w=>{if(window.confirm("Are you sure you want to cancel this event?")){i(!0);try{const{error:m}=await D.from("events").update({status:"cancelled"}).eq("id",w);if(m){console.error("Error cancelling event:",m),alert("Failed to cancel event.");return}await u(),r(null),alert("Event cancelled successfully.")}finally{i(!1)}}},b=async w=>{if(window.confirm("Are you sure you want to DELETE this event? This cannot be undone.")){i(!0);try{await D.from("bids").delete().eq("event_id",w);const{error:m}=await D.from("events").delete().eq("id",w);if(m){console.error("Error deleting event:",m),alert("Failed to delete event.");return}await u(),r(null),alert("Event deleted successfully.")}finally{i(!1)}}},g=w=>OP[w]??{label:w,variant:"secondary"};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Events Management"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Track live, upcoming, and completed events."})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["all","live","upcoming","completed","cancelled"].map(w=>n.jsx(T,{variant:c===w?"secondary":"ghost",size:"sm",onClick:()=>d(w),children:w==="all"?"All":w.charAt(0).toUpperCase()+w.slice(1)},w))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Events",subtitle:`${h.length} events found`}),n.jsxs(B,{children:[n.jsx("div",{className:"mb-4",children:n.jsx(te,{label:"Search Events",placeholder:"Search by title, creator, or ID...",value:o,onChange:w=>l(w.target.value)})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"ID"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Creator"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Event Title"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Bids"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Highest Bid"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Starts At"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Actions"})]})}),n.jsxs("tbody",{children:[h.map(w=>{const p=g(w.status);return n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#212529]",children:w.code}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:w.creatorName}),n.jsx("td",{className:"py-3 text-[#212529]",children:w.title}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:p.variant,children:p.label})}),n.jsx("td",{className:"py-3 text-[#212529]",children:w.bidsCount}),n.jsx("td",{className:"py-3 text-[#212529]",children:w.highestBid>0?V(w.highestBid):V(w.basePrice)}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:de(w.startsAt)}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",size:"sm",onClick:()=>f(w.id),disabled:a,children:"View"}),w.status!=="cancelled"&&w.status!=="completed"&&n.jsx(T,{variant:"danger",size:"sm",onClick:()=>v(w.id),disabled:a,children:"Cancel"})]})})]},w.id)}),h.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"py-8 text-center text-[#6C757D]",children:a?"Loading events...":"No events found"})})]})]})})]})]}),s&&n.jsxs(I,{children:[n.jsx($,{title:"Event Details",subtitle:s.code}),n.jsx(B,{children:n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-4 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-[#212529]",children:s.title}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:s.description||"No description"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Creator"}),n.jsx("p",{className:"font-medium",children:s.creatorName}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:s.creatorEmail})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Category"}),n.jsx("p",{className:"font-medium capitalize",children:s.category})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Base Price"}),n.jsx("p",{className:"font-medium",children:V(s.basePrice)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Highest Bid"}),n.jsx("p",{className:"font-medium",children:V(s.highestBid)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Total Bids"}),n.jsx("p",{className:"font-medium",children:s.bidsCount})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Duration"}),n.jsxs("p",{className:"font-medium",children:[s.durationMinutes," min"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Status"}),n.jsx(Q,{variant:g(s.status).variant,children:g(s.status).label})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Starts At"}),n.jsx("p",{className:"font-medium",children:de(s.startsAt)})]})]}),s.meetingLink&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[#6C757D]",children:"Meeting Link"}),n.jsx("a",{href:s.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 underline",children:s.meetingLink})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-semibold text-[#212529]",children:"Admin Actions"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[s.status!=="cancelled"&&s.status!=="completed"&&n.jsx(T,{variant:"danger",onClick:()=>v(s.id),disabled:a,children:" Cancel Event"}),n.jsx(T,{variant:"ghost",onClick:()=>b(s.id),disabled:a,children:" Delete Event Permanently"}),n.jsx(T,{variant:"secondary",onClick:()=>r(null),children:"Close Details"})]})]})]})})]})]})}function $P(){const[e,t]=y.useState([]),[s,r]=y.useState([]),[a,i]=y.useState(!1),o=async()=>{i(!0);try{const{data:h}=await D.from("featured_creators").select("id, creator_id, display_order, featured_since, is_active").eq("is_active",!0).order("display_order",{ascending:!0}),f=(h??[]).map(F=>F.creator_id),{data:v}=await D.from("users").select("id, email, display_name").eq("role","creator"),b=(v??[]).map(F=>F.id),{data:g}=await D.from("profiles").select("user_id, display_name, username, category").in("user_id",b),w=new Map;for(const F of g??[])w.set(F.user_id,F);const{data:p}=await D.from("events").select("id, creator_id"),m=new Map;for(const F of p??[])m.set(F.creator_id,(m.get(F.creator_id)??0)+1);const{data:x}=await D.from("meets").select("creator_id, status").eq("status","completed"),N=new Map;for(const F of x??[])N.set(F.creator_id,(N.get(F.creator_id)??0)+1);const{data:j}=await D.from("bids").select("event_id, amount, status").eq("status","won"),C=new Map;for(const F of p??[])C.set(F.id,F.creator_id);const E=new Map;for(const F of j??[]){const A=C.get(F.event_id);A&&E.set(A,(E.get(A)??0)+(F.amount??0))}const _=(h??[]).map(F=>{const A=w.get(F.creator_id);return{id:F.id,creatorId:F.creator_id,name:(A==null?void 0:A.display_name)||(A==null?void 0:A.username)||"Creator",username:A!=null&&A.username?`@${A.username}`:"@creator",category:(A==null?void 0:A.category)||"general",totalEarnings:E.get(F.creator_id)??0,eventsCount:m.get(F.creator_id)??0,featuredSince:F.featured_since,displayOrder:F.display_order}}),S=(v??[]).filter(F=>!f.includes(F.id)).map(F=>{const A=w.get(F.id);return{id:F.id,name:(A==null?void 0:A.display_name)||(A==null?void 0:A.username)||F.display_name||"Creator",username:A!=null&&A.username?`@${A.username}`:"@creator",category:(A==null?void 0:A.category)||"general",eventsCount:m.get(F.id)??0,completedMeets:N.get(F.id)??0,totalEarnings:E.get(F.id)??0}}).sort((F,A)=>A.totalEarnings-F.totalEarnings);t(_),r(S)}finally{i(!1)}};y.useEffect(()=>{o()},[]);const l=async(h,f)=>{if(window.confirm(`Add ${f} to featured creators?`)){i(!0);try{const b=e.reduce((w,p)=>Math.max(w,p.displayOrder),0),{error:g}=await D.from("featured_creators").insert({creator_id:h,display_order:b+1,is_active:!0});if(g){console.error("Error featuring creator:",g),alert("Failed to feature creator.");return}await o(),alert(`${f} is now featured!`)}finally{i(!1)}}},c=async(h,f)=>{if(window.confirm(`Remove ${f} from featured creators?`)){i(!0);try{const{error:b}=await D.from("featured_creators").update({is_active:!1}).eq("id",h);if(b){console.error("Error removing featured creator:",b),alert("Failed to remove featured creator.");return}await o(),alert(`${f} removed from featured.`)}finally{i(!1)}}},d=async(h,f)=>{if(!(f<=1)){i(!0);try{const v=e.find(b=>b.displayOrder===f-1);v&&await D.from("featured_creators").update({display_order:f}).eq("id",v.id),await D.from("featured_creators").update({display_order:f-1}).eq("id",h),await o()}finally{i(!1)}}},u=async(h,f)=>{const v=e.reduce((b,g)=>Math.max(b,g.displayOrder),0);if(!(f>=v)){i(!0);try{const b=e.find(g=>g.displayOrder===f+1);b&&await D.from("featured_creators").update({display_order:f}).eq("id",b.id),await D.from("featured_creators").update({display_order:f+1}).eq("id",h),await o()}finally{i(!1)}}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Featured Creators"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Control homepage placement, scheduling, and promotion of spotlighted creators."})]})}),n.jsxs(I,{children:[n.jsx($,{title:"Featured Creators",subtitle:`${e.length} creators featured  Priority influences homepage carousel`}),n.jsxs(B,{className:"space-y-4",children:[e.length===0&&!a&&n.jsx("p",{className:"py-4 text-center text-sm text-[#6C757D]",children:"No featured creators yet. Add creators from the candidate pool below."}),e.map((h,f)=>n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>d(h.id,h.displayOrder),disabled:a||f===0,children:""}),n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>u(h.id,h.displayOrder),disabled:a||f===e.length-1,children:""})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm text-[#6C757D]",children:["#",f+1]}),n.jsx("div",{className:"text-lg font-semibold text-[#212529]",children:h.name}),n.jsx("div",{className:"text-sm text-[#6C757D]",children:h.username})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-[#6C757D]",children:[n.jsxs("div",{children:["Category ",n.jsx("span",{className:"font-semibold capitalize text-[#212529]",children:h.category})]}),n.jsxs("div",{children:["Events ",n.jsx("span",{className:"font-semibold text-[#212529]",children:h.eventsCount})]}),n.jsxs("div",{children:["Earned ",n.jsx("span",{className:"font-semibold text-[#212529]",children:V(h.totalEarnings)})]}),n.jsxs(Q,{variant:"primary",children:["Featured since ",new Date(h.featuredSince).toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:n.jsx(T,{size:"sm",variant:"danger",onClick:()=>c(h.id,h.name),disabled:a,children:"Remove"})})]},h.id))]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Candidate Pool",subtitle:"High-performing creators eligible for featuring."}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Creator"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Category"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Events"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Completed Meets"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Total Earnings"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Actions"})]})}),n.jsxs("tbody",{children:[s.map(h=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium text-[#212529]",children:h.name}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:h.username})]})}),n.jsx("td",{className:"py-3 capitalize text-[#212529]",children:h.category}),n.jsx("td",{className:"py-3 text-[#212529]",children:h.eventsCount}),n.jsx("td",{className:"py-3 text-[#212529]",children:h.completedMeets}),n.jsx("td",{className:"py-3 text-[#212529]",children:V(h.totalEarnings)}),n.jsx("td",{className:"py-3",children:n.jsx("div",{className:"flex gap-2 text-xs",children:n.jsx(T,{size:"sm",variant:"primary",onClick:()=>l(h.id,h.name),disabled:a,children:" Feature"})})})]},h.id)),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-8 text-center text-[#6C757D]",children:a?"Loading creators...":"No candidates available"})})]})]})})]})]})}const qa={all:"All Users",fans:"Fans Only",creators:"Creators Only"},UP={notification:"In-App Notification",banner:"Banner",modal:"Modal",email:"Email"},lg={draft:"warning",active:"success",expired:"danger",cancelled:"danger"};function zP(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState(!1),[i,o]=y.useState(""),[l,c]=y.useState(""),[d,u]=y.useState("all"),[h,f]=y.useState("notification"),[v,b]=y.useState(""),g=async()=>{a(!0);try{const{data:S,error:F}=await D.from("admin_announcements").select("*").order("created_at",{ascending:!1});if(F){console.error("Error fetching announcements:",F),s([]);return}const A=(S??[]).map(M=>({id:M.id,title:M.title,message:M.message,targetAudience:M.target_audience,displayType:M.display_type,status:M.status,scheduledAt:M.scheduled_at,expiresAt:M.expires_at,viewsCount:M.views_count??0,clicksCount:M.clicks_count??0,createdAt:M.created_at}));s(A)}finally{a(!1)}};y.useEffect(()=>{g()},[]);const w=()=>{o(""),c(""),u("all"),f("notification"),b("")},p=async()=>{if(!i.trim()||!l.trim()){alert("Please enter a title and message.");return}a(!0);try{const{error:S}=await D.from("admin_announcements").insert({title:i.trim(),message:l.trim(),target_audience:d,display_type:h,status:"draft",expires_at:v?new Date(v).toISOString():null,created_by:e==null?void 0:e.id});if(S){console.error("Error saving draft:",S),alert("Failed to save draft.");return}w(),await g(),alert("Draft saved successfully!")}finally{a(!1)}},m=async()=>{if(!i.trim()||!l.trim()){alert("Please enter a title and message.");return}const S=qa[d];if(window.confirm(`Publish announcement to ${S}?

This will send notifications to all ${d==="all"?"users":d}.`)){a(!0);try{const{data:A,error:M}=await D.from("admin_announcements").insert({title:i.trim(),message:l.trim(),target_audience:d,display_type:h,status:"active",expires_at:v?new Date(v).toISOString():null,created_by:e==null?void 0:e.id}).select().single();if(M||!A){console.error("Error creating announcement:",M),alert("Failed to create announcement.");return}let L=D.from("users").select("id");d==="fans"?L=L.eq("role","fan"):d==="creators"?L=L.eq("role","creator"):L=L.in("role",["fan","creator"]);const{data:P,error:q}=await L;if(q&&console.error("Error fetching users:",q),P&&P.length>0){const Z=P.map(H=>({user_id:H.id,type:"announcement",title:i.trim(),message:l.trim(),announcement_id:A.id,read:!1}));for(let H=0;H<Z.length;H+=100){const k=Z.slice(H,H+100);await D.from("notifications").insert(k)}}w(),await g(),alert(`Announcement published! Notifications sent to ${(P==null?void 0:P.length)??0} users.`)}finally{a(!1)}}},x=async S=>{const F=t.find(L=>L.id===S);if(!F)return;const A=qa[F.targetAudience];if(window.confirm(`Publish "${F.title}" to ${A}?

This will send notifications to all ${F.targetAudience==="all"?"users":F.targetAudience}.`)){a(!0);try{await D.from("admin_announcements").update({status:"active"}).eq("id",S);let L=D.from("users").select("id");F.targetAudience==="fans"?L=L.eq("role","fan"):F.targetAudience==="creators"?L=L.eq("role","creator"):L=L.in("role",["fan","creator"]);const{data:P}=await L;if(P&&P.length>0){const q=P.map(Z=>({user_id:Z.id,type:"announcement",title:F.title,message:F.message,announcement_id:S,read:!1}));for(let Z=0;Z<q.length;Z+=100){const H=q.slice(Z,Z+100);await D.from("notifications").insert(H)}}await g(),alert(`Announcement published! Notifications sent to ${(P==null?void 0:P.length)??0} users.`)}finally{a(!1)}}},N=async S=>{if(window.confirm("Deactivate this announcement?")){a(!0);try{await D.from("admin_announcements").update({status:"cancelled"}).eq("id",S),await g(),alert("Announcement deactivated.")}finally{a(!1)}}},j=async S=>{if(window.confirm("Delete this announcement permanently?")){a(!0);try{await D.from("notifications").delete().eq("announcement_id",S),await D.from("admin_announcements").delete().eq("id",S),await g(),alert("Announcement deleted.")}finally{a(!1)}}},C=t.filter(S=>S.status==="active"),E=t.filter(S=>S.status==="draft"),_=t.filter(S=>S.status==="expired"||S.status==="cancelled");return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Announcements"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Publish platform-wide communications and send notifications to users."})]})}),n.jsxs(I,{children:[n.jsx($,{title:"Composer",subtitle:"Create a new announcement with targeting options."}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Title",placeholder:"Announcement headline",value:i,onChange:S=>o(S.target.value)}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-[#212529]",children:"Target Audience"}),n.jsxs("select",{className:"w-full rounded-lg border border-[#E9ECEF] bg-white px-3 py-2 text-sm",value:d,onChange:S=>u(S.target.value),children:[n.jsx("option",{value:"all",children:" All Users (Fans + Creators)"}),n.jsx("option",{value:"fans",children:" Fans Only"}),n.jsx("option",{value:"creators",children:" Creators Only"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"mb-1 block text-sm font-medium text-[#212529]",children:"Display Type"}),n.jsxs("select",{className:"w-full rounded-lg border border-[#E9ECEF] bg-white px-3 py-2 text-sm",value:h,onChange:S=>f(S.target.value),children:[n.jsx("option",{value:"notification",children:" In-App Notification"}),n.jsx("option",{value:"banner",children:" Banner"}),n.jsx("option",{value:"modal",children:" Modal Popup"}),n.jsx("option",{value:"email",children:" Email"})]})]}),n.jsx(te,{label:"Expiry Date (Optional)",type:"datetime-local",value:v,onChange:S=>b(S.target.value)}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(Re,{label:"Message",rows:4,placeholder:"Write the announcement message here...",value:l,onChange:S=>c(S.target.value)})}),n.jsxs("div",{className:"flex flex-wrap gap-2 md:col-span-2",children:[n.jsx(T,{variant:"secondary",onClick:p,disabled:r,children:" Save as Draft"}),n.jsx(T,{onClick:m,disabled:r,children:" Publish & Send Notifications"})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Active Announcements",subtitle:`${C.length} live announcements`}),n.jsxs(B,{className:"space-y-4",children:[C.length===0&&n.jsx("p",{className:"py-4 text-center text-sm text-[#6C757D]",children:"No active announcements"}),C.map(S=>n.jsxs("div",{className:"flex flex-col gap-4 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-[#212529]",children:S.title}),n.jsxs("p",{className:"text-sm text-[#6C757D]",children:["Target: ",qa[S.targetAudience],"  Type: ",UP[S.displayType]]})]}),n.jsx(Q,{variant:lg[S.status],children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]}),n.jsx("p",{className:"text-sm text-[#212529]",children:S.message}),n.jsxs("div",{className:"flex flex-wrap gap-6 text-sm text-[#6C757D]",children:[n.jsxs("span",{children:["Created: ",de(S.createdAt)]}),S.expiresAt&&n.jsxs("span",{children:["Expires: ",de(S.expiresAt)]}),n.jsxs("span",{children:["Views: ",S.viewsCount.toLocaleString()]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:n.jsx(T,{size:"sm",variant:"danger",onClick:()=>N(S.id),disabled:r,children:"Deactivate"})})]},S.id))]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Drafts",subtitle:`${E.length} drafts awaiting publish`}),n.jsxs(B,{className:"space-y-3",children:[E.length===0&&n.jsx("p",{className:"py-4 text-center text-sm text-[#6C757D]",children:"No drafts"}),E.map(S=>n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-[12px] border border-[#E9ECEF] bg-white px-4 py-3 text-sm text-[#212529]",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:S.title}),n.jsxs("div",{className:"text-xs text-[#6C757D]",children:["Target: ",qa[S.targetAudience],"  Created: ",de(S.createdAt)]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{size:"sm",variant:"primary",onClick:()=>x(S.id),disabled:r,children:" Publish Now"}),n.jsx(T,{size:"sm",variant:"danger",onClick:()=>j(S.id),disabled:r,children:"Delete"})]})]},S.id))]})]}),_.length>0&&n.jsxs(I,{children:[n.jsx($,{title:"Past Announcements",subtitle:"Expired or cancelled announcements"}),n.jsx(B,{className:"space-y-3",children:_.map(S=>n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-[12px] border border-[#E9ECEF] bg-white px-4 py-3 text-sm text-[#212529]",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:S.title}),n.jsxs("div",{className:"text-xs text-[#6C757D]",children:[qa[S.targetAudience],"  ",de(S.createdAt)]})]}),n.jsx(Q,{variant:lg[S.status],children:S.status.charAt(0).toUpperCase()+S.status.slice(1)}),n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>j(S.id),disabled:r,children:" Delete"})]},S.id))})]})]})}const VP={bid_authorization:"Bid",bid_refund:"Refund",bid_capture:"Capture",creator_earning:"Earning",creator_payout:"Payout",manual_adjustment:"Adjustment"};function WP(){const[e,t]=y.useState([]),[s,r]=y.useState({totalProcessed:0,totalRefunded:0,pendingPayouts:0,totalCommission:0}),[a,i]=y.useState(!1),[o,l]=y.useState("all");y.useEffect(()=>{(async()=>{var u;i(!0);try{const{data:h}=await D.from("wallet_transactions").select("id, wallet_id, type, direction, amount, reference_table, reference_id, description, created_at").order("created_at",{ascending:!1}).limit(100),f=Array.from(new Set((h??[]).map(P=>P.wallet_id))),{data:v}=f.length?await D.from("wallets").select("id, user_id").in("id",f):{data:[]},b=new Map;for(const P of v??[])b.set(P.id,P.user_id);const g=Array.from(new Set(Array.from(b.values()))),{data:w}=g.length?await D.from("users").select("id, display_name, email").in("id",g):{data:[]},p=new Map;for(const P of w??[])p.set(P.id,P.display_name||((u=P.email)==null?void 0:u.split("@")[0])||"User");const m=(h??[]).filter(P=>P.reference_table==="events"||P.reference_table==="bids").map(P=>P.reference_id).filter(Boolean),{data:x}=m.length?await D.from("events").select("id, title").in("id",m):{data:[]},N=new Map;for(const P of x??[])N.set(P.id,P.title);const j=(h??[]).map(P=>{const q=b.get(P.wallet_id)??"",Z=new Date(P.created_at);return{id:P.id,date:Z.toLocaleDateString("en-IN",{month:"short",day:"numeric"}),time:Z.toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit"}),userId:q,userName:p.get(q)??"Unknown",eventId:P.reference_id,eventTitle:N.get(P.reference_id)??P.description??"-",amount:P.amount??0,type:P.type,direction:P.direction,status:"Processed"}});t(j);const{data:C}=await D.from("bids").select("amount, status"),E=(C??[]).filter(P=>P.status==="won"),_=(C??[]).filter(P=>P.status==="lost"),S=E.reduce((P,q)=>P+(q.amount??0),0),F=_.reduce((P,q)=>P+Math.floor((q.amount??0)*.9),0),A=E.reduce((P,q)=>P+Math.floor((q.amount??0)*.1),0)+_.reduce((P,q)=>P+Math.floor((q.amount??0)*.1),0),{data:M}=await D.from("withdrawal_requests").select("amount").eq("status","pending"),L=(M??[]).reduce((P,q)=>P+(q.amount??0),0);r({totalProcessed:S,totalRefunded:F,pendingPayouts:L,totalCommission:A})}finally{i(!1)}})()},[]);const c=e.filter(d=>o==="all"?!0:o==="bids"?d.type==="bid_authorization"||d.type==="bid_capture":o==="refunds"?d.type==="bid_refund":o==="payouts"?d.type==="creator_payout"||d.type==="creator_earning":!0);return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Payments"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Review platform transactions, refunds, and commissions."})]}),n.jsx("div",{className:"flex gap-2",children:["all","bids","refunds","payouts"].map(d=>n.jsx(T,{size:"sm",variant:o===d?"secondary":"ghost",onClick:()=>l(d),children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs(I,{children:[n.jsx($,{title:"Total Processed"}),n.jsxs(B,{children:[n.jsx("div",{className:"text-3xl font-bold text-[#212529]",children:V(s.totalProcessed)}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"From winning bids"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Amount Returned to Fans"}),n.jsxs(B,{children:[n.jsx("div",{className:"text-3xl font-bold text-[#212529]",children:V(s.totalRefunded)}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"90% of lost bids (non-winners)"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Pending Payouts"}),n.jsxs(B,{children:[n.jsx("div",{className:"text-3xl font-bold text-[#212529]",children:V(s.pendingPayouts)}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Awaiting approval"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Platform Commission"}),n.jsxs(B,{children:[n.jsx("div",{className:"text-3xl font-bold text-[#28A745]",children:V(s.totalCommission)}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"10% from all bids"})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Transactions",subtitle:`${c.length} transactions`}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Date"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Time"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"User"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Description"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Amount"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Type"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Direction"})]})}),n.jsxs("tbody",{children:[c.map(d=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#212529]",children:d.date}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:d.time}),n.jsx("td",{className:"py-3 text-[#212529]",children:d.userName}),n.jsx("td",{className:"py-3 text-[#212529]",children:d.eventTitle}),n.jsx("td",{className:"py-3 text-[#212529]",children:V(d.amount)}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:"primary",children:VP[d.type]??d.type})}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:d.direction==="credit"?"success":"danger",children:d.direction==="credit"?" Credit":" Debit"})})]},d.id)),c.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-8 text-center text-[#6C757D]",children:a?"Loading transactions...":"No transactions found"})})]})]})})]})]})}function qP(){const[e,t]=y.useState([]),[s,r]=y.useState([]),[a,i]=y.useState(!1),[o,l]=y.useState({}),[c,d]=y.useState({}),u=async()=>{i(!0);try{const{data:g}=await D.from("withdrawal_requests").select("*").order("requested_at",{ascending:!1}),w=Array.from(new Set((g??[]).map(A=>A.creator_id))),{data:p}=w.length?await D.from("profiles").select("user_id, display_name, username").in("user_id",w):{data:[]},m=new Map;for(const A of p??[])m.set(A.user_id,{displayName:A.display_name||A.username||"Creator",username:A.username?`@${A.username}`:"@creator"});const{data:x}=await D.from("bids").select("event_id, amount, status").eq("status","won"),{data:N}=await D.from("events").select("id, creator_id"),j=new Map;for(const A of N??[])j.set(A.id,A.creator_id);const C=new Map;for(const A of x??[]){const M=j.get(A.event_id);if(M){const L=Math.floor((A.amount??0)*.9);C.set(M,(C.get(M)??0)+L)}}const E=new Map;for(const A of g??[])A.status==="completed"&&E.set(A.creator_id,(E.get(A.creator_id)??0)+(A.amount??0));const _=(g??[]).map(A=>{const M=m.get(A.creator_id),L=C.get(A.creator_id)??0,P=E.get(A.creator_id)??0;return{id:A.id,code:`#WR-${A.id.slice(0,4).toUpperCase()}`,creatorId:A.creator_id,creatorName:(M==null?void 0:M.displayName)??"Unknown",creatorUsername:(M==null?void 0:M.username)??"@creator",amount:A.amount??0,destination:A.destination,status:A.status,requestedAt:A.requested_at,processedAt:A.processed_at,adminNotes:A.admin_notes,gatewayReference:A.gateway_reference,rejectionReason:A.rejection_reason,earnings:{total:L,withdrawn:P,pending:L-P}}}),S=_.filter(A=>A.status==="pending"||A.status==="in_review"),F=_.filter(A=>A.status==="completed"||A.status==="failed");t(S),r(F)}finally{i(!1)}};y.useEffect(()=>{u()},[]);const h=async g=>{const w=o[g]??{gatewayReference:"",adminNotes:""};if(!w.gatewayReference.trim()){alert("Please enter the gateway reference ID.");return}if(window.confirm("Confirm this payment has been processed?")){i(!0);try{const{error:m}=await D.from("withdrawal_requests").update({status:"completed",processed_at:new Date().toISOString(),gateway_reference:w.gatewayReference.trim(),admin_notes:w.adminNotes.trim()||null}).eq("id",g);if(m){console.error("Error approving withdrawal:",m),alert("Failed to approve withdrawal.");return}await u(),l(x=>{const N={...x};return delete N[g],N}),alert("Withdrawal approved and marked as completed!")}finally{i(!1)}}},f=async g=>{const w=c[g]??{reason:"",message:""};if(!w.reason.trim()){alert("Please enter a rejection reason.");return}if(window.confirm("Reject this withdrawal request?")){i(!0);try{const{error:m}=await D.from("withdrawal_requests").update({status:"failed",processed_at:new Date().toISOString(),rejection_reason:w.reason.trim(),admin_notes:w.message.trim()||null}).eq("id",g);if(m){console.error("Error rejecting withdrawal:",m),alert("Failed to reject withdrawal.");return}await u(),d(x=>{const N={...x};return delete N[g],N}),alert("Withdrawal request rejected.")}finally{i(!1)}}},v=g=>{const w=new Date(g),m=new Date().getTime()-w.getTime(),x=Math.floor(m/(1e3*60*60));return x<1?"Just now":x<24?`${x} hours ago`:`${Math.floor(x/24)} days ago`},b={pending:"warning",in_review:"primary",completed:"success",failed:"danger"};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Withdrawal Requests"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Verify payouts, capture references, and keep the audit trail healthy."})]}),n.jsxs(Q,{variant:"warning",children:[e.length," pending"]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Pending",subtitle:"Requests needing manual review or payment confirmation."}),n.jsxs(B,{className:"space-y-4",children:[e.length===0&&n.jsx("p",{className:"py-4 text-center text-sm text-[#6C757D]",children:a?"Loading...":"No pending withdrawal requests"}),e.map(g=>{const w=o[g.id]??{gatewayReference:"",adminNotes:""},p=c[g.id]??{reason:"",message:""};return n.jsxs("div",{className:"flex flex-col gap-4 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-[#212529]",children:g.creatorName}),n.jsxs("p",{className:"text-sm text-[#6C757D]",children:[g.creatorUsername,"  Requested ",v(g.requestedAt)]})]}),n.jsx(Q,{variant:b[g.status]??"warning",children:g.status==="pending"?"Awaiting payout":g.status})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2 text-sm text-[#212529]",children:[n.jsxs("p",{children:["Request ID: ",n.jsx("strong",{children:g.code})]}),n.jsxs("p",{children:["Amount: ",n.jsx("strong",{className:"text-lg",children:V(g.amount)})]}),n.jsxs("p",{children:["Method: ",g.destination||"Not specified"]}),n.jsxs("p",{children:["Requested On: ",de(g.requestedAt)]})]}),n.jsxs("div",{className:"space-y-2 rounded-[12px] bg-white p-4 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:"Creator Earnings Breakdown"}),n.jsxs("p",{children:["Total Earnings: ",n.jsx("strong",{children:V(g.earnings.total)})]}),n.jsxs("p",{children:["Withdrawn: ",n.jsx("strong",{children:V(g.earnings.withdrawn)})]}),n.jsxs("p",{children:["Available Balance: ",n.jsx("strong",{className:"text-[#28A745]",children:V(g.earnings.pending)})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-3 rounded-[12px] border border-[#E9ECEF] bg-white p-4",children:[n.jsx("p",{className:"text-sm font-semibold text-[#212529]",children:" Mark as Paid"}),n.jsx(te,{label:"Gateway Reference ID",placeholder:"pay_xyz123",value:w.gatewayReference,onChange:m=>l(x=>({...x,[g.id]:{...w,gatewayReference:m.target.value}}))}),n.jsx(Re,{label:"Admin Notes",rows:2,placeholder:"Optional note for audit log",value:w.adminNotes,onChange:m=>l(x=>({...x,[g.id]:{...w,adminNotes:m.target.value}}))}),n.jsx(T,{size:"sm",onClick:()=>h(g.id),disabled:a,children:"Confirm Payment"})]}),n.jsxs("div",{className:"space-y-3 rounded-[12px] border border-[#E9ECEF] bg-white p-4",children:[n.jsx("p",{className:"text-sm font-semibold text-[#212529]",children:" Reject Request"}),n.jsx(te,{label:"Reason",placeholder:"Insufficient balance / pending dispute / ...",value:p.reason,onChange:m=>d(x=>({...x,[g.id]:{...p,reason:m.target.value}}))}),n.jsx(Re,{label:"Message to creator",rows:2,placeholder:"Explain next steps",value:p.message,onChange:m=>d(x=>({...x,[g.id]:{...p,message:m.target.value}}))}),n.jsx(T,{size:"sm",variant:"danger",onClick:()=>f(g.id),disabled:a,children:"Reject Request"})]})]})]},g.id)})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"History",subtitle:"Resolved withdrawal requests across the platform."}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"ID"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Creator"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Amount"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Method"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Processed"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Reference"})]})}),n.jsxs("tbody",{children:[s.map(g=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#6C757D]",children:g.code}),n.jsx("td",{className:"py-3 text-[#212529]",children:g.creatorName}),n.jsx("td",{className:"py-3 text-[#212529]",children:V(g.amount)}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:g.destination||"-"}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:b[g.status]??"primary",children:g.status==="completed"?"Paid":"Rejected"})}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:g.processedAt?de(g.processedAt):"-"}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:g.gatewayReference||g.rejectionReason||"-"})]},g.id)),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-8 text-center text-[#6C757D]",children:a?"Loading...":"No withdrawal history"})})]})]})})]})]})}const HP=[{id:"#RF-789",user:"Rahul Kumar",email:"rahul@email.com",event:"#342  Meet & Greet with Priya",amount:"270",type:"Auto 90%",status:"Processed",processedOn:"Jan 12, 2025"},{id:"#RF-788",user:"Priya Singh",email:"priya@email.com",event:"#341  Cooking Demo",amount:"180",type:"Auto 90%",status:"Processed",processedOn:"Jan 12, 2025"},{id:"#RF-787",user:"Amit Gupta",email:"amit@email.com",event:"#340  Productivity Masterclass",amount:"450",type:"Manual",status:"Pending Retry",processedOn:"Jan 11, 2025"},{id:"#RF-786",user:"Neha Kapoor",email:"neha@email.com",event:"#339  Cooking with Chef Rohan",amount:"320",type:"Auto 90%",status:"Failed",processedOn:"Jan 11, 2025"}],On={id:"#RF-786",reason:"Payment method expired / Bank account closed",gatewayError:"BAD_REQUEST_ERROR  Invalid account details",attempts:3,amount:"288 (90%)",originalBid:"320",user:"Neha Kumar (neha@email.com)"};function YP(){return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Refunds Management"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Track automatic and manual refunds, investigate failures, and trigger overrides."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",children:"Export Report"}),n.jsx(T,{children:"Process Manual Refund"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Overview",subtitle:"Quick insight into refund volume and outcomes."}),n.jsx(B,{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[{label:"Refunds Today",value:"23,450  89 refunds"},{label:"This Week",value:"1,45,200  456 refunds"},{label:"This Month",value:"4,52,300  1,234 refunds"},{label:"Failed Pending",value:"12  3,400"}].map(e=>n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:e.label}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#212529]",children:e.value})]},e.label))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Refunds",subtitle:"Filter by status, type, or amount to focus investigation."}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"ID"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"User"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Event"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Amount"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Type"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Processed"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Actions"})]})}),n.jsx("tbody",{children:HP.map(e=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#6C757D]",children:e.id}),n.jsx("td",{className:"py-3 text-[#212529]",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:e.user}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:e.email})]})}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:e.event}),n.jsx("td",{className:"py-3 text-[#212529]",children:e.amount}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:e.type}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:e.status==="Processed"?"success":e.status==="Pending Retry"?"warning":"danger",children:e.status})}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:e.processedOn}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[n.jsx(T,{size:"sm",variant:"secondary",children:"View Details"}),n.jsx(T,{size:"sm",variant:"ghost",children:"Retry"})]})})]},e.id))})]})})]}),n.jsxs(I,{children:[n.jsx($,{title:"Failed Refunds Requiring Action",subtitle:"Resolve gateway failures with manual interventions."}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)]",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6 text-sm text-[#212529]",children:[n.jsxs("p",{className:"font-semibold",children:["Refund ",On.id]}),n.jsx("p",{className:"mt-1 text-[#6C757D]",children:On.user}),n.jsxs("p",{className:"mt-4",children:["Original Bid: ",On.originalBid]}),n.jsxs("p",{children:["Refund Amount: ",On.amount]}),n.jsxs("p",{children:["Attempts: ",On.attempts]}),n.jsxs("p",{className:"mt-3 text-[#D9480F]",children:["Failure Reason: ",On.reason]}),n.jsxs("p",{className:"text-[#6C757D]",children:["Gateway Error: ",On.gatewayError]})]}),n.jsxs("div",{className:"space-y-3 rounded-[16px] border border-[#E9ECEF] bg-white p-6 text-sm text-[#212529]",children:[n.jsx(te,{label:"Next Step",placeholder:"Retry via gateway / Manual transfer"}),n.jsx(Re,{label:"Notes",rows:3,placeholder:"Add context for audit trail"}),n.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[n.jsx(T,{variant:"secondary",children:"Retry Refund"}),n.jsx(T,{variant:"ghost",children:"Contact User"})]}),n.jsx(T,{variant:"danger",children:"Mark as Resolved"})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Manual Refund",subtitle:"Issue full or partial refunds outside the automatic flow."}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"User",placeholder:"Search by email / phone / ID"}),n.jsx(te,{label:"Event (optional)",placeholder:"Search event"}),n.jsx(te,{label:"Refund Amount",placeholder:""}),n.jsx(te,{label:"Reason",placeholder:"Event cancelled / Technical issue / Gesture"}),n.jsx(Re,{label:"Additional Notes",rows:3,placeholder:"Context for support team"}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(T,{variant:"secondary",children:"Preview Email"}),n.jsx(T,{children:"Process Refund"})]})})]})]})]})}function KP(){const[e,t]=y.useState("month"),[s,r]=y.useState({grossRevenue:0,netRevenue:0,platformCommission:0,creatorPayouts:0,avgEventRevenue:0,paidEventsCount:0,freeEventsCount:0,totalRefunds:0}),[a,i]=y.useState([]),[o,l]=y.useState([]),[c,d]=y.useState([]),[u,h]=y.useState([]),[f,v]=y.useState(!1),b=m=>{const x=new Date,N=new Date(x);let j=new Date(x);switch(m){case"today":j.setHours(0,0,0,0);break;case"7days":j.setDate(j.getDate()-7);break;case"30days":j.setDate(j.getDate()-30);break;case"month":j=new Date(x.getFullYear(),x.getMonth(),1);break;case"all":j=new Date(2020,0,1);break}return{start:j,end:N}};y.useEffect(()=>{(async()=>{v(!0);try{const{start:x,end:N}=b(e),{data:j}=await D.from("bids").select("id, event_id, amount, status, created_at").gte("created_at",x.toISOString()).lte("created_at",N.toISOString()),C=Array.from(new Set((j??[]).map(z=>z.event_id))),{data:E}=C.length?await D.from("events").select("id, creator_id, base_price, duration_minutes, is_paid, created_at").in("id",C):{data:[]},_=new Map;for(const z of E??[])_.set(z.id,z);const{data:S}=await D.from("events").select("id, is_paid, created_at").gte("created_at",x.toISOString()).lte("created_at",N.toISOString()),F=(S??[]).filter(z=>z.is_paid!==!1).length,A=(S??[]).filter(z=>z.is_paid===!1).length,M=Array.from(new Set((E??[]).map(z=>z.creator_id))),{data:L}=M.length?await D.from("profiles").select("user_id, display_name, username").in("user_id",M):{data:[]},P=new Map;for(const z of L??[])P.set(z.user_id,z.display_name||z.username||"Creator");const q=(j??[]).filter(z=>z.status==="won"),Z=(j??[]).filter(z=>z.status==="lost"),H=[...q,...Z].reduce((z,G)=>z+(G.amount??0),0),k=Math.floor(H*.1),R=Z.reduce((z,G)=>z+Math.floor((G.amount??0)*.9),0),U=q.reduce((z,G)=>z+Math.floor((G.amount??0)*.9),0),J=H,K=k,ae=C.length>0?J/C.length:0;r({grossRevenue:J,netRevenue:K,platformCommission:k,creatorPayouts:U,avgEventRevenue:ae,paidEventsCount:F,freeEventsCount:A,totalRefunds:R});const oe=new Map;for(const z of j??[]){const G=new Date(z.created_at).toLocaleDateString("en-IN",{month:"short",day:"numeric"}),ue=oe.get(G)??{date:G,eventsCount:0,bidsCount:0,revenue:0,commission:0,refunds:0};ue.bidsCount++,z.status==="won"?(ue.revenue+=z.amount??0,ue.commission+=Math.floor((z.amount??0)*.1)):z.status==="lost"&&(ue.refunds+=Math.floor((z.amount??0)*.9),ue.commission+=Math.floor((z.amount??0)*.1)),oe.set(G,ue)}for(const z of S??[]){const G=new Date(z.created_at).toLocaleDateString("en-IN",{month:"short",day:"numeric"}),ue=oe.get(G);ue&&ue.eventsCount++}i(Array.from(oe.values()).slice(0,10));const le=new Map;for(const z of q){const G=_.get(z.event_id);if(!G)continue;const ue=le.get(G.creator_id)??0;le.set(G.creator_id,ue+(z.amount??0))}const pe=Array.from(le.entries()).map(([z,G])=>({creatorId:z,name:P.get(z)??"Unknown",revenue:G})).sort((z,G)=>G.revenue-z.revenue).slice(0,5);l(pe);const ee=new Map;for(const z of q){const G=_.get(z.event_id);if(!G)continue;const ue=(G.base_price??0)<=50?"Paid Events  50 Base":(G.base_price??0)<=100?"Paid Events  100 Base":"Paid Events  100+ Base";ee.set(ue,(ee.get(ue)??0)+(z.amount??0))}const W=Array.from(ee.entries()).map(([z,G])=>({type:z,revenue:G,percent:J>0?G/J*100:0})).sort((z,G)=>G.revenue-z.revenue);d(W);const se=new Map;for(const z of q){const G=_.get(z.event_id);if(!G)continue;const ue=(G.duration_minutes??5)<=5?"5-minute events":(G.duration_minutes??5)<=10?"10-minute events":"15+ minute events";se.set(ue,(se.get(ue)??0)+(z.amount??0))}const O=Array.from(se.entries()).map(([z,G])=>({duration:z,revenue:G,percent:J>0?G/J*100:0})).sort((z,G)=>G.revenue-z.revenue);h(O)}finally{v(!1)}})()},[e]);const g=s.paidEventsCount+s.freeEventsCount,w=g>0?Math.round(s.paidEventsCount/g*100):0,p=g>0?Math.round(s.freeEventsCount/g*100):0;return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Revenue Analytics"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Monitor revenue flows, commission, and payouts with configurable time ranges."})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"today",label:"Today"},{key:"7days",label:"Last 7 Days"},{key:"30days",label:"Last 30 Days"},{key:"month",label:"This Month"},{key:"all",label:"All Time"}].map(m=>n.jsx(T,{size:"sm",variant:e===m.key?"secondary":"ghost",onClick:()=>t(m.key),children:m.label},m.key))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Summary",subtitle:"Key financial metrics for the selected range."}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Gross Revenue"}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#212529]",children:V(s.grossRevenue)})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Net Revenue"}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#212529]",children:V(s.netRevenue)})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Platform Commission"}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#28A745]",children:V(s.platformCommission)})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Creator Payouts"}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#212529]",children:V(s.creatorPayouts)})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Avg Event Revenue"}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#212529]",children:V(s.avgEventRevenue)})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Paid Events"}),n.jsxs("p",{className:"mt-2 text-lg font-semibold text-[#212529]",children:[s.paidEventsCount," (",w,"%)"]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Free Events"}),n.jsxs("p",{className:"mt-2 text-lg font-semibold text-[#212529]",children:[s.freeEventsCount," (",p,"%)"]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Total Refunds"}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#DC3545]",children:V(s.totalRefunds)})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Revenue Breakdown",subtitle:"Analyze by event type, duration, and top creators."}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#212529]",children:"Revenue by Event Type"}),n.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-[#6C757D]",children:[c.length===0&&n.jsx("li",{children:"No data"}),c.map(m=>n.jsxs("li",{children:[m.type,"  ",m.percent.toFixed(0),"% (",V(m.revenue),")"]},m.type))]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#212529]",children:"Top Revenue Creators"}),n.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-[#6C757D]",children:[o.length===0&&n.jsx("li",{children:"No data"}),o.map(m=>n.jsxs("li",{children:[m.name,"  ",V(m.revenue)]},m.creatorId))]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#212529]",children:"Revenue by Duration"}),n.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-[#6C757D]",children:[u.length===0&&n.jsx("li",{children:"No data"}),u.map(m=>n.jsxs("li",{children:[m.duration,"  ",m.percent.toFixed(0),"% (",V(m.revenue),")"]},m.duration))]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Revenue by Date",subtitle:"Daily breakdown for reporting."}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Date"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Events"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Bids"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Revenue"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Commission"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Refunds"})]})}),n.jsxs("tbody",{children:[a.map(m=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#212529]",children:m.date}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:m.eventsCount}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:m.bidsCount}),n.jsx("td",{className:"py-3 text-[#212529]",children:V(m.revenue)}),n.jsx("td",{className:"py-3 text-[#28A745]",children:V(m.commission)}),n.jsx("td",{className:"py-3 text-[#DC3545]",children:V(m.refunds)})]},m.date)),a.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-8 text-center text-[#6C757D]",children:f?"Loading...":"No revenue data available"})})]})]})})]})]})}function GP(){const[e,t]=y.useState({total:0,fromWinners:0,fromNonWinners:0,eventsProcessed:0,avgPerEvent:0,yearlyProjection:0}),[s,r]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState(!1);y.useEffect(()=>{(async()=>{l(!0);try{const{data:h}=await D.from("bids").select("id, event_id, amount, status, created_at"),f=Array.from(new Set((h??[]).map(R=>R.event_id))),{data:v}=f.length?await D.from("events").select("id, creator_id, base_price, status").in("id",f):{data:[]},b=new Map;for(const R of v??[])b.set(R.id,{creatorId:R.creator_id,basePrice:R.base_price??0});const g=Array.from(new Set((v??[]).map(R=>R.creator_id))),{data:w}=g.length?await D.from("profiles").select("user_id, display_name, username").in("user_id",g):{data:[]},p=new Map;for(const R of w??[])p.set(R.user_id,R.display_name||R.username||"Creator");const m=(h??[]).filter(R=>R.status==="won"),x=(h??[]).filter(R=>R.status==="lost"),N=m.reduce((R,U)=>R+Math.floor((U.amount??0)*.1),0),j=x.reduce((R,U)=>R+Math.floor((U.amount??0)*.1),0),C=N+j,_=(v??[]).filter(R=>R.status==="completed").length||f.length,S=_>0?C/_:0,F=new Date,A=new Date(F.getFullYear(),F.getMonth()+1,0).getDate(),M=F.getDate(),P=(M>0?C/M*A:C)*12;t({total:C,fromWinners:N,fromNonWinners:j,eventsProcessed:_,avgPerEvent:S,yearlyProjection:P});const q=new Map;for(const R of h??[]){const U=b.get(R.event_id);if(!U)continue;const{creatorId:J}=U,K=q.get(J)??{events:new Set,revenue:0,commission:0};K.events.add(R.event_id),R.status==="won"?(K.revenue+=R.amount??0,K.commission+=Math.floor((R.amount??0)*.1)):R.status==="lost"&&(K.commission+=Math.floor((R.amount??0)*.1)),q.set(J,K)}const Z=Array.from(q.entries()).map(([R,U])=>({creatorId:R,creatorName:p.get(R)??"Unknown",eventsCount:U.events.size,totalRevenue:U.revenue,commission:U.commission,sharePercent:C>0?U.commission/C*100:0})).sort((R,U)=>U.commission-R.commission).slice(0,10);r(Z);const H=new Map;for(const R of h??[]){if(R.status!=="won"&&R.status!=="lost")continue;const U=b.get(R.event_id);if(!U)continue;const J=U.basePrice<=50?"50 Base":U.basePrice<=100?"100 Base":"100+ Base",K=H.get(J)??{commission:0};K.commission+=Math.floor((R.amount??0)*.1),H.set(J,K)}const k=Array.from(H.entries()).map(([R,U])=>({basePrice:R,commission:U.commission,sharePercent:C>0?U.commission/C*100:0})).sort((R,U)=>U.commission-R.commission);i(k)}finally{l(!1)}})()},[]);const c=e.total>0?Math.round(e.fromWinners/e.total*100):0,d=e.total>0?Math.round(e.fromNonWinners/e.total*100):0;return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Platform Commission"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Breakdown of commission collected across winners and non-winners plus projection insights."})]})}),n.jsxs(I,{children:[n.jsx($,{title:"Summary",subtitle:"Current overview"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Total Commission"}),n.jsx("p",{className:"mt-2 text-xl font-semibold text-[#28A745]",children:V(e.total)}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"All event revenue combined"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"From Winners"}),n.jsxs("p",{className:"mt-2 text-xl font-semibold text-[#212529]",children:[V(e.fromWinners)," (",c,"%)"]}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"10% cut from winning bids"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"From Non-winners"}),n.jsxs("p",{className:"mt-2 text-xl font-semibold text-[#212529]",children:[V(e.fromNonWinners)," (",d,"%)"]}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Retained from 90% refunds"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Events Processed"}),n.jsx("p",{className:"mt-2 text-xl font-semibold text-[#212529]",children:e.eventsProcessed}),n.jsxs("p",{className:"text-xs text-[#6C757D]",children:["Average per event ",V(e.avgPerEvent)]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Yearly Projection"}),n.jsx("p",{className:"mt-2 text-xl font-semibold text-[#212529]",children:V(e.yearlyProjection)}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Based on current run rate"})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Event Type Breakdown",subtitle:"Commission by pricing tier"}),n.jsxs(B,{className:"space-y-3",children:[a.length===0&&!o&&n.jsx("p",{className:"py-4 text-center text-sm text-[#6C757D]",children:"No data available"}),a.map(u=>n.jsxs("div",{className:"flex items-center justify-between rounded-[12px] border border-[#E9ECEF] bg-white px-4 py-3 text-sm text-[#212529]",children:[n.jsx("span",{children:u.basePrice}),n.jsxs("span",{className:"text-[#6C757D]",children:[u.sharePercent.toFixed(1),"%"]}),n.jsx("span",{className:"font-semibold",children:V(u.commission)})]},u.basePrice))]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Commission by Creator",subtitle:"Top contributors to platform revenue"}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Creator"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Events"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Total Revenue"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Commission"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Share"})]})}),n.jsxs("tbody",{children:[s.map(u=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#212529]",children:u.creatorName}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:u.eventsCount}),n.jsx("td",{className:"py-3 text-[#212529]",children:V(u.totalRevenue)}),n.jsx("td",{className:"py-3 font-semibold text-[#28A745]",children:V(u.commission)}),n.jsxs("td",{className:"py-3 text-[#6C757D]",children:[u.sharePercent.toFixed(1),"%"]})]},u.creatorId)),s.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-8 text-center text-[#6C757D]",children:o?"Loading...":"No commission data available"})})]})]})})]})]})}function QP(){const[e,t]=y.useState([]),[s,r]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState([]),[c,d]=y.useState(!1);return y.useEffect(()=>{(async()=>{d(!0);try{const{data:h}=await D.from("users").select("id, role, created_at"),f=(h==null?void 0:h.length)??0,v=(h??[]).filter(O=>O.role==="fan").length,b=(h??[]).filter(O=>O.role==="creator").length,{data:g}=await D.from("bids").select("id, event_id, fan_id, amount, status, created_at"),w=(g==null?void 0:g.length)??0,p=(g??[]).filter(O=>O.status==="won"),m=new Set((g??[]).map(O=>O.fan_id)).size,x=w>0?(g??[]).reduce((O,z)=>O+(z.amount??0),0)/w:0,N=w>0?p.length/w*100:0,{data:j}=await D.from("events").select("id, creator_id, status, base_price, is_paid, created_at"),C=(j==null?void 0:j.length)??0,E=(j??[]).filter(O=>O.status==="completed").length,_=C>0?E/C*100:0,{data:S}=await D.from("meets").select("id, status"),F=(S??[]).filter(O=>O.status==="completed").length,A=p.reduce((O,z)=>O+(z.amount??0),0),M=v>0?A/v:0,L=f>0?m/f*100:0,P=new Date,q=new Date(P.getFullYear(),P.getMonth(),1),Z=new Date(P.getFullYear(),P.getMonth()-1,1),H=new Date(P.getFullYear(),P.getMonth(),0),k=(h??[]).filter(O=>new Date(O.created_at)>=q).length,R=(h??[]).filter(O=>{const z=new Date(O.created_at);return z>=Z&&z<=H}).length,U=R>0?(k-R)/R*100:0;t([{label:"Monthly Growth Rate",value:`${U>=0?"+":""}${U.toFixed(1)}%`,variant:U>=0?"success":"danger"},{label:"Conversion Rate",value:`${L.toFixed(1)}%`,variant:L>10?"success":"warning"},{label:"Avg Bid Amount",value:V(x)},{label:"Win Rate",value:`${N.toFixed(1)}%`},{label:"Event Completion",value:`${_.toFixed(1)}%`,variant:_>90?"success":"warning"},{label:"ARPU",value:V(M)},{label:"Total Revenue",value:V(A),variant:"success"},{label:"Active Creators",value:b.toString()}]),r([{stage:"Total Users",value:f,percentage:"100%"},{stage:"Fans (Potential Bidders)",value:v,percentage:f>0?`${(v/f*100).toFixed(1)}%`:"0%"},{stage:"Placed a Bid",value:m,percentage:f>0?`${(m/f*100).toFixed(1)}%`:"0%"},{stage:"Won an Event",value:p.length,percentage:f>0?`${(p.length/f*100).toFixed(1)}%`:"0%"},{stage:"Completed Meet",value:F,percentage:f>0?`${(F/f*100).toFixed(1)}%`:"0%"}]);const J=(j??[]).filter(O=>(O.base_price??0)<=50&&O.is_paid!==!1),K=(j??[]).filter(O=>(O.base_price??0)>50&&(O.base_price??0)<=100),ae=(j??[]).filter(O=>O.is_paid===!1),oe=(O,z)=>{const G=O.map(ie=>ie.id),ue=(g??[]).filter(ie=>G.includes(ie.event_id)),fe=ue.filter(ie=>ie.status==="won"),he=O.filter(ie=>ie.status==="completed").length;return{label:z,totalCreated:O.length,avgParticipants:O.length>0?ue.length/O.length:0,avgFinalBid:fe.length>0?fe.reduce((ie,ye)=>ie+(ye.amount??0),0)/fe.length:0,completionRate:O.length>0?he/O.length*100:0,avgCreatorRevenue:fe.length>0?fe.reduce((ie,ye)=>ie+(ye.amount??0),0)*.9/fe.length:0}};i([oe(J,"Paid Events (50 Base)"),oe(K,"Paid Events (100 Base)"),oe(ae,"Free Events")]);const{data:le}=await D.from("profiles").select("user_id, display_name, username"),pe=new Map;for(const O of le??[])pe.set(O.user_id,O.display_name||O.username||"Creator");const ee=new Map;for(const O of j??[])ee.set(O.id,O.creator_id);const W=new Map;for(const O of p){const z=ee.get(O.event_id);if(!z)continue;const G=W.get(z)??{events:new Set,revenue:0};G.events.add(O.event_id),G.revenue+=(O.amount??0)*.9,W.set(z,G)}const se=Array.from(W.entries()).map(([O,z])=>({creatorId:O,name:pe.get(O)??"Unknown",eventsCount:z.events.size,revenue:z.revenue})).sort((O,z)=>z.revenue-O.revenue).slice(0,5);l(se)}finally{d(!1)}})()},[]),n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Business Analytics"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"High-level KPIs, funnel health, and performance metrics."})]})}),n.jsxs(I,{children:[n.jsx($,{title:"Key Performance Indicators",subtitle:"Current metrics overview"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.map(u=>n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:u.label}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#212529]",children:u.value}),u.variant&&n.jsx(Q,{variant:u.variant,children:"Current"})]},u.label)),e.length===0&&c&&n.jsx("p",{className:"col-span-4 py-4 text-center text-sm text-[#6C757D]",children:"Loading..."})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Conversion Funnel",subtitle:"User journey from signup to completed meet"}),n.jsxs(B,{className:"space-y-3",children:[s.map((u,h)=>n.jsxs("div",{className:"flex items-center justify-between rounded-[12px] border border-[#E9ECEF] bg-white px-4 py-3 text-sm text-[#212529]",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-[#6C757D] text-xs text-white",children:h+1}),u.stage]}),n.jsx("span",{className:"text-[#6C757D]",children:u.percentage}),n.jsx("span",{className:"font-semibold",children:u.value.toLocaleString()})]},u.stage)),s.length===0&&!c&&n.jsx("p",{className:"py-4 text-center text-sm text-[#6C757D]",children:"No data available"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Event Performance",subtitle:"Compare paid vs free categories"}),n.jsx(B,{className:"grid gap-4 md:grid-cols-3",children:a.map(u=>n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-sm text-[#212529]",children:[n.jsx("h2",{className:"font-semibold",children:u.label}),n.jsxs("ul",{className:"mt-3 space-y-2 text-[#6C757D]",children:[n.jsxs("li",{children:["Total Created: ",n.jsx("strong",{children:u.totalCreated})]}),n.jsxs("li",{children:["Avg Participants: ",n.jsx("strong",{children:u.avgParticipants.toFixed(1)})]}),n.jsxs("li",{children:["Avg Final Bid: ",n.jsx("strong",{children:V(u.avgFinalBid)})]}),n.jsxs("li",{children:["Completion: ",n.jsxs("strong",{children:[u.completionRate.toFixed(0),"%"]})]}),n.jsxs("li",{children:["Avg Creator Revenue: ",n.jsx("strong",{children:V(u.avgCreatorRevenue)})]})]})]},u.label))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Top Creators by Revenue",subtitle:"Highest earning creators"}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Rank"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Creator"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Events"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Revenue"})]})}),n.jsxs("tbody",{children:[o.map((u,h)=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3",children:n.jsxs(Q,{variant:h===0?"success":h===1?"primary":"warning",children:["#",h+1]})}),n.jsx("td",{className:"py-3 text-[#212529]",children:u.name}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:u.eventsCount}),n.jsx("td",{className:"py-3 font-semibold text-[#28A745]",children:V(u.revenue)})]},u.creatorId)),o.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"py-8 text-center text-[#6C757D]",children:c?"Loading...":"No creator data available"})})]})]})})]})]})}function JP(){const[e,t]=y.useState({totalUsers:0,totalFans:0,totalCreators:0,activeLast24h:0,activeLast7d:0,activeLast30d:0,newUsersToday:0,newUsersThisWeek:0,newUsersThisMonth:0}),[s,r]=y.useState([]),[a,i]=y.useState({inactiveUsers:0,inactiveRate:"0%",usersNeverBid:0,usersNeverWon:0}),[o,l]=y.useState([]),[c,d]=y.useState(!1);y.useEffect(()=>{(async()=>{d(!0);try{const v=new Date,b=new Date(v.getFullYear(),v.getMonth(),v.getDate()),g=new Date(v.getTime()-7*24*60*60*1e3),w=new Date(v.getTime()-30*24*60*60*1e3),p=new Date(v.getFullYear(),v.getMonth(),1),{data:m}=await D.from("users").select("id, role, created_at, account_status"),x=(m==null?void 0:m.length)??0,N=(m??[]).filter(O=>O.role==="fan").length,j=(m??[]).filter(O=>O.role==="creator").length,C=(m??[]).filter(O=>new Date(O.created_at)>=b).length,E=(m??[]).filter(O=>new Date(O.created_at)>=g).length,_=(m??[]).filter(O=>new Date(O.created_at)>=p).length,{data:S}=await D.from("bids").select("id, fan_id, amount, status, created_at"),F=(S??[]).filter(O=>new Date(O.created_at)>=b),A=(S??[]).filter(O=>new Date(O.created_at)>=g),M=(S??[]).filter(O=>new Date(O.created_at)>=w),L=new Set(F.map(O=>O.fan_id)).size,P=new Set(A.map(O=>O.fan_id)).size,q=new Set(M.map(O=>O.fan_id)).size;t({totalUsers:x,totalFans:N,totalCreators:j,activeLast24h:L,activeLast7d:P,activeLast30d:q,newUsersToday:C,newUsersThisWeek:E,newUsersThisMonth:_});const Z=new Map;for(const O of S??[]){const z=Z.get(O.fan_id)??{count:0,total:0,wins:0};z.count++,z.total+=O.amount??0,O.status==="won"&&z.wins++,Z.set(O.fan_id,z)}const H=(m??[]).filter(O=>O.role==="fan").map(O=>O.id),k=H.filter(O=>Z.has(O)),R=H.length-k.length,U=k.filter(O=>{var z;return(((z=Z.get(O))==null?void 0:z.count)??0)>=5}),J=k.filter(O=>{var G;const z=((G=Z.get(O))==null?void 0:G.count)??0;return z>=2&&z<5}),K=k.filter(O=>{var G;return(((G=Z.get(O))==null?void 0:G.count)??0)===1}),ae=k.filter(O=>{var z;return(((z=Z.get(O))==null?void 0:z.wins)??0)===0}).length,oe=new Set(M.map(O=>O.fan_id)),le=H.filter(O=>!oe.has(O)),pe=H.length>0?le.length/H.length*100:0;r([{name:"High Value Users",count:U.length,share:N>0?`${(U.length/N*100).toFixed(1)}%`:"0%",description:`5+ bids  Avg spend ${V(U.reduce((O,z)=>{var G;return O+(((G=Z.get(z))==null?void 0:G.total)??0)},0)/Math.max(U.length,1))}`,variant:"success"},{name:"Regular Users",count:J.length,share:N>0?`${(J.length/N*100).toFixed(1)}%`:"0%",description:`2-4 bids  Avg spend ${V(J.reduce((O,z)=>{var G;return O+(((G=Z.get(z))==null?void 0:G.total)??0)},0)/Math.max(J.length,1))}`,variant:"primary"},{name:"Occasional Users",count:K.length,share:N>0?`${(K.length/N*100).toFixed(1)}%`:"0%",description:`1 bid  Avg spend ${V(K.reduce((O,z)=>{var G;return O+(((G=Z.get(z))==null?void 0:G.total)??0)},0)/Math.max(K.length,1))}`,variant:"warning"},{name:"Inactive Users",count:le.length,share:N>0?`${(le.length/N*100).toFixed(1)}%`:"0%",description:"No activity in 30+ days  at-risk",variant:"danger"}]),i({inactiveUsers:le.length,inactiveRate:`${pe.toFixed(1)}%`,usersNeverBid:R,usersNeverWon:ae});const{data:ee}=await D.from("profiles").select("user_id, display_name, username"),W=new Map;for(const O of ee??[])W.set(O.user_id,O.display_name||O.username||"Fan");const se=Array.from(Z.entries()).map(([O,z])=>({fanId:O,name:W.get(O)??"Unknown",bidsCount:z.count,totalSpent:z.total,winsCount:z.wins})).sort((O,z)=>z.totalSpent-O.totalSpent).slice(0,5);l(se)}finally{d(!1)}})()},[]);const u=e.activeLast30d>0?(e.activeLast24h/e.activeLast30d*100).toFixed(1):"0",h=e.activeLast30d>0?(e.activeLast7d/e.activeLast30d*100).toFixed(1):"0";return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"User Analytics"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Understand who your users are and how they behave across the platform."})]})}),n.jsxs(I,{children:[n.jsx($,{title:"User Overview",subtitle:"Total user counts by role"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Total Users"}),n.jsx("p",{className:"mt-2 text-2xl font-semibold text-[#212529]",children:e.totalUsers.toLocaleString()})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Total Fans"}),n.jsx("p",{className:"mt-2 text-2xl font-semibold text-[#212529]",children:e.totalFans.toLocaleString()})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Total Creators"}),n.jsx("p",{className:"mt-2 text-2xl font-semibold text-[#212529]",children:e.totalCreators.toLocaleString()})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Activity Metrics",subtitle:"User engagement over different time periods"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:"Active Last 24h (DAU)"}),n.jsx("p",{className:"mt-2 text-lg font-semibold",children:e.activeLast24h.toLocaleString()})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:"Active Last 7 Days (WAU)"}),n.jsx("p",{className:"mt-2 text-lg font-semibold",children:e.activeLast7d.toLocaleString()})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:"Active Last 30 Days (MAU)"}),n.jsx("p",{className:"mt-2 text-lg font-semibold",children:e.activeLast30d.toLocaleString()})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:"DAU/MAU Ratio"}),n.jsxs("p",{className:"mt-2 text-lg font-semibold",children:[u,"%"]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:"WAU/MAU Ratio"}),n.jsxs("p",{className:"mt-2 text-lg font-semibold",children:[h,"%"]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:"New Users This Month"}),n.jsx("p",{className:"mt-2 text-lg font-semibold",children:e.newUsersThisMonth.toLocaleString()})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"User Segments",subtitle:"Behavior-based clusters"}),n.jsx(B,{className:"grid gap-4 md:grid-cols-2",children:s.map(f=>n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6 text-sm text-[#212529]",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"font-semibold",children:f.name}),n.jsxs(Q,{variant:f.variant,children:[f.count," users (",f.share,")"]})]}),n.jsx("p",{className:"mt-3 text-[#6C757D]",children:f.description})]},f.name))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Churn & Risk Analysis",subtitle:"Keep an eye on at-risk users"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:"Inactive Rate (30+ days)"}),n.jsx("p",{className:"text-3xl font-semibold text-[#DC3545]",children:a.inactiveRate}),n.jsxs("p",{className:"mt-3",children:["Inactive Users: ",n.jsx("strong",{children:a.inactiveUsers})]}),n.jsxs("p",{children:["Users Never Bid: ",n.jsx("strong",{children:a.usersNeverBid})]}),n.jsxs("p",{children:["Users Never Won: ",n.jsx("strong",{children:a.usersNeverWon})]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-6 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-[#6C757D]",children:"New User Growth"}),n.jsxs("ul",{className:"mt-3 space-y-2 text-[#6C757D]",children:[n.jsxs("li",{className:"flex justify-between",children:[n.jsx("span",{children:"Today"}),n.jsxs(Q,{variant:"success",children:["+",e.newUsersToday]})]}),n.jsxs("li",{className:"flex justify-between",children:[n.jsx("span",{children:"This Week"}),n.jsxs(Q,{variant:"primary",children:["+",e.newUsersThisWeek]})]}),n.jsxs("li",{className:"flex justify-between",children:[n.jsx("span",{children:"This Month"}),n.jsxs(Q,{variant:"warning",children:["+",e.newUsersThisMonth]})]})]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Top Fans by Spending",subtitle:"Most engaged users"}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Rank"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Fan"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Bids"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Total Spent"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Wins"})]})}),n.jsxs("tbody",{children:[o.map((f,v)=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3",children:n.jsxs(Q,{variant:v===0?"success":v===1?"primary":"warning",children:["#",v+1]})}),n.jsx("td",{className:"py-3 text-[#212529]",children:f.name}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:f.bidsCount}),n.jsx("td",{className:"py-3 font-semibold text-[#212529]",children:V(f.totalSpent)}),n.jsx("td",{className:"py-3",children:n.jsxs(Q,{variant:f.winsCount>0?"success":"warning",children:[f.winsCount," wins"]})})]},f.fanId)),o.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-8 text-center text-[#6C757D]",children:c?"Loading...":"No fan data available"})})]})]})})]})]})}function XP(){var b;const[e,t]=y.useState("revenue"),[s,r]=y.useState("month"),[a,i]=y.useState({totalRevenue:0,totalCommission:0,totalRefunds:0,eventsCount:0,bidsCount:0,creatorsCount:0,withdrawalsCount:0}),[o,l]=y.useState(!1),[c,d]=y.useState(!1),u=g=>{const w=new Date,p=new Date(w);let m=new Date(w);switch(g){case"7days":m.setDate(m.getDate()-7);break;case"30days":m.setDate(m.getDate()-30);break;case"month":m=new Date(w.getFullYear(),w.getMonth(),1);break;case"all":m=new Date(2020,0,1);break}return{start:m,end:p}};y.useEffect(()=>{(async()=>{l(!0);try{const{start:w,end:p}=u(s),{data:m}=await D.from("bids").select("amount, status, created_at").gte("created_at",w.toISOString()).lte("created_at",p.toISOString()),x=(m??[]).filter(M=>M.status==="won"),N=(m??[]).filter(M=>M.status==="lost"),j=[...x,...N].reduce((M,L)=>M+(L.amount??0),0),C=Math.floor(j*.1),E=C,_=N.reduce((M,L)=>M+Math.floor((L.amount??0)*.9),0),{data:S}=await D.from("events").select("id").gte("created_at",w.toISOString()).lte("created_at",p.toISOString()),{data:F}=await D.from("users").select("id").eq("role","creator"),{data:A}=await D.from("withdrawal_requests").select("id").gte("requested_at",w.toISOString()).lte("requested_at",p.toISOString());i({totalRevenue:E,totalCommission:C,totalRefunds:_,eventsCount:(S==null?void 0:S.length)??0,bidsCount:(m==null?void 0:m.length)??0,creatorsCount:(F==null?void 0:F.length)??0,withdrawalsCount:(A==null?void 0:A.length)??0})}finally{l(!1)}})()},[s]);const h=async()=>{d(!0);try{const{start:g,end:w}=u(s);let p="",m="";if(e==="revenue"||e==="bids"){const{data:C}=await D.from("bids").select("id, event_id, fan_id, amount, status, created_at").gte("created_at",g.toISOString()).lte("created_at",w.toISOString()).order("created_at",{ascending:!1});p=`ID,Event ID,Fan ID,Amount,Status,Date
`;for(const E of C??[])p+=`${E.id},${E.event_id},${E.fan_id},${E.amount},${E.status},"${de(E.created_at)}"
`;m=`bids_report_${s}.csv`}else if(e==="events"){const{data:C}=await D.from("events").select("id, creator_id, title, status, base_price, starts_at, created_at").gte("created_at",g.toISOString()).lte("created_at",w.toISOString()).order("created_at",{ascending:!1});p=`ID,Creator ID,Title,Status,Base Price,Starts At,Created At
`;for(const E of C??[])p+=`${E.id},${E.creator_id},"${E.title}",${E.status},${E.base_price},"${de(E.starts_at)}","${de(E.created_at)}"
`;m=`events_report_${s}.csv`}else if(e==="creators"){const{data:C}=await D.from("profiles").select("user_id, display_name, username, category, created_at"),{data:E}=await D.from("users").select("id, email").eq("role","creator"),_=new Map;for(const S of E??[])_.set(S.id,S.email);p=`User ID,Display Name,Username,Email,Category,Created At
`;for(const S of C??[]){const F=_.get(S.user_id)??"";F&&(p+=`${S.user_id},"${S.display_name??""}",${S.username??""},${F},${S.category??""},"${de(S.created_at)}"
`)}m="creators_report.csv"}else if(e==="withdrawals"){const{data:C}=await D.from("withdrawal_requests").select("id, creator_id, amount, destination, status, requested_at, processed_at").gte("requested_at",g.toISOString()).lte("requested_at",w.toISOString()).order("requested_at",{ascending:!1});p=`ID,Creator ID,Amount,Destination,Status,Requested At,Processed At
`;for(const E of C??[])p+=`${E.id},${E.creator_id},${E.amount},"${E.destination??""}",${E.status},"${de(E.requested_at)}","${E.processed_at?de(E.processed_at):""}"
`;m=`withdrawals_report_${s}.csv`}const x=new Blob([p],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(x),j=document.createElement("a");j.setAttribute("href",N),j.setAttribute("download",m),j.style.visibility="hidden",document.body.appendChild(j),j.click(),document.body.removeChild(j),alert(`Report exported: ${m}`)}finally{d(!1)}},f=[{key:"revenue",label:"Revenue Summary",icon:""},{key:"bids",label:"Bids Report",icon:""},{key:"events",label:"Events Report",icon:""},{key:"creators",label:"Creators Report",icon:""},{key:"withdrawals",label:"Withdrawals Report",icon:""}],v={"7days":"Last 7 Days","30days":"Last 30 Days",month:"This Month",all:"All Time"};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Revenue Reports"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Generate and export financial reports from your platform data."})]})}),n.jsxs(I,{children:[n.jsx($,{title:"Quick Stats",subtitle:`Overview for ${v[s]}`}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Total Revenue"}),n.jsx("p",{className:"mt-2 text-xl font-semibold text-[#212529]",children:V(a.totalRevenue)})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Platform Commission"}),n.jsx("p",{className:"mt-2 text-xl font-semibold text-[#28A745]",children:V(a.totalCommission)})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Total Refunds"}),n.jsx("p",{className:"mt-2 text-xl font-semibold text-[#DC3545]",children:V(a.totalRefunds)})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Totals"}),n.jsxs("p",{className:"mt-2 text-sm text-[#212529]",children:[a.eventsCount," events  ",a.bidsCount," bids  ",a.creatorsCount," creators"]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Generate Report",subtitle:"Select report type and date range to export."}),n.jsxs(B,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"mb-2 text-sm font-semibold text-[#212529]",children:"Report Type"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(g=>n.jsxs(T,{size:"sm",variant:e===g.key?"secondary":"ghost",onClick:()=>t(g.key),children:[g.icon," ",g.label]},g.key))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-2 text-sm font-semibold text-[#212529]",children:"Date Range"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["7days","30days","month","all"].map(g=>n.jsx(T,{size:"sm",variant:s===g?"secondary":"ghost",onClick:()=>r(g),children:v[g]},g))})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Report Configuration"}),n.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-[#6C757D]",children:[n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Report Type"}),n.jsx("span",{className:"font-medium text-[#212529]",children:(b=f.find(g=>g.key===e))==null?void 0:b.label})]}),n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Date Range"}),n.jsx("span",{className:"font-medium text-[#212529]",children:v[s]})]}),n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Format"}),n.jsx("span",{className:"font-medium text-[#212529]",children:"CSV"})]})]})]}),n.jsx(T,{onClick:h,disabled:c||o,children:c?" Generating...":" Export CSV Report"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Available Reports",subtitle:"Quick export options for common reports."}),n.jsx(B,{className:"space-y-3",children:f.map(g=>n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-[12px] border border-[#E9ECEF] bg-white px-4 py-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-[#212529]",children:[g.icon," ",g.label]}),n.jsxs("div",{className:"text-xs text-[#6C757D]",children:["Export ",g.key==="creators"?"all creators":`${v[s].toLowerCase()}`," data"]})]}),n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>{t(g.key),h()},disabled:c,children:"Export"})]},g.key))})]})]})}function ZP(){const[e,t]=y.useState({liveNow:0,eventsToday:0,eventsThisWeek:0,eventsThisMonth:0,completionRate:0,avgBidAmount:0,avgBidsPerEvent:0,totalRevenue:0}),[s,r]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState([]),[c,d]=y.useState([]),[u,h]=y.useState(!1);y.useEffect(()=>{(async()=>{h(!0);try{const b=new Date,g=new Date(b.getFullYear(),b.getMonth(),b.getDate()),w=new Date(b.getTime()-7*24*60*60*1e3),p=new Date(b.getFullYear(),b.getMonth(),1),{data:m}=await D.from("events").select("id, creator_id, title, status, category, base_price, starts_at, created_at"),x=(m==null?void 0:m.length)??0,N=(m??[]).filter(ee=>ee.status==="live").length,j=(m??[]).filter(ee=>new Date(ee.created_at)>=g).length,C=(m??[]).filter(ee=>new Date(ee.created_at)>=w).length,E=(m??[]).filter(ee=>new Date(ee.created_at)>=p).length,_=(m??[]).filter(ee=>ee.status==="completed").length,S=x>0?_/x*100:0,{data:F}=await D.from("bids").select("id, event_id, amount, status"),A=(F==null?void 0:F.length)??0,M=A>0?(F??[]).reduce((ee,W)=>ee+(W.amount??0),0)/A:0,L=x>0?A/x:0,P=(F??[]).filter(ee=>ee.status==="won"),q=P.reduce((ee,W)=>ee+(W.amount??0),0);t({liveNow:N,eventsToday:j,eventsThisWeek:C,eventsThisMonth:E,completionRate:S,avgBidAmount:M,avgBidsPerEvent:L,totalRevenue:q});const Z=new Map;for(const ee of m??[])Z.set(ee.status,(Z.get(ee.status)??0)+1);const H=Array.from(Z.entries()).map(([ee,W])=>({status:ee,count:W,percentage:x>0?W/x*100:0})).sort((ee,W)=>W.count-ee.count);r(H);const k=new Map;for(const ee of m??[]){const W=ee.category||"general",se=k.get(W)??{count:0,eventIds:[]};se.count++,se.eventIds.push(ee.id),k.set(W,se)}const R=Array.from(k.entries()).map(([ee,W])=>{const O=P.filter(z=>W.eventIds.includes(z.event_id)).reduce((z,G)=>z+(G.amount??0),0);return{category:ee,count:W.count,revenue:O}}).sort((ee,W)=>W.count-ee.count);i(R);const U=Array.from(new Set((m??[]).map(ee=>ee.creator_id))),{data:J}=U.length?await D.from("profiles").select("user_id, display_name, username").in("user_id",U):{data:[]},K=new Map;for(const ee of J??[])K.set(ee.user_id,ee.display_name||ee.username||"Creator");const ae=new Map;for(const ee of F??[]){const W=ae.get(ee.event_id)??{count:0,highest:0};W.count++,W.highest=Math.max(W.highest,ee.amount??0),ae.set(ee.event_id,W)}const oe=(m??[]).map(ee=>{var W,se;return{id:ee.id,title:ee.title,creatorName:K.get(ee.creator_id)??"Unknown",bidsCount:((W=ae.get(ee.id))==null?void 0:W.count)??0,highestBid:((se=ae.get(ee.id))==null?void 0:se.highest)??0,status:ee.status}}),le=[...oe].sort((ee,W)=>W.bidsCount-ee.bidsCount).slice(0,5);l(le);const pe=[...oe].sort((ee,W)=>{const se=(m??[]).find(z=>z.id===ee.id),O=(m??[]).find(z=>z.id===W.id);return new Date((O==null?void 0:O.created_at)??0).getTime()-new Date((se==null?void 0:se.created_at)??0).getTime()}).slice(0,5);d(pe)}finally{h(!1)}})()},[]);const f={live:"danger",upcoming:"primary",completed:"success",cancelled:"warning",draft:"warning"};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Event Analytics"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Deep dive into event performance and engagement metrics."})]})}),n.jsxs(I,{children:[n.jsx($,{title:"Key Metrics",subtitle:"Real-time event snapshot"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Events Live Now"}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#DC3545]",children:e.liveNow}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Currently active"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Events Today"}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#212529]",children:e.eventsToday}),n.jsxs("p",{className:"text-xs text-[#6C757D]",children:[e.eventsThisWeek," this week"]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Completion Rate"}),n.jsxs("p",{className:"mt-2 text-lg font-semibold text-[#28A745]",children:[e.completionRate.toFixed(1),"%"]}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Events successfully completed"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Avg Bid Amount"}),n.jsx("p",{className:"mt-2 text-lg font-semibold text-[#212529]",children:V(e.avgBidAmount)}),n.jsxs("p",{className:"text-xs text-[#6C757D]",children:[e.avgBidsPerEvent.toFixed(1)," bids/event avg"]})]})]})]}),n.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[n.jsxs(I,{children:[n.jsx($,{title:"Events by Status",subtitle:"Distribution across statuses"}),n.jsxs(B,{className:"space-y-3",children:[s.map(v=>n.jsxs("div",{className:"flex items-center justify-between rounded-[12px] border border-[#E9ECEF] bg-white px-4 py-3 text-sm",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(Q,{variant:f[v.status]??"primary",children:v.status.charAt(0).toUpperCase()+v.status.slice(1)})}),n.jsxs("span",{className:"text-[#6C757D]",children:[v.percentage.toFixed(1),"%"]}),n.jsx("span",{className:"font-semibold text-[#212529]",children:v.count})]},v.status)),s.length===0&&n.jsx("p",{className:"py-4 text-center text-sm text-[#6C757D]",children:u?"Loading...":"No events data"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Events by Category",subtitle:"Revenue and count per category"}),n.jsxs(B,{className:"space-y-3",children:[a.map(v=>n.jsxs("div",{className:"flex items-center justify-between rounded-[12px] border border-[#E9ECEF] bg-white px-4 py-3 text-sm",children:[n.jsx("span",{className:"text-[#212529] capitalize",children:v.category}),n.jsxs("span",{className:"text-[#6C757D]",children:[v.count," events"]}),n.jsx("span",{className:"font-semibold text-[#28A745]",children:V(v.revenue)})]},v.category)),a.length===0&&n.jsx("p",{className:"py-4 text-center text-sm text-[#6C757D]",children:u?"Loading...":"No category data"})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Top Events by Bids",subtitle:"Most popular events"}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Event"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Creator"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Bids"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Highest Bid"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"})]})}),n.jsxs("tbody",{children:[o.map(v=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#212529]",children:v.title}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:v.creatorName}),n.jsx("td",{className:"py-3 font-semibold text-[#212529]",children:v.bidsCount}),n.jsx("td",{className:"py-3 text-[#28A745]",children:V(v.highestBid)}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:f[v.status]??"primary",children:v.status})})]},v.id)),o.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-8 text-center text-[#6C757D]",children:u?"Loading...":"No event data available"})})]})]})})]}),n.jsxs(I,{children:[n.jsx($,{title:"Recent Events",subtitle:"Latest created events"}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Event"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Creator"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Bids"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"})]})}),n.jsx("tbody",{children:c.map(v=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#212529]",children:v.title}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:v.creatorName}),n.jsx("td",{className:"py-3 text-[#212529]",children:v.bidsCount}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:f[v.status]??"primary",children:v.status})})]},v.id))})]})})]})]})}const cg={login:"Login",logout:"Logout",signup:"Signup",event_created:"Event Created",event_updated:"Event Updated",event_cancelled:"Event Cancelled",event_completed:"Event Completed",bid_placed:"Bid Placed",bid_won:"Bid Won",bid_refunded:"Bid Refunded",withdrawal_requested:"Withdrawal Requested",withdrawal_approved:"Withdrawal Approved",withdrawal_rejected:"Withdrawal Rejected",user_suspended:"User Suspended",user_banned:"User Banned",user_unbanned:"User Unbanned",creator_approved:"Creator Approved",creator_rejected:"Creator Rejected",settings_updated:"Settings Updated",announcement_published:"Announcement Published",meet_scheduled:"Meet Scheduled",meet_completed:"Meet Completed",payment_processed:"Payment Processed",refund_processed:"Refund Processed",other:"Other"},e4={system:"primary",admin:"danger",creator:"success",fan:"warning"};function t4(){const[e,t]=y.useState([]),[s,r]=y.useState(!1),[a,i]=y.useState(""),[o,l]=y.useState(null),[c,d]=y.useState(null),u=async()=>{r(!0);try{let g=D.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(100);o&&(g=g.eq("action_type",o)),c&&(g=g.eq("actor_type",c));const{data:w,error:p}=await g;if(p){console.error("Error fetching audit logs:",p),t([]);return}const m=(w??[]).map(x=>({id:x.id,actorId:x.actor_id,actorType:x.actor_type,actorName:x.actor_name,action:x.action,actionType:x.action_type,resourceType:x.resource_type,resourceId:x.resource_id,details:x.details,status:x.status,createdAt:x.created_at}));t(m)}finally{r(!1)}};y.useEffect(()=>{u()},[o,c]);const h=e.filter(g=>{var p;if(!a)return!0;const w=a.toLowerCase();return g.action.toLowerCase().includes(w)||g.id.toLowerCase().includes(w)||(((p=g.actorName)==null?void 0:p.toLowerCase().includes(w))??!1)}),f=["system","admin","creator","fan"],v={success:"success",warning:"warning",error:"danger"},b=()=>{const g=`ID,Time,Actor,Action,Type,Status
`+h.map(x=>`${x.id},"${de(x.createdAt)}","${x.actorName||x.actorType}","${x.action}",${x.actionType},${x.status}`).join(`
`),w=new Blob([g],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(w),m=document.createElement("a");m.setAttribute("href",p),m.setAttribute("download",`audit_logs_${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Audit Logs"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Immutable record of every critical action across the platform."})]}),n.jsx(T,{variant:"secondary",onClick:b,children:" Export CSV"})]}),n.jsxs(I,{children:[n.jsx($,{title:"Filters",subtitle:"Filter logs by actor type and action type"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsx(te,{label:"Search",placeholder:"ID, actor, action...",value:a,onChange:g=>i(g.target.value)}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Actor Type"}),n.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[n.jsx(T,{size:"sm",variant:c===null?"secondary":"ghost",onClick:()=>d(null),children:"All"}),f.map(g=>n.jsx(T,{size:"sm",variant:c===g?"secondary":"ghost",onClick:()=>d(g),children:g.charAt(0).toUpperCase()+g.slice(1)},g))]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Action Type"}),n.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[n.jsx(T,{size:"sm",variant:o===null?"secondary":"ghost",onClick:()=>l(null),children:"All"}),["login","bid_placed","bid_won","bid_refunded","withdrawal_approved","event_created"].map(g=>n.jsx(T,{size:"sm",variant:o===g?"secondary":"ghost",onClick:()=>l(g),children:cg[g]},g))]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Log Stream",subtitle:`${h.length} entries  Newest first`}),n.jsxs(B,{className:"space-y-4",children:[h.length===0&&n.jsx("p",{className:"py-8 text-center text-sm text-[#6C757D]",children:s?"Loading logs...":"No audit logs found. Actions will appear here as they occur."}),h.map(g=>n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5 text-sm text-[#212529]",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("div",{className:"font-semibold",children:g.action}),n.jsx(Q,{variant:v[g.status]??"primary",children:g.status.charAt(0).toUpperCase()+g.status.slice(1)})]}),n.jsxs("p",{className:"mt-2 text-[#6C757D]",children:[de(g.createdAt)," "," ",n.jsx(Q,{variant:e4[g.actorType]??"primary",children:g.actorType}),g.actorName&&`  ${g.actorName}`]}),g.details&&Object.keys(g.details).length>0&&n.jsxs("p",{className:"mt-2 text-xs text-[#6C757D]",children:[JSON.stringify(g.details).slice(0,200),JSON.stringify(g.details).length>200&&"..."]}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:[n.jsx(Q,{variant:"primary",children:cg[g.actionType]??g.actionType}),g.resourceType&&n.jsx(Q,{variant:"warning",children:g.resourceType})]})]},g.id))]})]})]})}const s4=[{label:"All",value:"all"},{label:" Overdue",value:"overdue"},{label:"Open",value:"open"},{label:"In Progress",value:"in_progress"},{label:"Resolved",value:"resolved"},{label:"Closed",value:"closed"}],dg={open:"primary",in_progress:"warning",resolved:"success",closed:"danger"},n4=(e,t,s)=>{if(s==="resolved"||s==="closed"||t)return!1;const r=new Date(e);return(new Date().getTime()-r.getTime())/(1e3*60*60)>=24};function r4(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState([]),[i,o]=y.useState(!1),[l,c]=y.useState(""),[d,u]=y.useState("all"),[h,f]=y.useState(null),[v,b]=y.useState(""),[g,w]=y.useState(!1);y.useEffect(()=>{(async()=>{o(!0);try{const{data:C,error:E}=await D.from("support_tickets").select("id, subject, description, status, created_at, updated_at, first_response_at, users:user_id (email, role, display_name)").order("created_at",{ascending:!0});if(E||!C){console.error("Error fetching support tickets:",E),s([]);return}const _=C.map(S=>{const F=S.users,A=(F==null?void 0:F.display_name)||(F!=null&&F.email?F.email.split("@")[0]:"User"),M=n4(S.created_at,S.first_response_at,S.status);return{id:S.id,subject:S.subject,description:S.description,status:S.status,createdAt:S.created_at,updatedAt:S.updated_at,firstResponseAt:S.first_response_at,userName:A,userEmail:(F==null?void 0:F.email)??"",userRole:(F==null?void 0:F.role)??"",isOverdue:M}});_.sort((S,F)=>S.isOverdue&&!F.isOverdue?-1:!S.isOverdue&&F.isOverdue?1:new Date(S.createdAt).getTime()-new Date(F.createdAt).getTime()),s(_),_.length>0&&!h&&f(_[0].id)}finally{o(!1)}})()},[]),y.useEffect(()=>{(async()=>{if(!h){a([]);return}const{data:C,error:E}=await D.from("ticket_replies").select("id, message, is_admin_reply, created_at, user_id").eq("ticket_id",h).order("created_at",{ascending:!0});if(E||!C){console.error("Error fetching replies:",E),a([]);return}const _=[...new Set(C.map(F=>F.user_id).filter(Boolean))];let S={};if(_.length>0){const{data:F}=await D.from("users").select("id, display_name, email").in("id",_);F&&(S=Object.fromEntries(F.map(A=>{var M;return[A.id,A.display_name||((M=A.email)==null?void 0:M.split("@")[0])||"User"]})))}a(C.map(F=>({id:F.id,message:F.message,isAdminReply:F.is_admin_reply,createdAt:F.created_at,userName:F.is_admin_reply?"Support Team":S[F.user_id]||"User"})))})()},[h]);const p=y.useMemo(()=>{const j=l.trim().toLowerCase();return t.filter(C=>{if(d==="overdue"){if(!C.isOverdue)return!1}else if(d!=="all"&&C.status!==d)return!1;return j?C.subject.toLowerCase().includes(j)||C.userName.toLowerCase().includes(j)||C.userEmail.toLowerCase().includes(j)||C.id.toLowerCase().includes(j):!0})},[t,l,d]),m=async()=>{if(!e||!h||!v.trim()){alert("Please enter a reply message.");return}w(!0);try{const{error:j}=await D.from("ticket_replies").insert({ticket_id:h,user_id:e.id,message:v.trim(),is_admin_reply:!0});if(j){console.error("Error sending reply:",j),alert("Failed to send reply.");return}const C=t.find(E=>E.id===h);C&&!C.firstResponseAt&&(await D.from("support_tickets").update({first_response_at:new Date().toISOString(),status:C.status==="open"?"in_progress":C.status}).eq("id",h),s(E=>E.map(_=>_.id===h?{..._,firstResponseAt:new Date().toISOString(),isOverdue:!1,status:_.status==="open"?"in_progress":_.status}:_))),a(E=>[...E,{id:`temp-${Date.now()}`,message:v.trim(),isAdminReply:!0,createdAt:new Date().toISOString(),userName:"Support Team"}]),b(""),alert("Reply sent successfully!")}finally{w(!1)}},x=y.useMemo(()=>t.find(j=>j.id===h)??null,[t,h]),N=async(j,C)=>{if(window.confirm(`Change status of ticket "${j.subject}" to ${C.replace("_"," ")}?`)){o(!0);try{const{error:_}=await D.from("support_tickets").update({status:C}).eq("id",j.id);if(_){console.error("Error updating ticket:",_),alert("Failed to update ticket status.");return}s(S=>S.map(F=>F.id===j.id?{...F,status:C}:F))}finally{o(!1)}}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Support Tickets"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Track customer issues, update their status, and maintain SLAs."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",disabled:!0,children:"View SLA Dashboard"}),n.jsx(T,{disabled:!0,children:"Assign to Me"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Filters",subtitle:"Focus on critical tickets or specific owners."}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[n.jsx(te,{label:"Search",placeholder:"Ticket ID, subject, user",value:l,onChange:j=>c(j.target.value)}),n.jsx(te,{label:"Date Range",placeholder:"(coming soon)",disabled:!0}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Status"}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:s4.map(j=>n.jsx("button",{type:"button",className:`rounded-full border px-3 py-1 text-xs font-medium ${d===j.value?"border-[#C045FF] bg-[#F4E6FF] text-[#C045FF]":"border-[#E9ECEF] bg-white text-[#6C757D] hover:border-[#C045FF]/40"}`,onClick:()=>u(j.value),children:j.label},j.value))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Priority"}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:[n.jsx(Q,{variant:"danger",children:"Critical (coming soon)"}),n.jsx(Q,{variant:"warning",children:"High (coming soon)"})]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Tickets",subtitle:"Oldest tickets shown first. Overdue tickets (24h+ no response) highlighted in red."}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Ticket"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"User"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Created"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"SLA"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Actions"})]})}),n.jsxs("tbody",{children:[p.map(j=>n.jsxs("tr",{className:`border-b border-[#E9ECEF] ${j.isOverdue?"bg-red-50 hover:bg-red-100":h===j.id?"bg-[#F8F9FA]":""}`,children:[n.jsx("td",{className:"py-3 text-[#212529]",children:n.jsxs("button",{type:"button",className:"flex flex-col text-left",onClick:()=>f(j.id),children:[n.jsxs("div",{className:"flex items-center gap-2",children:[j.isOverdue&&n.jsx("span",{className:"text-red-500",children:""}),n.jsx("span",{className:"font-semibold",children:j.subject})]}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:[j.id.slice(0,8),"..."]})]})}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:j.userName}),n.jsx("span",{className:"text-xs",children:j.userEmail})]})}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:dg[j.status],children:j.status.replace("_"," ")})}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:de(j.createdAt)}),n.jsx("td",{className:"py-3",children:j.isOverdue?n.jsx("span",{className:"font-semibold text-red-600",children:" OVERDUE"}):j.firstResponseAt?n.jsx("span",{className:"text-green-600",children:" Responded"}):n.jsx("span",{className:"text-yellow-600",children:"Awaiting"})}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[j.status!=="resolved"&&n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>N(j,"resolved"),children:"Mark Resolved"}),j.status!=="in_progress"&&j.status!=="resolved"&&n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>N(j,"in_progress"),children:"In Progress"}),j.status!=="closed"&&n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>N(j,"closed"),children:"Close"})]})})]},j.id)),p.length===0&&!i&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-6 text-center text-sm text-[#6C757D]",children:"No tickets match your filters."})})]})]})})]}),n.jsxs(I,{children:[n.jsx($,{title:"Ticket Detail & Conversation",subtitle:"View ticket details and reply to the user."}),n.jsx(B,{className:"flex flex-col gap-4",children:x?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-col gap-4 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6 text-sm text-[#212529]",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[x.isOverdue&&n.jsx("span",{className:"text-red-500 text-lg",children:""}),n.jsx("h2",{className:"text-lg font-semibold",children:x.subject})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[x.isOverdue&&n.jsx(Q,{variant:"danger",children:"OVERDUE 24h+"}),n.jsx(Q,{variant:dg[x.status],children:x.status.replace("_"," ")})]})]}),n.jsxs("div",{className:"grid gap-2 text-[#6C757D] md:grid-cols-3",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold text-[#212529]",children:"From:"})," ",x.userName," (",x.userEmail,")"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold text-[#212529]",children:"Created:"})," ",de(x.createdAt)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold text-[#212529]",children:"Role:"})," ",x.userRole||"User"]})]}),n.jsxs("div",{className:"rounded-[12px] bg-white p-4 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Original Message"}),n.jsx("p",{className:"mt-2 whitespace-pre-line",children:x.description})]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-6",children:[n.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D] mb-4",children:["Conversation (",r.length," ",r.length===1?"reply":"replies",")"]}),n.jsx("div",{className:"flex flex-col gap-3 max-h-[400px] overflow-y-auto",children:r.length===0?n.jsx("p",{className:"text-sm text-[#6C757D] text-center py-4",children:"No replies yet. Be the first to respond!"}):r.map(j=>n.jsxs("div",{className:`rounded-[12px] p-4 ${j.isAdminReply?"bg-[#F4E6FF] ml-8":"bg-[#F8F9FA] mr-8"}`,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[n.jsxs("span",{className:`text-sm font-semibold ${j.isAdminReply?"text-[#C045FF]":"text-[#212529]"}`,children:[j.userName,j.isAdminReply&&" (Admin)"]}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:de(j.createdAt)})]}),n.jsx("p",{className:"text-sm text-[#212529] whitespace-pre-line",children:j.message})]},j.id))})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-6",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D] mb-3",children:"Send Reply"}),n.jsx(Re,{label:"",rows:4,placeholder:"Type your reply to the user...",value:v,onChange:j=>b(j.target.value)}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[n.jsx(T,{onClick:m,disabled:g||!v.trim(),children:g?"Sending...":"Send Reply"}),n.jsx(T,{variant:"secondary",size:"sm",onClick:()=>x&&N(x,"resolved"),children:"Mark Resolved"}),n.jsx(T,{variant:"ghost",size:"sm",onClick:()=>x&&N(x,"in_progress"),children:"In Progress"}),n.jsx(T,{variant:"danger",size:"sm",onClick:()=>x&&N(x,"closed"),children:"Close"})]})]})]}):n.jsx("p",{className:"text-sm text-[#6C757D] text-center py-8",children:"Select a ticket from the table above to view details and reply."})})]})]})}const a4=["new","investigating","resolved","escalated","dismissed"];function i4(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState(!1),[i,o]=y.useState(""),[l,c]=y.useState(null),[d,u]=y.useState(null),[h,f]=y.useState(""),v=async()=>{a(!0);try{const{data:m,error:x}=await D.from("reports").select("*").order("created_at",{ascending:!1});if(x){console.error("Error fetching reports:",x);return}const N=new Set;for(const _ of m??[])_.reporter_id&&N.add(_.reporter_id),_.reported_user_id&&N.add(_.reported_user_id);const{data:j}=N.size?await D.from("profiles").select("user_id, display_name, username").in("user_id",Array.from(N)):{data:[]},C=new Map;for(const _ of j??[])C.set(_.user_id,_.display_name||_.username||"User");const E=(m??[]).map(_=>({id:_.id,reporterId:_.reporter_id,reporterName:C.get(_.reporter_id)??"System",reportedUserId:_.reported_user_id,reportedUserName:_.reported_user_id?C.get(_.reported_user_id)??"Unknown":null,reportedEventId:_.reported_event_id,reportType:_.report_type,resourceType:_.resource_type,title:_.title,description:_.description,severity:_.severity,status:_.status,createdAt:_.created_at}));s(E)}finally{a(!1)}};y.useEffect(()=>{v()},[]);const b=async(m,x)=>{if(window.confirm(`Update report status to "${x}"?`)){a(!0);try{const j={status:x,updated_at:new Date().toISOString()};(x==="resolved"||x==="dismissed")&&(j.resolved_at=new Date().toISOString(),j.resolved_by=e==null?void 0:e.id,h.trim()&&(j.resolution_notes=h.trim()));const{error:C}=await D.from("reports").update(j).eq("id",m);if(C){console.error("Error updating report:",C),alert("Failed to update report");return}await v(),f(""),alert("Report updated successfully")}finally{a(!1)}}},g=t.filter(m=>{var x;if(l&&m.status!==l)return!1;if(i){const N=i.toLowerCase();return m.title.toLowerCase().includes(N)||m.reporterName.toLowerCase().includes(N)||(((x=m.reportedUserName)==null?void 0:x.toLowerCase().includes(N))??!1)||m.id.toLowerCase().includes(N)}return!0}),w={new:"primary",investigating:"warning",resolved:"success",escalated:"danger",dismissed:"warning"},p={low:"primary",medium:"warning",high:"warning",critical:"danger"};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Reports & Flags"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Investigate community reports and moderate platform safety."})]}),n.jsxs(Q,{variant:t.filter(m=>m.status==="new").length>0?"danger":"success",children:[t.filter(m=>m.status==="new").length," new reports"]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Filters",subtitle:"Narrow down by status or search"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Search",placeholder:"Report ID, title, reporter...",value:i,onChange:m=>o(m.target.value)}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Status"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(T,{size:"sm",variant:l===null?"secondary":"ghost",onClick:()=>c(null),children:"All"}),a4.map(m=>n.jsx(T,{size:"sm",variant:l===m?"secondary":"ghost",onClick:()=>c(m),children:m.charAt(0).toUpperCase()+m.slice(1).replace("_"," ")},m))]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Flagged Items",subtitle:`${g.length} reports`}),n.jsxs(B,{className:"space-y-4",children:[g.length===0&&n.jsx("p",{className:"py-8 text-center text-sm text-[#6C757D]",children:r?"Loading...":"No reports found"}),g.map(m=>n.jsxs("div",{className:`flex flex-col gap-4 rounded-[16px] border p-5 text-sm text-[#212529] ${(d==null?void 0:d.id)===m.id?"border-[#C045FF] bg-[#F4E6FF]/30":"border-[#E9ECEF] bg-[#F8F9FA]"}`,onClick:()=>u(m),children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold",children:m.title}),n.jsxs("p",{className:"text-[#6C757D]",children:[m.resourceType,"  ",m.reportType]})]}),n.jsx(Q,{variant:w[m.status]??"primary",children:m.status.replace("_"," ")})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-3 text-[#6C757D]",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Reporter"}),n.jsx("p",{children:m.reporterName})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Reported"}),n.jsx("p",{children:m.reportedUserName||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide",children:"Submitted"}),n.jsx("p",{children:de(m.createdAt)})]})]}),m.description&&n.jsx("p",{className:"text-[#6C757D]",children:m.description}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(Q,{variant:p[m.severity]??"primary",children:m.severity}),m.status==="new"&&n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>b(m.id,"investigating"),children:"Investigate"}),m.status==="investigating"&&n.jsxs(n.Fragment,{children:[n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>b(m.id,"escalated"),children:"Escalate"}),n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>b(m.id,"resolved"),children:"Resolve"})]}),m.status!=="resolved"&&m.status!=="dismissed"&&n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>b(m.id,"dismissed"),children:"Dismiss"})]})]},m.id))]})]}),d&&n.jsxs(I,{children:[n.jsx($,{title:"Resolution Notes",subtitle:`For report: ${d.title}`}),n.jsxs(B,{className:"space-y-4",children:[n.jsx(Re,{label:"Resolution Summary",rows:3,placeholder:"Explain action taken, evidence reviewed, outcome...",value:h,onChange:m=>f(m.target.value)}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",onClick:()=>b(d.id,"resolved"),disabled:r,children:"Mark Resolved"}),n.jsx(T,{variant:"ghost",onClick:()=>b(d.id,"escalated"),disabled:r,children:"Escalate"})]})]})]})]})}const o4=["new","under_review","escalated","resolved","closed"];function l4(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState(!1),[i,o]=y.useState(""),[l,c]=y.useState(null),[d,u]=y.useState(null),[h,f]=y.useState(""),v=async()=>{a(!0);try{const{data:m,error:x}=await D.from("disputes").select("*").order("created_at",{ascending:!1});if(x){console.error("Error fetching disputes:",x);return}const N=new Set;for(const F of m??[])N.add(F.complainant_id),N.add(F.respondent_id);const{data:j}=N.size?await D.from("profiles").select("user_id, display_name, username").in("user_id",Array.from(N)):{data:[]},{data:C}=N.size?await D.from("users").select("id, role").in("id",Array.from(N)):{data:[]},E=new Map,_=new Map;for(const F of j??[])E.set(F.user_id,F.display_name||F.username||"User");for(const F of C??[])_.set(F.id,F.role);const S=(m??[]).map(F=>({id:F.id,complainantId:F.complainant_id,complainantName:`${_.get(F.complainant_id)==="creator"?"Creator":"Fan"}  ${E.get(F.complainant_id)??"Unknown"}`,respondentId:F.respondent_id,respondentName:`${_.get(F.respondent_id)==="creator"?"Creator":"Fan"}  ${E.get(F.respondent_id)??"Unknown"}`,eventId:F.event_id,disputeType:F.dispute_type,title:F.title,description:F.description,amount:F.amount??0,priority:F.priority,status:F.status,resolution:F.resolution,createdAt:F.created_at}));s(S)}finally{a(!1)}};y.useEffect(()=>{v()},[]);const b=async(m,x)=>{if(window.confirm(`Update dispute status to "${x.replace("_"," ")}"?`)){a(!0);try{const j={status:x,updated_at:new Date().toISOString()};(x==="resolved"||x==="closed")&&(j.resolved_at=new Date().toISOString(),j.resolved_by=e==null?void 0:e.id,h.trim()&&(j.resolution=h.trim()));const{error:C}=await D.from("disputes").update(j).eq("id",m);if(C){console.error("Error updating dispute:",C),alert("Failed to update dispute");return}await v(),f(""),alert("Dispute updated successfully")}finally{a(!1)}}},g=t.filter(m=>{if(l&&m.status!==l)return!1;if(i){const x=i.toLowerCase();return m.title.toLowerCase().includes(x)||m.complainantName.toLowerCase().includes(x)||m.respondentName.toLowerCase().includes(x)||m.id.toLowerCase().includes(x)}return!0}),w={new:"primary",under_review:"warning",escalated:"danger",resolved:"success",closed:"success"},p={low:"primary",medium:"warning",high:"warning",critical:"danger"};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Dispute Management"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Resolve conflicts between fans and creators fairly."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Q,{variant:"warning",children:[t.filter(m=>m.status==="new"||m.status==="under_review").length," active"]}),n.jsxs(Q,{variant:"danger",children:[t.filter(m=>m.status==="escalated").length," escalated"]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Filters",subtitle:"Identify disputes based on status"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Search",placeholder:"Dispute ID, title, names...",value:i,onChange:m=>o(m.target.value)}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Status"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(T,{size:"sm",variant:l===null?"secondary":"ghost",onClick:()=>c(null),children:"All"}),o4.map(m=>n.jsx(T,{size:"sm",variant:l===m?"secondary":"ghost",onClick:()=>c(m),children:m.replace("_"," ")},m))]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Active Disputes",subtitle:`${g.length} disputes`}),n.jsx(B,{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Dispute"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Complainant"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Respondent"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Amount"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Priority"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Created"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Actions"})]})}),n.jsxs("tbody",{children:[g.map(m=>n.jsxs("tr",{className:`border-b border-[#E9ECEF] cursor-pointer hover:bg-[#F8F9FA] ${(d==null?void 0:d.id)===m.id?"bg-[#F4E6FF]/30":""}`,onClick:()=>u(m),children:[n.jsx("td",{className:"py-3 text-[#212529]",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-semibold",children:m.title}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:m.disputeType})]})}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:m.complainantName}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:m.respondentName}),n.jsx("td",{className:"py-3 text-[#212529]",children:V(m.amount)}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:w[m.status]??"primary",children:m.status.replace("_"," ")})}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:p[m.priority]??"primary",children:m.priority})}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:de(m.createdAt)}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[m.status==="new"&&n.jsx(T,{size:"sm",variant:"secondary",onClick:x=>{x.stopPropagation(),b(m.id,"under_review")},children:"Review"}),m.status==="under_review"&&n.jsx(T,{size:"sm",variant:"ghost",onClick:x=>{x.stopPropagation(),b(m.id,"escalated")},children:"Escalate"}),m.status!=="resolved"&&m.status!=="closed"&&n.jsx(T,{size:"sm",variant:"ghost",onClick:x=>{x.stopPropagation(),b(m.id,"resolved")},children:"Resolve"})]})})]},m.id)),g.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"py-8 text-center text-[#6C757D]",children:r?"Loading...":"No disputes found"})})]})]})})]}),d&&n.jsxs(I,{children:[n.jsx($,{title:"Dispute Detail",subtitle:d.title}),n.jsxs(B,{className:"grid gap-4 lg:grid-cols-2",children:[n.jsxs("div",{className:"space-y-4 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-6 text-sm text-[#212529]",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Q,{variant:w[d.status]??"primary",children:d.status.replace("_"," ")}),n.jsx(Q,{variant:p[d.priority]??"primary",children:d.priority}),n.jsx(Q,{variant:"primary",children:d.disputeType})]}),n.jsxs("div",{className:"space-y-2 text-[#6C757D]",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Complainant:"})," ",d.complainantName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Respondent:"})," ",d.respondentName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Amount:"})," ",V(d.amount)]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Created:"})," ",de(d.createdAt)]})]}),d.description&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Description"}),n.jsx("p",{className:"text-[#6C757D]",children:d.description})]}),d.resolution&&n.jsxs("div",{className:"rounded-[12px] bg-white p-4",children:[n.jsx("p",{className:"font-semibold text-[#28A745]",children:"Resolution"}),n.jsx("p",{className:"text-[#6C757D]",children:d.resolution})]})]}),n.jsxs("div",{className:"space-y-4 rounded-[16px] border border-[#E9ECEF] bg-white p-6 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Resolution"}),n.jsx(Re,{label:"Decision & Outcome",rows:4,placeholder:"Describe resolution, compensation, actions taken...",value:h,onChange:m=>f(m.target.value)}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(T,{variant:"secondary",onClick:()=>b(d.id,"resolved"),disabled:r,children:"Mark Resolved"}),d.status!=="escalated"&&n.jsx(T,{variant:"ghost",onClick:()=>b(d.id,"escalated"),disabled:r,children:"Escalate"}),n.jsx(T,{variant:"ghost",onClick:()=>b(d.id,"closed"),disabled:r,children:"Close"})]})]})]})]})]})}function c4(){const{user:e}=ve(),[t,s]=y.useState({platform_name:"FanMeet Five",support_email:"support@fanmeet.com",support_phone:"+91 98765 43210",default_timezone:"Asia/Kolkata",maintenance_mode:!1,welcome_message:"",default_commission:10,cancellation_window:12,auto_refund_percentage:90}),[r,a]=y.useState(!1),[i,o]=y.useState(!1);y.useEffect(()=>{(async()=>{a(!0);try{const{data:u,error:h}=await D.from("platform_settings").select("key, value").in("key",["platform_name","support_email","support_phone","default_timezone","maintenance_mode","welcome_message","default_commission","cancellation_window","auto_refund_percentage"]);if(h){console.error("Error fetching settings:",h);return}const f={...t};for(const v of u??[])try{f[v.key]=JSON.parse(v.value)}catch{f[v.key]=v.value}s(f)}finally{a(!1)}})()},[]);const l=async()=>{o(!0);try{const d=Object.entries(t).map(([u,h])=>({key:u,value:JSON.stringify(h),updated_by:e==null?void 0:e.id,updated_at:new Date().toISOString()}));for(const u of d){const{error:h}=await D.from("platform_settings").update({value:u.value,updated_by:u.updated_by,updated_at:u.updated_at}).eq("key",u.key);h&&console.error("Error updating setting:",u.key,h)}alert("Settings saved successfully!")}finally{o(!1)}},c=async()=>{const d=!t.maintenance_mode;if(!window.confirm(`Are you sure you want to ${d?"enable":"disable"} maintenance mode?`))return;s({...t,maintenance_mode:d});const{error:h}=await D.from("platform_settings").update({value:JSON.stringify(d),updated_by:e==null?void 0:e.id,updated_at:new Date().toISOString()}).eq("key","maintenance_mode");h&&(console.error("Error toggling maintenance mode:",h),s({...t,maintenance_mode:!d}),alert("Failed to update maintenance mode"))};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"General Settings"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Configure platform basics, support contacts, and global defaults."})]}),n.jsx(T,{onClick:l,disabled:i,children:i?"Saving...":"Save Changes"})]}),n.jsxs(I,{children:[n.jsx($,{title:"Platform Info",subtitle:"Branding and contact details"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Platform Name",value:t.platform_name,onChange:d=>s({...t,platform_name:d.target.value})}),n.jsx(te,{label:"Support Email",value:t.support_email,onChange:d=>s({...t,support_email:d.target.value})}),n.jsx(te,{label:"Support Phone",value:t.support_phone,onChange:d=>s({...t,support_phone:d.target.value})}),n.jsx(te,{label:"Default Timezone",value:t.default_timezone,onChange:d=>s({...t,default_timezone:d.target.value})}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(Re,{label:"Welcome Message",rows:3,placeholder:"Displayed to new users",value:t.welcome_message,onChange:d=>s({...t,welcome_message:d.target.value})})})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Sessions & Commission",subtitle:"Monetization and scheduling settings"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Cancellation Window (hours)",type:"number",value:t.cancellation_window.toString(),onChange:d=>s({...t,cancellation_window:parseInt(d.target.value)||0})}),n.jsx(te,{label:"Default Commission (%)",type:"number",value:t.default_commission.toString(),onChange:d=>s({...t,default_commission:parseInt(d.target.value)||0})}),n.jsx(te,{label:"Auto Refund Percentage",type:"number",value:t.auto_refund_percentage.toString(),onChange:d=>s({...t,auto_refund_percentage:parseInt(d.target.value)||0})}),n.jsxs("div",{className:"flex items-center justify-between rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-4",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-semibold text-[#212529]",children:["Auto Refunds: ",t.auto_refund_percentage,"%"]}),n.jsxs("p",{className:"text-xs text-[#6C757D]",children:["Retain ",100-t.auto_refund_percentage,"% commission from non-winning bids"]})]}),n.jsx(Q,{variant:"success",children:"Active"})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Maintenance Mode",subtitle:"Temporarily pause user access during updates"}),n.jsxs(B,{className:`flex flex-wrap items-center justify-between gap-4 rounded-[16px] border p-5 ${t.maintenance_mode?"border-[#DC3545] bg-[#DC3545]/10":"border-[#28A745] bg-[#28A745]/10"}`,children:[n.jsxs("div",{children:[n.jsxs("p",{className:`text-sm font-semibold ${t.maintenance_mode?"text-[#DC3545]":"text-[#28A745]"}`,children:["Maintenance mode is currently ",t.maintenance_mode?"ON":"OFF"]}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:t.maintenance_mode?"Users cannot access the platform. Disable to restore access.":"Platform is operational. Enable to block user access."})]}),n.jsx(T,{variant:t.maintenance_mode?"secondary":"danger",onClick:c,children:t.maintenance_mode?"Disable Maintenance":"Enable Maintenance"})]})]})]})}function d4(){const{user:e}=ve(),[t,s]=y.useState({default_commission:10,min_bid_increment:20,fast_payout_fee:20,auto_refund_percentage:90}),[r,a]=y.useState(!1),[i,o]=y.useState(!1),l=[{basePrice:50,commission:t.default_commission,creatorShare:0,autoRefund:t.auto_refund_percentage},{basePrice:100,commission:t.default_commission,creatorShare:0,autoRefund:t.auto_refund_percentage},{basePrice:200,commission:t.default_commission,creatorShare:0,autoRefund:t.auto_refund_percentage}].map(d=>({...d,creatorShare:d.basePrice*(1-d.commission/100)}));y.useEffect(()=>{(async()=>{a(!0);try{const{data:u,error:h}=await D.from("platform_settings").select("key, value").in("key",["default_commission","min_bid_increment","fast_payout_fee","auto_refund_percentage"]);if(h){console.error("Error fetching settings:",h);return}const f={...t};for(const v of u??[])try{f[v.key]=JSON.parse(v.value)}catch{f[v.key]=v.value}s(f)}finally{a(!1)}})()},[]);const c=async()=>{o(!0);try{const d=Object.entries(t).map(([u,h])=>({key:u,value:JSON.stringify(h),updated_by:e==null?void 0:e.id,updated_at:new Date().toISOString()}));for(const u of d){const{error:h}=await D.from("platform_settings").update({value:u.value,updated_by:u.updated_by,updated_at:u.updated_at}).eq("key",u.key);h&&console.error("Error updating setting:",u.key,h)}alert("Pricing settings saved successfully!")}finally{o(!1)}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Pricing & Commission"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Control base pricing, creator revenue share, and commission rates."})]}),n.jsx(T,{onClick:c,disabled:i,children:i?"Saving...":"Save Changes"})]}),n.jsxs(I,{children:[n.jsx($,{title:"Commission Settings",subtitle:"Configure platform commission and fees"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Default Commission (%)",type:"number",value:t.default_commission.toString(),onChange:d=>s({...t,default_commission:parseInt(d.target.value)||0})}),n.jsx(te,{label:"Auto Refund (%)",type:"number",value:t.auto_refund_percentage.toString(),onChange:d=>s({...t,auto_refund_percentage:parseInt(d.target.value)||0})}),n.jsx(te,{label:"Minimum Bid Increment ()",type:"number",value:t.min_bid_increment.toString(),onChange:d=>s({...t,min_bid_increment:parseInt(d.target.value)||0})}),n.jsx(te,{label:"Fast Payout Fee ()",type:"number",value:t.fast_payout_fee.toString(),onChange:d=>s({...t,fast_payout_fee:parseInt(d.target.value)||0})})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Revenue Split Preview",subtitle:"How revenue is divided based on current settings"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#C045FF]/30 bg-[#C045FF]/10 p-5 text-center",children:[n.jsxs("p",{className:"text-3xl font-bold text-[#C045FF]",children:[t.default_commission,"%"]}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Platform Commission"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#28A745]/30 bg-[#28A745]/10 p-5 text-center",children:[n.jsxs("p",{className:"text-3xl font-bold text-[#28A745]",children:[100-t.default_commission,"%"]}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Creator Earnings"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#FFC107]/30 bg-[#FFC107]/10 p-5 text-center",children:[n.jsxs("p",{className:"text-3xl font-bold text-[#FFC107]",children:[t.auto_refund_percentage,"%"]}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Non-Winner Refund"})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Pricing Tiers",subtitle:"Example pricing calculations based on current settings"}),n.jsx(B,{className:"space-y-4",children:l.map(d=>n.jsxs("div",{className:"flex flex-col gap-4 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5 text-sm text-[#212529]",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-semibold",children:[V(d.basePrice)," Base Price"]}),n.jsx("p",{className:"text-[#6C757D]",children:"Entry-level pricing tier"})]}),n.jsxs(Q,{variant:"primary",children:[d.commission,"% commission"]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-3 text-[#6C757D]",children:[n.jsxs("div",{className:"rounded-[12px] bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide",children:"Creator Receives"}),n.jsx("p",{className:"text-lg font-semibold text-[#28A745]",children:V(d.creatorShare)})]}),n.jsxs("div",{className:"rounded-[12px] bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide",children:"Platform Gets"}),n.jsx("p",{className:"text-lg font-semibold text-[#C045FF]",children:V(d.basePrice-d.creatorShare)})]}),n.jsxs("div",{className:"rounded-[12px] bg-white p-3",children:[n.jsx("p",{className:"text-xs uppercase tracking-wide",children:"Non-Winner Refund"}),n.jsx("p",{className:"text-lg font-semibold text-[#FFC107]",children:V(d.basePrice*d.autoRefund/100)})]})]})]},d.basePrice))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Fee Structure",subtitle:"Current platform fees"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5",children:[n.jsx("p",{className:"font-semibold text-[#212529]",children:"Minimum Bid Increment"}),n.jsx("p",{className:"text-2xl font-bold text-[#C045FF]",children:V(t.min_bid_increment)}),n.jsx("p",{className:"mt-2 text-xs text-[#6C757D]",children:"Minimum amount fans must increase their bids by"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5",children:[n.jsx("p",{className:"font-semibold text-[#212529]",children:"Fast Payout Fee"}),n.jsx("p",{className:"text-2xl font-bold text-[#C045FF]",children:V(t.fast_payout_fee)}),n.jsx("p",{className:"mt-2 text-xs text-[#6C757D]",children:"Fee for instant withdrawal processing"})]})]})]})]})}const u4=[{name:"{{fan_name}}",description:"Fan's first name"},{name:"{{creator_name}}",description:"Creator display name"},{name:"{{event_title}}",description:"Event name"},{name:"{{cta_link}}",description:"Primary button URL"},{name:"{{amount}}",description:"Currency amount"}];function h4(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState(!1),[i,o]=y.useState(null),[l,c]=y.useState(""),[d,u]=y.useState(""),[h,f]=y.useState(""),[v,b]=y.useState(""),[g,w]=y.useState(!1),p=async()=>{a(!0);try{const{data:C,error:E}=await D.from("email_templates").select("*").order("created_at",{ascending:!1});if(E){console.error("Error fetching templates:",E);return}const _=(C??[]).map(S=>({id:S.id,name:S.name,subject:S.subject,body:S.body,audience:S.audience,status:S.status,createdAt:S.created_at,updatedAt:S.updated_at}));s(_)}finally{a(!1)}};y.useEffect(()=>{p()},[]);const m=C=>{o(C),c(C.name),u(C.subject),f(C.body),b(C.audience),w(!1)},x=()=>{o(null),c(""),u(""),f(""),b("all"),w(!0)},N=async C=>{if(!l.trim()||!d.trim()){alert("Name and subject are required");return}a(!0);try{if(g){const{error:E}=await D.from("email_templates").insert({name:l.trim(),subject:d.trim(),body:h.trim(),audience:v.trim()||"all",status:C,created_by:e==null?void 0:e.id,updated_by:e==null?void 0:e.id});if(E){console.error("Error creating template:",E),alert("Failed to create template");return}}else if(i){const{error:E}=await D.from("email_templates").update({name:l.trim(),subject:d.trim(),body:h.trim(),audience:v.trim()||"all",status:C,updated_by:e==null?void 0:e.id,updated_at:new Date().toISOString()}).eq("id",i.id);if(E){console.error("Error updating template:",E),alert("Failed to update template");return}}await p(),alert(`Template ${g?"created":"updated"} successfully!`),w(!1)}finally{a(!1)}},j=async C=>{if(!window.confirm("Are you sure you want to delete this template?"))return;const{error:_}=await D.from("email_templates").delete().eq("id",C);if(_){console.error("Error deleting template:",_),alert("Failed to delete template");return}await p(),(i==null?void 0:i.id)===C&&o(null)};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Email Templates"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Manage transactional and lifecycle emails sent by FanMeet."})]}),n.jsx(T,{onClick:x,children:"Create New Template"})]}),n.jsxs(I,{children:[n.jsx($,{title:"Templates",subtitle:`${t.length} templates`}),n.jsxs(B,{className:"space-y-4",children:[t.length===0&&n.jsx("p",{className:"py-8 text-center text-sm text-[#6C757D]",children:r?"Loading...":"No templates yet. Create your first template."}),t.map(C=>n.jsxs("div",{className:`flex flex-col gap-4 rounded-[16px] border p-5 text-sm text-[#212529] cursor-pointer ${(i==null?void 0:i.id)===C.id?"border-[#C045FF] bg-[#F4E6FF]/30":"border-[#E9ECEF] bg-[#F8F9FA]"}`,onClick:()=>m(C),children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold",children:C.name}),n.jsxs("p",{className:"text-[#6C757D]",children:["Subject: ",C.subject]}),n.jsxs("p",{className:"text-xs text-[#ADB5BD]",children:["Audience: ",C.audience]})]}),n.jsx(Q,{variant:C.status==="active"?"success":"warning",children:C.status})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-[#6C757D]",children:[n.jsxs("span",{children:["Last updated: ",de(C.updatedAt)]}),n.jsx(T,{size:"sm",variant:"ghost",onClick:E=>{E.stopPropagation(),j(C.id)},children:"Delete"})]})]},C.id))]})]}),(i||g)&&n.jsxs(I,{children:[n.jsx($,{title:g?"New Template":"Edit Template",subtitle:g?"Create a new email template":i==null?void 0:i.name}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(te,{label:"Template Name",value:l,onChange:C=>c(C.target.value),placeholder:"e.g., Welcome Email"}),n.jsx(te,{label:"Email Subject",value:d,onChange:C=>u(C.target.value),placeholder:"e.g., Welcome to FanMeet Five!"}),n.jsx(te,{label:"Audience",value:v,onChange:C=>b(C.target.value),placeholder:"e.g., New fans, Creators"}),n.jsx(Re,{label:"Body",rows:10,value:h,onChange:C=>f(C.target.value),placeholder:`Hi {{fan_name}},

Thanks for joining...`}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",onClick:()=>N("draft"),disabled:r,children:"Save Draft"}),n.jsx(T,{onClick:()=>N("active"),disabled:r,children:"Publish"})]})]}),n.jsxs("div",{className:"space-y-3 rounded-[16px] border border-[#E9ECEF] bg-white p-6 text-sm text-[#212529]",children:[n.jsx("h2",{className:"text-sm font-semibold",children:"Available Snippets"}),n.jsx("ul",{className:"space-y-2 text-[#6C757D]",children:u4.map(C=>n.jsxs("li",{className:"flex items-center justify-between",children:[n.jsx("code",{className:"bg-[#F8F9FA] px-2 py-1 rounded text-xs",children:C.name}),n.jsx("span",{className:"text-xs",children:C.description})]},C.name))}),n.jsxs("div",{className:"mt-4 rounded-[12px] bg-[#F8F9FA] p-4",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Preview"}),n.jsx("p",{className:"mt-2 whitespace-pre-line text-sm",children:h.replace("{{fan_name}}","Neha").replace("{{creator_name}}","Priya").replace("{{event_title}}","Live Chat Session").replace("{{cta_link}}","https://fanmeet.app").replace("{{amount}}","500")})]})]})]})]})]})}const f4=[{id:"email",label:"Email",description:"Transactional and marketing emails",enabled:!0},{id:"push",label:"Push Notifications",description:"Mobile push via FanMeet app",enabled:!0},{id:"sms",label:"SMS",description:"Critical alerts and OTP delivery",enabled:!1},{id:"whatsapp",label:"WhatsApp",description:"High priority creator alerts",enabled:!1}],m4=["bid_placed","bid_won","bid_refunded","event_created","event_cancelled","withdrawal_approved","withdrawal_rejected","meet_scheduled","meet_completed","support_ticket_update","dispute_escalated","creator_approved"];function p4(){const[e,t]=y.useState([]),[s,r]=y.useState(f4),[a,i]=y.useState(!1),[o,l]=y.useState(""),[c,d]=y.useState(["email"]),u=async()=>{i(!0);try{const{data:w,error:p}=await D.from("notification_rules").select("*").order("trigger_event",{ascending:!0});if(p){console.error("Error fetching notification rules:",p);return}const m=(w??[]).map(x=>({id:x.id,triggerEvent:x.trigger_event,channels:x.channels??[],templateId:x.template_id,status:x.status}));t(m)}finally{i(!1)}};y.useEffect(()=>{u()},[]);const h=w=>{r(p=>p.map(m=>m.id===w?{...m,enabled:!m.enabled}:m))},f=async()=>{if(!o){alert("Select a trigger event");return}i(!0);try{const{error:w}=await D.from("notification_rules").insert({trigger_event:o,channels:c,status:"active"});if(w){console.error("Error creating rule:",w),alert("Failed to create rule. It may already exist.");return}await u(),l(""),alert("Rule created successfully!")}finally{i(!1)}},v=async w=>{const p=w.status==="active"?"disabled":"active",{error:m}=await D.from("notification_rules").update({status:p,updated_at:new Date().toISOString()}).eq("id",w.id);if(m){console.error("Error updating rule:",m),alert("Failed to update rule");return}await u()},b=async w=>{if(!window.confirm("Delete this notification rule?"))return;const{error:m}=await D.from("notification_rules").delete().eq("id",w);if(m){console.error("Error deleting rule:",m),alert("Failed to delete rule");return}await u()},g=w=>w.split("_").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ");return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Notification Settings"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Control channels, templates, and delivery rules for platform alerts."})]}),n.jsxs(Q,{variant:"primary",children:[e.length," rules configured"]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Channels",subtitle:"Enable or disable notification channels"}),n.jsx(B,{className:"space-y-3",children:s.map(w=>n.jsxs("label",{className:"flex items-center justify-between rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5 text-sm text-[#212529] cursor-pointer",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:w.label}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:w.description})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Q,{variant:w.enabled?"success":"warning",children:w.enabled?"Enabled":"Disabled"}),n.jsx("input",{type:"checkbox",checked:w.enabled,onChange:()=>h(w.id),className:"h-5 w-5 rounded border-[#CED4DA]"})]})]},w.id))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Automated Rules",subtitle:"Template and channel mapping per trigger"}),n.jsx(B,{className:"overflow-x-auto text-sm",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Trigger"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Channel(s)"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Actions"})]})}),n.jsxs("tbody",{children:[e.map(w=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#212529] font-medium",children:g(w.triggerEvent)}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:w.channels.length>0?w.channels.join(", "):"-"}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:w.status==="active"?"success":"warning",children:w.status})}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>v(w),children:w.status==="active"?"Disable":"Enable"}),n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>b(w.id),children:"Delete"})]})})]},w.id)),e.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"py-8 text-center text-[#6C757D]",children:a?"Loading...":"No notification rules configured"})})]})]})})]}),n.jsxs(I,{children:[n.jsx($,{title:"Add New Rule",subtitle:"Configure a new notification trigger"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-[#6C757D] mb-1",children:"Trigger Event"}),n.jsxs("select",{className:"w-full rounded-[12px] border border-[#E9ECEF] bg-white px-4 py-3 text-sm",value:o,onChange:w=>l(w.target.value),children:[n.jsx("option",{value:"",children:"Select trigger..."}),m4.map(w=>n.jsx("option",{value:w,children:g(w)},w))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-[#6C757D] mb-1",children:"Channels"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["email","push","sms"].map(w=>n.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[n.jsx("input",{type:"checkbox",checked:c.includes(w),onChange:p=>{p.target.checked?d([...c,w]):d(c.filter(m=>m!==w))}}),w.toUpperCase()]},w))})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(T,{onClick:f,disabled:a||!o,children:"Create Rule"})})]})]})]})}function x4(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState({require_2fa:!0,session_timeout:45,password_min_length:12}),[i,o]=y.useState(!1),[l,c]=y.useState(!1);y.useEffect(()=>{(async()=>{o(!0);try{const{data:v}=await D.from("users").select("id, email, role, created_at, account_status").eq("role","admin");if(v){const{data:g}=await D.from("profiles").select("user_id, display_name").in("user_id",v.map(m=>m.id)),w=new Map;for(const m of g??[])w.set(m.user_id,m.display_name||"Admin");const p=v.map(m=>({id:m.id,email:m.email,displayName:w.get(m.id)??m.email.split("@")[0],createdAt:m.created_at,accountStatus:m.account_status??"active"}));s(p)}const{data:b}=await D.from("platform_settings").select("key, value").in("key",["require_2fa","session_timeout","password_min_length"]);if(b){const g={...r};for(const w of b)try{g[w.key]=JSON.parse(w.value)}catch{g[w.key]=w.value}a(g)}}finally{o(!1)}})()},[]);const d=async()=>{c(!0);try{const f=[{key:"require_2fa",value:JSON.stringify(r.require_2fa)},{key:"session_timeout",value:JSON.stringify(r.session_timeout)},{key:"password_min_length",value:JSON.stringify(r.password_min_length)}];for(const v of f)await D.from("platform_settings").update({value:v.value,updated_by:e==null?void 0:e.id,updated_at:new Date().toISOString()}).eq("key",v.key);alert("Security settings saved!")}finally{c(!1)}},u=async f=>{if(f===(e==null?void 0:e.id)){alert("You cannot suspend yourself");return}if(!window.confirm("Suspend this admin account?"))return;const{error:b}=await D.from("users").update({account_status:"suspended"}).eq("id",f);if(b){console.error("Error suspending admin:",b),alert("Failed to suspend admin");return}s(g=>g.map(w=>w.id===f?{...w,accountStatus:"suspended"}:w))},h=async f=>{const{error:v}=await D.from("users").update({account_status:"active"}).eq("id",f);if(v){console.error("Error reactivating admin:",v),alert("Failed to reactivate admin");return}s(b=>b.map(g=>g.id===f?{...g,accountStatus:"active"}:g))};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Security & Access"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Control admin access and authentication policies."})]}),n.jsx(T,{onClick:d,disabled:l,children:l?"Saving...":"Save Changes"})]}),n.jsxs(I,{children:[n.jsx($,{title:"Access Policies",subtitle:"Security requirements for admin accounts"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Session Timeout (minutes)",type:"number",value:r.session_timeout.toString(),onChange:f=>a({...r,session_timeout:parseInt(f.target.value)||0})}),n.jsx(te,{label:"Minimum Password Length",type:"number",value:r.password_min_length.toString(),onChange:f=>a({...r,password_min_length:parseInt(f.target.value)||8})}),n.jsxs("label",{className:"flex items-center justify-between rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-4 md:col-span-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-[#212529]",children:"Require 2FA for all admins"}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"Mandatory via authenticator app or SMS backup."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Q,{variant:r.require_2fa?"success":"warning",children:r.require_2fa?"Enabled":"Disabled"}),n.jsx("input",{type:"checkbox",checked:r.require_2fa,onChange:f=>a({...r,require_2fa:f.target.checked}),className:"h-5 w-5 rounded border-[#CED4DA]"})]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Admin Users",subtitle:`${t.length} admin accounts`}),n.jsxs(B,{className:"space-y-4",children:[t.map(f=>n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5 text-sm text-[#212529]",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:f.displayName}),n.jsx("p",{className:"text-[#6C757D]",children:f.email})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Q,{variant:f.accountStatus==="active"?"success":"danger",children:f.accountStatus}),f.id!==(e==null?void 0:e.id)&&(f.accountStatus==="active"?n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>u(f.id),children:"Suspend"}):n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>h(f.id),children:"Reactivate"})),f.id===(e==null?void 0:e.id)&&n.jsx(Q,{variant:"primary",children:"You"})]})]},f.id)),t.length===0&&n.jsx("p",{className:"py-8 text-center text-sm text-[#6C757D]",children:i?"Loading...":"No admin users found"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Security Overview",subtitle:"Current security status"}),n.jsxs(B,{className:"grid gap-3 md:grid-cols-3",children:[n.jsxs("div",{className:`rounded-[16px] border p-4 text-sm ${r.require_2fa?"border-[#28A745]/30 bg-[#28A745]/10 text-[#28A745]":"border-[#DC3545]/30 bg-[#DC3545]/10 text-[#DC3545]"}`,children:[n.jsx("p",{className:"font-semibold",children:"2FA Status"}),n.jsx("p",{className:"text-xs",children:r.require_2fa?"Required for all admins":"Not required - Enable for better security"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-4 text-sm text-[#212529]",children:[n.jsx("p",{className:"font-semibold",children:"Session Timeout"}),n.jsxs("p",{className:"text-xs text-[#6C757D]",children:[r.session_timeout," minutes"]})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-4 text-sm text-[#212529]",children:[n.jsx("p",{className:"font-semibold",children:"Active Admins"}),n.jsxs("p",{className:"text-xs text-[#6C757D]",children:[t.filter(f=>f.accountStatus==="active").length," of ",t.length]})]})]})]})]})}function g4(){const[e,t]=y.useState([]),[s,r]=y.useState(!1),[a,i]=y.useState(""),[o,l]=y.useState(null),c=async()=>{r(!0);try{let g=D.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(100);o&&(g=g.eq("status",o));const{data:w,error:p}=await g;if(p){console.error("Error fetching logs:",p);return}const m=(w??[]).map(x=>({id:x.id,actorType:x.actor_type,actorName:x.actor_name,action:x.action,actionType:x.action_type,status:x.status,resourceType:x.resource_type,details:x.details,createdAt:x.created_at}));t(m)}finally{r(!1)}};y.useEffect(()=>{c()},[o]);const d=e.filter(g=>{var p;if(!a)return!0;const w=a.toLowerCase();return g.action.toLowerCase().includes(w)||g.actionType.toLowerCase().includes(w)||(((p=g.actorName)==null?void 0:p.toLowerCase().includes(w))??!1)}),u={success:"success",warning:"warning",error:"danger"},h=()=>{const g=`ID,Time,Actor,Action,Type,Status
`+d.map(x=>`${x.id},"${de(x.createdAt)}","${x.actorName||x.actorType}","${x.action}",${x.actionType},${x.status}`).join(`
`),w=new Blob([g],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(w),m=document.createElement("a");m.setAttribute("href",p),m.setAttribute("download",`system_logs_${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)},f=e.filter(g=>g.status==="error").length,v=e.filter(g=>g.status==="warning").length,b=e.filter(g=>g.status==="success").length;return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"System Logs"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Monitor platform activity and system health."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",onClick:h,children:"Download Logs"}),n.jsx(T,{onClick:c,disabled:s,children:s?"Loading...":"Refresh"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-[#212529]",children:e.length}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Total Logs"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#28A745]/30 bg-[#28A745]/10 p-5 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-[#28A745]",children:b}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Success"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#FFC107]/30 bg-[#FFC107]/10 p-5 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-[#FFC107]",children:v}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Warnings"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#DC3545]/30 bg-[#DC3545]/10 p-5 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-[#DC3545]",children:f}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Errors"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Filters",subtitle:"Search and filter logs"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Search",placeholder:"Action, type, actor...",value:a,onChange:g=>i(g.target.value)}),n.jsxs("div",{children:[n.jsx("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Status"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(T,{size:"sm",variant:o===null?"secondary":"ghost",onClick:()=>l(null),children:"All"}),n.jsx(T,{size:"sm",variant:o==="success"?"secondary":"ghost",onClick:()=>l("success"),children:"Success"}),n.jsx(T,{size:"sm",variant:o==="warning"?"secondary":"ghost",onClick:()=>l("warning"),children:"Warning"}),n.jsx(T,{size:"sm",variant:o==="error"?"secondary":"ghost",onClick:()=>l("error"),children:"Error"})]})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Log Stream",subtitle:`${d.length} entries  Newest first`}),n.jsxs(B,{className:"space-y-4",children:[d.length===0&&n.jsx("p",{className:"py-8 text-center text-sm text-[#6C757D]",children:s?"Loading logs...":"No logs found"}),d.map(g=>n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5 text-sm text-[#212529]",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("div",{className:"font-semibold",children:g.action}),n.jsx(Q,{variant:u[g.status]??"primary",children:g.status})]}),n.jsxs("p",{className:"mt-2 text-[#6C757D]",children:[de(g.createdAt),"  ",g.actorType,g.actorName&&`  ${g.actorName}`]}),g.details&&Object.keys(g.details).length>0&&n.jsxs("details",{className:"mt-2",children:[n.jsx("summary",{className:"cursor-pointer text-xs text-[#6C757D]",children:"View Details"}),n.jsx("pre",{className:"mt-2 overflow-x-auto rounded bg-white p-2 text-xs",children:JSON.stringify(g.details,null,2)})]}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:[n.jsx(Q,{variant:"primary",children:g.actionType}),g.resourceType&&n.jsx(Q,{variant:"warning",children:g.resourceType})]})]},g.id))]})]})]})}const v4=["suspend_users","ban_users","approve_withdrawals","send_notifications","update_status","delete_records","export_data","other"];function y4(){const{user:e}=ve(),[t,s]=y.useState([]),[r,a]=y.useState(!1),[i,o]=y.useState(""),[l,c]=y.useState(""),[d,u]=y.useState("other"),[h,f]=y.useState(""),v=async()=>{a(!0);try{const{data:x,error:N}=await D.from("bulk_actions").select("*").order("created_at",{ascending:!1});if(N){console.error("Error fetching bulk actions:",N);return}const j=new Set;for(const S of x??[])S.created_by&&j.add(S.created_by);const{data:C}=j.size?await D.from("profiles").select("user_id, display_name").in("user_id",Array.from(j)):{data:[]},E=new Map;for(const S of C??[])E.set(S.user_id,S.display_name||"Admin");const _=(x??[]).map(S=>({id:S.id,title:S.title,description:S.description,actionType:S.action_type,targetCriteria:S.target_criteria,affectedCount:S.affected_count??0,status:S.status,notes:S.notes,createdBy:S.created_by,createdByName:E.get(S.created_by)??"System",createdAt:S.created_at}));s(_)}finally{a(!1)}};y.useEffect(()=>{v()},[]);const b=async x=>{if(!i.trim()){alert("Title is required");return}a(!0);try{let N=null;if(h.trim())try{N=JSON.parse(h)}catch{N={description:h}}const{error:j}=await D.from("bulk_actions").insert({title:i.trim(),description:l.trim()||null,action_type:d,target_criteria:N,status:x,created_by:e==null?void 0:e.id});if(j){console.error("Error creating bulk action:",j),alert("Failed to create bulk action");return}await v(),o(""),c(""),f(""),alert(`Bulk action ${x==="pending"?"saved as draft":"submitted for approval"}!`)}finally{a(!1)}},g=async(x,N)=>{if(!window.confirm(`Update action status to "${N}"?`))return;const C={status:N,updated_at:new Date().toISOString()};N==="approved"&&(C.approved_by=e==null?void 0:e.id),N==="completed"&&(C.executed_at=new Date().toISOString());const{error:E}=await D.from("bulk_actions").update(C).eq("id",x);if(E){console.error("Error updating bulk action:",E),alert("Failed to update action");return}await v()},w=async x=>{if(!window.confirm("Delete this bulk action?"))return;const{error:j}=await D.from("bulk_actions").delete().eq("id",x);if(j){console.error("Error deleting bulk action:",j),alert("Failed to delete action");return}await v()},p={pending:"warning",approved:"primary",completed:"success",rejected:"danger",failed:"danger"},m=x=>x.split("_").map(N=>N.charAt(0).toUpperCase()+N.slice(1)).join(" ");return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Bulk Actions"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Execute large-scale updates safely with approval trails."})]}),n.jsxs(Q,{variant:"primary",children:[t.filter(x=>x.status==="pending").length," pending"]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Active Actions",subtitle:`${t.length} bulk actions`}),n.jsxs(B,{className:"space-y-4",children:[t.length===0&&n.jsx("p",{className:"py-8 text-center text-sm text-[#6C757D]",children:r?"Loading...":"No bulk actions created yet"}),t.map(x=>n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5 text-sm text-[#212529]",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold",children:x.title}),n.jsxs("p",{className:"text-xs text-[#6C757D]",children:[x.createdByName,"  ",de(x.createdAt)]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Q,{variant:"primary",children:m(x.actionType)}),n.jsx(Q,{variant:p[x.status]??"primary",children:x.status})]})]}),x.description&&n.jsx("p",{className:"mt-3 text-[#6C757D]",children:x.description}),x.notes&&n.jsxs("p",{className:"mt-2 text-xs text-[#ADB5BD]",children:["Notes: ",x.notes]}),n.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[x.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>g(x.id,"approved"),children:"Approve"}),n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>g(x.id,"rejected"),children:"Reject"})]}),x.status==="approved"&&n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>g(x.id,"completed"),children:"Mark Completed"}),n.jsx(T,{size:"sm",variant:"ghost",onClick:()=>w(x.id),children:"Delete"})]})]},x.id))]})]}),n.jsxs(I,{children:[n.jsx($,{title:"New Bulk Action",subtitle:"Design and schedule batch operations"}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Action Title",placeholder:"e.g. Suspend flagged accounts",value:i,onChange:x=>o(x.target.value)}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-[#6C757D] mb-1",children:"Action Type"}),n.jsx("select",{className:"w-full rounded-[12px] border border-[#E9ECEF] bg-white px-4 py-3 text-sm",value:d,onChange:x=>u(x.target.value),children:v4.map(x=>n.jsx("option",{value:x,children:m(x)},x))})]}),n.jsx(Re,{label:"Description",rows:3,placeholder:"Describe what this action will do...",value:l,onChange:x=>c(x.target.value)}),n.jsx(Re,{label:"Target Criteria (JSON or text)",rows:3,placeholder:'{"user_status": "flagged"} or plain text description',value:h,onChange:x=>f(x.target.value)}),n.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-2",children:[n.jsx(T,{variant:"secondary",onClick:()=>b("pending"),disabled:r,children:"Save Draft"}),n.jsx(T,{onClick:()=>b("approved"),disabled:r,children:"Submit for Approval"})]})]})]})]})}function w4(){const[e,t]=y.useState([]),[s,r]=y.useState({totalTables:0,totalRows:0,projectId:"iktldcrkyphkvxjwmxyb",region:"ap-south-1"}),[a,i]=y.useState(!1),[o,l]=y.useState(null),c=async()=>{i(!0);try{const h=["users","events","bids","meets","profiles","notifications","support_tickets","withdrawal_requests","wallet_transactions","reports","disputes","audit_logs","bulk_actions"],f=[];let v=0;for(const b of h){const{count:g,error:w}=await D.from(b).select("*",{count:"exact",head:!0});if(!w){const p=g??0;v+=p,f.push({name:b,rowCount:p,size:`~${Math.max(1,Math.round(p*.5))} KB`})}}f.sort((b,g)=>g.rowCount-b.rowCount),t(f),r({totalTables:f.length,totalRows:v,projectId:"iktldcrkyphkvxjwmxyb",region:"ap-south-1"}),l(new Date)}finally{i(!1)}};y.useEffect(()=>{c()},[]);const d=async h=>{i(!0);try{const{data:f,error:v}=await D.from(h).select("*").limit(1e3);if(v){alert(`Failed to export ${h}: ${v.message}`);return}const b=JSON.stringify(f,null,2),g=new Blob([b],{type:"application/json"}),w=URL.createObjectURL(g),p=document.createElement("a");p.setAttribute("href",w),p.setAttribute("download",`${h}_export_${new Date().toISOString().split("T")[0]}.json`),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)}finally{i(!1)}},u=async()=>{if(window.confirm("Export all tables? This may take a moment.")){i(!0);try{const f={};for(const p of e){const{data:m}=await D.from(p.name).select("*").limit(1e3);m&&(f[p.name]=m)}const v=JSON.stringify(f,null,2),b=new Blob([v],{type:"application/json"}),g=URL.createObjectURL(b),w=document.createElement("a");w.setAttribute("href",g),w.setAttribute("download",`full_database_export_${new Date().toISOString().split("T")[0]}.json`),w.style.visibility="hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w),alert("Full database export completed!")}finally{i(!1)}}};return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"Database Backup"}),n.jsxs("p",{className:"text-sm text-[#6C757D]",children:["View database statistics and export data.",o&&` Last refreshed: ${de(o.toISOString())}`]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",onClick:u,disabled:a,children:"Export All Tables"}),n.jsx(T,{onClick:c,disabled:a,children:a?"Loading...":"Refresh Stats"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-[#212529]",children:s.totalTables}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Tables"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-[#C045FF]",children:s.totalRows.toLocaleString()}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Total Rows"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-center",children:[n.jsxs("p",{className:"text-lg font-bold text-[#212529]",children:[s.projectId.slice(0,8),"..."]}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Project ID"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-center",children:[n.jsx("p",{className:"text-lg font-bold text-[#212529]",children:s.region}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Region"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Supabase Managed Backups",subtitle:"Automatic daily backups handled by Supabase"}),n.jsxs(B,{className:"grid gap-3 md:grid-cols-3",children:[n.jsxs("div",{className:"rounded-[16px] border border-[#28A745]/30 bg-[#28A745]/10 p-5 text-sm",children:[n.jsx("p",{className:"font-semibold text-[#28A745]",children:"Daily Backups"}),n.jsx("p",{className:"mt-2 text-[#6C757D]",children:"Automatic daily point-in-time recovery enabled"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5 text-sm text-[#212529]",children:[n.jsx("p",{className:"font-semibold",children:"Retention"}),n.jsx("p",{className:"mt-2 text-[#6C757D]",children:"7 days (Free tier) / 30 days (Pro)"})]}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5 text-sm text-[#212529]",children:[n.jsx("p",{className:"font-semibold",children:"PITR"}),n.jsx("p",{className:"mt-2 text-[#6C757D]",children:"Point-in-time recovery available"})]})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Table Statistics",subtitle:`${e.length} tables  Export individual tables`}),n.jsx(B,{className:"overflow-x-auto text-sm",children:n.jsxs("table",{className:"min-w-full table-auto border-collapse text-left",children:[n.jsx("thead",{className:"text-[#6C757D]",children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Table"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Rows"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Est. Size"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Status"}),n.jsx("th",{className:"border-b border-[#E9ECEF] py-3",children:"Actions"})]})}),n.jsxs("tbody",{children:[e.map(h=>n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsx("td",{className:"py-3 text-[#212529] font-medium",children:h.name}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:h.rowCount.toLocaleString()}),n.jsx("td",{className:"py-3 text-[#6C757D]",children:h.size}),n.jsx("td",{className:"py-3",children:n.jsx(Q,{variant:"success",children:"Active"})}),n.jsx("td",{className:"py-3",children:n.jsx(T,{size:"sm",variant:"secondary",onClick:()=>d(h.name),disabled:a,children:"Export JSON"})})]},h.name)),e.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-8 text-center text-[#6C757D]",children:a?"Loading table statistics...":"No tables found"})})]})]})})]}),n.jsxs(I,{children:[n.jsx($,{title:"Backup Notes",subtitle:"Important information about data protection"}),n.jsxs(B,{className:"space-y-3 text-sm text-[#6C757D]",children:[n.jsxs("p",{children:[n.jsx("strong",{className:"text-[#212529]",children:"Automatic Backups:"})," Supabase automatically handles daily backups and point-in-time recovery. No manual intervention is needed for standard backup operations."]}),n.jsxs("p",{children:[n.jsx("strong",{className:"text-[#212529]",children:"Manual Exports:"})," Use the export buttons above to download JSON snapshots of individual tables or the entire database for local backups or data analysis."]}),n.jsxs("p",{children:[n.jsx("strong",{className:"text-[#212529]",children:"Restore:"})," To restore from a backup, contact Supabase support or use the Supabase Dashboard to access point-in-time recovery options."]})]})]})]})}const Bn={name:"Megha Sharma",title:"Head of Operations",email:"megha@fanmeet.com",phone:"+91 98765 43210",role:"Super Admin",lastLogin:"Jan 12, 2025  10:15 AM IST",timezone:"Asia/Kolkata"},b4=[{team:"Support Desk",scope:"Tickets, Reports",status:"Active",expires:"Feb 01, 2025"},{team:"Finance Ops",scope:"Withdrawals, Refunds",status:"Active",expires:"Mar 15, 2025"}],j4=["Jan 12  Approved withdrawal batch WR-BATCH-24","Jan 12  Updated pricing tier 100 Base","Jan 11  Resolved dispute DSP-311","Jan 10  Published announcement ANN-210"];function N4(){return n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#1B1C1F]",children:"My Profile"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Manage your contact info, access, and delegated permissions."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",children:"Download Activity Log"}),n.jsx(T,{children:"Update Security"})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Personal Information",subtitle:"Visible to other admins."}),n.jsxs(B,{className:"grid gap-4 md:grid-cols-2",children:[n.jsx(te,{label:"Full Name",defaultValue:Bn.name}),n.jsx(te,{label:"Title",defaultValue:Bn.title}),n.jsx(te,{label:"Email",defaultValue:Bn.email}),n.jsx(te,{label:"Phone",defaultValue:Bn.phone}),n.jsx(te,{label:"Timezone",defaultValue:Bn.timezone}),n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-[#F8F9FA] p-5",children:[n.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Role"}),n.jsx(Q,{variant:"primary",className:"mt-3 w-fit",children:Bn.role}),n.jsxs("p",{className:"mt-3 text-xs text-[#6C757D]",children:["Last login: ",Bn.lastLogin]})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(Re,{label:"Out of Office Message",rows:3,placeholder:"Optional note for delegating responsibilities."})})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Delegated Access",subtitle:"Teams that can act on your behalf."}),n.jsx(B,{className:"grid gap-4 md:grid-cols-2",children:b4.map(e=>n.jsxs("div",{className:"rounded-[16px] border border-[#E9ECEF] bg-white p-5 text-sm text-[#212529]",children:[n.jsx("p",{className:"text-lg font-semibold",children:e.team}),n.jsxs("p",{className:"mt-2 text-[#6C757D]",children:["Scope: ",e.scope]}),n.jsxs("p",{className:"text-xs text-[#ADB5BD]",children:["Expires: ",e.expires]}),n.jsx(Q,{variant:"success",className:"mt-3 w-fit",children:e.status}),n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsx(T,{size:"sm",variant:"secondary",children:"Modify"}),n.jsx(T,{size:"sm",variant:"ghost",children:"Revoke"})]})]},e.team))})]}),n.jsxs(I,{children:[n.jsx($,{title:"Recent Activity",subtitle:"Latest actions performed under this account."}),n.jsx(B,{children:n.jsx("ul",{className:"space-y-2 text-sm text-[#212529]",children:j4.map(e=>n.jsxs("li",{className:"flex items-center gap-2 rounded-[12px] bg-[#F8F9FA] px-4 py-3",children:[n.jsx("span",{className:"text-[#C045FF]",children:""}),n.jsx("span",{children:e})]},e))})})]}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsx(T,{variant:"secondary",children:"Save Changes"}),n.jsx(T,{variant:"ghost",children:"Cancel"}),n.jsx(T,{variant:"danger",children:"Deactivate Account"})]})]})}function C4(){const[e,t]=y.useState([]),[s,r]=y.useState(new Map),[a,i]=y.useState(!0),o=async()=>{i(!0);const{data:d,error:u}=await D.from("meets").select("*").order("created_at",{ascending:!1});if(u)console.error("Error fetching meets:",u);else{t(d||[]);const h=[...new Set((d==null?void 0:d.map(b=>b.creator_id))||[])],f=[...new Set((d==null?void 0:d.map(b=>b.fan_id))||[])],v=[...new Set([...h,...f])];if(v.length>0){const{data:b}=await D.from("profiles").select("*").in("user_id",v),g=new Map((b==null?void 0:b.map(w=>[w.user_id,w]))||[]);r(g)}}i(!1)};y.useEffect(()=>{o()},[]);const l=async d=>{const{error:u}=await D.from("meets").update({meeting_link:"https://meet.google.com/abc-defg-hij"}).eq("id",d);u?(console.error("Error updating meeting link:",u),alert("Failed to update meeting link")):(alert("Meeting link updated successfully!"),o())},c=async(d,u)=>{const{error:h}=await D.from("meets").update({status:u}).eq("id",d);h?(console.error("Error updating status:",h),alert("Failed to update status")):(alert("Status updated successfully!"),o())};return a?n.jsx("div",{className:"p-8 text-center",children:"Loading..."}):n.jsxs("div",{className:"flex flex-col gap-8 p-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold text-[#212529]",children:"Admin: Meets Debug"}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"View and manage all meetings in the database"})]}),n.jsxs(I,{children:[n.jsx($,{title:`All Meets (${e.length})`}),n.jsx(B,{className:"gap-4",children:e.length===0?n.jsx("p",{className:"text-sm text-[#6C757D]",children:"No meets found in database"}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"border-b border-[#E9ECEF]",children:n.jsxs("tr",{className:"text-left",children:[n.jsx("th",{className:"pb-2",children:"ID"}),n.jsx("th",{className:"pb-2",children:"Creator"}),n.jsx("th",{className:"pb-2",children:"Fan"}),n.jsx("th",{className:"pb-2",children:"Scheduled"}),n.jsx("th",{className:"pb-2",children:"Duration"}),n.jsx("th",{className:"pb-2",children:"Status"}),n.jsx("th",{className:"pb-2",children:"Meeting Link"}),n.jsx("th",{className:"pb-2",children:"Actions"})]})}),n.jsx("tbody",{children:e.map(d=>{const u=s.get(d.creator_id),h=s.get(d.fan_id);return n.jsxs("tr",{className:"border-b border-[#E9ECEF]",children:[n.jsxs("td",{className:"py-3 text-xs",children:[d.id.substring(0,8),"..."]}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"text-xs",children:[n.jsx("div",{children:(u==null?void 0:u.display_name)||"Unknown"}),n.jsxs("div",{className:"text-[#6C757D]",children:["@",(u==null?void 0:u.username)||"unknown"]})]})}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"text-xs",children:[n.jsx("div",{children:(h==null?void 0:h.display_name)||"Unknown"}),n.jsxs("div",{className:"text-[#6C757D]",children:["@",(h==null?void 0:h.username)||"unknown"]})]})}),n.jsx("td",{className:"py-3 text-xs",children:de(d.scheduled_at)}),n.jsxs("td",{className:"py-3 text-xs",children:[d.duration_minutes," min"]}),n.jsx("td",{className:"py-3",children:n.jsxs("select",{value:d.status,onChange:f=>c(d.id,f.target.value),className:"text-xs rounded border border-[#E9ECEF] px-2 py-1",children:[n.jsx("option",{value:"scheduled",children:"scheduled"}),n.jsx("option",{value:"completed",children:"completed"}),n.jsx("option",{value:"cancelled",children:"cancelled"}),n.jsx("option",{value:"no_show",children:"no_show"})]})}),n.jsx("td",{className:"py-3",children:n.jsx("div",{className:"text-xs break-all max-w-xs",children:d.meeting_link||n.jsx("span",{className:"text-red-500",children:"No link"})})}),n.jsx("td",{className:"py-3",children:!d.meeting_link&&n.jsx(T,{size:"sm",onClick:()=>l(d.id),children:"Add Link"})})]},d.id)})})]})})})]}),n.jsx(T,{onClick:o,children:"Refresh Data"})]})}function _4(){const{username:e}=Yy(),t=nt(),{getEventsForCreator:s}=An(),{getProfile:r,followCreator:a,unfollowCreator:i,following:o}=Lf(),{isAuthenticated:l,user:c}=ve(),[d,u]=y.useState(!1),h=(e??"").replace(/^@/,"").toLowerCase();y.useEffect(()=>{h&&u(o.includes(h))},[h,o]);const f=h?s(h):[],v=!f.length&&h?Array.from({length:5}).map((_,S)=>{const F=h.split(/[-_]/).filter(Boolean).map(P=>P.charAt(0).toUpperCase()+P.slice(1)).join(" ")||"Creator",A=100+S*25,M=S%2===0?A+120:0,L=S%2===0?5+S*2:0;return{id:`synthetic-${h}-${S}`,creatorUsername:h,creatorDisplayName:F,title:S===0?"Meet & Greet  1:1 Fan Session":S===1?"Premium AMA  Ask Me Anything":S===2?"Deep Dive  Strategy Session":S===3?"Behind the Scenes Chat":"Quick Catch-up Call",description:"A quick 1:1 session to say hi, ask a couple of questions, and take a virtual selfie together.",status:S===0?"LIVE":"Upcoming",date:S===0?"Today  8:00 PM IST":"This week  8:00 PM IST",duration:S%2===0?"10 minutes":"5 minutes",basePrice:A,currentBid:M,participants:L,endsIn:S===0?"00:35:12 left":"Starts soon"}}):void 0,b=f.length>0?f:v??[],g=b[0],w=h?r(h):void 0,p=(w==null?void 0:w.displayName)||(g==null?void 0:g.creatorDisplayName)||"Creator",m=`@${h||"creator"}`,x=(w==null?void 0:w.bio)||(g==null?void 0:g.description)||"Host of intimate FanMeet sessions. Expect honest stories, practical advice, and space for your questions.",N=_=>{const S=`${window.location.origin}/events/${_}`;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(S).then(()=>{window.alert("Event link copied. Share it with your fans to start receiving bids.")},()=>{window.prompt("Share this event link with your fans:",S)}):window.prompt("Share this event link with your fans:",S)},j=!!g,C=()=>{if(!h)return;const _=`${window.location.origin}/${h}`;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(_).then(()=>{window.alert("Profile link copied. Share it with your fans.")},()=>{window.prompt("Share this profile link with your fans:",_)}):window.prompt("Share this profile link with your fans:",_)},E=async()=>{if(!l){window.confirm(`Please log in to follow creators.

Click OK to go to login page.`)&&t(`/auth?redirect=/${h}`);return}if((c==null?void 0:c.role)!=="fan"){window.alert(`Only fans can follow creators.

Please log in with a fan account.`);return}try{d?(await i(h),u(!1),window.alert(`Unfollowed ${(w==null?void 0:w.displayName)||h} successfully!`)):(await a(h),u(!0),window.alert(`Now following ${(w==null?void 0:w.displayName)||h}! 

You'll see their events in your feed.`))}catch(_){console.error("Error toggling follow:",_),window.alert("Something went wrong. Please try again.")}};return n.jsxs("div",{className:"flex min-h-[calc(100vh-70px)] flex-col bg-white md:bg-gradient-to-b md:from-[#FDEBFF] md:via-[#FFF] md:to-[#F0F2F5]",children:[n.jsxs("div",{className:"relative md:mx-auto md:w-full md:max-w-5xl",children:[n.jsx("div",{className:"h-40 w-full bg-gradient-to-br from-[#FFE5D9] via-white to-[#F4E6FF] md:h-48 md:rounded-b-lg"}),n.jsxs("div",{className:"absolute inset-x-0 top-0 flex items-center justify-between bg-gradient-to-b from-black/40 to-transparent px-4 py-3 text-xs font-medium text-white md:rounded-t-lg",children:[n.jsx("button",{type:"button",className:"rounded-full bg-black/30 px-3 py-1",onClick:()=>t(-1),children:" Back"}),n.jsxs("div",{className:"flex items-center gap-3 text-[11px]",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[" ",n.jsx("span",{children:"48K"})]}),n.jsxs("span",{className:"flex items-center gap-1",children:[" ",n.jsx("span",{children:"120"})]})]})]}),n.jsx("div",{className:"absolute -bottom-9 left-4 flex items-end gap-3",children:n.jsx("div",{className:"h-20 w-20 overflow-hidden rounded-full border-4 border-white bg-[#050014]",children:n.jsx("img",{src:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=400&q=80",alt:p,className:"h-full w-full object-cover"})})})]}),n.jsx("div",{className:"px-4 pt-12 pb-3 md:mx-auto md:w-full md:max-w-5xl md:bg-white md:shadow-sm",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("h1",{className:"text-lg font-semibold text-[#212529]",children:p}),n.jsxs("span",{className:"text-xs text-[#6C757D]",children:[m,"  Seen 9 minutes ago"]}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:x}),j?n.jsxs("span",{className:"mt-1 text-[11px] font-medium uppercase tracking-wide text-[#C045FF]",children:[b.length," active events"]}):null]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(T,{variant:"secondary",size:"sm",className:"rounded-full px-3 py-1 text-xs",onClick:C,children:"Share profile"}),n.jsx(T,{size:"sm",className:"rounded-full px-3 py-1 text-xs",variant:d?"primary":"secondary",onClick:E,children:d?" Following":"Follow"})]})]})}),n.jsx("div",{className:"flex-1 px-4 py-4 md:mx-auto md:w-full md:max-w-5xl md:bg-[#F6EBFF]/70 md:rounded-b-xl",children:n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-[#6C757D]",children:"Upcoming events"}),b.map(_=>n.jsx(I,{elevated:!0,className:"border-none",children:n.jsxs(B,{className:"gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-[11px] text-[#6C757D]",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[_.status==="Accepting Bids"?n.jsx("div",{className:"rounded-[8px] bg-[#1E4620] px-2 py-1",children:n.jsx("span",{className:"text-xs font-semibold text-[#4ADE80]",children:" Accepting Bids"})}):n.jsx(Q,{variant:_.status==="LIVE"?"danger":"primary",children:_.status==="LIVE"?" LIVE":_.status}),n.jsx("span",{children:_.date}),n.jsxs("span",{children:[" ",_.duration]})]}),n.jsx("button",{type:"button",className:"rounded-full bg-[#F8F9FA] px-3 py-1 font-medium text-[#C045FF]",onClick:()=>N(_.id),children:"Share"})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#212529]",children:_.title}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:_.description})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-[11px] text-[#6C757D]",children:[n.jsxs("span",{children:["Base ",V(_.basePrice)]}),n.jsxs("span",{children:["Highest bid"," ",_.currentBid?V(_.currentBid):"No bids yet"]}),n.jsxs("span",{children:[" ",_.participants," participants"]})]}),n.jsx("div",{className:"mt-2 flex gap-2",children:n.jsx(T,{size:"sm",className:"flex-1 rounded-full",onClick:()=>t(`/events/${_.id}`),children:"View & bid"})})]})},_.id)),b.length===0&&n.jsx(I,{children:n.jsx(B,{children:n.jsx("p",{className:"text-sm text-[#6C757D]",children:"This creator has not set up any bidding events yet. Check back soon for upcoming sessions."})})})]})})})]})}const R0="https://iktldcrkyphkvxjwmxyb.supabase.co",E4=()=>new Promise(e=>{if(window.Razorpay){e(!0);return}const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>e(!0),t.onerror=()=>e(!1),document.body.appendChild(t)}),S4=async e=>{const{data:{session:t}}=await D.auth.getSession();if(!t)throw new Error("Please log in to continue.");const s=await fetch(`${R0}/functions/v1/razorpay-create-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify({amount:e.amount})});if(!s.ok){const r=await s.json();throw new Error(r.error||"Failed to create order.")}return await s.json()},F4=async e=>{const{data:{session:t}}=await D.auth.getSession();if(!t)throw new Error("Please log in to continue.");const s=await fetch(`${R0}/functions/v1/razorpay-verify-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify(e)});if(!s.ok){const r=await s.json();throw new Error(r.error||"Payment verification failed.")}return await s.json()},k4=e=>{const t={key:e.keyId,amount:e.amount*100,currency:"INR",name:"FanMeet",description:e.description||"Payment",order_id:e.orderId,handler:e.onSuccess,prefill:{email:e.userEmail||""},theme:{color:"#C045FF"},modal:{ondismiss:e.onDismiss||(()=>{})}};new window.Razorpay(t).open()};function D4(){const{eventId:e}=Yy(),t=nt(),{isAuthenticated:s,user:r}=ve(),{events:a,placeBid:i,isLoading:o,getBidHistory:l,bidHistory:c,getUserCurrentBidForEvent:d}=An(),{getProfile:u}=Lf();let h=a.find(S=>S.id===e);if(!h&&e&&e.startsWith("synthetic-")){const S=e.replace(/^synthetic-/,""),F=S.lastIndexOf("-");if(F>0){const A=S.slice(0,F),M=S.slice(F+1),L=Number(M);if(A&&Number.isFinite(L)){const P=A.split(/[-_]/).filter(Boolean).map(k=>k.charAt(0).toUpperCase()+k.slice(1)).join(" ")||"Creator",q=100+L*25,Z=L%2===0?q+120:0,H=L%2===0?5+L*2:0;h={id:e,creatorUsername:A,creatorDisplayName:P,title:L===0?"Meet & Greet  1:1 Fan Session":L===1?"Premium AMA  Ask Me Anything":L===2?"Deep Dive  Strategy Session":L===3?"Behind the Scenes Chat":"Quick Catch-up Call",description:"A quick 1:1 session to say hi, ask a couple of questions, and take a virtual selfie together.",status:L===0?"LIVE":"Upcoming",date:L===0?"Today  8:00 PM IST":"This week  8:00 PM IST",duration:L%2===0?"10 minutes":"5 minutes",basePrice:q,currentBid:Z,participants:H,endsIn:L===0?"00:35:12 left":"Starts soon"}}}}const[f,v]=y.useState(""),[b,g]=y.useState(!1),[w,p]=y.useState(!1),m=h?u(h.creatorUsername):void 0,x=h?d(h.id):0,N=Number(f)||0,j=x+N;if(y.useEffect(()=>{h!=null&&h.id&&!h.id.startsWith("synthetic-")&&l(h.id)},[h==null?void 0:h.id]),o)return n.jsx("div",{className:"mx-auto flex max-w-3xl flex-col gap-4 px-4 py-8",children:n.jsx(I,{elevated:!0,children:n.jsxs(B,{className:"gap-4 p-8 text-center",children:[n.jsx("div",{className:"text-lg font-semibold text-[#212529]",children:"Loading event..."}),n.jsx("p",{className:"text-sm text-[#6C757D]",children:"Please wait while we fetch the event details."})]})})});if(!h)return n.jsx("div",{className:"mx-auto flex max-w-3xl flex-col gap-4 px-4 py-8",children:n.jsxs(I,{elevated:!0,children:[n.jsx($,{title:"Event not found",subtitle:"This event may have expired or been removed."}),n.jsxs(B,{className:"gap-4",children:[n.jsx("p",{className:"text-sm text-[#6C757D]",children:"If you followed an older link, ask the creator for their latest event or visit their profile for current sessions."}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsx(T,{variant:"secondary",onClick:()=>t(-1),children:"Go back"}),n.jsx(T,{onClick:()=>t("/"),children:"Go to homepage"})]})]})]})});const C=()=>{const S=`${window.location.origin}/events/${h.id}`;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(S).then(()=>{window.alert("Event link copied. Share it with your fans to start receiving bids.")},()=>{window.prompt("Share this event link with your fans:",S)}):window.prompt("Share this event link with your fans:",S)},E=async()=>{const S=x>0?j:Number(f);if(!S||Number.isNaN(S)){window.alert("Enter a valid bid amount to continue.");return}if(S<=h.currentBid){window.alert(`Your bid must be higher than the current bid of ${V(h.currentBid)}.`);return}if(!s||(r==null?void 0:r.role)!=="fan"){g(!0);return}p(!0);try{const{data:F}=await D.from("wallets").select("balance").eq("user_id",r.id).single(),A=(F==null?void 0:F.balance)||0;if(A>=S)await i(h.id,S),window.alert(` Bid of ${V(S)} placed from your wallet!

You'll be notified if someone outbids you.`),v(""),p(!1);else{const M=S-A;await _(M,S,A)}}catch(F){console.error("Bid error:",F),window.alert("Failed to place bid. Please try again."),p(!1)}},_=async(S,F,A)=>{try{if(!await E4())throw new Error("Failed to load payment gateway");const{orderId:L,keyId:P}=await S4({amount:S,userId:r.id,userEmail:r.email}),q=A>0?`Pay ${V(S)} (Wallet: ${V(A)}) for ${V(F)} bid`:`Bid of ${V(F)} for ${h.title}`;k4({amount:S,orderId:L,keyId:P,userEmail:r.email,description:q,onSuccess:async Z=>{try{await F4(Z),await i(h.id,F),window.alert(` Payment successful! Bid of ${V(F)} placed!

You'll be notified if someone outbids you.`),v("")}catch(H){console.error("Error after payment:",H),window.alert("Payment received but bid placement failed. Please contact support.")}finally{p(!1)}},onDismiss:()=>{p(!1)}})}catch(M){console.error("Payment error:",M),window.alert("Failed to initiate payment. Please try again."),p(!1)}};return n.jsxs("div",{className:"mx-auto flex min-h-[calc(100vh-70px)] max-w-3xl flex-col bg-white pb-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"h-40 w-full bg-gradient-to-br from-[#FFE5D9] via-white to-[#F4E6FF] md:h-48"}),n.jsxs("div",{className:"absolute inset-x-0 top-0 flex items-center justify-between bg-gradient-to-b from-black/40 to-transparent px-4 py-3 text-xs font-medium text-white",children:[n.jsx("button",{type:"button",className:"rounded-full bg-black/30 px-3 py-1",onClick:()=>t(-1),children:" Back"}),n.jsxs("div",{className:"flex flex-col items-end gap-1 text-right",children:[n.jsx("span",{className:"text-[11px] uppercase tracking-wide text-white/80",children:"Bidding event"}),n.jsx("span",{className:"text-sm font-semibold",children:h.title})]})]})]}),n.jsxs("div",{className:"flex flex-1 flex-col gap-4 px-4 pt-4",children:[n.jsx(I,{elevated:!0,className:"border-none",children:n.jsxs(B,{className:"gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>t(`/${h.creatorUsername}`),children:[n.jsx("div",{className:"relative flex-shrink-0",children:m!=null&&m.profilePhotoUrl?n.jsx("img",{src:m.profilePhotoUrl,alt:h.creatorDisplayName,className:"h-16 w-16 rounded-full object-cover ring-2 ring-[#C045FF]/20 group-hover:ring-[#C045FF]/40 transition-all"}):n.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-[#C045FF] to-[#7B2CBF] flex items-center justify-center text-white font-bold text-xl ring-2 ring-[#C045FF]/20 group-hover:ring-[#C045FF]/40 transition-all",children:h.creatorDisplayName.charAt(0).toUpperCase()})}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-[#6C757D]",children:"Hosted by"}),n.jsx("span",{className:"text-sm font-semibold text-[#212529] group-hover:text-[#C045FF] transition-colors",children:h.creatorDisplayName}),n.jsxs("span",{className:"text-xs text-[#C045FF] underline decoration-dotted group-hover:decoration-solid transition-all",children:["@",h.creatorUsername]}),n.jsx("span",{className:"text-[10px] text-[#6C757D] mt-0.5 group-hover:text-[#C045FF] transition-colors",children:" Click to view profile"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 text-[11px] text-[#6C757D]",children:[n.jsxs("span",{className:"rounded-full bg-[#F8F9FA] px-3 py-1",children:[" ",h.participants," participants"]}),n.jsxs("span",{className:"rounded-full bg-[#F8F9FA] px-3 py-1",children:[" ",h.duration]})]})]}),n.jsxs("div",{className:"grid gap-3 text-xs text-[#6C757D] md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-[12px] bg-[#F8F9FA] p-3",children:[n.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide",children:"Schedule"}),n.jsx("div",{className:"mt-1 text-sm text-[#212529]",children:h.date})]}),n.jsxs("div",{className:"rounded-[12px] bg-[#F8F9FA] p-3",children:[n.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide",children:"Status"}),n.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm text-[#212529]",children:[h.status==="Accepting Bids"?n.jsx("div",{className:"rounded-[8px] bg-[#1E4620] px-3 py-1.5",children:n.jsx("span",{className:"text-sm font-semibold text-[#4ADE80]",children:" Accepting Bids"})}):n.jsx(Q,{variant:h.status==="LIVE"?"danger":"primary",children:h.status==="LIVE"?" LIVE":h.status}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:h.endsIn})]})]})]})]})}),h.description?n.jsxs(I,{children:[n.jsx($,{title:"About this event"}),n.jsxs(B,{className:"gap-3",children:[n.jsx("p",{className:"text-sm text-[#495057]",children:h.description}),n.jsx("p",{className:"text-xs text-[#6C757D]",children:"This is a demo environment. In a real product, this section would outline the exact flow of the experience, how long the interaction lasts, and any preparation required before joining."})]})]}):null,c.length>0&&n.jsxs(I,{children:[n.jsx($,{title:"Recent Bids",subtitle:"Live bidding activity"}),n.jsx(B,{className:"gap-3",children:c.map(S=>n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-[12px] ${S.isCurrentLeader?"bg-[#C045FF]/10 border border-[#C045FF]/30":"bg-[#F8F9FA]"}`,children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("span",{className:"text-sm font-semibold text-[#212529]",children:["@",S.fanUsername]}),n.jsx("span",{className:"text-xs text-[#6C757D]",children:new Date(S.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsx("span",{className:"text-lg font-semibold text-[#C045FF]",children:V(S.amount)}),S.isCurrentLeader&&n.jsx("span",{className:"text-[10px] font-semibold text-[#C045FF] bg-white px-2 py-0.5 rounded-full",children:" Leading"})]})]},S.id))})]}),n.jsxs(I,{children:[n.jsx($,{title:"What you'll get"}),n.jsxs(B,{className:"gap-3 text-sm text-[#495057]",children:[n.jsxs("ul",{className:"space-y-1 text-xs text-[#495057]",children:[n.jsx("li",{children:" A 1:1 micro-meet with the creator with room for your questions."}),n.jsx("li",{children:" Optional screenshot / selfie moment at the end of the call."}),n.jsx("li",{children:" Priority chat placement during the live session."})]}),n.jsx("p",{className:"text-[11px] text-[#6C757D]",children:"Exact perks are for demo only and can be customised per creator event."})]})]}),n.jsxs(I,{children:[n.jsx($,{title:"Small print"}),n.jsxs(B,{className:"gap-2 text-[11px] text-[#6C757D]",children:[n.jsx("p",{children:"Bids placed in this sandbox are not real payments. In production, only the top bidders would be charged after the auction window ends."}),n.jsx("p",{children:"By placing a bid you agree to follow community guidelines and respect the creator's time and boundaries."})]})]}),n.jsx(I,{elevated:!0,className:"sticky bottom-0 border-none shadow-[0_-8px_24px_rgba(15,23,42,0.12)] md:static md:shadow-none",children:n.jsxs(B,{className:"gap-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-[#6C757D]",children:"Current highest bid"}),n.jsx("span",{className:"text-xl font-semibold text-[#C045FF]",children:h.currentBid?V(h.currentBid):V(h.basePrice)}),n.jsxs("span",{className:"text-[11px] text-[#6C757D]",children:["Base price ",V(h.basePrice),"  ",h.participants," participants"]})]}),n.jsx(T,{variant:"secondary",size:"sm",className:"rounded-full text-xs",onClick:C,children:"Share event link"})]}),n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(te,{type:"number",label:x>0?"Add to your bid":"Your bid amount",placeholder:String(h.basePrice),value:f,onChange:S=>v(S.target.value)}),N>0&&n.jsx("div",{className:"mt-2 text-sm",children:x>0?n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("span",{className:"text-[#6C757D]",children:["Your current bid: ",n.jsx("strong",{className:"text-[#212529]",children:V(x)})]}),n.jsxs("span",{className:"text-[#C045FF] font-semibold",children:["Adding ",V(N),"  New total: ",V(j)]})]}):n.jsxs("span",{className:"text-[#C045FF] font-semibold",children:["Your bid: ",V(N)]})})]}),n.jsx(T,{className:"md:w-40",onClick:E,disabled:w,children:w?"Processing...":"Place Bid "})]})]})})]}),b&&n.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4",children:n.jsxs("div",{className:"max-w-sm flex-1 rounded-2xl bg-white p-6 shadow-2xl",children:[n.jsx("h2",{className:"text-lg font-semibold text-[#212529]",children:"Login to place your bid"}),n.jsx("p",{className:"mt-2 text-sm text-[#6C757D]",children:"You'll need a fan account to place bids and join this meet. We'll take you to the login page and bring you back here after you're done."}),n.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[n.jsx(T,{onClick:()=>t(`/auth?redirect=/events/${h.id}`),className:"w-full",children:"Continue to login / signup"}),n.jsx(T,{variant:"secondary",className:"w-full",onClick:()=>g(!1),children:"Cancel"})]})]})})]})}const bd=({allowedRoles:e,children:t})=>{const{isAuthenticated:s,user:r,isLoading:a}=ve(),i=Vs();if(a)return null;if(!s||!r){const o=encodeURIComponent(i.pathname+i.search);return n.jsx(Rr,{to:`/auth?redirect=${o}`,replace:!0})}if(e&&!e.includes(r.role)){const o={fan:"/fan",creator:"/creator",admin:"/admin"};return n.jsx(Rr,{to:o[r.role],replace:!0})}return n.jsx(n.Fragment,{children:t})},A4=()=>n.jsx("div",{className:"flex h-full w-full items-center justify-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-3 text-[#6C757D]",children:[n.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-[#FFE5D9] border-l-[#FF6B35]"}),n.jsx("span",{children:"Loading"})]})});function T4(){return n.jsx(y.Suspense,{fallback:n.jsx(A4,{}),children:n.jsx(YE,{children:n.jsx(nT,{children:n.jsx(PT,{children:n.jsx(GE,{children:n.jsxs(_1,{children:[n.jsxs(ne,{element:n.jsx(KE,{}),children:[n.jsx(ne,{index:!0,element:n.jsx(KA,{})}),n.jsx(ne,{path:"auth",element:n.jsx(QA,{})}),n.jsx(ne,{path:"fanmeet/admin/superadmin",element:n.jsx(JA,{})}),n.jsx(ne,{path:"browse-events",element:n.jsx(XA,{})}),n.jsx(ne,{path:"how-it-works",element:n.jsx(ZA,{})}),n.jsx(ne,{path:"for-creators",element:n.jsx(tT,{})}),n.jsx(ne,{path:"events/:eventId",element:n.jsx(D4,{})}),n.jsx(ne,{path:":username",element:n.jsx(_4,{})})]}),n.jsxs(ne,{path:"fan",element:n.jsx(bd,{allowedRoles:["fan"],children:n.jsx(sd,{role:"fan"})}),children:[n.jsx(ne,{index:!0,element:n.jsx(iT,{})}),n.jsx(ne,{path:"bids",element:n.jsx(oT,{})}),n.jsx(ne,{path:"meets",element:n.jsx(cT,{})}),n.jsx(ne,{path:"wallet",element:n.jsx(hT,{})}),n.jsx(ne,{path:"following",element:n.jsx(fT,{})}),n.jsx(ne,{path:"history",element:n.jsx(pT,{})}),n.jsx(ne,{path:"messages",element:n.jsx(wT,{})}),n.jsx(ne,{path:"notifications",element:n.jsx(xT,{})}),n.jsx(ne,{path:"settings",element:n.jsx(gT,{})}),n.jsx(ne,{path:"support",element:n.jsx(jT,{})}),n.jsx(ne,{path:"*",element:n.jsx(Rr,{to:".",replace:!0})})]}),n.jsxs(ne,{path:"creator",element:n.jsx(bd,{allowedRoles:["creator"],children:n.jsx(sd,{role:"creator"})}),children:[n.jsx(ne,{index:!0,element:n.jsx(ST,{})}),n.jsx(ne,{path:"events",element:n.jsx(FT,{})}),n.jsx(ne,{path:"events/new",element:n.jsx(AT,{})}),n.jsx(ne,{path:"profile-setup",element:n.jsx(MT,{})}),n.jsx(ne,{path:"earnings",element:n.jsx(IT,{})}),n.jsx(ne,{path:"withdrawals",element:n.jsx(zT,{})}),n.jsx(ne,{path:"meets",element:n.jsx(qT,{})}),n.jsx(ne,{path:"followers",element:n.jsx(HT,{})}),n.jsx(ne,{path:"messages",element:n.jsx(SP,{})}),n.jsx(ne,{path:"notifications",element:n.jsx(YT,{})}),n.jsx(ne,{path:"settings",element:n.jsx(JT,{})}),n.jsx(ne,{path:"support",element:n.jsx(kP,{})}),n.jsx(ne,{path:"*",element:n.jsx(Rr,{to:".",replace:!0})})]}),n.jsxs(ne,{path:"admin",element:n.jsx(bd,{allowedRoles:["admin"],children:n.jsx(sd,{role:"admin"})}),children:[n.jsx(ne,{index:!0,element:n.jsx(DP,{})}),n.jsx(ne,{path:"users",element:n.jsx(PP,{})}),n.jsx(ne,{path:"creators",element:n.jsx(RP,{})}),n.jsx(ne,{path:"fans",element:n.jsx(IP,{})}),n.jsx(ne,{path:"events",element:n.jsx(BP,{})}),n.jsx(ne,{path:"featured",element:n.jsx($P,{})}),n.jsx(ne,{path:"announcements",element:n.jsx(zP,{})}),n.jsx(ne,{path:"payments",element:n.jsx(WP,{})}),n.jsx(ne,{path:"withdrawals",element:n.jsx(qP,{})}),n.jsx(ne,{path:"refunds",element:n.jsx(YP,{})}),n.jsx(ne,{path:"revenue-analytics",element:n.jsx(KP,{})}),n.jsx(ne,{path:"platform-commission",element:n.jsx(GP,{})}),n.jsx(ne,{path:"business-analytics",element:n.jsx(QP,{})}),n.jsx(ne,{path:"user-analytics",element:n.jsx(JP,{})}),n.jsx(ne,{path:"revenue-reports",element:n.jsx(XP,{})}),n.jsx(ne,{path:"event-analytics",element:n.jsx(ZP,{})}),n.jsx(ne,{path:"audit-logs",element:n.jsx(t4,{})}),n.jsx(ne,{path:"support-tickets",element:n.jsx(r4,{})}),n.jsx(ne,{path:"reports-flags",element:n.jsx(i4,{})}),n.jsx(ne,{path:"disputes",element:n.jsx(l4,{})}),n.jsx(ne,{path:"settings/general",element:n.jsx(c4,{})}),n.jsx(ne,{path:"settings/pricing",element:n.jsx(d4,{})}),n.jsx(ne,{path:"settings/email-templates",element:n.jsx(h4,{})}),n.jsx(ne,{path:"settings/notifications",element:n.jsx(p4,{})}),n.jsx(ne,{path:"settings/security",element:n.jsx(x4,{})}),n.jsx(ne,{path:"system/logs",element:n.jsx(g4,{})}),n.jsx(ne,{path:"system/bulk-actions",element:n.jsx(y4,{})}),n.jsx(ne,{path:"system/backup",element:n.jsx(w4,{})}),n.jsx(ne,{path:"debug/meets",element:n.jsx(C4,{})}),n.jsx(ne,{path:"profile",element:n.jsx(N4,{})}),n.jsx(ne,{path:"*",element:n.jsx(Rr,{to:".",replace:!0})})]}),n.jsx(ne,{path:"*",element:n.jsx(Rr,{to:"/",replace:!0})})]})})})})})})}const P4=new PC;jd.createRoot(document.getElementById("root")).render(n.jsx(Zu.StrictMode,{children:n.jsx(RC,{client:P4,children:n.jsx(M1,{children:n.jsx(T4,{})})})}));export{yg as g};
